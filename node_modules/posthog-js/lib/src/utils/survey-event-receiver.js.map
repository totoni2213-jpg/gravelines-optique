{"version":3,"file":"survey-event-receiver.js","sourceRoot":"","sources":["../../../src/utils/survey-event-receiver.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA,0CAAgD;AAChD,kEAAkE;AAElE,+CAAwD;AACxD,mDAAgD;AAGhD;IAAyC,uCAAqB;IAC1D,6BAAY,QAAiB;QACzB,OAAA,MAAK,YAAC,QAAQ,CAAC,SAAA;IACnB,CAAC;IAES,8CAAgB,GAA1B;QACI,OAAO,6BAAiB,CAAA;IAC5B,CAAC;IAES,gDAAkB,GAA5B;QACI,OAAO,uCAAe,CAAC,KAAK,CAAA;IAChC,CAAC;IAES,uCAAS,GAAnB,UAAoB,QAAmC;;QACnD,MAAA,IAAI,CAAC,SAAS,0CAAE,UAAU,CAAC,QAAQ,CAAC,CAAA;IACxC,CAAC;IAES,gDAAkB,GAA5B,UAA6B,MAAc;;QACvC,MAAA,IAAI,CAAC,SAAS,0CAAE,mBAAmB,CAAC,MAAM,CAAC,CAAA;IAC/C,CAAC;IAES,wCAAU,GAApB;QACI,OAAO,4BAAM,CAAA;IACjB,CAAC;IAES,0DAA4B,GAAtC;QACI,iEAAiE;QACjE,8CAA8C;QAC9C,OAAO,KAAK,CAAA;IAChB,CAAC;IAED,4EAA4E;IAC5E,wCAAU,GAAV;QACI,OAAO,IAAI,CAAC,eAAe,EAAE,CAAA;IACjC,CAAC;IAED,6DAA6D;IAC7D,+CAAiB,GAAjB;QACI,OAAO,IAAI,CAAC,kBAAkB,EAAE,CAAA;IACpC,CAAC;IACL,0BAAC;AAAD,CAAC,AAxCD,CAAyC,8BAAa,GAwCrD;AAxCY,kDAAmB","sourcesContent":["import { SURVEYS_ACTIVATED } from '../constants'\nimport { Survey, SurveyEventName } from '../posthog-surveys-types'\nimport { PostHog } from '../posthog-core'\nimport { SURVEY_LOGGER as logger } from './survey-utils'\nimport { EventReceiver } from './event-receiver'\nimport { createLogger } from './logger'\n\nexport class SurveyEventReceiver extends EventReceiver<Survey> {\n    constructor(instance: PostHog) {\n        super(instance)\n    }\n\n    protected _getActivatedKey(): string {\n        return SURVEYS_ACTIVATED\n    }\n\n    protected _getShownEventName(): string {\n        return SurveyEventName.SHOWN\n    }\n\n    protected _getItems(callback: (items: Survey[]) => void): void {\n        this._instance?.getSurveys(callback)\n    }\n\n    protected _cancelPendingItem(itemId: string): void {\n        this._instance?.cancelPendingSurvey(itemId)\n    }\n\n    protected _getLogger(): ReturnType<typeof createLogger> {\n        return logger\n    }\n\n    protected _isItemPermanentlyIneligible(): boolean {\n        // Surveys have complex eligibility rules checked at display time\n        // For now, we don't filter at activation time\n        return false\n    }\n\n    // Backward compatibility - keep getSurveys() as alias for getActivatedIds()\n    getSurveys(): string[] {\n        return this.getActivatedIds()\n    }\n\n    // Backward compatibility - keep getEventToSurveys() as alias\n    getEventToSurveys(): Map<string, string[]> {\n        return this.getEventToItemsMap()\n    }\n}\n"]}