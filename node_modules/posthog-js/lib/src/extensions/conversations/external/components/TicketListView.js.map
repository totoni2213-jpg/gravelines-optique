{"version":3,"file":"TicketListView.js","sourceRoot":"","sources":["../../../../../../src/extensions/conversations/external/components/TicketListView.tsx"],"names":[],"mappings":"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","sourcesContent":["// eslint-disable-next-line @typescript-eslint/no-unused-vars\nimport { h, FunctionComponent } from 'preact'\nimport { Ticket } from '../../../../posthog-conversations-types'\nimport { getStyles } from './styles'\nimport { TicketListItem } from './TicketListItem'\n\ninterface TicketListViewProps {\n    tickets: Ticket[]\n    isLoading: boolean\n    styles: ReturnType<typeof getStyles>\n    onSelectTicket: (ticketId: string) => void\n    onNewConversation: () => void\n    onOpenRestoreRequest: () => void\n}\n\n/**\n * Loading state component\n */\nconst LoadingState: FunctionComponent<{ styles: ReturnType<typeof getStyles> }> = ({ styles }) => (\n    <div style={styles.ticketListLoading}>\n        <div style={styles.loadingSpinner} />\n        <span>Loading conversations...</span>\n    </div>\n)\n\n/**\n * Empty state component when there are no tickets\n */\nconst EmptyState: FunctionComponent<{\n    styles: ReturnType<typeof getStyles>\n    onNewConversation: () => void\n    onOpenRestoreRequest: () => void\n}> = ({ styles, onNewConversation, onOpenRestoreRequest }) => (\n    <div style={styles.ticketListEmpty}>\n        <div style={styles.emptyStateIcon}>\n            <svg width=\"48\" height=\"48\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\">\n                <path d=\"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z\" />\n            </svg>\n        </div>\n        <div style={styles.emptyStateTitle}>No conversations yet</div>\n        <div style={styles.emptyStateDescription}>Start a new conversation to get help from our team.</div>\n        <button\n            style={styles.newConversationButtonLarge}\n            onClick={onNewConversation}\n            onMouseEnter={(e) => {\n                e.currentTarget.style.opacity = '0.9'\n            }}\n            onMouseLeave={(e) => {\n                e.currentTarget.style.opacity = '1'\n            }}\n        >\n            Start a conversation\n        </button>\n        <button\n            style={styles.fetchPreviousButton}\n            onClick={onOpenRestoreRequest}\n            onMouseEnter={(e) => {\n                e.currentTarget.style.opacity = '0.8'\n            }}\n            onMouseLeave={(e) => {\n                e.currentTarget.style.opacity = '1'\n            }}\n        >\n            Fetch previous conversations\n        </button>\n    </div>\n)\n\n/**\n * Ticket list view showing all user's tickets\n */\nexport const TicketListView: FunctionComponent<TicketListViewProps> = ({\n    tickets,\n    isLoading,\n    styles,\n    onSelectTicket,\n    onNewConversation,\n    onOpenRestoreRequest,\n}) => {\n    // Show loading state\n    if (isLoading && tickets.length === 0) {\n        return <LoadingState styles={styles} />\n    }\n\n    // Show empty state when no tickets\n    if (tickets.length === 0) {\n        return (\n            <EmptyState\n                styles={styles}\n                onNewConversation={onNewConversation}\n                onOpenRestoreRequest={onOpenRestoreRequest}\n            />\n        )\n    }\n\n    // Show ticket list\n    return (\n        <div style={styles.ticketListContainer}>\n            {/* Ticket list - sorted by most recent activity */}\n            <div style={styles.ticketList}>\n                {[...tickets]\n                    .sort((a, b) => {\n                        const dateA = new Date(a.last_message_at || a.created_at).getTime()\n                        const dateB = new Date(b.last_message_at || b.created_at).getTime()\n                        return dateB - dateA // Descending order (newest first)\n                    })\n                    .map((ticket) => (\n                        <TicketListItem\n                            key={`${ticket.id}-${ticket.last_message_at || ticket.created_at}-${ticket.unread_count}`}\n                            ticket={ticket}\n                            styles={styles}\n                            onClick={onSelectTicket}\n                        />\n                    ))}\n            </div>\n\n            {/* New conversation button at bottom */}\n            <button\n                style={styles.newConversationButton}\n                onClick={onNewConversation}\n                onMouseEnter={(e) => {\n                    e.currentTarget.style.opacity = '0.9'\n                }}\n                onMouseLeave={(e) => {\n                    e.currentTarget.style.opacity = '1'\n                }}\n            >\n                <svg\n                    width=\"16\"\n                    height=\"16\"\n                    viewBox=\"0 0 24 24\"\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    strokeWidth=\"2\"\n                    style={{ marginRight: '8px' }}\n                >\n                    <line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\" />\n                    <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" />\n                </svg>\n                New conversation\n            </button>\n        </div>\n    )\n}\n"]}