{"version":3,"file":"TicketListItem.js","sourceRoot":"","sources":["../../../../../../src/extensions/conversations/external/components/TicketListItem.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;;AAIA,iCAAyE;AAQzE;;;GAGG;AACH,SAAS,cAAc,CAAC,MAAoB;IACxC,IAAI,MAAM,KAAK,SAAS,EAAE,CAAC;QACvB,OAAO,SAAS,CAAA;IACpB,CAAC;IACD,kEAAkE;IAClE,OAAO,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAA;AAC3D,CAAC;AAED;;GAEG;AACI,IAAM,cAAc,GAA2C,UAAC,EAA2B;QAAzB,MAAM,YAAA,EAAE,MAAM,YAAA,EAAE,OAAO,aAAA;IAC5F,IAAM,SAAS,GAAG,CAAC,MAAM,CAAC,YAAY,IAAI,CAAC,CAAC,GAAG,CAAC,CAAA;IAChD,IAAM,WAAW,GAAG,cAAc,CAAC,MAAM,CAAC,MAAM,CAAC,CAAA;IAEjD,IAAM,WAAW,GAAG;QAChB,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC,CAAA;IACtB,CAAC,CAAA;IAED,IAAM,SAAS,yBACR,MAAM,CAAC,UAAU,GACjB,CAAC,SAAS,CAAC,CAAC,CAAC,MAAM,CAAC,gBAAgB,CAAC,CAAC,CAAC,EAAE,CAAC,CAChD,CAAA;IAED,OAAO,CACH,iCACI,KAAK,EAAE,SAAS,EAChB,OAAO,EAAE,WAAW,EACpB,SAAS,EAAE,UAAC,CAAC;YACT,IAAI,CAAC,CAAC,GAAG,KAAK,OAAO,IAAI,CAAC,CAAC,GAAG,KAAK,GAAG,EAAE,CAAC;gBACrC,CAAC,CAAC,cAAc,EAAE,CAAA;gBAClB,WAAW,EAAE,CAAA;YACjB,CAAC;QACL,CAAC,EACD,IAAI,EAAC,QAAQ,EACb,QAAQ,EAAE,CAAC,aAEX,iCAAK,KAAK,EAAE,MAAM,CAAC,iBAAiB,aAChC,iCAAK,KAAK,EAAE,MAAM,CAAC,gBAAgB,aAC/B,iCAAM,KAAK,EAAE,SAAS,CAAC,CAAC,CAAC,MAAM,CAAC,mBAAmB,CAAC,CAAC,CAAC,MAAM,CAAC,aAAa,YACrE,IAAA,oBAAY,EAAC,IAAA,qBAAa,EAAC,MAAM,CAAC,YAAY,CAAC,EAAE,EAAE,CAAC,GAClD,EACN,SAAS,IAAI,iCAAM,KAAK,EAAE,MAAM,CAAC,iBAAiB,YAAG,MAAM,CAAC,YAAY,GAAQ,IAC/E,EACN,iCAAK,KAAK,EAAE,MAAM,CAAC,UAAU,aACzB,iCAAM,KAAK,EAAE,MAAM,CAAC,UAAU,YACzB,IAAA,0BAAkB,EAAC,MAAM,CAAC,eAAe,IAAI,MAAM,CAAC,UAAU,CAAC,GAC7D,EACP,iCAAM,KAAK,EAAE,MAAM,CAAC,YAAY,YAAG,WAAW,GAAQ,IACpD,IACJ,EAEN,gCAAK,KAAK,EAAE,MAAM,CAAC,eAAe,YAC9B,gCAAK,KAAK,EAAC,IAAI,EAAC,MAAM,EAAC,IAAI,EAAC,OAAO,EAAC,WAAW,EAAC,IAAI,EAAC,MAAM,EAAC,MAAM,EAAC,cAAc,EAAC,WAAW,EAAC,GAAG,YAC7F,qCAAU,MAAM,EAAC,gBAAgB,GAAG,GAClC,GACJ,IACJ,CACT,CAAA;AACL,CAAC,CAAA;AAhDY,QAAA,cAAc,kBAgD1B","sourcesContent":["// eslint-disable-next-line @typescript-eslint/no-unused-vars\nimport { h, FunctionComponent } from 'preact'\nimport { Ticket, TicketStatus } from '../../../../posthog-conversations-types'\nimport { getStyles } from './styles'\nimport { formatRelativeTime, truncateText, stripMarkdown } from './utils'\n\ninterface TicketListItemProps {\n    ticket: Ticket\n    styles: ReturnType<typeof getStyles>\n    onClick: (ticketId: string) => void\n}\n\n/**\n * Get a human-readable status label\n * Matches the display logic in PostHog main app\n */\nfunction getStatusLabel(status: TicketStatus): string {\n    if (status === 'on_hold') {\n        return 'On hold'\n    }\n    // Capitalize first letter: 'new' -> 'New', 'open' -> 'Open', etc.\n    return status.charAt(0).toUpperCase() + status.slice(1)\n}\n\n/**\n * A single ticket item in the ticket list\n */\nexport const TicketListItem: FunctionComponent<TicketListItemProps> = ({ ticket, styles, onClick }) => {\n    const hasUnread = (ticket.unread_count || 0) > 0\n    const statusLabel = getStatusLabel(ticket.status)\n\n    const handleClick = () => {\n        onClick(ticket.id)\n    }\n\n    const itemStyle = {\n        ...styles.ticketItem,\n        ...(hasUnread ? styles.ticketItemUnread : {}),\n    }\n\n    return (\n        <div\n            style={itemStyle}\n            onClick={handleClick}\n            onKeyDown={(e) => {\n                if (e.key === 'Enter' || e.key === ' ') {\n                    e.preventDefault()\n                    handleClick()\n                }\n            }}\n            role=\"button\"\n            tabIndex={0}\n        >\n            <div style={styles.ticketItemContent}>\n                <div style={styles.ticketItemHeader}>\n                    <span style={hasUnread ? styles.ticketPreviewUnread : styles.ticketPreview}>\n                        {truncateText(stripMarkdown(ticket.last_message), 60)}\n                    </span>\n                    {hasUnread && <span style={styles.ticketUnreadBadge}>{ticket.unread_count}</span>}\n                </div>\n                <div style={styles.ticketMeta}>\n                    <span style={styles.ticketTime}>\n                        {formatRelativeTime(ticket.last_message_at || ticket.created_at)}\n                    </span>\n                    <span style={styles.ticketStatus}>{statusLabel}</span>\n                </div>\n            </div>\n            {/* Right arrow indicator */}\n            <div style={styles.ticketItemArrow}>\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                    <polyline points=\"9 18 15 12 9 6\" />\n                </svg>\n            </div>\n        </div>\n    )\n}\n"]}