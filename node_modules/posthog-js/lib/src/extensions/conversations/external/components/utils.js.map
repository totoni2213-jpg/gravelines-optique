{"version":3,"file":"utils.js","sourceRoot":"","sources":["../../../../../../src/extensions/conversations/external/components/utils.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Format a timestamp to a relative time string\n */\nexport function formatRelativeTime(isoString: string | undefined): string {\n    if (!isoString) {\n        return ''\n    }\n\n    const date = new Date(isoString)\n    const now = new Date()\n    const diffMs = now.getTime() - date.getTime()\n    const diffMins = Math.floor(diffMs / 60000)\n    const diffHours = Math.floor(diffMins / 60)\n    const diffDays = Math.floor(diffHours / 24)\n\n    if (diffMins < 1) {\n        return 'Just now'\n    } else if (diffMins < 60) {\n        return `${diffMins}m ago`\n    } else if (diffHours < 24) {\n        return `${diffHours}h ago`\n    } else if (diffDays === 1) {\n        return 'Yesterday'\n    } else if (diffDays < 7) {\n        return `${diffDays}d ago`\n    } else {\n        return date.toLocaleDateString()\n    }\n}\n\n/**\n * Truncate text to a maximum length with ellipsis\n */\nexport function truncateText(text: string | undefined, maxLength: number): string {\n    if (!text) {\n        return 'No messages yet'\n    }\n    if (text.length <= maxLength) {\n        return text\n    }\n    return text.substring(0, maxLength - 3) + '...'\n}\n\n/**\n * Strip markdown formatting from text for plain text display\n * Lightweight regex-based approach without external dependencies\n */\nexport function stripMarkdown(text: string | undefined): string {\n    if (!text) {\n        return ''\n    }\n\n    return (\n        text\n            // Remove code blocks first (before other processing)\n            .replace(/```[\\s\\S]*?```/g, '')\n            // Remove inline code\n            .replace(/`([^`]+)`/g, '$1')\n            // Remove images\n            .replace(/!\\[([^\\]]*)\\]\\([^)]+\\)/g, '')\n            // Convert links to just text\n            .replace(/\\[([^\\]]+)\\]\\([^)]+\\)/g, '$1')\n            // Remove headers\n            .replace(/^#{1,6}\\s+/gm, '')\n            // Remove blockquotes\n            .replace(/^>\\s*/gm, '')\n            // Remove horizontal rules (must be before list markers to avoid conflicts)\n            .replace(/^[-*_]{3,}\\s*$/gm, '')\n            // Remove list markers (must be before bold/italic to avoid conflicts with *)\n            .replace(/^[\\s]*[-*+]\\s+/gm, '')\n            .replace(/^[\\s]*\\d+\\.\\s+/gm, '')\n            // Remove bold/italic (order matters: ** before *)\n            .replace(/\\*\\*([^*]+)\\*\\*/g, '$1')\n            .replace(/\\*([^*]+)\\*/g, '$1')\n            .replace(/__([^_]+)__/g, '$1')\n            .replace(/_([^_]+)_/g, '$1')\n            // Remove strikethrough\n            .replace(/~~([^~]+)~~/g, '$1')\n            // Remove HTML tags entirely, then strip any remaining angle brackets for security\n            .replace(/<[^>]*>/g, '')\n            .replace(/[<>]/g, '')\n            // Collapse multiple newlines\n            .replace(/\\n{2,}/g, '\\n')\n            // Trim whitespace\n            .trim()\n    )\n}\n"]}