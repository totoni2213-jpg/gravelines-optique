{"version":3,"file":"ProductTourBanner.js","sourceRoot":"","sources":["../../../../../src/extensions/product-tours/components/ProductTourBanner.tsx"],"names":[],"mappings":"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","sourcesContent":["import { h, ComponentChildren } from 'preact'\nimport { ProductTourDisplayFrequency, ProductTourStep } from '../../../posthog-product-tours-types'\nimport { getStepHtml } from '../product-tours-utils'\nimport { cancelSVG } from '../../surveys/icons'\n\nexport interface ProductTourBannerProps {\n    step: ProductTourStep\n    onDismiss: () => void\n    onActionClick?: () => void\n    displayFrequency?: ProductTourDisplayFrequency\n}\n\ninterface BannerWrapperProps {\n    class: string\n    children: ComponentChildren\n}\n\ninterface LinkWrapperProps extends BannerWrapperProps {\n    href: string\n    onClick?: () => void\n}\n\ninterface ButtonWrapperProps extends BannerWrapperProps {\n    onClick: () => void\n}\n\nfunction LinkWrapper({ class: className, href, onClick, children }: LinkWrapperProps): h.JSX.Element {\n    return (\n        <a class={className} href={href} target=\"_blank\" rel=\"noopener noreferrer\" onClick={onClick}>\n            {children}\n        </a>\n    )\n}\n\nfunction ButtonWrapper({ class: className, onClick, children }: ButtonWrapperProps): h.JSX.Element {\n    return (\n        <div\n            class={className}\n            role=\"button\"\n            tabIndex={0}\n            onClick={onClick}\n            onKeyDown={(e) => {\n                if (e.key === 'Enter' || e.key === ' ') {\n                    e.preventDefault()\n                    onClick()\n                }\n            }}\n            style={{ cursor: 'pointer' }}\n        >\n            {children}\n        </div>\n    )\n}\n\nfunction StaticWrapper({ class: className, children }: BannerWrapperProps): h.JSX.Element {\n    return <div class={className}>{children}</div>\n}\n\nexport function ProductTourBanner(props: ProductTourBannerProps) {\n    return (\n        <div class=\"ph-tour-banner-wrapper\">\n            <div class=\"ph-tour-banner-slide\">\n                <ProductTourBannerInner {...props} />\n            </div>\n        </div>\n    )\n}\n\nfunction ProductTourBannerInner({\n    step,\n    onDismiss,\n    onActionClick,\n    displayFrequency,\n}: ProductTourBannerProps): h.JSX.Element {\n    const config = step.bannerConfig ?? { behavior: 'sticky' }\n    const action = config.action\n\n    // \"always\" display frequency means no dismiss button\n    const showDismissButton = displayFrequency !== 'always'\n\n    const classNames = [\n        'ph-tour-banner',\n        config.behavior === 'sticky' && 'ph-tour-banner--sticky',\n        config.behavior === 'custom' && 'ph-tour-banner--custom',\n    ]\n        .filter(Boolean)\n        .join(' ')\n\n    const content = (\n        <>\n            <div class=\"ph-tour-banner-content\" dangerouslySetInnerHTML={{ __html: getStepHtml(step) }} />\n\n            {showDismissButton && (\n                <button\n                    class=\"ph-tour-banner-dismiss\"\n                    onClick={(e) => {\n                        e.stopPropagation()\n                        e.preventDefault()\n                        onDismiss()\n                    }}\n                    aria-label=\"Close banner\"\n                >\n                    {cancelSVG()}\n                </button>\n            )}\n        </>\n    )\n\n    if (action?.type === 'link' && action.link) {\n        return (\n            <LinkWrapper class={classNames} href={action.link} onClick={onActionClick}>\n                {content}\n            </LinkWrapper>\n        )\n    }\n\n    if (action?.type === 'trigger_tour' && onActionClick) {\n        return (\n            <ButtonWrapper class={classNames} onClick={onActionClick}>\n                {content}\n            </ButtonWrapper>\n        )\n    }\n\n    return <StaticWrapper class={classNames}>{content}</StaticWrapper>\n}\n"]}