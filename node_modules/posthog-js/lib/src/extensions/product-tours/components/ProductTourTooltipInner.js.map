{"version":3,"file":"ProductTourTooltipInner.js","sourceRoot":"","sources":["../../../../../src/extensions/product-tours/components/ProductTourTooltipInner.tsx"],"names":[],"mappings":"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","sourcesContent":["import { h } from 'preact'\nimport { ProductTourStep, ProductTourAppearance, ProductTourStepButton } from '../../../posthog-product-tours-types'\nimport { getStepHtml, hasElementTarget } from '../product-tours-utils'\nimport { IconPosthogLogo, cancelSVG } from '../../surveys/icons'\n\ninterface TourButtonProps {\n    button: ProductTourStepButton\n    variant: 'primary' | 'secondary'\n    onClick: (button: ProductTourStepButton) => void\n    cursorStyle?: h.JSX.CSSProperties\n}\n\nfunction TourButton({ button, variant, onClick, cursorStyle }: TourButtonProps): h.JSX.Element {\n    const className = `ph-tour-button ph-tour-button--${variant}`\n\n    if (button.action === 'link' && button.link) {\n        return (\n            <a\n                href={button.link}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                class={className}\n                onClick={() => onClick(button)} // track interaction & dismiss tour\n            >\n                {button.text}\n            </a>\n        )\n    }\n\n    return (\n        <button class={className} onClick={() => onClick(button)} style={cursorStyle}>\n            {button.text}\n        </button>\n    )\n}\n\nexport interface ProductTourTooltipInnerProps {\n    step: ProductTourStep\n    appearance?: ProductTourAppearance\n    stepIndex: number\n    totalSteps: number\n    onNext?: () => void\n    onPrevious?: () => void\n    onDismiss?: () => void\n    onButtonClick?: (button: ProductTourStepButton) => void\n}\n\nexport function ProductTourTooltipInner({\n    step,\n    appearance,\n    stepIndex,\n    totalSteps,\n    onNext,\n    onPrevious,\n    onDismiss,\n    onButtonClick,\n}: ProductTourTooltipInnerProps): h.JSX.Element {\n    const whiteLabel = appearance?.whiteLabel ?? false\n    const isLastStep = stepIndex >= totalSteps - 1\n    const isFirstStep = stepIndex === 0\n    const showDefaultButtons = !step.buttons && (step.progressionTrigger === 'button' || !hasElementTarget(step))\n    const hasCustomButtons = !!step.buttons\n\n    const isInteractive = !!(onNext || onPrevious || onDismiss || onButtonClick)\n    const cursorStyle = isInteractive ? undefined : { cursor: 'default' }\n\n    const showPostHogBranding = !whiteLabel && isFirstStep\n\n    const handleButtonClick = (button: ProductTourStepButton) => {\n        if (onButtonClick) {\n            onButtonClick(button)\n        }\n    }\n\n    return (\n        <>\n            <button class=\"ph-tour-dismiss\" onClick={onDismiss} aria-label=\"Close tour\" style={cursorStyle}>\n                {cancelSVG()}\n            </button>\n\n            <div class=\"ph-tour-content\" dangerouslySetInnerHTML={{ __html: getStepHtml(step) }} />\n\n            <div class=\"ph-tour-footer\">\n                {totalSteps > 1 && (\n                    <span class=\"ph-tour-progress\">\n                        {stepIndex + 1} of {totalSteps}\n                    </span>\n                )}\n\n                <div class=\"ph-tour-buttons\">\n                    {/* Default buttons for tours without custom buttons */}\n                    {showDefaultButtons && (\n                        <>\n                            {!isFirstStep && (\n                                <button\n                                    class=\"ph-tour-button ph-tour-button--secondary\"\n                                    onClick={onPrevious}\n                                    style={cursorStyle}\n                                >\n                                    Back\n                                </button>\n                            )}\n                            <button class=\"ph-tour-button ph-tour-button--primary\" onClick={onNext} style={cursorStyle}>\n                                {isLastStep ? 'Done' : 'Next'}\n                            </button>\n                        </>\n                    )}\n\n                    {/* Custom buttons */}\n                    {hasCustomButtons && (\n                        <>\n                            {step.buttons?.secondary && (\n                                <TourButton\n                                    button={step.buttons.secondary}\n                                    variant=\"secondary\"\n                                    onClick={handleButtonClick}\n                                    cursorStyle={cursorStyle}\n                                />\n                            )}\n                            {step.buttons?.primary && (\n                                <TourButton\n                                    button={step.buttons.primary}\n                                    variant=\"primary\"\n                                    onClick={handleButtonClick}\n                                    cursorStyle={cursorStyle}\n                                />\n                            )}\n                        </>\n                    )}\n                </div>\n            </div>\n\n            {showPostHogBranding && (\n                <a\n                    href={isInteractive ? 'https://posthog.com/docs/product-tours' : undefined}\n                    target={isInteractive ? '_blank' : undefined}\n                    rel={isInteractive ? 'noopener noreferrer' : undefined}\n                    class=\"ph-tour-branding\"\n                    style={isInteractive ? undefined : { cursor: 'default', pointerEvents: 'none' }}\n                >\n                    Tour by {IconPosthogLogo}\n                </a>\n            )}\n        </>\n    )\n}\n"]}