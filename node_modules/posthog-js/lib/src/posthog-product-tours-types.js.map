{"version":3,"file":"posthog-product-tours-types.js","sourceRoot":"","sources":["../../src/posthog-product-tours-types.ts"],"names":[],"mappings":";;;AAIA,yCAA2C;AAyK9B,QAAA,+BAA+B,GAAoC;IAC5E,eAAe,EAAE,SAAS;IAC1B,SAAS,EAAE,SAAS;IACpB,WAAW,EAAE,SAAS;IACtB,YAAY,EAAE,CAAC;IACf,kBAAkB,EAAE,CAAC;IACrB,WAAW,EAAE,SAAS;IACtB,UAAU,EAAE,WAAW;IACvB,SAAS,EAAE,gCAAgC;IAC3C,WAAW,EAAE,IAAI;IACjB,UAAU,EAAE,KAAK;IACjB,qBAAqB,EAAE,IAAI;IAC3B,MAAM,EAAE,yBAAa;CACxB,CAAA;AAOD,IAAY,oBAUX;AAVD,WAAY,oBAAoB;IAC5B,oDAA4B,CAAA;IAC5B,4DAAoC,CAAA;IACpC,4DAAoC,CAAA;IACpC,8DAAsC,CAAA;IACtC,sEAA8C,CAAA;IAC9C,sEAA8C,CAAA;IAC9C,kFAA0D,CAAA;IAC1D,0GAAkF,CAAA;IAClF,oFAA4D,CAAA;AAChE,CAAC,EAVW,oBAAoB,oCAApB,oBAAoB,QAU/B;AAED,IAAY,0BA6BX;AA7BD,WAAY,0BAA0B;IAClC,0DAA4B,CAAA;IAC5B,8DAAgC,CAAA;IAChC,wEAA0C,CAAA;IAC1C,gFAAkD,CAAA;IAClD,oEAAsC,CAAA;IACtC,0EAA4C,CAAA;IAC5C,wEAA0C,CAAA;IAC1C,kFAAoD,CAAA;IACpD,4EAA8C,CAAA;IAC9C,gFAAkD,CAAA;IAClD,4EAA8C,CAAA;IAC9C,kFAAoD,CAAA;IACpD,4EAA8C,CAAA;IAC9C,gFAAkD,CAAA;IAClD,4FAA8D,CAAA;IAC9D,sFAAwD,CAAA;IACxD,oFAAsD,CAAA;IACtD,8FAAgE,CAAA;IAChE,wFAA0D,CAAA;IAC1D,gEAAkC,CAAA;IAClC,gFAAkD,CAAA;IAClD,gFAAkD,CAAA;IAClD,0FAA4D,CAAA;IAC5D,sFAAwD,CAAA;IACxD,oFAAsD,CAAA;IACtD,sFAAwD,CAAA;IACxD,0EAA4C,CAAA;IAC5C,gFAAkD,CAAA;AACtD,CAAC,EA7BW,0BAA0B,0CAA1B,0BAA0B,QA6BrC","sourcesContent":["import { PropertyMatchType } from './types'\nimport { SurveyActionType, SurveyEventWithFilters } from './posthog-surveys-types'\nimport type { InferredSelector } from './extensions/product-tours/element-inference'\nimport { SurveyPosition } from '@posthog/core'\nimport { Z_INDEX_TOURS } from './constants'\n\nexport interface JSONContent {\n    type?: string\n    attrs?: Record<string, any>\n    content?: JSONContent[]\n    marks?: { type: string; attrs?: Record<string, any> }[]\n    text?: string\n}\n\nexport type ProductTourStepType = 'element' | 'modal' | 'survey' | 'banner'\n\nexport interface ProductTourBannerConfig {\n    behavior: 'sticky' | 'static' | 'custom'\n    selector?: string\n    action?: {\n        type: 'none' | 'link' | 'trigger_tour'\n        link?: string\n        tourId?: string\n    }\n    animation?: {\n        duration?: number\n    }\n}\n\n/** Button actions available on modal steps */\nexport type ProductTourButtonAction = 'dismiss' | 'link' | 'next_step' | 'previous_step' | 'trigger_tour'\n\nexport interface ProductTourStepButton {\n    text: string\n    action: ProductTourButtonAction\n    /** URL to open when action is 'link' */\n    link?: string\n    /** Tour ID to trigger when action is 'trigger_tour' */\n    tourId?: string\n}\n\nexport interface ProductTourStepButtons {\n    primary?: ProductTourStepButton\n    secondary?: ProductTourStepButton\n}\n\nexport type ProductTourSurveyQuestionType = 'open' | 'rating'\n\nexport interface ProductTourSurveyQuestion {\n    type: ProductTourSurveyQuestionType\n    questionText: string\n    /** Rating display type - emoji or number */\n    display?: 'emoji' | 'number'\n    /** Rating scale - 3 or 5 for emoji, 5 or 10 for number */\n    scale?: 3 | 5 | 10\n    /** Label for low end of rating scale (e.g., \"Not likely\") */\n    lowerBoundLabel?: string\n    /** Label for high end of rating scale (e.g., \"Very likely\") */\n    upperBoundLabel?: string\n    submitButtonText?: string\n    backButtonText?: string\n}\n\nexport interface ProductTourStep {\n    id: string\n    type: ProductTourStepType\n    selector?: string\n    progressionTrigger: 'button' | 'click'\n    content: JSONContent | null\n    /** Pre-rendered HTML content from the editor. If present, SDK should use this instead of rendering from JSONContent. */\n    contentHtml?: string\n    /** Inline survey question config - if present, this is a survey step */\n    survey?: ProductTourSurveyQuestion\n    /** ID of the auto-created survey for this step (set by backend) */\n    linkedSurveyId?: string\n    /** ID of the survey question (set by backend, used for event tracking) */\n    linkedSurveyQuestionId?: string\n    /** Enhanced element data for more reliable lookup at runtime */\n    inferenceData?: InferredSelector\n    /** Use CSS selector instead of inference. Defaults to false (use inference). */\n    useManualSelector?: boolean\n    /** Maximum tooltip width in pixels (defaults to 320px) */\n    maxWidth?: number\n    /** Position for modal/survey steps (defaults to middle_center) */\n    modalPosition?: SurveyPosition\n    /** Button configuration for modal steps */\n    buttons?: ProductTourStepButtons\n    /** Banner configuration (only for banner steps) */\n    bannerConfig?: ProductTourBannerConfig\n    /** translation data for this tour step */\n    translations?: Record<string, ProductTourStepTranslation>\n}\n\n/** all translatable content for a given tour step */\nexport interface ProductTourStepTranslation {\n    content?: ProductTourStep['content']\n    contentHtml?: ProductTourStep['contentHtml']\n    buttons?: {\n        primary?: Pick<ProductTourStepButton, 'text'>\n        secondary?: Pick<ProductTourStepButton, 'text'>\n    }\n    survey?: Pick<\n        ProductTourSurveyQuestion,\n        'questionText' | 'lowerBoundLabel' | 'upperBoundLabel' | 'submitButtonText' | 'backButtonText'\n    >\n}\n\nexport interface ProductTourConditions {\n    url?: string\n    urlMatchType?: PropertyMatchType\n    selector?: string\n    autoShowDelaySeconds?: number\n    events?: {\n        values: SurveyEventWithFilters[]\n    } | null\n    cancelEvents?: {\n        values: SurveyEventWithFilters[]\n    } | null\n    actions?: {\n        values: SurveyActionType[]\n    } | null\n    linkedFlagVariant?: string\n}\n\nexport interface ProductTourAppearance {\n    backgroundColor?: string\n    textColor?: string\n    buttonColor?: string\n    borderRadius?: number\n    buttonBorderRadius?: number\n    borderColor?: string\n    fontFamily?: string\n    boxShadow?: string\n    showOverlay?: boolean\n    whiteLabel?: boolean\n    /** defaults to true, auto-set to false for announcements/banners */\n    dismissOnClickOutside?: boolean\n    zIndex?: number\n}\n\nexport type ProductTourDisplayFrequency = 'show_once' | 'until_interacted' | 'always'\n\nexport interface ProductTour {\n    id: string\n    name: string\n    description?: string\n    type: 'product_tour'\n    auto_launch?: boolean\n    start_date: string | null\n    end_date: string | null\n    current_iteration?: number\n    conditions?: ProductTourConditions\n    appearance?: ProductTourAppearance\n    steps: ProductTourStep[]\n    internal_targeting_flag_key?: string\n    linked_flag_key?: string\n    display_frequency?: ProductTourDisplayFrequency\n    disable_image_preload?: boolean\n}\n\nexport type ProductTourCallback = (tours: ProductTour[], context?: { isLoaded: boolean; error?: string }) => void\n\nexport type ProductTourSelectorError = 'not_found' | 'multiple_matches' | 'not_visible'\n\nexport type ProductTourDismissReason =\n    | 'user_clicked_skip'\n    | 'user_clicked_outside'\n    | 'escape_key'\n    | 'element_unavailable'\n    | 'container_unavailable'\n\nexport type ProductTourRenderReason = 'auto' | 'api' | 'trigger' | 'event'\n\nexport const DEFAULT_PRODUCT_TOUR_APPEARANCE: Required<ProductTourAppearance> = {\n    backgroundColor: '#ffffff',\n    textColor: '#1d1f27',\n    buttonColor: '#1d1f27',\n    borderRadius: 8,\n    buttonBorderRadius: 6,\n    borderColor: '#e5e7eb',\n    fontFamily: 'system-ui',\n    boxShadow: '0 4px 12px rgba(0, 0, 0, 0.15)',\n    showOverlay: true,\n    whiteLabel: false,\n    dismissOnClickOutside: true,\n    zIndex: Z_INDEX_TOURS,\n}\n\nexport interface ShowTourOptions {\n    reason?: ProductTourRenderReason\n    enableStrictValidation?: boolean\n}\n\nexport enum ProductTourEventName {\n    SHOWN = 'product tour shown',\n    DISMISSED = 'product tour dismissed',\n    COMPLETED = 'product tour completed',\n    STEP_SHOWN = 'product tour step shown',\n    STEP_COMPLETED = 'product tour step completed',\n    BUTTON_CLICKED = 'product tour button clicked',\n    STEP_SELECTOR_FAILED = 'product tour step selector failed',\n    BANNER_CONTAINER_SELECTOR_FAILED = 'product tour banner container selector failed',\n    BANNER_ACTION_CLICKED = 'product tour banner action clicked',\n}\n\nexport enum ProductTourEventProperties {\n    TOUR_ID = '$product_tour_id',\n    TOUR_NAME = '$product_tour_name',\n    TOUR_ITERATION = '$product_tour_iteration',\n    TOUR_RENDER_REASON = '$product_tour_render_reason',\n    TOUR_STEP_ID = '$product_tour_step_id',\n    TOUR_STEP_ORDER = '$product_tour_step_order',\n    TOUR_STEP_TYPE = '$product_tour_step_type',\n    TOUR_DISMISS_REASON = '$product_tour_dismiss_reason',\n    TOUR_BUTTON_TEXT = '$product_tour_button_text',\n    TOUR_BUTTON_ACTION = '$product_tour_button_action',\n    TOUR_BUTTON_LINK = '$product_tour_button_link',\n    TOUR_BUTTON_TOUR_ID = '$product_tour_button_tour_id',\n    TOUR_STEPS_COUNT = '$product_tour_steps_count',\n    TOUR_STEP_SELECTOR = '$product_tour_step_selector',\n    TOUR_STEP_SELECTOR_FOUND = '$product_tour_step_selector_found',\n    TOUR_STEP_ELEMENT_TAG = '$product_tour_step_element_tag',\n    TOUR_STEP_ELEMENT_ID = '$product_tour_step_element_id',\n    TOUR_STEP_ELEMENT_CLASSES = '$product_tour_step_element_classes',\n    TOUR_STEP_ELEMENT_TEXT = '$product_tour_step_element_text',\n    TOUR_ERROR = '$product_tour_error',\n    TOUR_MATCHES_COUNT = '$product_tour_matches_count',\n    TOUR_FAILURE_PHASE = '$product_tour_failure_phase',\n    TOUR_WAITED_FOR_ELEMENT = '$product_tour_waited_for_element',\n    TOUR_WAIT_DURATION_MS = '$product_tour_wait_duration_ms',\n    TOUR_BANNER_SELECTOR = '$product_tour_banner_selector',\n    TOUR_LINKED_SURVEY_ID = '$product_tour_linked_survey_id',\n    USE_MANUAL_SELECTOR = '$use_manual_selector',\n    INFERENCE_DATA_PRESENT = '$inference_data_present',\n}\n"]}