{"version":3,"file":"posthog-recorder.js","sources":["../../../node_modules/.pnpm/@posthog+rrweb-record@0.0.42/node_modules/@posthog/rrweb-record/dist/rrweb-record.js","../../../node_modules/.pnpm/@posthog+rrweb-plugin-console-record@0.0.42_@posthog+rrweb-utils@0.0.42_@posthog+rrweb@0.0.42/node_modules/@posthog/rrweb-plugin-console-record/dist/rrweb-plugin-console-record.js","../src/utils/globals.ts","../../core/dist/utils/string-utils.mjs","../../core/dist/utils/type-utils.mjs","../../core/dist/utils/number-utils.mjs","../../core/dist/utils/bucketed-rate-limiter.mjs","../src/utils/type-utils.ts","../src/config.ts","../src/utils/logger.ts","../src/utils/index.ts","../src/utils/request-utils.ts","../src/extensions/replay/rrweb-plugins/patch.ts","../src/extensions/replay/external/denylist.ts","../src/constants.ts","../src/autocapture-utils.ts","../src/extensions/replay/external/config.ts","../src/extensions/replay/external/network-plugin.ts","../src/extensions/replay/types/rrweb-types.ts","../src/extensions/replay/external/triggerMatching.ts","../src/extensions/replay/external/sessionrecording-utils.ts","../../../node_modules/.pnpm/fflate@0.4.8/node_modules/fflate/esm/browser.js","../src/extensions/replay/external/mutation-throttler.ts","../src/extensions/sampling.ts","../src/extensions/replay/external/flushed-size-tracker.ts","../src/extensions/replay/external/lazy-loaded-session-recorder.ts","../src/entrypoints/posthog-recorder.ts"],"sourcesContent":["var __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nvar _a;\nvar __defProp$1 = Object.defineProperty;\nvar __defNormalProp$1 = (obj, key, value) => key in obj ? __defProp$1(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$1 = (obj, key, value) => __defNormalProp$1(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nvar NodeType$1$1 = /* @__PURE__ */ ((NodeType2) => {\n  NodeType2[NodeType2[\"Document\"] = 0] = \"Document\";\n  NodeType2[NodeType2[\"DocumentType\"] = 1] = \"DocumentType\";\n  NodeType2[NodeType2[\"Element\"] = 2] = \"Element\";\n  NodeType2[NodeType2[\"Text\"] = 3] = \"Text\";\n  NodeType2[NodeType2[\"CDATA\"] = 4] = \"CDATA\";\n  NodeType2[NodeType2[\"Comment\"] = 5] = \"Comment\";\n  return NodeType2;\n})(NodeType$1$1 || {});\nconst testableAccessors$2 = {\n  Node: [\"childNodes\", \"parentNode\", \"parentElement\", \"textContent\"],\n  ShadowRoot: [\"host\", \"styleSheets\"],\n  Element: [\"shadowRoot\", \"querySelector\", \"querySelectorAll\"],\n  MutationObserver: []\n};\nconst testableMethods$2 = {\n  Node: [\"contains\", \"getRootNode\"],\n  ShadowRoot: [\"getSelection\"],\n  Element: [],\n  MutationObserver: [\"constructor\"]\n};\nconst untaintedBasePrototype$2 = {};\nfunction angularZoneUnpatchedAlternative$2(key) {\n  var _a2, _b;\n  const angularUnpatchedVersionSymbol = (_b = (_a2 = globalThis == null ? void 0 : globalThis.Zone) == null ? void 0 : _a2.__symbol__) == null ? void 0 : _b.call(_a2, key);\n  if (angularUnpatchedVersionSymbol && globalThis[angularUnpatchedVersionSymbol]) {\n    return globalThis[angularUnpatchedVersionSymbol];\n  } else {\n    return void 0;\n  }\n}\nfunction getUntaintedPrototype$2(key) {\n  if (untaintedBasePrototype$2[key])\n    return untaintedBasePrototype$2[key];\n  const candidate = angularZoneUnpatchedAlternative$2(key) || globalThis[key];\n  const defaultPrototype = candidate.prototype;\n  const accessorNames = key in testableAccessors$2 ? testableAccessors$2[key] : void 0;\n  const isUntaintedAccessors = Boolean(\n    accessorNames && // @ts-expect-error 2345\n    accessorNames.every(\n      (accessor) => {\n        var _a2, _b;\n        return Boolean(\n          (_b = (_a2 = Object.getOwnPropertyDescriptor(defaultPrototype, accessor)) == null ? void 0 : _a2.get) == null ? void 0 : _b.toString().includes(\"[native code]\")\n        );\n      }\n    )\n  );\n  const methodNames = key in testableMethods$2 ? testableMethods$2[key] : void 0;\n  const isUntaintedMethods = Boolean(\n    methodNames && methodNames.every(\n      // @ts-expect-error 2345\n      (method) => {\n        var _a2;\n        return typeof defaultPrototype[method] === \"function\" && ((_a2 = defaultPrototype[method]) == null ? void 0 : _a2.toString().includes(\"[native code]\"));\n      }\n    )\n  );\n  if (isUntaintedAccessors && isUntaintedMethods) {\n    untaintedBasePrototype$2[key] = candidate.prototype;\n    return candidate.prototype;\n  }\n  try {\n    const iframeEl = document.createElement(\"iframe\");\n    document.body.appendChild(iframeEl);\n    const win = iframeEl.contentWindow;\n    if (!win) return candidate.prototype;\n    const untaintedObject = win[key].prototype;\n    document.body.removeChild(iframeEl);\n    if (!untaintedObject) return defaultPrototype;\n    return untaintedBasePrototype$2[key] = untaintedObject;\n  } catch {\n    return defaultPrototype;\n  }\n}\nconst untaintedAccessorCache$2 = {};\nfunction getUntaintedAccessor$2(key, instance, accessor) {\n  var _a2;\n  const cacheKey = `${key}.${String(accessor)}`;\n  if (untaintedAccessorCache$2[cacheKey])\n    return untaintedAccessorCache$2[cacheKey].call(\n      instance\n    );\n  const untaintedPrototype = getUntaintedPrototype$2(key);\n  const untaintedAccessor = (_a2 = Object.getOwnPropertyDescriptor(\n    untaintedPrototype,\n    accessor\n  )) == null ? void 0 : _a2.get;\n  if (!untaintedAccessor) return instance[accessor];\n  untaintedAccessorCache$2[cacheKey] = untaintedAccessor;\n  return untaintedAccessor.call(instance);\n}\nconst untaintedMethodCache$2 = {};\nfunction getUntaintedMethod$2(key, instance, method) {\n  const cacheKey = `${key}.${String(method)}`;\n  if (untaintedMethodCache$2[cacheKey])\n    return untaintedMethodCache$2[cacheKey].bind(\n      instance\n    );\n  const untaintedPrototype = getUntaintedPrototype$2(key);\n  const untaintedMethod = untaintedPrototype[method];\n  if (typeof untaintedMethod !== \"function\") return instance[method];\n  untaintedMethodCache$2[cacheKey] = untaintedMethod;\n  return untaintedMethod.bind(instance);\n}\nfunction childNodes$2(n2) {\n  return getUntaintedAccessor$2(\"Node\", n2, \"childNodes\");\n}\nfunction parentNode$2(n2) {\n  return getUntaintedAccessor$2(\"Node\", n2, \"parentNode\");\n}\nfunction parentElement$2(n2) {\n  return getUntaintedAccessor$2(\"Node\", n2, \"parentElement\");\n}\nfunction textContent$2(n2) {\n  return getUntaintedAccessor$2(\"Node\", n2, \"textContent\");\n}\nfunction contains$2(n2, other) {\n  return getUntaintedMethod$2(\"Node\", n2, \"contains\")(other);\n}\nfunction getRootNode$2(n2) {\n  return getUntaintedMethod$2(\"Node\", n2, \"getRootNode\")();\n}\nfunction host$2(n2) {\n  if (!n2 || !(\"host\" in n2)) return null;\n  return getUntaintedAccessor$2(\"ShadowRoot\", n2, \"host\");\n}\nfunction styleSheets$2(n2) {\n  return n2.styleSheets;\n}\nfunction shadowRoot$2(n2) {\n  if (!n2 || !(\"shadowRoot\" in n2)) return null;\n  return getUntaintedAccessor$2(\"Element\", n2, \"shadowRoot\");\n}\nfunction querySelector$2(n2, selectors) {\n  return getUntaintedAccessor$2(\"Element\", n2, \"querySelector\")(selectors);\n}\nfunction querySelectorAll$2(n2, selectors) {\n  return getUntaintedAccessor$2(\"Element\", n2, \"querySelectorAll\")(selectors);\n}\nfunction mutationObserverCtor$2() {\n  return getUntaintedPrototype$2(\"MutationObserver\").constructor;\n}\nfunction patch$2(source, name, replacement) {\n  try {\n    if (!(name in source)) {\n      return () => {\n      };\n    }\n    const original = source[name];\n    const wrapped = replacement(original);\n    if (typeof wrapped === \"function\") {\n      wrapped.prototype = wrapped.prototype || {};\n      Object.defineProperties(wrapped, {\n        __rrweb_original__: {\n          enumerable: false,\n          value: original\n        }\n      });\n    }\n    source[name] = wrapped;\n    return () => {\n      source[name] = original;\n    };\n  } catch {\n    return () => {\n    };\n  }\n}\nconst index$2 = {\n  childNodes: childNodes$2,\n  parentNode: parentNode$2,\n  parentElement: parentElement$2,\n  textContent: textContent$2,\n  contains: contains$2,\n  getRootNode: getRootNode$2,\n  host: host$2,\n  styleSheets: styleSheets$2,\n  shadowRoot: shadowRoot$2,\n  querySelector: querySelector$2,\n  querySelectorAll: querySelectorAll$2,\n  mutationObserver: mutationObserverCtor$2,\n  patch: patch$2\n};\nfunction isElement$1(n2) {\n  return n2.nodeType === n2.ELEMENT_NODE;\n}\nfunction isShadowRoot(n2) {\n  const hostEl = (\n    // anchor and textarea elements also have a `host` property\n    // but only shadow roots have a `mode` property\n    n2 && \"host\" in n2 && \"mode\" in n2 && index$2.host(n2) || null\n  );\n  return Boolean(\n    hostEl && \"shadowRoot\" in hostEl && index$2.shadowRoot(hostEl) === n2\n  );\n}\nfunction isNativeShadowDom(shadowRoot2) {\n  return Object.prototype.toString.call(shadowRoot2) === \"[object ShadowRoot]\";\n}\nfunction fixBrowserCompatibilityIssuesInCSS(cssText) {\n  if (cssText.includes(\" background-clip: text;\") && !cssText.includes(\" -webkit-background-clip: text;\")) {\n    cssText = cssText.replace(\n      /\\sbackground-clip:\\s*text;/g,\n      \" -webkit-background-clip: text; background-clip: text;\"\n    );\n  }\n  return cssText;\n}\nfunction escapeImportStatement(rule2) {\n  const { cssText } = rule2;\n  if (cssText.split('\"').length < 3) return cssText;\n  const statement = [\"@import\", `url(${JSON.stringify(rule2.href)})`];\n  if (rule2.layerName === \"\") {\n    statement.push(`layer`);\n  } else if (rule2.layerName) {\n    statement.push(`layer(${rule2.layerName})`);\n  }\n  if (rule2.supportsText) {\n    statement.push(`supports(${rule2.supportsText})`);\n  }\n  if (rule2.media.length) {\n    statement.push(rule2.media.mediaText);\n  }\n  return statement.join(\" \") + \";\";\n}\nfunction stringifyStylesheet(s2) {\n  try {\n    const rules2 = s2.rules || s2.cssRules;\n    if (!rules2) {\n      return null;\n    }\n    let sheetHref = s2.href;\n    if (!sheetHref && s2.ownerNode) {\n      sheetHref = s2.ownerNode.baseURI;\n    }\n    const stringifiedRules = Array.from(\n      rules2,\n      (rule2) => stringifyRule(rule2, sheetHref)\n    ).join(\"\");\n    return fixBrowserCompatibilityIssuesInCSS(stringifiedRules);\n  } catch (error) {\n    return null;\n  }\n}\nfunction stringifyRule(rule2, sheetHref) {\n  var _a2;\n  if (isCSSImportRule(rule2)) {\n    let importStringified;\n    try {\n      importStringified = // for same-origin stylesheets,\n      // we can access the imported stylesheet rules directly\n      stringifyStylesheet(rule2.styleSheet) || // work around browser issues with the raw string `@import url(...)` statement\n      escapeImportStatement(rule2);\n    } catch (error) {\n      importStringified = rule2.cssText;\n    }\n    try {\n      if (importStringified && ((_a2 = rule2.styleSheet) == null ? void 0 : _a2.href)) {\n        return absolutifyURLs(importStringified, rule2.styleSheet.href);\n      }\n    } catch {\n    }\n    return importStringified;\n  } else {\n    let ruleStringified = rule2.cssText;\n    if (isCSSStyleRule(rule2) && rule2.selectorText.includes(\":\")) {\n      ruleStringified = fixSafariColons(ruleStringified);\n    }\n    if (sheetHref) {\n      return absolutifyURLs(ruleStringified, sheetHref);\n    }\n    return ruleStringified;\n  }\n}\nfunction fixSafariColons(cssStringified) {\n  const regex = /(\\[(?:[\\w-]+)[^\\\\])(:(?:[\\w-]+)\\])/gm;\n  return cssStringified.replace(regex, \"$1\\\\$2\");\n}\nfunction isCSSImportRule(rule2) {\n  return \"styleSheet\" in rule2;\n}\nfunction isCSSStyleRule(rule2) {\n  return \"selectorText\" in rule2;\n}\nclass Mirror {\n  constructor() {\n    __publicField$1(this, \"idNodeMap\", /* @__PURE__ */ new Map());\n    __publicField$1(this, \"nodeMetaMap\", /* @__PURE__ */ new WeakMap());\n  }\n  getId(n2) {\n    var _a2;\n    if (!n2) return -1;\n    const id = (_a2 = this.getMeta(n2)) == null ? void 0 : _a2.id;\n    return id ?? -1;\n  }\n  getNode(id) {\n    return this.idNodeMap.get(id) || null;\n  }\n  getIds() {\n    return Array.from(this.idNodeMap.keys());\n  }\n  getMeta(n2) {\n    return this.nodeMetaMap.get(n2) || null;\n  }\n  // removes the node from idNodeMap\n  // doesn't remove the node from nodeMetaMap\n  removeNodeFromMap(n2) {\n    const id = this.getId(n2);\n    this.idNodeMap.delete(id);\n    if (n2.childNodes) {\n      n2.childNodes.forEach(\n        (childNode) => this.removeNodeFromMap(childNode)\n      );\n    }\n    if (isElement$1(n2)) {\n      const shadowRootEl = index$2.shadowRoot(n2);\n      if (shadowRootEl) {\n        this.removeNodeFromMap(shadowRootEl);\n      }\n      if (n2.nodeName === \"IFRAME\" && n2.contentDocument) {\n        this.removeNodeFromMap(\n          n2.contentDocument\n        );\n      }\n    }\n  }\n  has(id) {\n    return this.idNodeMap.has(id);\n  }\n  hasNode(node2) {\n    return this.nodeMetaMap.has(node2);\n  }\n  add(n2, meta) {\n    const id = meta.id;\n    this.idNodeMap.set(id, n2);\n    this.nodeMetaMap.set(n2, meta);\n  }\n  replace(id, n2) {\n    const oldNode = this.getNode(id);\n    if (oldNode) {\n      const meta = this.nodeMetaMap.get(oldNode);\n      if (meta) this.nodeMetaMap.set(n2, meta);\n    }\n    this.idNodeMap.set(id, n2);\n  }\n  reset() {\n    this.idNodeMap = /* @__PURE__ */ new Map();\n    this.nodeMetaMap = /* @__PURE__ */ new WeakMap();\n  }\n}\nfunction createMirror$2() {\n  return new Mirror();\n}\nfunction maskInputValue({\n  element,\n  maskInputOptions,\n  tagName,\n  type,\n  value,\n  maskInputFn\n}) {\n  let text = value || \"\";\n  const actualType = type && toLowerCase(type);\n  if (maskInputOptions[tagName.toLowerCase()] || actualType && maskInputOptions[actualType]) {\n    if (maskInputFn) {\n      text = maskInputFn(text, element);\n    } else {\n      text = \"*\".repeat(text.length);\n    }\n  }\n  return text;\n}\nfunction toLowerCase(str) {\n  return str.toLowerCase();\n}\nconst ORIGINAL_ATTRIBUTE_NAME = \"__rrweb_original__\";\nfunction is2DCanvasBlank(canvas) {\n  const ctx = canvas.getContext(\"2d\");\n  if (!ctx) return true;\n  const chunkSize = 50;\n  for (let x = 0; x < canvas.width; x += chunkSize) {\n    for (let y = 0; y < canvas.height; y += chunkSize) {\n      const getImageData = ctx.getImageData;\n      const originalGetImageData = ORIGINAL_ATTRIBUTE_NAME in getImageData ? getImageData[ORIGINAL_ATTRIBUTE_NAME] : getImageData;\n      const pixelBuffer = new Uint32Array(\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument, @typescript-eslint/no-unsafe-member-access\n        originalGetImageData.call(\n          ctx,\n          x,\n          y,\n          Math.min(chunkSize, canvas.width - x),\n          Math.min(chunkSize, canvas.height - y)\n        ).data.buffer\n      );\n      if (pixelBuffer.some((pixel) => pixel !== 0)) return false;\n    }\n  }\n  return true;\n}\nfunction getInputType(element) {\n  const type = element.type;\n  return element.hasAttribute(\"data-rr-is-password\") ? \"password\" : type ? (\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n    toLowerCase(type)\n  ) : null;\n}\nfunction extractFileExtension(path, baseURL) {\n  let url;\n  try {\n    url = new URL(path, baseURL ?? window.location.href);\n  } catch (err) {\n    return null;\n  }\n  const regex = /\\.([0-9a-z]+)(?:$)/i;\n  const match = url.pathname.match(regex);\n  return (match == null ? void 0 : match[1]) ?? null;\n}\nfunction extractOrigin(url) {\n  let origin = \"\";\n  if (url.indexOf(\"//\") > -1) {\n    origin = url.split(\"/\").slice(0, 3).join(\"/\");\n  } else {\n    origin = url.split(\"/\")[0];\n  }\n  origin = origin.split(\"?\")[0];\n  return origin;\n}\nconst URL_IN_CSS_REF = /url\\((?:(')([^']*)'|(\")(.*?)\"|([^)]*))\\)/gm;\nconst URL_PROTOCOL_MATCH = /^(?:[a-z+]+:)?\\/\\//i;\nconst URL_WWW_MATCH = /^www\\..*/i;\nconst DATA_URI = /^(data:)([^,]*),(.*)/i;\nfunction absolutifyURLs(cssText, href) {\n  return (cssText || \"\").replace(\n    URL_IN_CSS_REF,\n    (origin, quote1, path1, quote2, path2, path3) => {\n      const filePath = path1 || path2 || path3;\n      const maybeQuote = quote1 || quote2 || \"\";\n      if (!filePath) {\n        return origin;\n      }\n      if (URL_PROTOCOL_MATCH.test(filePath) || URL_WWW_MATCH.test(filePath)) {\n        return `url(${maybeQuote}${filePath}${maybeQuote})`;\n      }\n      if (DATA_URI.test(filePath)) {\n        return `url(${maybeQuote}${filePath}${maybeQuote})`;\n      }\n      if (filePath[0] === \"/\") {\n        return `url(${maybeQuote}${extractOrigin(href) + filePath}${maybeQuote})`;\n      }\n      const stack = href.split(\"/\");\n      const parts = filePath.split(\"/\");\n      stack.pop();\n      for (const part of parts) {\n        if (part === \".\") {\n          continue;\n        } else if (part === \"..\") {\n          stack.pop();\n        } else {\n          stack.push(part);\n        }\n      }\n      return `url(${maybeQuote}${stack.join(\"/\")}${maybeQuote})`;\n    }\n  );\n}\nconst STRIPED_PLACEHOLDER_SVG = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxkZWZzPgogICAgPHBhdHRlcm4gaWQ9InN0cmlwZXMiIHBhdHRlcm5Vbml0cz0idXNlclNwYWNlT25Vc2UiIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiI+CiAgICAgIDxyZWN0IHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iYmxhY2siLz4KICAgICAgPHBhdGggZD0iTTggMEgxNkwwIDE2VjhMOCAwWiIgZmlsbD0iIzJEMkQyRCIvPgogICAgICA8cGF0aCBkPSJNMTYgOFYxNkg4TDE2IDhaIiBmaWxsPSIjMkQyRDJEIi8+CiAgICA8L3BhdHRlcm4+CiAgPC9kZWZzPgogIDxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjc3RyaXBlcykiLz4KPC9zdmc+Cg==\";\nconst MAX_IMAGE_DIMENSION_FOR_RECOMPRESSION = 4096;\nfunction recompressBase64Image(img, dataURL, type, quality) {\n  if (!img.complete || img.naturalWidth === 0) {\n    return dataURL;\n  }\n  if (img.naturalWidth > MAX_IMAGE_DIMENSION_FOR_RECOMPRESSION || img.naturalHeight > MAX_IMAGE_DIMENSION_FOR_RECOMPRESSION) {\n    return dataURL;\n  }\n  try {\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = img.naturalWidth;\n    canvas.height = img.naturalHeight;\n    const ctx = canvas.getContext(\"2d\");\n    if (!ctx) {\n      return dataURL;\n    }\n    ctx.drawImage(img, 0, 0);\n    const recompressed = canvas.toDataURL(type || \"image/webp\", quality ?? 0.4);\n    return recompressed;\n  } catch (err) {\n    return dataURL;\n  }\n}\nfunction checkDataURLSize(dataURL, maxLength) {\n  if (!maxLength || dataURL.length <= maxLength) {\n    return dataURL;\n  }\n  return STRIPED_PLACEHOLDER_SVG;\n}\nlet _id = 1;\nconst tagNameRegex = new RegExp(\"[^a-z0-9-_:]\");\nconst IGNORED_NODE = -2;\nfunction genId() {\n  return _id++;\n}\nfunction getValidTagName$1(element) {\n  if (element instanceof HTMLFormElement) {\n    return \"form\";\n  }\n  const processedTagName = toLowerCase(element.tagName);\n  if (tagNameRegex.test(processedTagName)) {\n    return \"div\";\n  }\n  return processedTagName;\n}\nlet canvasService;\nlet canvasCtx;\nconst SRCSET_NOT_SPACES = /^[^ \\t\\n\\r\\u000c]+/;\nconst SRCSET_COMMAS_OR_SPACES = /^[, \\t\\n\\r\\u000c]+/;\nfunction getAbsoluteSrcsetString(doc, attributeValue) {\n  if (attributeValue.trim() === \"\") {\n    return attributeValue;\n  }\n  let pos = 0;\n  function collectCharacters(regEx) {\n    let chars2;\n    const match = regEx.exec(attributeValue.substring(pos));\n    if (match) {\n      chars2 = match[0];\n      pos += chars2.length;\n      return chars2;\n    }\n    return \"\";\n  }\n  const output = [];\n  while (true) {\n    collectCharacters(SRCSET_COMMAS_OR_SPACES);\n    if (pos >= attributeValue.length) {\n      break;\n    }\n    let url = collectCharacters(SRCSET_NOT_SPACES);\n    if (url.slice(-1) === \",\") {\n      url = absoluteToDoc(doc, url.substring(0, url.length - 1));\n      output.push(url);\n    } else {\n      let descriptorsStr = \"\";\n      url = absoluteToDoc(doc, url);\n      let inParens = false;\n      while (true) {\n        const c2 = attributeValue.charAt(pos);\n        if (c2 === \"\") {\n          output.push((url + descriptorsStr).trim());\n          break;\n        } else if (!inParens) {\n          if (c2 === \",\") {\n            pos += 1;\n            output.push((url + descriptorsStr).trim());\n            break;\n          } else if (c2 === \"(\") {\n            inParens = true;\n          }\n        } else {\n          if (c2 === \")\") {\n            inParens = false;\n          }\n        }\n        descriptorsStr += c2;\n        pos += 1;\n      }\n    }\n  }\n  return output.join(\", \");\n}\nconst cachedDocument = /* @__PURE__ */ new WeakMap();\nfunction absoluteToDoc(doc, attributeValue) {\n  if (!attributeValue || attributeValue.trim() === \"\") {\n    return attributeValue;\n  }\n  return getHref(doc, attributeValue);\n}\nfunction isSVGElement(el) {\n  return Boolean(el.tagName === \"svg\" || el.ownerSVGElement);\n}\nfunction getHref(doc, customHref) {\n  let a2 = cachedDocument.get(doc);\n  if (!a2) {\n    a2 = doc.createElement(\"a\");\n    cachedDocument.set(doc, a2);\n  }\n  if (!customHref) {\n    customHref = \"\";\n  } else if (customHref.startsWith(\"blob:\") || customHref.startsWith(\"data:\")) {\n    return customHref;\n  }\n  a2.setAttribute(\"href\", customHref);\n  return a2.href;\n}\nfunction transformAttribute(doc, tagName, name, value, element, dataURLOptions) {\n  if (!value) {\n    return value;\n  }\n  if (name === \"src\" || name === \"href\" && !(tagName === \"use\" && value[0] === \"#\")) {\n    const transformedValue = absoluteToDoc(doc, value);\n    if (tagName === \"img\" && transformedValue.startsWith(\"data:\") && element) {\n      const img = element;\n      let processedDataURL = transformedValue;\n      if ((dataURLOptions == null ? void 0 : dataURLOptions.type) || (dataURLOptions == null ? void 0 : dataURLOptions.quality) !== void 0) {\n        processedDataURL = recompressBase64Image(\n          img,\n          transformedValue,\n          dataURLOptions.type,\n          dataURLOptions.quality\n        );\n      }\n      if (dataURLOptions == null ? void 0 : dataURLOptions.maxBase64ImageLength) {\n        processedDataURL = checkDataURLSize(\n          processedDataURL,\n          dataURLOptions.maxBase64ImageLength\n        );\n      }\n      return processedDataURL;\n    }\n    return transformedValue;\n  } else if (name === \"xlink:href\" && value[0] !== \"#\") {\n    return absoluteToDoc(doc, value);\n  } else if (name === \"background\" && (tagName === \"table\" || tagName === \"td\" || tagName === \"th\")) {\n    return absoluteToDoc(doc, value);\n  } else if (name === \"srcset\") {\n    return getAbsoluteSrcsetString(doc, value);\n  } else if (name === \"style\") {\n    return absolutifyURLs(value, getHref(doc));\n  } else if (tagName === \"object\" && name === \"data\") {\n    return absoluteToDoc(doc, value);\n  }\n  return value;\n}\nfunction ignoreAttribute(tagName, name, _value) {\n  return (tagName === \"video\" || tagName === \"audio\") && name === \"autoplay\";\n}\nfunction _isBlockedElement(element, blockClass, blockSelector) {\n  try {\n    if (typeof blockClass === \"string\") {\n      if (element.classList.contains(blockClass)) {\n        return true;\n      }\n    } else {\n      for (let eIndex = element.classList.length; eIndex--; ) {\n        const className = element.classList[eIndex];\n        if (blockClass.test(className)) {\n          return true;\n        }\n      }\n    }\n    if (blockSelector) {\n      return element.matches(blockSelector);\n    }\n  } catch (e2) {\n  }\n  return false;\n}\nfunction classMatchesRegex(node2, regex, checkAncestors) {\n  if (!node2) return false;\n  if (node2.nodeType !== node2.ELEMENT_NODE) {\n    if (!checkAncestors) return false;\n    return classMatchesRegex(index$2.parentNode(node2), regex, checkAncestors);\n  }\n  for (let eIndex = node2.classList.length; eIndex--; ) {\n    const className = node2.classList[eIndex];\n    if (regex.test(className)) {\n      return true;\n    }\n  }\n  if (!checkAncestors) return false;\n  return classMatchesRegex(index$2.parentNode(node2), regex, checkAncestors);\n}\nfunction needMaskingText(node2, maskTextClass, maskTextSelector, checkAncestors) {\n  let el;\n  if (isElement$1(node2)) {\n    el = node2;\n    if (!index$2.childNodes(el).length) {\n      return false;\n    }\n  } else if (index$2.parentElement(node2) === null) {\n    return false;\n  } else {\n    el = index$2.parentElement(node2);\n  }\n  try {\n    if (typeof maskTextClass === \"string\") {\n      if (checkAncestors) {\n        if (el.closest(`.${maskTextClass}`)) return true;\n      } else {\n        if (el.classList.contains(maskTextClass)) return true;\n      }\n    } else {\n      if (classMatchesRegex(el, maskTextClass, checkAncestors)) return true;\n    }\n    if (maskTextSelector) {\n      if (checkAncestors) {\n        if (el.closest(maskTextSelector)) return true;\n      } else {\n        if (el.matches(maskTextSelector)) return true;\n      }\n    }\n  } catch (e2) {\n  }\n  return false;\n}\nfunction onceIframeLoaded(iframeEl, listener, iframeLoadTimeout) {\n  const win = iframeEl.contentWindow;\n  if (!win) {\n    return;\n  }\n  let fired = false;\n  let readyState;\n  try {\n    readyState = win.document.readyState;\n  } catch (error) {\n    return;\n  }\n  if (readyState !== \"complete\") {\n    const timer = setTimeout(() => {\n      if (!fired) {\n        listener();\n        fired = true;\n      }\n    }, iframeLoadTimeout);\n    iframeEl.addEventListener(\"load\", () => {\n      clearTimeout(timer);\n      fired = true;\n      listener();\n    });\n    return;\n  }\n  const blankUrl = \"about:blank\";\n  if (win.location.href !== blankUrl || iframeEl.src === blankUrl || iframeEl.src === \"\") {\n    setTimeout(listener, 0);\n    return iframeEl.addEventListener(\"load\", listener);\n  }\n  iframeEl.addEventListener(\"load\", listener);\n}\nfunction onceStylesheetLoaded(link, listener, styleSheetLoadTimeout) {\n  let fired = false;\n  let styleSheetLoaded;\n  try {\n    styleSheetLoaded = link.sheet;\n  } catch (error) {\n    return;\n  }\n  if (styleSheetLoaded) return;\n  const timer = setTimeout(() => {\n    if (!fired) {\n      listener();\n      fired = true;\n    }\n  }, styleSheetLoadTimeout);\n  link.addEventListener(\"load\", () => {\n    clearTimeout(timer);\n    fired = true;\n    listener();\n  });\n}\nfunction serializeNode(n2, options) {\n  const {\n    doc,\n    mirror: mirror2,\n    blockClass,\n    blockSelector,\n    needsMask,\n    inlineStylesheet,\n    maskInputOptions = {},\n    maskTextFn,\n    maskInputFn,\n    dataURLOptions = {},\n    inlineImages,\n    recordCanvas,\n    keepIframeSrcFn,\n    newlyAddedElement = false\n  } = options;\n  const rootId = getRootId(doc, mirror2);\n  switch (n2.nodeType) {\n    case n2.DOCUMENT_NODE:\n      if (n2.compatMode !== \"CSS1Compat\") {\n        return {\n          type: NodeType$1$1.Document,\n          childNodes: [],\n          compatMode: n2.compatMode\n          // probably \"BackCompat\"\n        };\n      } else {\n        return {\n          type: NodeType$1$1.Document,\n          childNodes: []\n        };\n      }\n    case n2.DOCUMENT_TYPE_NODE:\n      return {\n        type: NodeType$1$1.DocumentType,\n        name: n2.name,\n        publicId: n2.publicId,\n        systemId: n2.systemId,\n        rootId\n      };\n    case n2.ELEMENT_NODE:\n      return serializeElementNode(n2, {\n        doc,\n        blockClass,\n        blockSelector,\n        inlineStylesheet,\n        maskInputOptions,\n        maskInputFn,\n        dataURLOptions,\n        inlineImages,\n        recordCanvas,\n        keepIframeSrcFn,\n        newlyAddedElement,\n        rootId\n      });\n    case n2.TEXT_NODE:\n      return serializeTextNode(n2, {\n        doc,\n        needsMask,\n        maskTextFn,\n        rootId\n      });\n    case n2.CDATA_SECTION_NODE:\n      return {\n        type: NodeType$1$1.CDATA,\n        textContent: \"\",\n        rootId\n      };\n    case n2.COMMENT_NODE:\n      return {\n        type: NodeType$1$1.Comment,\n        textContent: index$2.textContent(n2) || \"\",\n        rootId\n      };\n    default:\n      return false;\n  }\n}\nfunction getRootId(doc, mirror2) {\n  if (!mirror2.hasNode(doc)) return void 0;\n  const docId = mirror2.getId(doc);\n  return docId === 1 ? void 0 : docId;\n}\nfunction serializeTextNode(n2, options) {\n  var _a2;\n  const { needsMask, maskTextFn, rootId } = options;\n  const parent = index$2.parentNode(n2);\n  const parentTagName = parent && parent.tagName;\n  let text = index$2.textContent(n2);\n  const isStyle = parentTagName === \"STYLE\" ? true : void 0;\n  const isScript = parentTagName === \"SCRIPT\" ? true : void 0;\n  if (isStyle && text) {\n    try {\n      if (n2.nextSibling || n2.previousSibling) {\n      } else if ((_a2 = parent.sheet) == null ? void 0 : _a2.cssRules) {\n        text = stringifyStylesheet(parent.sheet);\n      }\n    } catch (err) {\n      console.warn(\n        `Cannot get CSS styles from text's parentNode. Error: ${err}`,\n        n2\n      );\n    }\n    text = absolutifyURLs(text, getHref(options.doc));\n  }\n  if (isScript) {\n    text = \"SCRIPT_PLACEHOLDER\";\n  }\n  if (!isStyle && !isScript && text && needsMask) {\n    text = maskTextFn ? maskTextFn(text, index$2.parentElement(n2)) : text.replace(/[\\S]/g, \"*\");\n  }\n  return {\n    type: NodeType$1$1.Text,\n    textContent: text || \"\",\n    isStyle,\n    rootId\n  };\n}\nfunction findStylesheet(doc, href) {\n  return Array.from(doc.styleSheets).find((s2) => s2.href === href);\n}\nfunction hrefFrom(n2) {\n  return n2.href;\n}\nfunction serializeElementNode(n2, options) {\n  var _a2, _b;\n  const {\n    doc,\n    blockClass,\n    blockSelector,\n    inlineStylesheet,\n    maskInputOptions = {},\n    maskInputFn,\n    dataURLOptions = {},\n    inlineImages,\n    recordCanvas,\n    keepIframeSrcFn,\n    newlyAddedElement = false,\n    rootId\n  } = options;\n  const needBlock = _isBlockedElement(n2, blockClass, blockSelector);\n  const tagName = getValidTagName$1(n2);\n  let attributes = {};\n  const len = n2.attributes.length;\n  for (let i2 = 0; i2 < len; i2++) {\n    const attr = n2.attributes[i2];\n    if (!ignoreAttribute(tagName, attr.name, attr.value)) {\n      attributes[attr.name] = transformAttribute(\n        doc,\n        tagName,\n        toLowerCase(attr.name),\n        attr.value,\n        n2,\n        dataURLOptions\n      );\n    }\n  }\n  if (tagName === \"link\" && inlineStylesheet) {\n    const href = hrefFrom(n2);\n    if (href) {\n      let stylesheet = findStylesheet(doc, href);\n      if (!stylesheet && href.includes(\".css\")) {\n        const rootDomain = window.location.origin;\n        const stylesheetPath = href.replace(window.location.href, \"\");\n        const potentialStylesheetHref = rootDomain + \"/\" + stylesheetPath;\n        stylesheet = findStylesheet(doc, potentialStylesheetHref);\n      }\n      let cssText = null;\n      if (stylesheet) {\n        cssText = stringifyStylesheet(stylesheet);\n      }\n      if (cssText) {\n        delete attributes.rel;\n        delete attributes.href;\n        attributes._cssText = cssText;\n      }\n    }\n  }\n  if (tagName === \"style\" && n2.sheet && // TODO: Currently we only try to get dynamic stylesheet when it is an empty style element\n  !(n2.innerText || index$2.textContent(n2) || \"\").trim().length) {\n    const cssText = stringifyStylesheet(\n      n2.sheet\n    );\n    if (cssText) {\n      attributes._cssText = cssText;\n    }\n  }\n  if (tagName === \"input\" || tagName === \"textarea\" || tagName === \"select\") {\n    const value = n2.value;\n    const checked = n2.checked;\n    if (attributes.type !== \"radio\" && attributes.type !== \"checkbox\" && attributes.type !== \"submit\" && attributes.type !== \"button\" && value) {\n      attributes.value = maskInputValue({\n        element: n2,\n        type: getInputType(n2),\n        tagName,\n        value,\n        maskInputOptions,\n        maskInputFn\n      });\n    } else if (checked) {\n      attributes.checked = checked;\n    }\n  }\n  if (tagName === \"option\") {\n    if (n2.selected && !maskInputOptions[\"select\"]) {\n      attributes.selected = true;\n    } else {\n      delete attributes.selected;\n    }\n  }\n  if (tagName === \"dialog\" && n2.open) {\n    try {\n      attributes.rr_open_mode = n2.matches(\"dialog:modal\") ? \"modal\" : \"non-modal\";\n    } catch {\n      attributes.rr_open_mode = \"modal\";\n      attributes.ph_rr_could_not_detect_modal = true;\n    }\n  }\n  if (tagName === \"canvas\" && recordCanvas) {\n    if (n2.__context === \"2d\") {\n      if (!is2DCanvasBlank(n2)) {\n        attributes.rr_dataURL = n2.toDataURL(\n          dataURLOptions.type,\n          dataURLOptions.quality\n        );\n      }\n    } else if (!(\"__context\" in n2)) {\n      const canvasDataURL = n2.toDataURL(\n        dataURLOptions.type,\n        dataURLOptions.quality\n      );\n      const blankCanvas = doc.createElement(\"canvas\");\n      blankCanvas.width = n2.width;\n      blankCanvas.height = n2.height;\n      const blankCanvasDataURL = blankCanvas.toDataURL(\n        dataURLOptions.type,\n        dataURLOptions.quality\n      );\n      if (canvasDataURL !== blankCanvasDataURL) {\n        attributes.rr_dataURL = canvasDataURL;\n      }\n    }\n  }\n  if (tagName === \"img\" && inlineImages) {\n    if (!canvasService) {\n      canvasService = doc.createElement(\"canvas\");\n      canvasCtx = canvasService.getContext(\"2d\");\n    }\n    const image = n2;\n    const imageSrc = image.currentSrc || image.getAttribute(\"src\") || \"<unknown-src>\";\n    const priorCrossOrigin = image.crossOrigin;\n    const recordInlineImage = () => {\n      image.removeEventListener(\"load\", recordInlineImage);\n      try {\n        canvasService.width = image.naturalWidth;\n        canvasService.height = image.naturalHeight;\n        canvasCtx.drawImage(image, 0, 0);\n        attributes.rr_dataURL = canvasService.toDataURL(\n          dataURLOptions.type,\n          dataURLOptions.quality\n        );\n      } catch (err) {\n        if (image.crossOrigin !== \"anonymous\") {\n          image.crossOrigin = \"anonymous\";\n          if (image.complete && image.naturalWidth !== 0)\n            recordInlineImage();\n          else image.addEventListener(\"load\", recordInlineImage);\n          return;\n        } else {\n          console.warn(\n            `Cannot inline img src=${imageSrc}! Error: ${err}`\n          );\n        }\n      }\n      if (image.crossOrigin === \"anonymous\") {\n        priorCrossOrigin ? attributes.crossOrigin = priorCrossOrigin : image.removeAttribute(\"crossorigin\");\n      }\n    };\n    if (image.complete && image.naturalWidth !== 0) recordInlineImage();\n    else image.addEventListener(\"load\", recordInlineImage);\n  }\n  if (tagName === \"audio\" || tagName === \"video\") {\n    const mediaAttributes = attributes;\n    mediaAttributes.rr_mediaState = n2.paused ? \"paused\" : \"played\";\n    mediaAttributes.rr_mediaCurrentTime = n2.currentTime;\n    mediaAttributes.rr_mediaPlaybackRate = n2.playbackRate;\n    mediaAttributes.rr_mediaMuted = n2.muted;\n    mediaAttributes.rr_mediaLoop = n2.loop;\n    mediaAttributes.rr_mediaVolume = n2.volume;\n  }\n  if (!newlyAddedElement) {\n    if (n2.scrollLeft) {\n      attributes.rr_scrollLeft = n2.scrollLeft;\n    }\n    if (n2.scrollTop) {\n      attributes.rr_scrollTop = n2.scrollTop;\n    }\n  }\n  if (needBlock) {\n    const { width, height, left, top } = n2.getBoundingClientRect();\n    attributes = {\n      class: attributes.class,\n      rr_width: `${width}px`,\n      rr_height: `${height}px`,\n      rr_left: `${Math.floor(left + (((_a2 = doc.defaultView) == null ? void 0 : _a2.scrollX) || 0))}px`,\n      rr_top: `${Math.floor(top + (((_b = doc.defaultView) == null ? void 0 : _b.scrollY) || 0))}px`\n    };\n  }\n  if (tagName === \"iframe\" && !keepIframeSrcFn(attributes.src)) {\n    if (!n2.contentDocument) {\n      attributes.rr_src = attributes.src;\n    }\n    delete attributes.src;\n  }\n  let isCustomElement;\n  try {\n    if (customElements.get(tagName)) isCustomElement = true;\n  } catch (e2) {\n  }\n  return {\n    type: NodeType$1$1.Element,\n    tagName,\n    attributes,\n    childNodes: [],\n    isSVG: isSVGElement(n2) || void 0,\n    needBlock,\n    rootId,\n    isCustom: isCustomElement\n  };\n}\nfunction lowerIfExists(maybeAttr) {\n  if (maybeAttr === void 0 || maybeAttr === null) {\n    return \"\";\n  } else {\n    return maybeAttr.toLowerCase();\n  }\n}\nfunction slimDOMExcluded(sn, slimDOMOptions) {\n  if (slimDOMOptions.comment && sn.type === NodeType$1$1.Comment) {\n    return true;\n  } else if (sn.type === NodeType$1$1.Element) {\n    if (slimDOMOptions.script && // script tag\n    (sn.tagName === \"script\" || // (module)preload link\n    sn.tagName === \"link\" && (sn.attributes.rel === \"preload\" && sn.attributes.as === \"script\" || sn.attributes.rel === \"modulepreload\") || // prefetch link\n    sn.tagName === \"link\" && sn.attributes.rel === \"prefetch\" && typeof sn.attributes.href === \"string\" && extractFileExtension(sn.attributes.href) === \"js\")) {\n      return true;\n    } else if (slimDOMOptions.headFavicon && (sn.tagName === \"link\" && sn.attributes.rel === \"shortcut icon\" || sn.tagName === \"meta\" && (lowerIfExists(sn.attributes.name).match(\n      /^msapplication-tile(image|color)$/\n    ) || lowerIfExists(sn.attributes.name) === \"application-name\" || lowerIfExists(sn.attributes.rel) === \"icon\" || lowerIfExists(sn.attributes.rel) === \"apple-touch-icon\" || lowerIfExists(sn.attributes.rel) === \"shortcut icon\"))) {\n      return true;\n    } else if (sn.tagName === \"meta\") {\n      if (slimDOMOptions.headMetaDescKeywords && lowerIfExists(sn.attributes.name).match(/^description|keywords$/)) {\n        return true;\n      } else if (slimDOMOptions.headMetaSocial && (lowerIfExists(sn.attributes.property).match(/^(og|twitter|fb):/) || // og = opengraph (facebook)\n      lowerIfExists(sn.attributes.name).match(/^(og|twitter):/) || lowerIfExists(sn.attributes.name) === \"pinterest\")) {\n        return true;\n      } else if (slimDOMOptions.headMetaRobots && (lowerIfExists(sn.attributes.name) === \"robots\" || lowerIfExists(sn.attributes.name) === \"googlebot\" || lowerIfExists(sn.attributes.name) === \"bingbot\")) {\n        return true;\n      } else if (slimDOMOptions.headMetaHttpEquiv && sn.attributes[\"http-equiv\"] !== void 0) {\n        return true;\n      } else if (slimDOMOptions.headMetaAuthorship && (lowerIfExists(sn.attributes.name) === \"author\" || lowerIfExists(sn.attributes.name) === \"generator\" || lowerIfExists(sn.attributes.name) === \"framework\" || lowerIfExists(sn.attributes.name) === \"publisher\" || lowerIfExists(sn.attributes.name) === \"progid\" || lowerIfExists(sn.attributes.property).match(/^article:/) || lowerIfExists(sn.attributes.property).match(/^product:/))) {\n        return true;\n      } else if (slimDOMOptions.headMetaVerification && (lowerIfExists(sn.attributes.name) === \"google-site-verification\" || lowerIfExists(sn.attributes.name) === \"yandex-verification\" || lowerIfExists(sn.attributes.name) === \"csrf-token\" || lowerIfExists(sn.attributes.name) === \"p:domain_verify\" || lowerIfExists(sn.attributes.name) === \"verify-v1\" || lowerIfExists(sn.attributes.name) === \"verification\" || lowerIfExists(sn.attributes.name) === \"shopify-checkout-api-token\")) {\n        return true;\n      }\n    }\n  }\n  return false;\n}\nconst DEFAULT_MAX_DEPTH = 50;\nlet _maxDepthWarned = false;\nlet _maxDepthReached = false;\nfunction wasMaxDepthReached() {\n  return _maxDepthReached;\n}\nfunction resetMaxDepthState() {\n  _maxDepthReached = false;\n  _maxDepthWarned = false;\n}\nfunction serializeNodeWithId(n2, options) {\n  const {\n    doc,\n    mirror: mirror2,\n    blockClass,\n    blockSelector,\n    maskTextClass,\n    maskTextSelector,\n    skipChild = false,\n    inlineStylesheet = true,\n    maskInputOptions = {},\n    maskTextFn,\n    maskInputFn,\n    slimDOMOptions,\n    dataURLOptions = {},\n    inlineImages = false,\n    recordCanvas = false,\n    onSerialize,\n    onIframeLoad,\n    iframeLoadTimeout = 5e3,\n    onStylesheetLoad,\n    stylesheetLoadTimeout = 5e3,\n    keepIframeSrcFn = () => false,\n    newlyAddedElement = false,\n    depth = 0,\n    maxDepth = DEFAULT_MAX_DEPTH\n  } = options;\n  let { needsMask } = options;\n  let { preserveWhiteSpace = true } = options;\n  if (depth >= maxDepth) {\n    _maxDepthReached = true;\n    if (!_maxDepthWarned) {\n      _maxDepthWarned = true;\n      console.warn(\n        `[rrweb-snapshot] DOM tree depth exceeded max depth of ${maxDepth}. Children beyond this depth will not be recorded. This may indicate deeply nested DOM structures.`\n      );\n    }\n    return null;\n  }\n  if (!needsMask) {\n    const checkAncestors = needsMask === void 0;\n    needsMask = needMaskingText(\n      n2,\n      maskTextClass,\n      maskTextSelector,\n      checkAncestors\n    );\n  }\n  const _serializedNode = serializeNode(n2, {\n    doc,\n    mirror: mirror2,\n    blockClass,\n    blockSelector,\n    needsMask,\n    inlineStylesheet,\n    maskInputOptions,\n    maskTextFn,\n    maskInputFn,\n    dataURLOptions,\n    inlineImages,\n    recordCanvas,\n    keepIframeSrcFn,\n    newlyAddedElement\n  });\n  if (!_serializedNode) {\n    console.warn(n2, \"not serialized\");\n    return null;\n  }\n  let id;\n  if (mirror2.hasNode(n2)) {\n    id = mirror2.getId(n2);\n  } else if (slimDOMExcluded(_serializedNode, slimDOMOptions) || !preserveWhiteSpace && _serializedNode.type === NodeType$1$1.Text && !_serializedNode.isStyle && !_serializedNode.textContent.replace(/^\\s+|\\s+$/gm, \"\").length) {\n    id = IGNORED_NODE;\n  } else {\n    id = genId();\n  }\n  const serializedNode = Object.assign(_serializedNode, { id });\n  mirror2.add(n2, serializedNode);\n  if (id === IGNORED_NODE) {\n    return null;\n  }\n  if (onSerialize) {\n    onSerialize(n2);\n  }\n  let recordChild = !skipChild;\n  if (serializedNode.type === NodeType$1$1.Element) {\n    recordChild = recordChild && !serializedNode.needBlock;\n    delete serializedNode.needBlock;\n    const shadowRootEl = index$2.shadowRoot(n2);\n    if (shadowRootEl && isNativeShadowDom(shadowRootEl))\n      serializedNode.isShadowHost = true;\n  }\n  if ((serializedNode.type === NodeType$1$1.Document || serializedNode.type === NodeType$1$1.Element) && recordChild) {\n    if (slimDOMOptions.headWhitespace && serializedNode.type === NodeType$1$1.Element && serializedNode.tagName === \"head\") {\n      preserveWhiteSpace = false;\n    }\n    const bypassOptions = {\n      doc,\n      mirror: mirror2,\n      blockClass,\n      blockSelector,\n      needsMask,\n      maskTextClass,\n      maskTextSelector,\n      skipChild,\n      inlineStylesheet,\n      maskInputOptions,\n      maskTextFn,\n      maskInputFn,\n      slimDOMOptions,\n      dataURLOptions,\n      inlineImages,\n      recordCanvas,\n      preserveWhiteSpace,\n      onSerialize,\n      onIframeLoad,\n      iframeLoadTimeout,\n      onStylesheetLoad,\n      stylesheetLoadTimeout,\n      keepIframeSrcFn,\n      depth: depth + 1,\n      maxDepth\n    };\n    if (serializedNode.type === NodeType$1$1.Element && serializedNode.tagName === \"textarea\" && serializedNode.attributes.value !== void 0) ;\n    else {\n      for (const childN of Array.from(index$2.childNodes(n2))) {\n        const serializedChildNode = serializeNodeWithId(childN, bypassOptions);\n        if (serializedChildNode) {\n          serializedNode.childNodes.push(serializedChildNode);\n        }\n      }\n    }\n    let shadowRootEl = null;\n    if (isElement$1(n2) && (shadowRootEl = index$2.shadowRoot(n2))) {\n      for (const childN of Array.from(index$2.childNodes(shadowRootEl))) {\n        const serializedChildNode = serializeNodeWithId(childN, bypassOptions);\n        if (serializedChildNode) {\n          isNativeShadowDom(shadowRootEl) && (serializedChildNode.isShadow = true);\n          serializedNode.childNodes.push(serializedChildNode);\n        }\n      }\n    }\n  }\n  const parent = index$2.parentNode(n2);\n  if (parent && isShadowRoot(parent) && isNativeShadowDom(parent)) {\n    serializedNode.isShadow = true;\n  }\n  if (serializedNode.type === NodeType$1$1.Element && serializedNode.tagName === \"iframe\") {\n    onceIframeLoaded(\n      n2,\n      () => {\n        const iframeDoc = n2.contentDocument;\n        if (iframeDoc && onIframeLoad) {\n          const serializedIframeNode = serializeNodeWithId(iframeDoc, {\n            doc: iframeDoc,\n            mirror: mirror2,\n            blockClass,\n            blockSelector,\n            needsMask,\n            maskTextClass,\n            maskTextSelector,\n            skipChild: false,\n            inlineStylesheet,\n            maskInputOptions,\n            maskTextFn,\n            maskInputFn,\n            slimDOMOptions,\n            dataURLOptions,\n            inlineImages,\n            recordCanvas,\n            preserveWhiteSpace,\n            onSerialize,\n            onIframeLoad,\n            iframeLoadTimeout,\n            onStylesheetLoad,\n            stylesheetLoadTimeout,\n            keepIframeSrcFn,\n            depth: depth + 1,\n            maxDepth\n          });\n          if (serializedIframeNode) {\n            onIframeLoad(\n              n2,\n              serializedIframeNode\n            );\n          }\n        }\n      },\n      iframeLoadTimeout\n    );\n  }\n  if (serializedNode.type === NodeType$1$1.Element && serializedNode.tagName === \"link\" && typeof serializedNode.attributes.rel === \"string\" && (serializedNode.attributes.rel === \"stylesheet\" || serializedNode.attributes.rel === \"preload\" && typeof serializedNode.attributes.href === \"string\" && extractFileExtension(serializedNode.attributes.href) === \"css\")) {\n    onceStylesheetLoaded(\n      n2,\n      () => {\n        if (onStylesheetLoad) {\n          const serializedLinkNode = serializeNodeWithId(n2, {\n            doc,\n            mirror: mirror2,\n            blockClass,\n            blockSelector,\n            needsMask,\n            maskTextClass,\n            maskTextSelector,\n            skipChild: false,\n            inlineStylesheet,\n            maskInputOptions,\n            maskTextFn,\n            maskInputFn,\n            slimDOMOptions,\n            dataURLOptions,\n            inlineImages,\n            recordCanvas,\n            preserveWhiteSpace,\n            onSerialize,\n            onIframeLoad,\n            iframeLoadTimeout,\n            onStylesheetLoad,\n            stylesheetLoadTimeout,\n            keepIframeSrcFn,\n            depth,\n            maxDepth\n          });\n          if (serializedLinkNode) {\n            onStylesheetLoad(\n              n2,\n              serializedLinkNode\n            );\n          }\n        }\n      },\n      stylesheetLoadTimeout\n    );\n  }\n  return serializedNode;\n}\nfunction snapshot(n2, options) {\n  const {\n    mirror: mirror2 = new Mirror(),\n    blockClass = \"rr-block\",\n    blockSelector = null,\n    maskTextClass = \"rr-mask\",\n    maskTextSelector = null,\n    inlineStylesheet = true,\n    inlineImages = false,\n    recordCanvas = false,\n    maskAllInputs = false,\n    maskTextFn,\n    maskInputFn,\n    slimDOM = false,\n    dataURLOptions,\n    preserveWhiteSpace,\n    onSerialize,\n    onIframeLoad,\n    iframeLoadTimeout,\n    onStylesheetLoad,\n    stylesheetLoadTimeout,\n    keepIframeSrcFn = () => false,\n    maxDepth\n  } = options || {};\n  const maskInputOptions = maskAllInputs === true ? {\n    color: true,\n    date: true,\n    \"datetime-local\": true,\n    email: true,\n    month: true,\n    number: true,\n    range: true,\n    search: true,\n    tel: true,\n    text: true,\n    time: true,\n    url: true,\n    week: true,\n    textarea: true,\n    select: true,\n    password: true\n  } : maskAllInputs === false ? {\n    password: true\n  } : maskAllInputs;\n  const slimDOMOptions = slimDOM === true || slimDOM === \"all\" ? (\n    // if true: set of sensible options that should not throw away any information\n    {\n      script: true,\n      comment: true,\n      headFavicon: true,\n      headWhitespace: true,\n      headMetaDescKeywords: slimDOM === \"all\",\n      // destructive\n      headMetaSocial: true,\n      headMetaRobots: true,\n      headMetaHttpEquiv: true,\n      headMetaAuthorship: true,\n      headMetaVerification: true\n    }\n  ) : slimDOM === false ? {} : slimDOM;\n  return serializeNodeWithId(n2, {\n    doc: n2,\n    mirror: mirror2,\n    blockClass,\n    blockSelector,\n    maskTextClass,\n    maskTextSelector,\n    skipChild: false,\n    inlineStylesheet,\n    maskInputOptions,\n    maskTextFn,\n    maskInputFn,\n    slimDOMOptions,\n    dataURLOptions,\n    inlineImages,\n    recordCanvas,\n    preserveWhiteSpace,\n    onSerialize,\n    onIframeLoad,\n    iframeLoadTimeout,\n    onStylesheetLoad,\n    stylesheetLoadTimeout,\n    keepIframeSrcFn,\n    newlyAddedElement: false,\n    maxDepth\n  });\n}\nfunction getDefaultExportFromCjs$1(x) {\n  return x && x.__esModule && Object.prototype.hasOwnProperty.call(x, \"default\") ? x[\"default\"] : x;\n}\nfunction getAugmentedNamespace$1(n2) {\n  if (Object.prototype.hasOwnProperty.call(n2, \"__esModule\")) return n2;\n  var f2 = n2.default;\n  if (typeof f2 == \"function\") {\n    var a2 = function a3() {\n      if (this instanceof a3) {\n        return Reflect.construct(f2, arguments, this.constructor);\n      }\n      return f2.apply(this, arguments);\n    };\n    a2.prototype = f2.prototype;\n  } else a2 = {};\n  Object.defineProperty(a2, \"__esModule\", { value: true });\n  Object.keys(n2).forEach(function(k) {\n    var d2 = Object.getOwnPropertyDescriptor(n2, k);\n    Object.defineProperty(a2, k, d2.get ? d2 : {\n      enumerable: true,\n      get: function() {\n        return n2[k];\n      }\n    });\n  });\n  return a2;\n}\nvar picocolors_browser$1 = { exports: {} };\nvar hasRequiredPicocolors_browser$1;\nfunction requirePicocolors_browser$1() {\n  if (hasRequiredPicocolors_browser$1) return picocolors_browser$1.exports;\n  hasRequiredPicocolors_browser$1 = 1;\n  var x = String;\n  var create = function() {\n    return { isColorSupported: false, reset: x, bold: x, dim: x, italic: x, underline: x, inverse: x, hidden: x, strikethrough: x, black: x, red: x, green: x, yellow: x, blue: x, magenta: x, cyan: x, white: x, gray: x, bgBlack: x, bgRed: x, bgGreen: x, bgYellow: x, bgBlue: x, bgMagenta: x, bgCyan: x, bgWhite: x, blackBright: x, redBright: x, greenBright: x, yellowBright: x, blueBright: x, magentaBright: x, cyanBright: x, whiteBright: x, bgBlackBright: x, bgRedBright: x, bgGreenBright: x, bgYellowBright: x, bgBlueBright: x, bgMagentaBright: x, bgCyanBright: x, bgWhiteBright: x };\n  };\n  picocolors_browser$1.exports = create();\n  picocolors_browser$1.exports.createColors = create;\n  return picocolors_browser$1.exports;\n}\nconst __viteBrowserExternal$2 = {};\nconst __viteBrowserExternal$1$1 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null,\n  default: __viteBrowserExternal$2\n}, Symbol.toStringTag, { value: \"Module\" }));\nconst require$$2$1 = /* @__PURE__ */ getAugmentedNamespace$1(__viteBrowserExternal$1$1);\nvar cssSyntaxError$1;\nvar hasRequiredCssSyntaxError$1;\nfunction requireCssSyntaxError$1() {\n  if (hasRequiredCssSyntaxError$1) return cssSyntaxError$1;\n  hasRequiredCssSyntaxError$1 = 1;\n  let pico = /* @__PURE__ */ requirePicocolors_browser$1();\n  let terminalHighlight = require$$2$1;\n  class CssSyntaxError extends Error {\n    constructor(message, line, column, source, file, plugin) {\n      super(message);\n      this.name = \"CssSyntaxError\";\n      this.reason = message;\n      if (file) {\n        this.file = file;\n      }\n      if (source) {\n        this.source = source;\n      }\n      if (plugin) {\n        this.plugin = plugin;\n      }\n      if (typeof line !== \"undefined\" && typeof column !== \"undefined\") {\n        if (typeof line === \"number\") {\n          this.line = line;\n          this.column = column;\n        } else {\n          this.line = line.line;\n          this.column = line.column;\n          this.endLine = column.line;\n          this.endColumn = column.column;\n        }\n      }\n      this.setMessage();\n      if (Error.captureStackTrace) {\n        Error.captureStackTrace(this, CssSyntaxError);\n      }\n    }\n    setMessage() {\n      this.message = this.plugin ? this.plugin + \": \" : \"\";\n      this.message += this.file ? this.file : \"<css input>\";\n      if (typeof this.line !== \"undefined\") {\n        this.message += \":\" + this.line + \":\" + this.column;\n      }\n      this.message += \": \" + this.reason;\n    }\n    showSourceCode(color) {\n      if (!this.source) return \"\";\n      let css = this.source;\n      if (color == null) color = pico.isColorSupported;\n      let aside = (text) => text;\n      let mark = (text) => text;\n      let highlight = (text) => text;\n      if (color) {\n        let { bold, gray, red } = pico.createColors(true);\n        mark = (text) => bold(red(text));\n        aside = (text) => gray(text);\n        if (terminalHighlight) {\n          highlight = (text) => terminalHighlight(text);\n        }\n      }\n      let lines = css.split(/\\r?\\n/);\n      let start = Math.max(this.line - 3, 0);\n      let end = Math.min(this.line + 2, lines.length);\n      let maxWidth = String(end).length;\n      return lines.slice(start, end).map((line, index2) => {\n        let number = start + 1 + index2;\n        let gutter = \" \" + (\" \" + number).slice(-maxWidth) + \" | \";\n        if (number === this.line) {\n          if (line.length > 160) {\n            let padding = 20;\n            let subLineStart = Math.max(0, this.column - padding);\n            let subLineEnd = Math.max(\n              this.column + padding,\n              this.endColumn + padding\n            );\n            let subLine = line.slice(subLineStart, subLineEnd);\n            let spacing2 = aside(gutter.replace(/\\d/g, \" \")) + line.slice(0, Math.min(this.column - 1, padding - 1)).replace(/[^\\t]/g, \" \");\n            return mark(\">\") + aside(gutter) + highlight(subLine) + \"\\n \" + spacing2 + mark(\"^\");\n          }\n          let spacing = aside(gutter.replace(/\\d/g, \" \")) + line.slice(0, this.column - 1).replace(/[^\\t]/g, \" \");\n          return mark(\">\") + aside(gutter) + highlight(line) + \"\\n \" + spacing + mark(\"^\");\n        }\n        return \" \" + aside(gutter) + highlight(line);\n      }).join(\"\\n\");\n    }\n    toString() {\n      let code = this.showSourceCode();\n      if (code) {\n        code = \"\\n\\n\" + code + \"\\n\";\n      }\n      return this.name + \": \" + this.message + code;\n    }\n  }\n  cssSyntaxError$1 = CssSyntaxError;\n  CssSyntaxError.default = CssSyntaxError;\n  return cssSyntaxError$1;\n}\nvar stringifier$1;\nvar hasRequiredStringifier$1;\nfunction requireStringifier$1() {\n  if (hasRequiredStringifier$1) return stringifier$1;\n  hasRequiredStringifier$1 = 1;\n  const DEFAULT_RAW = {\n    after: \"\\n\",\n    beforeClose: \"\\n\",\n    beforeComment: \"\\n\",\n    beforeDecl: \"\\n\",\n    beforeOpen: \" \",\n    beforeRule: \"\\n\",\n    colon: \": \",\n    commentLeft: \" \",\n    commentRight: \" \",\n    emptyBody: \"\",\n    indent: \"    \",\n    semicolon: false\n  };\n  function capitalize(str) {\n    return str[0].toUpperCase() + str.slice(1);\n  }\n  class Stringifier {\n    constructor(builder) {\n      this.builder = builder;\n    }\n    atrule(node2, semicolon) {\n      let name = \"@\" + node2.name;\n      let params = node2.params ? this.rawValue(node2, \"params\") : \"\";\n      if (typeof node2.raws.afterName !== \"undefined\") {\n        name += node2.raws.afterName;\n      } else if (params) {\n        name += \" \";\n      }\n      if (node2.nodes) {\n        this.block(node2, name + params);\n      } else {\n        let end = (node2.raws.between || \"\") + (semicolon ? \";\" : \"\");\n        this.builder(name + params + end, node2);\n      }\n    }\n    beforeAfter(node2, detect) {\n      let value;\n      if (node2.type === \"decl\") {\n        value = this.raw(node2, null, \"beforeDecl\");\n      } else if (node2.type === \"comment\") {\n        value = this.raw(node2, null, \"beforeComment\");\n      } else if (detect === \"before\") {\n        value = this.raw(node2, null, \"beforeRule\");\n      } else {\n        value = this.raw(node2, null, \"beforeClose\");\n      }\n      let buf = node2.parent;\n      let depth = 0;\n      while (buf && buf.type !== \"root\") {\n        depth += 1;\n        buf = buf.parent;\n      }\n      if (value.includes(\"\\n\")) {\n        let indent = this.raw(node2, null, \"indent\");\n        if (indent.length) {\n          for (let step = 0; step < depth; step++) value += indent;\n        }\n      }\n      return value;\n    }\n    block(node2, start) {\n      let between = this.raw(node2, \"between\", \"beforeOpen\");\n      this.builder(start + between + \"{\", node2, \"start\");\n      let after;\n      if (node2.nodes && node2.nodes.length) {\n        this.body(node2);\n        after = this.raw(node2, \"after\");\n      } else {\n        after = this.raw(node2, \"after\", \"emptyBody\");\n      }\n      if (after) this.builder(after);\n      this.builder(\"}\", node2, \"end\");\n    }\n    body(node2) {\n      let last = node2.nodes.length - 1;\n      while (last > 0) {\n        if (node2.nodes[last].type !== \"comment\") break;\n        last -= 1;\n      }\n      let semicolon = this.raw(node2, \"semicolon\");\n      for (let i2 = 0; i2 < node2.nodes.length; i2++) {\n        let child = node2.nodes[i2];\n        let before = this.raw(child, \"before\");\n        if (before) this.builder(before);\n        this.stringify(child, last !== i2 || semicolon);\n      }\n    }\n    comment(node2) {\n      let left = this.raw(node2, \"left\", \"commentLeft\");\n      let right = this.raw(node2, \"right\", \"commentRight\");\n      this.builder(\"/*\" + left + node2.text + right + \"*/\", node2);\n    }\n    decl(node2, semicolon) {\n      let between = this.raw(node2, \"between\", \"colon\");\n      let string = node2.prop + between + this.rawValue(node2, \"value\");\n      if (node2.important) {\n        string += node2.raws.important || \" !important\";\n      }\n      if (semicolon) string += \";\";\n      this.builder(string, node2);\n    }\n    document(node2) {\n      this.body(node2);\n    }\n    raw(node2, own, detect) {\n      let value;\n      if (!detect) detect = own;\n      if (own) {\n        value = node2.raws[own];\n        if (typeof value !== \"undefined\") return value;\n      }\n      let parent = node2.parent;\n      if (detect === \"before\") {\n        if (!parent || parent.type === \"root\" && parent.first === node2) {\n          return \"\";\n        }\n        if (parent && parent.type === \"document\") {\n          return \"\";\n        }\n      }\n      if (!parent) return DEFAULT_RAW[detect];\n      let root2 = node2.root();\n      if (!root2.rawCache) root2.rawCache = {};\n      if (typeof root2.rawCache[detect] !== \"undefined\") {\n        return root2.rawCache[detect];\n      }\n      if (detect === \"before\" || detect === \"after\") {\n        return this.beforeAfter(node2, detect);\n      } else {\n        let method = \"raw\" + capitalize(detect);\n        if (this[method]) {\n          value = this[method](root2, node2);\n        } else {\n          root2.walk((i2) => {\n            value = i2.raws[own];\n            if (typeof value !== \"undefined\") return false;\n          });\n        }\n      }\n      if (typeof value === \"undefined\") value = DEFAULT_RAW[detect];\n      root2.rawCache[detect] = value;\n      return value;\n    }\n    rawBeforeClose(root2) {\n      let value;\n      root2.walk((i2) => {\n        if (i2.nodes && i2.nodes.length > 0) {\n          if (typeof i2.raws.after !== \"undefined\") {\n            value = i2.raws.after;\n            if (value.includes(\"\\n\")) {\n              value = value.replace(/[^\\n]+$/, \"\");\n            }\n            return false;\n          }\n        }\n      });\n      if (value) value = value.replace(/\\S/g, \"\");\n      return value;\n    }\n    rawBeforeComment(root2, node2) {\n      let value;\n      root2.walkComments((i2) => {\n        if (typeof i2.raws.before !== \"undefined\") {\n          value = i2.raws.before;\n          if (value.includes(\"\\n\")) {\n            value = value.replace(/[^\\n]+$/, \"\");\n          }\n          return false;\n        }\n      });\n      if (typeof value === \"undefined\") {\n        value = this.raw(node2, null, \"beforeDecl\");\n      } else if (value) {\n        value = value.replace(/\\S/g, \"\");\n      }\n      return value;\n    }\n    rawBeforeDecl(root2, node2) {\n      let value;\n      root2.walkDecls((i2) => {\n        if (typeof i2.raws.before !== \"undefined\") {\n          value = i2.raws.before;\n          if (value.includes(\"\\n\")) {\n            value = value.replace(/[^\\n]+$/, \"\");\n          }\n          return false;\n        }\n      });\n      if (typeof value === \"undefined\") {\n        value = this.raw(node2, null, \"beforeRule\");\n      } else if (value) {\n        value = value.replace(/\\S/g, \"\");\n      }\n      return value;\n    }\n    rawBeforeOpen(root2) {\n      let value;\n      root2.walk((i2) => {\n        if (i2.type !== \"decl\") {\n          value = i2.raws.between;\n          if (typeof value !== \"undefined\") return false;\n        }\n      });\n      return value;\n    }\n    rawBeforeRule(root2) {\n      let value;\n      root2.walk((i2) => {\n        if (i2.nodes && (i2.parent !== root2 || root2.first !== i2)) {\n          if (typeof i2.raws.before !== \"undefined\") {\n            value = i2.raws.before;\n            if (value.includes(\"\\n\")) {\n              value = value.replace(/[^\\n]+$/, \"\");\n            }\n            return false;\n          }\n        }\n      });\n      if (value) value = value.replace(/\\S/g, \"\");\n      return value;\n    }\n    rawColon(root2) {\n      let value;\n      root2.walkDecls((i2) => {\n        if (typeof i2.raws.between !== \"undefined\") {\n          value = i2.raws.between.replace(/[^\\s:]/g, \"\");\n          return false;\n        }\n      });\n      return value;\n    }\n    rawEmptyBody(root2) {\n      let value;\n      root2.walk((i2) => {\n        if (i2.nodes && i2.nodes.length === 0) {\n          value = i2.raws.after;\n          if (typeof value !== \"undefined\") return false;\n        }\n      });\n      return value;\n    }\n    rawIndent(root2) {\n      if (root2.raws.indent) return root2.raws.indent;\n      let value;\n      root2.walk((i2) => {\n        let p2 = i2.parent;\n        if (p2 && p2 !== root2 && p2.parent && p2.parent === root2) {\n          if (typeof i2.raws.before !== \"undefined\") {\n            let parts = i2.raws.before.split(\"\\n\");\n            value = parts[parts.length - 1];\n            value = value.replace(/\\S/g, \"\");\n            return false;\n          }\n        }\n      });\n      return value;\n    }\n    rawSemicolon(root2) {\n      let value;\n      root2.walk((i2) => {\n        if (i2.nodes && i2.nodes.length && i2.last.type === \"decl\") {\n          value = i2.raws.semicolon;\n          if (typeof value !== \"undefined\") return false;\n        }\n      });\n      return value;\n    }\n    rawValue(node2, prop) {\n      let value = node2[prop];\n      let raw = node2.raws[prop];\n      if (raw && raw.value === value) {\n        return raw.raw;\n      }\n      return value;\n    }\n    root(node2) {\n      this.body(node2);\n      if (node2.raws.after) this.builder(node2.raws.after);\n    }\n    rule(node2) {\n      this.block(node2, this.rawValue(node2, \"selector\"));\n      if (node2.raws.ownSemicolon) {\n        this.builder(node2.raws.ownSemicolon, node2, \"end\");\n      }\n    }\n    stringify(node2, semicolon) {\n      if (!this[node2.type]) {\n        throw new Error(\n          \"Unknown AST node type \" + node2.type + \". Maybe you need to change PostCSS stringifier.\"\n        );\n      }\n      this[node2.type](node2, semicolon);\n    }\n  }\n  stringifier$1 = Stringifier;\n  Stringifier.default = Stringifier;\n  return stringifier$1;\n}\nvar stringify_1$1;\nvar hasRequiredStringify$1;\nfunction requireStringify$1() {\n  if (hasRequiredStringify$1) return stringify_1$1;\n  hasRequiredStringify$1 = 1;\n  let Stringifier = requireStringifier$1();\n  function stringify(node2, builder) {\n    let str = new Stringifier(builder);\n    str.stringify(node2);\n  }\n  stringify_1$1 = stringify;\n  stringify.default = stringify;\n  return stringify_1$1;\n}\nvar symbols$1 = {};\nvar hasRequiredSymbols$1;\nfunction requireSymbols$1() {\n  if (hasRequiredSymbols$1) return symbols$1;\n  hasRequiredSymbols$1 = 1;\n  symbols$1.isClean = Symbol(\"isClean\");\n  symbols$1.my = Symbol(\"my\");\n  return symbols$1;\n}\nvar node$1;\nvar hasRequiredNode$1;\nfunction requireNode$1() {\n  if (hasRequiredNode$1) return node$1;\n  hasRequiredNode$1 = 1;\n  let CssSyntaxError = requireCssSyntaxError$1();\n  let Stringifier = requireStringifier$1();\n  let stringify = requireStringify$1();\n  let { isClean, my } = requireSymbols$1();\n  function cloneNode(obj, parent) {\n    let cloned = new obj.constructor();\n    for (let i2 in obj) {\n      if (!Object.prototype.hasOwnProperty.call(obj, i2)) {\n        continue;\n      }\n      if (i2 === \"proxyCache\") continue;\n      let value = obj[i2];\n      let type = typeof value;\n      if (i2 === \"parent\" && type === \"object\") {\n        if (parent) cloned[i2] = parent;\n      } else if (i2 === \"source\") {\n        cloned[i2] = value;\n      } else if (Array.isArray(value)) {\n        cloned[i2] = value.map((j2) => cloneNode(j2, cloned));\n      } else {\n        if (type === \"object\" && value !== null) value = cloneNode(value);\n        cloned[i2] = value;\n      }\n    }\n    return cloned;\n  }\n  function sourceOffset(inputCSS, position) {\n    if (position && typeof position.offset !== \"undefined\") {\n      return position.offset;\n    }\n    let column = 1;\n    let line = 1;\n    let offset = 0;\n    for (let i2 = 0; i2 < inputCSS.length; i2++) {\n      if (line === position.line && column === position.column) {\n        offset = i2;\n        break;\n      }\n      if (inputCSS[i2] === \"\\n\") {\n        column = 1;\n        line += 1;\n      } else {\n        column += 1;\n      }\n    }\n    return offset;\n  }\n  class Node2 {\n    get proxyOf() {\n      return this;\n    }\n    constructor(defaults = {}) {\n      this.raws = {};\n      this[isClean] = false;\n      this[my] = true;\n      for (let name in defaults) {\n        if (name === \"nodes\") {\n          this.nodes = [];\n          for (let node2 of defaults[name]) {\n            if (typeof node2.clone === \"function\") {\n              this.append(node2.clone());\n            } else {\n              this.append(node2);\n            }\n          }\n        } else {\n          this[name] = defaults[name];\n        }\n      }\n    }\n    addToError(error) {\n      error.postcssNode = this;\n      if (error.stack && this.source && /\\n\\s{4}at /.test(error.stack)) {\n        let s2 = this.source;\n        error.stack = error.stack.replace(\n          /\\n\\s{4}at /,\n          `$&${s2.input.from}:${s2.start.line}:${s2.start.column}$&`\n        );\n      }\n      return error;\n    }\n    after(add) {\n      this.parent.insertAfter(this, add);\n      return this;\n    }\n    assign(overrides = {}) {\n      for (let name in overrides) {\n        this[name] = overrides[name];\n      }\n      return this;\n    }\n    before(add) {\n      this.parent.insertBefore(this, add);\n      return this;\n    }\n    cleanRaws(keepBetween) {\n      delete this.raws.before;\n      delete this.raws.after;\n      if (!keepBetween) delete this.raws.between;\n    }\n    clone(overrides = {}) {\n      let cloned = cloneNode(this);\n      for (let name in overrides) {\n        cloned[name] = overrides[name];\n      }\n      return cloned;\n    }\n    cloneAfter(overrides = {}) {\n      let cloned = this.clone(overrides);\n      this.parent.insertAfter(this, cloned);\n      return cloned;\n    }\n    cloneBefore(overrides = {}) {\n      let cloned = this.clone(overrides);\n      this.parent.insertBefore(this, cloned);\n      return cloned;\n    }\n    error(message, opts = {}) {\n      if (this.source) {\n        let { end, start } = this.rangeBy(opts);\n        return this.source.input.error(\n          message,\n          { column: start.column, line: start.line },\n          { column: end.column, line: end.line },\n          opts\n        );\n      }\n      return new CssSyntaxError(message);\n    }\n    getProxyProcessor() {\n      return {\n        get(node2, prop) {\n          if (prop === \"proxyOf\") {\n            return node2;\n          } else if (prop === \"root\") {\n            return () => node2.root().toProxy();\n          } else {\n            return node2[prop];\n          }\n        },\n        set(node2, prop, value) {\n          if (node2[prop] === value) return true;\n          node2[prop] = value;\n          if (prop === \"prop\" || prop === \"value\" || prop === \"name\" || prop === \"params\" || prop === \"important\" || /* c8 ignore next */\n          prop === \"text\") {\n            node2.markDirty();\n          }\n          return true;\n        }\n      };\n    }\n    /* c8 ignore next 3 */\n    markClean() {\n      this[isClean] = true;\n    }\n    markDirty() {\n      if (this[isClean]) {\n        this[isClean] = false;\n        let next = this;\n        while (next = next.parent) {\n          next[isClean] = false;\n        }\n      }\n    }\n    next() {\n      if (!this.parent) return void 0;\n      let index2 = this.parent.index(this);\n      return this.parent.nodes[index2 + 1];\n    }\n    positionBy(opts = {}) {\n      let pos = this.source.start;\n      if (opts.index) {\n        pos = this.positionInside(opts.index);\n      } else if (opts.word) {\n        let inputString = \"document\" in this.source.input ? this.source.input.document : this.source.input.css;\n        let stringRepresentation = inputString.slice(\n          sourceOffset(inputString, this.source.start),\n          sourceOffset(inputString, this.source.end)\n        );\n        let index2 = stringRepresentation.indexOf(opts.word);\n        if (index2 !== -1) pos = this.positionInside(index2);\n      }\n      return pos;\n    }\n    positionInside(index2) {\n      let column = this.source.start.column;\n      let line = this.source.start.line;\n      let inputString = \"document\" in this.source.input ? this.source.input.document : this.source.input.css;\n      let offset = sourceOffset(inputString, this.source.start);\n      let end = offset + index2;\n      for (let i2 = offset; i2 < end; i2++) {\n        if (inputString[i2] === \"\\n\") {\n          column = 1;\n          line += 1;\n        } else {\n          column += 1;\n        }\n      }\n      return { column, line, offset: end };\n    }\n    prev() {\n      if (!this.parent) return void 0;\n      let index2 = this.parent.index(this);\n      return this.parent.nodes[index2 - 1];\n    }\n    rangeBy(opts = {}) {\n      let inputString = \"document\" in this.source.input ? this.source.input.document : this.source.input.css;\n      let start = {\n        column: this.source.start.column,\n        line: this.source.start.line,\n        offset: sourceOffset(inputString, this.source.start)\n      };\n      let end = this.source.end ? {\n        column: this.source.end.column + 1,\n        line: this.source.end.line,\n        offset: typeof this.source.end.offset === \"number\" ? (\n          // `source.end.offset` is exclusive, so we don't need to add 1\n          this.source.end.offset\n        ) : (\n          // Since line/column in this.source.end is inclusive,\n          // the `sourceOffset(... , this.source.end)` returns an inclusive offset.\n          // So, we add 1 to convert it to exclusive.\n          sourceOffset(inputString, this.source.end) + 1\n        )\n      } : {\n        column: start.column + 1,\n        line: start.line,\n        offset: start.offset + 1\n      };\n      if (opts.word) {\n        let stringRepresentation = inputString.slice(\n          sourceOffset(inputString, this.source.start),\n          sourceOffset(inputString, this.source.end)\n        );\n        let index2 = stringRepresentation.indexOf(opts.word);\n        if (index2 !== -1) {\n          start = this.positionInside(index2);\n          end = this.positionInside(index2 + opts.word.length);\n        }\n      } else {\n        if (opts.start) {\n          start = {\n            column: opts.start.column,\n            line: opts.start.line,\n            offset: sourceOffset(inputString, opts.start)\n          };\n        } else if (opts.index) {\n          start = this.positionInside(opts.index);\n        }\n        if (opts.end) {\n          end = {\n            column: opts.end.column,\n            line: opts.end.line,\n            offset: sourceOffset(inputString, opts.end)\n          };\n        } else if (typeof opts.endIndex === \"number\") {\n          end = this.positionInside(opts.endIndex);\n        } else if (opts.index) {\n          end = this.positionInside(opts.index + 1);\n        }\n      }\n      if (end.line < start.line || end.line === start.line && end.column <= start.column) {\n        end = {\n          column: start.column + 1,\n          line: start.line,\n          offset: start.offset + 1\n        };\n      }\n      return { end, start };\n    }\n    raw(prop, defaultType) {\n      let str = new Stringifier();\n      return str.raw(this, prop, defaultType);\n    }\n    remove() {\n      if (this.parent) {\n        this.parent.removeChild(this);\n      }\n      this.parent = void 0;\n      return this;\n    }\n    replaceWith(...nodes) {\n      if (this.parent) {\n        let bookmark = this;\n        let foundSelf = false;\n        for (let node2 of nodes) {\n          if (node2 === this) {\n            foundSelf = true;\n          } else if (foundSelf) {\n            this.parent.insertAfter(bookmark, node2);\n            bookmark = node2;\n          } else {\n            this.parent.insertBefore(bookmark, node2);\n          }\n        }\n        if (!foundSelf) {\n          this.remove();\n        }\n      }\n      return this;\n    }\n    root() {\n      let result2 = this;\n      while (result2.parent && result2.parent.type !== \"document\") {\n        result2 = result2.parent;\n      }\n      return result2;\n    }\n    toJSON(_, inputs) {\n      let fixed = {};\n      let emitInputs = inputs == null;\n      inputs = inputs || /* @__PURE__ */ new Map();\n      let inputsNextIndex = 0;\n      for (let name in this) {\n        if (!Object.prototype.hasOwnProperty.call(this, name)) {\n          continue;\n        }\n        if (name === \"parent\" || name === \"proxyCache\") continue;\n        let value = this[name];\n        if (Array.isArray(value)) {\n          fixed[name] = value.map((i2) => {\n            if (typeof i2 === \"object\" && i2.toJSON) {\n              return i2.toJSON(null, inputs);\n            } else {\n              return i2;\n            }\n          });\n        } else if (typeof value === \"object\" && value.toJSON) {\n          fixed[name] = value.toJSON(null, inputs);\n        } else if (name === \"source\") {\n          if (value == null) continue;\n          let inputId = inputs.get(value.input);\n          if (inputId == null) {\n            inputId = inputsNextIndex;\n            inputs.set(value.input, inputsNextIndex);\n            inputsNextIndex++;\n          }\n          fixed[name] = {\n            end: value.end,\n            inputId,\n            start: value.start\n          };\n        } else {\n          fixed[name] = value;\n        }\n      }\n      if (emitInputs) {\n        fixed.inputs = [...inputs.keys()].map((input2) => input2.toJSON());\n      }\n      return fixed;\n    }\n    toProxy() {\n      if (!this.proxyCache) {\n        this.proxyCache = new Proxy(this, this.getProxyProcessor());\n      }\n      return this.proxyCache;\n    }\n    toString(stringifier2 = stringify) {\n      if (stringifier2.stringify) stringifier2 = stringifier2.stringify;\n      let result2 = \"\";\n      stringifier2(this, (i2) => {\n        result2 += i2;\n      });\n      return result2;\n    }\n    warn(result2, text, opts = {}) {\n      let data = { node: this };\n      for (let i2 in opts) data[i2] = opts[i2];\n      return result2.warn(text, data);\n    }\n  }\n  node$1 = Node2;\n  Node2.default = Node2;\n  return node$1;\n}\nvar comment$1;\nvar hasRequiredComment$1;\nfunction requireComment$1() {\n  if (hasRequiredComment$1) return comment$1;\n  hasRequiredComment$1 = 1;\n  let Node2 = requireNode$1();\n  class Comment extends Node2 {\n    constructor(defaults) {\n      super(defaults);\n      this.type = \"comment\";\n    }\n  }\n  comment$1 = Comment;\n  Comment.default = Comment;\n  return comment$1;\n}\nvar declaration$1;\nvar hasRequiredDeclaration$1;\nfunction requireDeclaration$1() {\n  if (hasRequiredDeclaration$1) return declaration$1;\n  hasRequiredDeclaration$1 = 1;\n  let Node2 = requireNode$1();\n  class Declaration extends Node2 {\n    get variable() {\n      return this.prop.startsWith(\"--\") || this.prop[0] === \"$\";\n    }\n    constructor(defaults) {\n      if (defaults && typeof defaults.value !== \"undefined\" && typeof defaults.value !== \"string\") {\n        defaults = { ...defaults, value: String(defaults.value) };\n      }\n      super(defaults);\n      this.type = \"decl\";\n    }\n  }\n  declaration$1 = Declaration;\n  Declaration.default = Declaration;\n  return declaration$1;\n}\nvar container$1;\nvar hasRequiredContainer$1;\nfunction requireContainer$1() {\n  if (hasRequiredContainer$1) return container$1;\n  hasRequiredContainer$1 = 1;\n  let Comment = requireComment$1();\n  let Declaration = requireDeclaration$1();\n  let Node2 = requireNode$1();\n  let { isClean, my } = requireSymbols$1();\n  let AtRule, parse, Root, Rule;\n  function cleanSource(nodes) {\n    return nodes.map((i2) => {\n      if (i2.nodes) i2.nodes = cleanSource(i2.nodes);\n      delete i2.source;\n      return i2;\n    });\n  }\n  function markTreeDirty(node2) {\n    node2[isClean] = false;\n    if (node2.proxyOf.nodes) {\n      for (let i2 of node2.proxyOf.nodes) {\n        markTreeDirty(i2);\n      }\n    }\n  }\n  class Container extends Node2 {\n    get first() {\n      if (!this.proxyOf.nodes) return void 0;\n      return this.proxyOf.nodes[0];\n    }\n    get last() {\n      if (!this.proxyOf.nodes) return void 0;\n      return this.proxyOf.nodes[this.proxyOf.nodes.length - 1];\n    }\n    append(...children) {\n      for (let child of children) {\n        let nodes = this.normalize(child, this.last);\n        for (let node2 of nodes) this.proxyOf.nodes.push(node2);\n      }\n      this.markDirty();\n      return this;\n    }\n    cleanRaws(keepBetween) {\n      super.cleanRaws(keepBetween);\n      if (this.nodes) {\n        for (let node2 of this.nodes) node2.cleanRaws(keepBetween);\n      }\n    }\n    each(callback) {\n      if (!this.proxyOf.nodes) return void 0;\n      let iterator = this.getIterator();\n      let index2, result2;\n      while (this.indexes[iterator] < this.proxyOf.nodes.length) {\n        index2 = this.indexes[iterator];\n        result2 = callback(this.proxyOf.nodes[index2], index2);\n        if (result2 === false) break;\n        this.indexes[iterator] += 1;\n      }\n      delete this.indexes[iterator];\n      return result2;\n    }\n    every(condition) {\n      return this.nodes.every(condition);\n    }\n    getIterator() {\n      if (!this.lastEach) this.lastEach = 0;\n      if (!this.indexes) this.indexes = {};\n      this.lastEach += 1;\n      let iterator = this.lastEach;\n      this.indexes[iterator] = 0;\n      return iterator;\n    }\n    getProxyProcessor() {\n      return {\n        get(node2, prop) {\n          if (prop === \"proxyOf\") {\n            return node2;\n          } else if (!node2[prop]) {\n            return node2[prop];\n          } else if (prop === \"each\" || typeof prop === \"string\" && prop.startsWith(\"walk\")) {\n            return (...args) => {\n              return node2[prop](\n                ...args.map((i2) => {\n                  if (typeof i2 === \"function\") {\n                    return (child, index2) => i2(child.toProxy(), index2);\n                  } else {\n                    return i2;\n                  }\n                })\n              );\n            };\n          } else if (prop === \"every\" || prop === \"some\") {\n            return (cb) => {\n              return node2[prop](\n                (child, ...other) => cb(child.toProxy(), ...other)\n              );\n            };\n          } else if (prop === \"root\") {\n            return () => node2.root().toProxy();\n          } else if (prop === \"nodes\") {\n            return node2.nodes.map((i2) => i2.toProxy());\n          } else if (prop === \"first\" || prop === \"last\") {\n            return node2[prop].toProxy();\n          } else {\n            return node2[prop];\n          }\n        },\n        set(node2, prop, value) {\n          if (node2[prop] === value) return true;\n          node2[prop] = value;\n          if (prop === \"name\" || prop === \"params\" || prop === \"selector\") {\n            node2.markDirty();\n          }\n          return true;\n        }\n      };\n    }\n    index(child) {\n      if (typeof child === \"number\") return child;\n      if (child.proxyOf) child = child.proxyOf;\n      return this.proxyOf.nodes.indexOf(child);\n    }\n    insertAfter(exist, add) {\n      let existIndex = this.index(exist);\n      let nodes = this.normalize(add, this.proxyOf.nodes[existIndex]).reverse();\n      existIndex = this.index(exist);\n      for (let node2 of nodes) this.proxyOf.nodes.splice(existIndex + 1, 0, node2);\n      let index2;\n      for (let id in this.indexes) {\n        index2 = this.indexes[id];\n        if (existIndex < index2) {\n          this.indexes[id] = index2 + nodes.length;\n        }\n      }\n      this.markDirty();\n      return this;\n    }\n    insertBefore(exist, add) {\n      let existIndex = this.index(exist);\n      let type = existIndex === 0 ? \"prepend\" : false;\n      let nodes = this.normalize(\n        add,\n        this.proxyOf.nodes[existIndex],\n        type\n      ).reverse();\n      existIndex = this.index(exist);\n      for (let node2 of nodes) this.proxyOf.nodes.splice(existIndex, 0, node2);\n      let index2;\n      for (let id in this.indexes) {\n        index2 = this.indexes[id];\n        if (existIndex <= index2) {\n          this.indexes[id] = index2 + nodes.length;\n        }\n      }\n      this.markDirty();\n      return this;\n    }\n    normalize(nodes, sample) {\n      if (typeof nodes === \"string\") {\n        nodes = cleanSource(parse(nodes).nodes);\n      } else if (typeof nodes === \"undefined\") {\n        nodes = [];\n      } else if (Array.isArray(nodes)) {\n        nodes = nodes.slice(0);\n        for (let i2 of nodes) {\n          if (i2.parent) i2.parent.removeChild(i2, \"ignore\");\n        }\n      } else if (nodes.type === \"root\" && this.type !== \"document\") {\n        nodes = nodes.nodes.slice(0);\n        for (let i2 of nodes) {\n          if (i2.parent) i2.parent.removeChild(i2, \"ignore\");\n        }\n      } else if (nodes.type) {\n        nodes = [nodes];\n      } else if (nodes.prop) {\n        if (typeof nodes.value === \"undefined\") {\n          throw new Error(\"Value field is missed in node creation\");\n        } else if (typeof nodes.value !== \"string\") {\n          nodes.value = String(nodes.value);\n        }\n        nodes = [new Declaration(nodes)];\n      } else if (nodes.selector || nodes.selectors) {\n        nodes = [new Rule(nodes)];\n      } else if (nodes.name) {\n        nodes = [new AtRule(nodes)];\n      } else if (nodes.text) {\n        nodes = [new Comment(nodes)];\n      } else {\n        throw new Error(\"Unknown node type in node creation\");\n      }\n      let processed = nodes.map((i2) => {\n        if (!i2[my]) Container.rebuild(i2);\n        i2 = i2.proxyOf;\n        if (i2.parent) i2.parent.removeChild(i2);\n        if (i2[isClean]) markTreeDirty(i2);\n        if (!i2.raws) i2.raws = {};\n        if (typeof i2.raws.before === \"undefined\") {\n          if (sample && typeof sample.raws.before !== \"undefined\") {\n            i2.raws.before = sample.raws.before.replace(/\\S/g, \"\");\n          }\n        }\n        i2.parent = this.proxyOf;\n        return i2;\n      });\n      return processed;\n    }\n    prepend(...children) {\n      children = children.reverse();\n      for (let child of children) {\n        let nodes = this.normalize(child, this.first, \"prepend\").reverse();\n        for (let node2 of nodes) this.proxyOf.nodes.unshift(node2);\n        for (let id in this.indexes) {\n          this.indexes[id] = this.indexes[id] + nodes.length;\n        }\n      }\n      this.markDirty();\n      return this;\n    }\n    push(child) {\n      child.parent = this;\n      this.proxyOf.nodes.push(child);\n      return this;\n    }\n    removeAll() {\n      for (let node2 of this.proxyOf.nodes) node2.parent = void 0;\n      this.proxyOf.nodes = [];\n      this.markDirty();\n      return this;\n    }\n    removeChild(child) {\n      child = this.index(child);\n      this.proxyOf.nodes[child].parent = void 0;\n      this.proxyOf.nodes.splice(child, 1);\n      let index2;\n      for (let id in this.indexes) {\n        index2 = this.indexes[id];\n        if (index2 >= child) {\n          this.indexes[id] = index2 - 1;\n        }\n      }\n      this.markDirty();\n      return this;\n    }\n    replaceValues(pattern, opts, callback) {\n      if (!callback) {\n        callback = opts;\n        opts = {};\n      }\n      this.walkDecls((decl) => {\n        if (opts.props && !opts.props.includes(decl.prop)) return;\n        if (opts.fast && !decl.value.includes(opts.fast)) return;\n        decl.value = decl.value.replace(pattern, callback);\n      });\n      this.markDirty();\n      return this;\n    }\n    some(condition) {\n      return this.nodes.some(condition);\n    }\n    walk(callback) {\n      return this.each((child, i2) => {\n        let result2;\n        try {\n          result2 = callback(child, i2);\n        } catch (e2) {\n          throw child.addToError(e2);\n        }\n        if (result2 !== false && child.walk) {\n          result2 = child.walk(callback);\n        }\n        return result2;\n      });\n    }\n    walkAtRules(name, callback) {\n      if (!callback) {\n        callback = name;\n        return this.walk((child, i2) => {\n          if (child.type === \"atrule\") {\n            return callback(child, i2);\n          }\n        });\n      }\n      if (name instanceof RegExp) {\n        return this.walk((child, i2) => {\n          if (child.type === \"atrule\" && name.test(child.name)) {\n            return callback(child, i2);\n          }\n        });\n      }\n      return this.walk((child, i2) => {\n        if (child.type === \"atrule\" && child.name === name) {\n          return callback(child, i2);\n        }\n      });\n    }\n    walkComments(callback) {\n      return this.walk((child, i2) => {\n        if (child.type === \"comment\") {\n          return callback(child, i2);\n        }\n      });\n    }\n    walkDecls(prop, callback) {\n      if (!callback) {\n        callback = prop;\n        return this.walk((child, i2) => {\n          if (child.type === \"decl\") {\n            return callback(child, i2);\n          }\n        });\n      }\n      if (prop instanceof RegExp) {\n        return this.walk((child, i2) => {\n          if (child.type === \"decl\" && prop.test(child.prop)) {\n            return callback(child, i2);\n          }\n        });\n      }\n      return this.walk((child, i2) => {\n        if (child.type === \"decl\" && child.prop === prop) {\n          return callback(child, i2);\n        }\n      });\n    }\n    walkRules(selector, callback) {\n      if (!callback) {\n        callback = selector;\n        return this.walk((child, i2) => {\n          if (child.type === \"rule\") {\n            return callback(child, i2);\n          }\n        });\n      }\n      if (selector instanceof RegExp) {\n        return this.walk((child, i2) => {\n          if (child.type === \"rule\" && selector.test(child.selector)) {\n            return callback(child, i2);\n          }\n        });\n      }\n      return this.walk((child, i2) => {\n        if (child.type === \"rule\" && child.selector === selector) {\n          return callback(child, i2);\n        }\n      });\n    }\n  }\n  Container.registerParse = (dependant) => {\n    parse = dependant;\n  };\n  Container.registerRule = (dependant) => {\n    Rule = dependant;\n  };\n  Container.registerAtRule = (dependant) => {\n    AtRule = dependant;\n  };\n  Container.registerRoot = (dependant) => {\n    Root = dependant;\n  };\n  container$1 = Container;\n  Container.default = Container;\n  Container.rebuild = (node2) => {\n    if (node2.type === \"atrule\") {\n      Object.setPrototypeOf(node2, AtRule.prototype);\n    } else if (node2.type === \"rule\") {\n      Object.setPrototypeOf(node2, Rule.prototype);\n    } else if (node2.type === \"decl\") {\n      Object.setPrototypeOf(node2, Declaration.prototype);\n    } else if (node2.type === \"comment\") {\n      Object.setPrototypeOf(node2, Comment.prototype);\n    } else if (node2.type === \"root\") {\n      Object.setPrototypeOf(node2, Root.prototype);\n    }\n    node2[my] = true;\n    if (node2.nodes) {\n      node2.nodes.forEach((child) => {\n        Container.rebuild(child);\n      });\n    }\n  };\n  return container$1;\n}\nvar atRule$1;\nvar hasRequiredAtRule$1;\nfunction requireAtRule$1() {\n  if (hasRequiredAtRule$1) return atRule$1;\n  hasRequiredAtRule$1 = 1;\n  let Container = requireContainer$1();\n  class AtRule extends Container {\n    constructor(defaults) {\n      super(defaults);\n      this.type = \"atrule\";\n    }\n    append(...children) {\n      if (!this.proxyOf.nodes) this.nodes = [];\n      return super.append(...children);\n    }\n    prepend(...children) {\n      if (!this.proxyOf.nodes) this.nodes = [];\n      return super.prepend(...children);\n    }\n  }\n  atRule$1 = AtRule;\n  AtRule.default = AtRule;\n  Container.registerAtRule(AtRule);\n  return atRule$1;\n}\nvar document$2;\nvar hasRequiredDocument$1;\nfunction requireDocument$1() {\n  if (hasRequiredDocument$1) return document$2;\n  hasRequiredDocument$1 = 1;\n  let Container = requireContainer$1();\n  let LazyResult, Processor;\n  class Document2 extends Container {\n    constructor(defaults) {\n      super({ type: \"document\", ...defaults });\n      if (!this.nodes) {\n        this.nodes = [];\n      }\n    }\n    toResult(opts = {}) {\n      let lazy = new LazyResult(new Processor(), this, opts);\n      return lazy.stringify();\n    }\n  }\n  Document2.registerLazyResult = (dependant) => {\n    LazyResult = dependant;\n  };\n  Document2.registerProcessor = (dependant) => {\n    Processor = dependant;\n  };\n  document$2 = Document2;\n  Document2.default = Document2;\n  return document$2;\n}\nvar nonSecure$1;\nvar hasRequiredNonSecure$1;\nfunction requireNonSecure$1() {\n  if (hasRequiredNonSecure$1) return nonSecure$1;\n  hasRequiredNonSecure$1 = 1;\n  let urlAlphabet = \"useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict\";\n  let customAlphabet = (alphabet, defaultSize = 21) => {\n    return (size = defaultSize) => {\n      let id = \"\";\n      let i2 = size | 0;\n      while (i2--) {\n        id += alphabet[Math.random() * alphabet.length | 0];\n      }\n      return id;\n    };\n  };\n  let nanoid = (size = 21) => {\n    let id = \"\";\n    let i2 = size | 0;\n    while (i2--) {\n      id += urlAlphabet[Math.random() * 64 | 0];\n    }\n    return id;\n  };\n  nonSecure$1 = { nanoid, customAlphabet };\n  return nonSecure$1;\n}\nvar previousMap$1;\nvar hasRequiredPreviousMap$1;\nfunction requirePreviousMap$1() {\n  if (hasRequiredPreviousMap$1) return previousMap$1;\n  hasRequiredPreviousMap$1 = 1;\n  let { existsSync, readFileSync } = require$$2$1;\n  let { dirname, join } = require$$2$1;\n  let { SourceMapConsumer, SourceMapGenerator } = require$$2$1;\n  function fromBase64(str) {\n    if (Buffer) {\n      return Buffer.from(str, \"base64\").toString();\n    } else {\n      return window.atob(str);\n    }\n  }\n  class PreviousMap {\n    constructor(css, opts) {\n      if (opts.map === false) return;\n      this.loadAnnotation(css);\n      this.inline = this.startWith(this.annotation, \"data:\");\n      let prev = opts.map ? opts.map.prev : void 0;\n      let text = this.loadMap(opts.from, prev);\n      if (!this.mapFile && opts.from) {\n        this.mapFile = opts.from;\n      }\n      if (this.mapFile) this.root = dirname(this.mapFile);\n      if (text) this.text = text;\n    }\n    consumer() {\n      if (!this.consumerCache) {\n        this.consumerCache = new SourceMapConsumer(this.text);\n      }\n      return this.consumerCache;\n    }\n    decodeInline(text) {\n      let baseCharsetUri = /^data:application\\/json;charset=utf-?8;base64,/;\n      let baseUri = /^data:application\\/json;base64,/;\n      let charsetUri = /^data:application\\/json;charset=utf-?8,/;\n      let uri = /^data:application\\/json,/;\n      let uriMatch = text.match(charsetUri) || text.match(uri);\n      if (uriMatch) {\n        return decodeURIComponent(text.substr(uriMatch[0].length));\n      }\n      let baseUriMatch = text.match(baseCharsetUri) || text.match(baseUri);\n      if (baseUriMatch) {\n        return fromBase64(text.substr(baseUriMatch[0].length));\n      }\n      let encoding = text.match(/data:application\\/json;([^,]+),/)[1];\n      throw new Error(\"Unsupported source map encoding \" + encoding);\n    }\n    getAnnotationURL(sourceMapString) {\n      return sourceMapString.replace(/^\\/\\*\\s*# sourceMappingURL=/, \"\").trim();\n    }\n    isMap(map) {\n      if (typeof map !== \"object\") return false;\n      return typeof map.mappings === \"string\" || typeof map._mappings === \"string\" || Array.isArray(map.sections);\n    }\n    loadAnnotation(css) {\n      let comments = css.match(/\\/\\*\\s*# sourceMappingURL=/g);\n      if (!comments) return;\n      let start = css.lastIndexOf(comments.pop());\n      let end = css.indexOf(\"*/\", start);\n      if (start > -1 && end > -1) {\n        this.annotation = this.getAnnotationURL(css.substring(start, end));\n      }\n    }\n    loadFile(path) {\n      this.root = dirname(path);\n      if (existsSync(path)) {\n        this.mapFile = path;\n        return readFileSync(path, \"utf-8\").toString().trim();\n      }\n    }\n    loadMap(file, prev) {\n      if (prev === false) return false;\n      if (prev) {\n        if (typeof prev === \"string\") {\n          return prev;\n        } else if (typeof prev === \"function\") {\n          let prevPath = prev(file);\n          if (prevPath) {\n            let map = this.loadFile(prevPath);\n            if (!map) {\n              throw new Error(\n                \"Unable to load previous source map: \" + prevPath.toString()\n              );\n            }\n            return map;\n          }\n        } else if (prev instanceof SourceMapConsumer) {\n          return SourceMapGenerator.fromSourceMap(prev).toString();\n        } else if (prev instanceof SourceMapGenerator) {\n          return prev.toString();\n        } else if (this.isMap(prev)) {\n          return JSON.stringify(prev);\n        } else {\n          throw new Error(\n            \"Unsupported previous source map format: \" + prev.toString()\n          );\n        }\n      } else if (this.inline) {\n        return this.decodeInline(this.annotation);\n      } else if (this.annotation) {\n        let map = this.annotation;\n        if (file) map = join(dirname(file), map);\n        return this.loadFile(map);\n      }\n    }\n    startWith(string, start) {\n      if (!string) return false;\n      return string.substr(0, start.length) === start;\n    }\n    withContent() {\n      return !!(this.consumer().sourcesContent && this.consumer().sourcesContent.length > 0);\n    }\n  }\n  previousMap$1 = PreviousMap;\n  PreviousMap.default = PreviousMap;\n  return previousMap$1;\n}\nvar input$1;\nvar hasRequiredInput$1;\nfunction requireInput$1() {\n  if (hasRequiredInput$1) return input$1;\n  hasRequiredInput$1 = 1;\n  let { nanoid } = /* @__PURE__ */ requireNonSecure$1();\n  let { isAbsolute, resolve } = require$$2$1;\n  let { SourceMapConsumer, SourceMapGenerator } = require$$2$1;\n  let { fileURLToPath, pathToFileURL } = require$$2$1;\n  let CssSyntaxError = requireCssSyntaxError$1();\n  let PreviousMap = requirePreviousMap$1();\n  let terminalHighlight = require$$2$1;\n  let lineToIndexCache = Symbol(\"lineToIndexCache\");\n  let sourceMapAvailable = Boolean(SourceMapConsumer && SourceMapGenerator);\n  let pathAvailable = Boolean(resolve && isAbsolute);\n  function getLineToIndex(input2) {\n    if (input2[lineToIndexCache]) return input2[lineToIndexCache];\n    let lines = input2.css.split(\"\\n\");\n    let lineToIndex = new Array(lines.length);\n    let prevIndex = 0;\n    for (let i2 = 0, l2 = lines.length; i2 < l2; i2++) {\n      lineToIndex[i2] = prevIndex;\n      prevIndex += lines[i2].length + 1;\n    }\n    input2[lineToIndexCache] = lineToIndex;\n    return lineToIndex;\n  }\n  class Input {\n    get from() {\n      return this.file || this.id;\n    }\n    constructor(css, opts = {}) {\n      if (css === null || typeof css === \"undefined\" || typeof css === \"object\" && !css.toString) {\n        throw new Error(`PostCSS received ${css} instead of CSS string`);\n      }\n      this.css = css.toString();\n      if (this.css[0] === \"\\uFEFF\" || this.css[0] === \"\") {\n        this.hasBOM = true;\n        this.css = this.css.slice(1);\n      } else {\n        this.hasBOM = false;\n      }\n      this.document = this.css;\n      if (opts.document) this.document = opts.document.toString();\n      if (opts.from) {\n        if (!pathAvailable || /^\\w+:\\/\\//.test(opts.from) || isAbsolute(opts.from)) {\n          this.file = opts.from;\n        } else {\n          this.file = resolve(opts.from);\n        }\n      }\n      if (pathAvailable && sourceMapAvailable) {\n        let map = new PreviousMap(this.css, opts);\n        if (map.text) {\n          this.map = map;\n          let file = map.consumer().file;\n          if (!this.file && file) this.file = this.mapResolve(file);\n        }\n      }\n      if (!this.file) {\n        this.id = \"<input css \" + nanoid(6) + \">\";\n      }\n      if (this.map) this.map.file = this.from;\n    }\n    error(message, line, column, opts = {}) {\n      let endColumn, endLine, endOffset, offset, result2;\n      if (line && typeof line === \"object\") {\n        let start = line;\n        let end = column;\n        if (typeof start.offset === \"number\") {\n          offset = start.offset;\n          let pos = this.fromOffset(offset);\n          line = pos.line;\n          column = pos.col;\n        } else {\n          line = start.line;\n          column = start.column;\n          offset = this.fromLineAndColumn(line, column);\n        }\n        if (typeof end.offset === \"number\") {\n          endOffset = end.offset;\n          let pos = this.fromOffset(endOffset);\n          endLine = pos.line;\n          endColumn = pos.col;\n        } else {\n          endLine = end.line;\n          endColumn = end.column;\n          endOffset = this.fromLineAndColumn(end.line, end.column);\n        }\n      } else if (!column) {\n        offset = line;\n        let pos = this.fromOffset(offset);\n        line = pos.line;\n        column = pos.col;\n      } else {\n        offset = this.fromLineAndColumn(line, column);\n      }\n      let origin = this.origin(line, column, endLine, endColumn);\n      if (origin) {\n        result2 = new CssSyntaxError(\n          message,\n          origin.endLine === void 0 ? origin.line : { column: origin.column, line: origin.line },\n          origin.endLine === void 0 ? origin.column : { column: origin.endColumn, line: origin.endLine },\n          origin.source,\n          origin.file,\n          opts.plugin\n        );\n      } else {\n        result2 = new CssSyntaxError(\n          message,\n          endLine === void 0 ? line : { column, line },\n          endLine === void 0 ? column : { column: endColumn, line: endLine },\n          this.css,\n          this.file,\n          opts.plugin\n        );\n      }\n      result2.input = { column, endColumn, endLine, endOffset, line, offset, source: this.css };\n      if (this.file) {\n        if (pathToFileURL) {\n          result2.input.url = pathToFileURL(this.file).toString();\n        }\n        result2.input.file = this.file;\n      }\n      return result2;\n    }\n    fromLineAndColumn(line, column) {\n      let lineToIndex = getLineToIndex(this);\n      let index2 = lineToIndex[line - 1];\n      return index2 + column - 1;\n    }\n    fromOffset(offset) {\n      let lineToIndex = getLineToIndex(this);\n      let lastLine = lineToIndex[lineToIndex.length - 1];\n      let min = 0;\n      if (offset >= lastLine) {\n        min = lineToIndex.length - 1;\n      } else {\n        let max = lineToIndex.length - 2;\n        let mid;\n        while (min < max) {\n          mid = min + (max - min >> 1);\n          if (offset < lineToIndex[mid]) {\n            max = mid - 1;\n          } else if (offset >= lineToIndex[mid + 1]) {\n            min = mid + 1;\n          } else {\n            min = mid;\n            break;\n          }\n        }\n      }\n      return {\n        col: offset - lineToIndex[min] + 1,\n        line: min + 1\n      };\n    }\n    mapResolve(file) {\n      if (/^\\w+:\\/\\//.test(file)) {\n        return file;\n      }\n      return resolve(this.map.consumer().sourceRoot || this.map.root || \".\", file);\n    }\n    origin(line, column, endLine, endColumn) {\n      if (!this.map) return false;\n      let consumer = this.map.consumer();\n      let from = consumer.originalPositionFor({ column, line });\n      if (!from.source) return false;\n      let to;\n      if (typeof endLine === \"number\") {\n        to = consumer.originalPositionFor({ column: endColumn, line: endLine });\n      }\n      let fromUrl;\n      if (isAbsolute(from.source)) {\n        fromUrl = pathToFileURL(from.source);\n      } else {\n        fromUrl = new URL(\n          from.source,\n          this.map.consumer().sourceRoot || pathToFileURL(this.map.mapFile)\n        );\n      }\n      let result2 = {\n        column: from.column,\n        endColumn: to && to.column,\n        endLine: to && to.line,\n        line: from.line,\n        url: fromUrl.toString()\n      };\n      if (fromUrl.protocol === \"file:\") {\n        if (fileURLToPath) {\n          result2.file = fileURLToPath(fromUrl);\n        } else {\n          throw new Error(`file: protocol is not available in this PostCSS build`);\n        }\n      }\n      let source = consumer.sourceContentFor(from.source);\n      if (source) result2.source = source;\n      return result2;\n    }\n    toJSON() {\n      let json = {};\n      for (let name of [\"hasBOM\", \"css\", \"file\", \"id\"]) {\n        if (this[name] != null) {\n          json[name] = this[name];\n        }\n      }\n      if (this.map) {\n        json.map = { ...this.map };\n        if (json.map.consumerCache) {\n          json.map.consumerCache = void 0;\n        }\n      }\n      return json;\n    }\n  }\n  input$1 = Input;\n  Input.default = Input;\n  if (terminalHighlight && terminalHighlight.registerInput) {\n    terminalHighlight.registerInput(Input);\n  }\n  return input$1;\n}\nvar root$1;\nvar hasRequiredRoot$1;\nfunction requireRoot$1() {\n  if (hasRequiredRoot$1) return root$1;\n  hasRequiredRoot$1 = 1;\n  let Container = requireContainer$1();\n  let LazyResult, Processor;\n  class Root extends Container {\n    constructor(defaults) {\n      super(defaults);\n      this.type = \"root\";\n      if (!this.nodes) this.nodes = [];\n    }\n    normalize(child, sample, type) {\n      let nodes = super.normalize(child);\n      if (sample) {\n        if (type === \"prepend\") {\n          if (this.nodes.length > 1) {\n            sample.raws.before = this.nodes[1].raws.before;\n          } else {\n            delete sample.raws.before;\n          }\n        } else if (this.first !== sample) {\n          for (let node2 of nodes) {\n            node2.raws.before = sample.raws.before;\n          }\n        }\n      }\n      return nodes;\n    }\n    removeChild(child, ignore) {\n      let index2 = this.index(child);\n      if (!ignore && index2 === 0 && this.nodes.length > 1) {\n        this.nodes[1].raws.before = this.nodes[index2].raws.before;\n      }\n      return super.removeChild(child);\n    }\n    toResult(opts = {}) {\n      let lazy = new LazyResult(new Processor(), this, opts);\n      return lazy.stringify();\n    }\n  }\n  Root.registerLazyResult = (dependant) => {\n    LazyResult = dependant;\n  };\n  Root.registerProcessor = (dependant) => {\n    Processor = dependant;\n  };\n  root$1 = Root;\n  Root.default = Root;\n  Container.registerRoot(Root);\n  return root$1;\n}\nvar list_1$1;\nvar hasRequiredList$1;\nfunction requireList$1() {\n  if (hasRequiredList$1) return list_1$1;\n  hasRequiredList$1 = 1;\n  let list = {\n    comma(string) {\n      return list.split(string, [\",\"], true);\n    },\n    space(string) {\n      let spaces = [\" \", \"\\n\", \"\t\"];\n      return list.split(string, spaces);\n    },\n    split(string, separators, last) {\n      let array = [];\n      let current = \"\";\n      let split = false;\n      let func = 0;\n      let inQuote = false;\n      let prevQuote = \"\";\n      let escape = false;\n      for (let letter of string) {\n        if (escape) {\n          escape = false;\n        } else if (letter === \"\\\\\") {\n          escape = true;\n        } else if (inQuote) {\n          if (letter === prevQuote) {\n            inQuote = false;\n          }\n        } else if (letter === '\"' || letter === \"'\") {\n          inQuote = true;\n          prevQuote = letter;\n        } else if (letter === \"(\") {\n          func += 1;\n        } else if (letter === \")\") {\n          if (func > 0) func -= 1;\n        } else if (func === 0) {\n          if (separators.includes(letter)) split = true;\n        }\n        if (split) {\n          if (current !== \"\") array.push(current.trim());\n          current = \"\";\n          split = false;\n        } else {\n          current += letter;\n        }\n      }\n      if (last || current !== \"\") array.push(current.trim());\n      return array;\n    }\n  };\n  list_1$1 = list;\n  list.default = list;\n  return list_1$1;\n}\nvar rule$1;\nvar hasRequiredRule$1;\nfunction requireRule$1() {\n  if (hasRequiredRule$1) return rule$1;\n  hasRequiredRule$1 = 1;\n  let Container = requireContainer$1();\n  let list = requireList$1();\n  class Rule extends Container {\n    get selectors() {\n      return list.comma(this.selector);\n    }\n    set selectors(values) {\n      let match = this.selector ? this.selector.match(/,\\s*/) : null;\n      let sep = match ? match[0] : \",\" + this.raw(\"between\", \"beforeOpen\");\n      this.selector = values.join(sep);\n    }\n    constructor(defaults) {\n      super(defaults);\n      this.type = \"rule\";\n      if (!this.nodes) this.nodes = [];\n    }\n  }\n  rule$1 = Rule;\n  Rule.default = Rule;\n  Container.registerRule(Rule);\n  return rule$1;\n}\nvar fromJSON_1$1;\nvar hasRequiredFromJSON$1;\nfunction requireFromJSON$1() {\n  if (hasRequiredFromJSON$1) return fromJSON_1$1;\n  hasRequiredFromJSON$1 = 1;\n  let AtRule = requireAtRule$1();\n  let Comment = requireComment$1();\n  let Declaration = requireDeclaration$1();\n  let Input = requireInput$1();\n  let PreviousMap = requirePreviousMap$1();\n  let Root = requireRoot$1();\n  let Rule = requireRule$1();\n  function fromJSON(json, inputs) {\n    if (Array.isArray(json)) return json.map((n2) => fromJSON(n2));\n    let { inputs: ownInputs, ...defaults } = json;\n    if (ownInputs) {\n      inputs = [];\n      for (let input2 of ownInputs) {\n        let inputHydrated = { ...input2, __proto__: Input.prototype };\n        if (inputHydrated.map) {\n          inputHydrated.map = {\n            ...inputHydrated.map,\n            __proto__: PreviousMap.prototype\n          };\n        }\n        inputs.push(inputHydrated);\n      }\n    }\n    if (defaults.nodes) {\n      defaults.nodes = json.nodes.map((n2) => fromJSON(n2, inputs));\n    }\n    if (defaults.source) {\n      let { inputId, ...source } = defaults.source;\n      defaults.source = source;\n      if (inputId != null) {\n        defaults.source.input = inputs[inputId];\n      }\n    }\n    if (defaults.type === \"root\") {\n      return new Root(defaults);\n    } else if (defaults.type === \"decl\") {\n      return new Declaration(defaults);\n    } else if (defaults.type === \"rule\") {\n      return new Rule(defaults);\n    } else if (defaults.type === \"comment\") {\n      return new Comment(defaults);\n    } else if (defaults.type === \"atrule\") {\n      return new AtRule(defaults);\n    } else {\n      throw new Error(\"Unknown node type: \" + json.type);\n    }\n  }\n  fromJSON_1$1 = fromJSON;\n  fromJSON.default = fromJSON;\n  return fromJSON_1$1;\n}\nvar mapGenerator$1;\nvar hasRequiredMapGenerator$1;\nfunction requireMapGenerator$1() {\n  if (hasRequiredMapGenerator$1) return mapGenerator$1;\n  hasRequiredMapGenerator$1 = 1;\n  let { dirname, relative, resolve, sep } = require$$2$1;\n  let { SourceMapConsumer, SourceMapGenerator } = require$$2$1;\n  let { pathToFileURL } = require$$2$1;\n  let Input = requireInput$1();\n  let sourceMapAvailable = Boolean(SourceMapConsumer && SourceMapGenerator);\n  let pathAvailable = Boolean(dirname && resolve && relative && sep);\n  class MapGenerator {\n    constructor(stringify, root2, opts, cssString) {\n      this.stringify = stringify;\n      this.mapOpts = opts.map || {};\n      this.root = root2;\n      this.opts = opts;\n      this.css = cssString;\n      this.originalCSS = cssString;\n      this.usesFileUrls = !this.mapOpts.from && this.mapOpts.absolute;\n      this.memoizedFileURLs = /* @__PURE__ */ new Map();\n      this.memoizedPaths = /* @__PURE__ */ new Map();\n      this.memoizedURLs = /* @__PURE__ */ new Map();\n    }\n    addAnnotation() {\n      let content;\n      if (this.isInline()) {\n        content = \"data:application/json;base64,\" + this.toBase64(this.map.toString());\n      } else if (typeof this.mapOpts.annotation === \"string\") {\n        content = this.mapOpts.annotation;\n      } else if (typeof this.mapOpts.annotation === \"function\") {\n        content = this.mapOpts.annotation(this.opts.to, this.root);\n      } else {\n        content = this.outputFile() + \".map\";\n      }\n      let eol = \"\\n\";\n      if (this.css.includes(\"\\r\\n\")) eol = \"\\r\\n\";\n      this.css += eol + \"/*# sourceMappingURL=\" + content + \" */\";\n    }\n    applyPrevMaps() {\n      for (let prev of this.previous()) {\n        let from = this.toUrl(this.path(prev.file));\n        let root2 = prev.root || dirname(prev.file);\n        let map;\n        if (this.mapOpts.sourcesContent === false) {\n          map = new SourceMapConsumer(prev.text);\n          if (map.sourcesContent) {\n            map.sourcesContent = null;\n          }\n        } else {\n          map = prev.consumer();\n        }\n        this.map.applySourceMap(map, from, this.toUrl(this.path(root2)));\n      }\n    }\n    clearAnnotation() {\n      if (this.mapOpts.annotation === false) return;\n      if (this.root) {\n        let node2;\n        for (let i2 = this.root.nodes.length - 1; i2 >= 0; i2--) {\n          node2 = this.root.nodes[i2];\n          if (node2.type !== \"comment\") continue;\n          if (node2.text.startsWith(\"# sourceMappingURL=\")) {\n            this.root.removeChild(i2);\n          }\n        }\n      } else if (this.css) {\n        this.css = this.css.replace(/\\n*\\/\\*#[\\S\\s]*?\\*\\/$/gm, \"\");\n      }\n    }\n    generate() {\n      this.clearAnnotation();\n      if (pathAvailable && sourceMapAvailable && this.isMap()) {\n        return this.generateMap();\n      } else {\n        let result2 = \"\";\n        this.stringify(this.root, (i2) => {\n          result2 += i2;\n        });\n        return [result2];\n      }\n    }\n    generateMap() {\n      if (this.root) {\n        this.generateString();\n      } else if (this.previous().length === 1) {\n        let prev = this.previous()[0].consumer();\n        prev.file = this.outputFile();\n        this.map = SourceMapGenerator.fromSourceMap(prev, {\n          ignoreInvalidMapping: true\n        });\n      } else {\n        this.map = new SourceMapGenerator({\n          file: this.outputFile(),\n          ignoreInvalidMapping: true\n        });\n        this.map.addMapping({\n          generated: { column: 0, line: 1 },\n          original: { column: 0, line: 1 },\n          source: this.opts.from ? this.toUrl(this.path(this.opts.from)) : \"<no source>\"\n        });\n      }\n      if (this.isSourcesContent()) this.setSourcesContent();\n      if (this.root && this.previous().length > 0) this.applyPrevMaps();\n      if (this.isAnnotation()) this.addAnnotation();\n      if (this.isInline()) {\n        return [this.css];\n      } else {\n        return [this.css, this.map];\n      }\n    }\n    generateString() {\n      this.css = \"\";\n      this.map = new SourceMapGenerator({\n        file: this.outputFile(),\n        ignoreInvalidMapping: true\n      });\n      let line = 1;\n      let column = 1;\n      let noSource = \"<no source>\";\n      let mapping = {\n        generated: { column: 0, line: 0 },\n        original: { column: 0, line: 0 },\n        source: \"\"\n      };\n      let last, lines;\n      this.stringify(this.root, (str, node2, type) => {\n        this.css += str;\n        if (node2 && type !== \"end\") {\n          mapping.generated.line = line;\n          mapping.generated.column = column - 1;\n          if (node2.source && node2.source.start) {\n            mapping.source = this.sourcePath(node2);\n            mapping.original.line = node2.source.start.line;\n            mapping.original.column = node2.source.start.column - 1;\n            this.map.addMapping(mapping);\n          } else {\n            mapping.source = noSource;\n            mapping.original.line = 1;\n            mapping.original.column = 0;\n            this.map.addMapping(mapping);\n          }\n        }\n        lines = str.match(/\\n/g);\n        if (lines) {\n          line += lines.length;\n          last = str.lastIndexOf(\"\\n\");\n          column = str.length - last;\n        } else {\n          column += str.length;\n        }\n        if (node2 && type !== \"start\") {\n          let p2 = node2.parent || { raws: {} };\n          let childless = node2.type === \"decl\" || node2.type === \"atrule\" && !node2.nodes;\n          if (!childless || node2 !== p2.last || p2.raws.semicolon) {\n            if (node2.source && node2.source.end) {\n              mapping.source = this.sourcePath(node2);\n              mapping.original.line = node2.source.end.line;\n              mapping.original.column = node2.source.end.column - 1;\n              mapping.generated.line = line;\n              mapping.generated.column = column - 2;\n              this.map.addMapping(mapping);\n            } else {\n              mapping.source = noSource;\n              mapping.original.line = 1;\n              mapping.original.column = 0;\n              mapping.generated.line = line;\n              mapping.generated.column = column - 1;\n              this.map.addMapping(mapping);\n            }\n          }\n        }\n      });\n    }\n    isAnnotation() {\n      if (this.isInline()) {\n        return true;\n      }\n      if (typeof this.mapOpts.annotation !== \"undefined\") {\n        return this.mapOpts.annotation;\n      }\n      if (this.previous().length) {\n        return this.previous().some((i2) => i2.annotation);\n      }\n      return true;\n    }\n    isInline() {\n      if (typeof this.mapOpts.inline !== \"undefined\") {\n        return this.mapOpts.inline;\n      }\n      let annotation = this.mapOpts.annotation;\n      if (typeof annotation !== \"undefined\" && annotation !== true) {\n        return false;\n      }\n      if (this.previous().length) {\n        return this.previous().some((i2) => i2.inline);\n      }\n      return true;\n    }\n    isMap() {\n      if (typeof this.opts.map !== \"undefined\") {\n        return !!this.opts.map;\n      }\n      return this.previous().length > 0;\n    }\n    isSourcesContent() {\n      if (typeof this.mapOpts.sourcesContent !== \"undefined\") {\n        return this.mapOpts.sourcesContent;\n      }\n      if (this.previous().length) {\n        return this.previous().some((i2) => i2.withContent());\n      }\n      return true;\n    }\n    outputFile() {\n      if (this.opts.to) {\n        return this.path(this.opts.to);\n      } else if (this.opts.from) {\n        return this.path(this.opts.from);\n      } else {\n        return \"to.css\";\n      }\n    }\n    path(file) {\n      if (this.mapOpts.absolute) return file;\n      if (file.charCodeAt(0) === 60) return file;\n      if (/^\\w+:\\/\\//.test(file)) return file;\n      let cached = this.memoizedPaths.get(file);\n      if (cached) return cached;\n      let from = this.opts.to ? dirname(this.opts.to) : \".\";\n      if (typeof this.mapOpts.annotation === \"string\") {\n        from = dirname(resolve(from, this.mapOpts.annotation));\n      }\n      let path = relative(from, file);\n      this.memoizedPaths.set(file, path);\n      return path;\n    }\n    previous() {\n      if (!this.previousMaps) {\n        this.previousMaps = [];\n        if (this.root) {\n          this.root.walk((node2) => {\n            if (node2.source && node2.source.input.map) {\n              let map = node2.source.input.map;\n              if (!this.previousMaps.includes(map)) {\n                this.previousMaps.push(map);\n              }\n            }\n          });\n        } else {\n          let input2 = new Input(this.originalCSS, this.opts);\n          if (input2.map) this.previousMaps.push(input2.map);\n        }\n      }\n      return this.previousMaps;\n    }\n    setSourcesContent() {\n      let already = {};\n      if (this.root) {\n        this.root.walk((node2) => {\n          if (node2.source) {\n            let from = node2.source.input.from;\n            if (from && !already[from]) {\n              already[from] = true;\n              let fromUrl = this.usesFileUrls ? this.toFileUrl(from) : this.toUrl(this.path(from));\n              this.map.setSourceContent(fromUrl, node2.source.input.css);\n            }\n          }\n        });\n      } else if (this.css) {\n        let from = this.opts.from ? this.toUrl(this.path(this.opts.from)) : \"<no source>\";\n        this.map.setSourceContent(from, this.css);\n      }\n    }\n    sourcePath(node2) {\n      if (this.mapOpts.from) {\n        return this.toUrl(this.mapOpts.from);\n      } else if (this.usesFileUrls) {\n        return this.toFileUrl(node2.source.input.from);\n      } else {\n        return this.toUrl(this.path(node2.source.input.from));\n      }\n    }\n    toBase64(str) {\n      if (Buffer) {\n        return Buffer.from(str).toString(\"base64\");\n      } else {\n        return window.btoa(unescape(encodeURIComponent(str)));\n      }\n    }\n    toFileUrl(path) {\n      let cached = this.memoizedFileURLs.get(path);\n      if (cached) return cached;\n      if (pathToFileURL) {\n        let fileURL = pathToFileURL(path).toString();\n        this.memoizedFileURLs.set(path, fileURL);\n        return fileURL;\n      } else {\n        throw new Error(\n          \"`map.absolute` option is not available in this PostCSS build\"\n        );\n      }\n    }\n    toUrl(path) {\n      let cached = this.memoizedURLs.get(path);\n      if (cached) return cached;\n      if (sep === \"\\\\\") {\n        path = path.replace(/\\\\/g, \"/\");\n      }\n      let url = encodeURI(path).replace(/[#?]/g, encodeURIComponent);\n      this.memoizedURLs.set(path, url);\n      return url;\n    }\n  }\n  mapGenerator$1 = MapGenerator;\n  return mapGenerator$1;\n}\nvar tokenize$1;\nvar hasRequiredTokenize$1;\nfunction requireTokenize$1() {\n  if (hasRequiredTokenize$1) return tokenize$1;\n  hasRequiredTokenize$1 = 1;\n  const SINGLE_QUOTE = \"'\".charCodeAt(0);\n  const DOUBLE_QUOTE = '\"'.charCodeAt(0);\n  const BACKSLASH = \"\\\\\".charCodeAt(0);\n  const SLASH = \"/\".charCodeAt(0);\n  const NEWLINE = \"\\n\".charCodeAt(0);\n  const SPACE = \" \".charCodeAt(0);\n  const FEED = \"\\f\".charCodeAt(0);\n  const TAB = \"\t\".charCodeAt(0);\n  const CR = \"\\r\".charCodeAt(0);\n  const OPEN_SQUARE = \"[\".charCodeAt(0);\n  const CLOSE_SQUARE = \"]\".charCodeAt(0);\n  const OPEN_PARENTHESES = \"(\".charCodeAt(0);\n  const CLOSE_PARENTHESES = \")\".charCodeAt(0);\n  const OPEN_CURLY = \"{\".charCodeAt(0);\n  const CLOSE_CURLY = \"}\".charCodeAt(0);\n  const SEMICOLON = \";\".charCodeAt(0);\n  const ASTERISK = \"*\".charCodeAt(0);\n  const COLON = \":\".charCodeAt(0);\n  const AT = \"@\".charCodeAt(0);\n  const RE_AT_END = /[\\t\\n\\f\\r \"#'()/;[\\\\\\]{}]/g;\n  const RE_WORD_END = /[\\t\\n\\f\\r !\"#'():;@[\\\\\\]{}]|\\/(?=\\*)/g;\n  const RE_BAD_BRACKET = /.[\\r\\n\"'(/\\\\]/;\n  const RE_HEX_ESCAPE = /[\\da-f]/i;\n  tokenize$1 = function tokenizer(input2, options = {}) {\n    let css = input2.css.valueOf();\n    let ignore = options.ignoreErrors;\n    let code, content, escape, next, quote;\n    let currentToken, escaped, escapePos, n2, prev;\n    let length = css.length;\n    let pos = 0;\n    let buffer = [];\n    let returned = [];\n    function position() {\n      return pos;\n    }\n    function unclosed(what) {\n      throw input2.error(\"Unclosed \" + what, pos);\n    }\n    function endOfFile() {\n      return returned.length === 0 && pos >= length;\n    }\n    function nextToken(opts) {\n      if (returned.length) return returned.pop();\n      if (pos >= length) return;\n      let ignoreUnclosed = opts ? opts.ignoreUnclosed : false;\n      code = css.charCodeAt(pos);\n      switch (code) {\n        case NEWLINE:\n        case SPACE:\n        case TAB:\n        case CR:\n        case FEED: {\n          next = pos;\n          do {\n            next += 1;\n            code = css.charCodeAt(next);\n          } while (code === SPACE || code === NEWLINE || code === TAB || code === CR || code === FEED);\n          currentToken = [\"space\", css.slice(pos, next)];\n          pos = next - 1;\n          break;\n        }\n        case OPEN_SQUARE:\n        case CLOSE_SQUARE:\n        case OPEN_CURLY:\n        case CLOSE_CURLY:\n        case COLON:\n        case SEMICOLON:\n        case CLOSE_PARENTHESES: {\n          let controlChar = String.fromCharCode(code);\n          currentToken = [controlChar, controlChar, pos];\n          break;\n        }\n        case OPEN_PARENTHESES: {\n          prev = buffer.length ? buffer.pop()[1] : \"\";\n          n2 = css.charCodeAt(pos + 1);\n          if (prev === \"url\" && n2 !== SINGLE_QUOTE && n2 !== DOUBLE_QUOTE && n2 !== SPACE && n2 !== NEWLINE && n2 !== TAB && n2 !== FEED && n2 !== CR) {\n            next = pos;\n            do {\n              escaped = false;\n              next = css.indexOf(\")\", next + 1);\n              if (next === -1) {\n                if (ignore || ignoreUnclosed) {\n                  next = pos;\n                  break;\n                } else {\n                  unclosed(\"bracket\");\n                }\n              }\n              escapePos = next;\n              while (css.charCodeAt(escapePos - 1) === BACKSLASH) {\n                escapePos -= 1;\n                escaped = !escaped;\n              }\n            } while (escaped);\n            currentToken = [\"brackets\", css.slice(pos, next + 1), pos, next];\n            pos = next;\n          } else {\n            next = css.indexOf(\")\", pos + 1);\n            content = css.slice(pos, next + 1);\n            if (next === -1 || RE_BAD_BRACKET.test(content)) {\n              currentToken = [\"(\", \"(\", pos];\n            } else {\n              currentToken = [\"brackets\", content, pos, next];\n              pos = next;\n            }\n          }\n          break;\n        }\n        case SINGLE_QUOTE:\n        case DOUBLE_QUOTE: {\n          quote = code === SINGLE_QUOTE ? \"'\" : '\"';\n          next = pos;\n          do {\n            escaped = false;\n            next = css.indexOf(quote, next + 1);\n            if (next === -1) {\n              if (ignore || ignoreUnclosed) {\n                next = pos + 1;\n                break;\n              } else {\n                unclosed(\"string\");\n              }\n            }\n            escapePos = next;\n            while (css.charCodeAt(escapePos - 1) === BACKSLASH) {\n              escapePos -= 1;\n              escaped = !escaped;\n            }\n          } while (escaped);\n          currentToken = [\"string\", css.slice(pos, next + 1), pos, next];\n          pos = next;\n          break;\n        }\n        case AT: {\n          RE_AT_END.lastIndex = pos + 1;\n          RE_AT_END.test(css);\n          if (RE_AT_END.lastIndex === 0) {\n            next = css.length - 1;\n          } else {\n            next = RE_AT_END.lastIndex - 2;\n          }\n          currentToken = [\"at-word\", css.slice(pos, next + 1), pos, next];\n          pos = next;\n          break;\n        }\n        case BACKSLASH: {\n          next = pos;\n          escape = true;\n          while (css.charCodeAt(next + 1) === BACKSLASH) {\n            next += 1;\n            escape = !escape;\n          }\n          code = css.charCodeAt(next + 1);\n          if (escape && code !== SLASH && code !== SPACE && code !== NEWLINE && code !== TAB && code !== CR && code !== FEED) {\n            next += 1;\n            if (RE_HEX_ESCAPE.test(css.charAt(next))) {\n              while (RE_HEX_ESCAPE.test(css.charAt(next + 1))) {\n                next += 1;\n              }\n              if (css.charCodeAt(next + 1) === SPACE) {\n                next += 1;\n              }\n            }\n          }\n          currentToken = [\"word\", css.slice(pos, next + 1), pos, next];\n          pos = next;\n          break;\n        }\n        default: {\n          if (code === SLASH && css.charCodeAt(pos + 1) === ASTERISK) {\n            next = css.indexOf(\"*/\", pos + 2) + 1;\n            if (next === 0) {\n              if (ignore || ignoreUnclosed) {\n                next = css.length;\n              } else {\n                unclosed(\"comment\");\n              }\n            }\n            currentToken = [\"comment\", css.slice(pos, next + 1), pos, next];\n            pos = next;\n          } else {\n            RE_WORD_END.lastIndex = pos + 1;\n            RE_WORD_END.test(css);\n            if (RE_WORD_END.lastIndex === 0) {\n              next = css.length - 1;\n            } else {\n              next = RE_WORD_END.lastIndex - 2;\n            }\n            currentToken = [\"word\", css.slice(pos, next + 1), pos, next];\n            buffer.push(currentToken);\n            pos = next;\n          }\n          break;\n        }\n      }\n      pos++;\n      return currentToken;\n    }\n    function back(token) {\n      returned.push(token);\n    }\n    return {\n      back,\n      endOfFile,\n      nextToken,\n      position\n    };\n  };\n  return tokenize$1;\n}\nvar parser$1;\nvar hasRequiredParser$1;\nfunction requireParser$1() {\n  if (hasRequiredParser$1) return parser$1;\n  hasRequiredParser$1 = 1;\n  let AtRule = requireAtRule$1();\n  let Comment = requireComment$1();\n  let Declaration = requireDeclaration$1();\n  let Root = requireRoot$1();\n  let Rule = requireRule$1();\n  let tokenizer = requireTokenize$1();\n  const SAFE_COMMENT_NEIGHBOR = {\n    empty: true,\n    space: true\n  };\n  function findLastWithPosition(tokens) {\n    for (let i2 = tokens.length - 1; i2 >= 0; i2--) {\n      let token = tokens[i2];\n      let pos = token[3] || token[2];\n      if (pos) return pos;\n    }\n  }\n  class Parser {\n    constructor(input2) {\n      this.input = input2;\n      this.root = new Root();\n      this.current = this.root;\n      this.spaces = \"\";\n      this.semicolon = false;\n      this.createTokenizer();\n      this.root.source = { input: input2, start: { column: 1, line: 1, offset: 0 } };\n    }\n    atrule(token) {\n      let node2 = new AtRule();\n      node2.name = token[1].slice(1);\n      if (node2.name === \"\") {\n        this.unnamedAtrule(node2, token);\n      }\n      this.init(node2, token[2]);\n      let type;\n      let prev;\n      let shift;\n      let last = false;\n      let open = false;\n      let params = [];\n      let brackets = [];\n      while (!this.tokenizer.endOfFile()) {\n        token = this.tokenizer.nextToken();\n        type = token[0];\n        if (type === \"(\" || type === \"[\") {\n          brackets.push(type === \"(\" ? \")\" : \"]\");\n        } else if (type === \"{\" && brackets.length > 0) {\n          brackets.push(\"}\");\n        } else if (type === brackets[brackets.length - 1]) {\n          brackets.pop();\n        }\n        if (brackets.length === 0) {\n          if (type === \";\") {\n            node2.source.end = this.getPosition(token[2]);\n            node2.source.end.offset++;\n            this.semicolon = true;\n            break;\n          } else if (type === \"{\") {\n            open = true;\n            break;\n          } else if (type === \"}\") {\n            if (params.length > 0) {\n              shift = params.length - 1;\n              prev = params[shift];\n              while (prev && prev[0] === \"space\") {\n                prev = params[--shift];\n              }\n              if (prev) {\n                node2.source.end = this.getPosition(prev[3] || prev[2]);\n                node2.source.end.offset++;\n              }\n            }\n            this.end(token);\n            break;\n          } else {\n            params.push(token);\n          }\n        } else {\n          params.push(token);\n        }\n        if (this.tokenizer.endOfFile()) {\n          last = true;\n          break;\n        }\n      }\n      node2.raws.between = this.spacesAndCommentsFromEnd(params);\n      if (params.length) {\n        node2.raws.afterName = this.spacesAndCommentsFromStart(params);\n        this.raw(node2, \"params\", params);\n        if (last) {\n          token = params[params.length - 1];\n          node2.source.end = this.getPosition(token[3] || token[2]);\n          node2.source.end.offset++;\n          this.spaces = node2.raws.between;\n          node2.raws.between = \"\";\n        }\n      } else {\n        node2.raws.afterName = \"\";\n        node2.params = \"\";\n      }\n      if (open) {\n        node2.nodes = [];\n        this.current = node2;\n      }\n    }\n    checkMissedSemicolon(tokens) {\n      let colon = this.colon(tokens);\n      if (colon === false) return;\n      let founded = 0;\n      let token;\n      for (let j2 = colon - 1; j2 >= 0; j2--) {\n        token = tokens[j2];\n        if (token[0] !== \"space\") {\n          founded += 1;\n          if (founded === 2) break;\n        }\n      }\n      throw this.input.error(\n        \"Missed semicolon\",\n        token[0] === \"word\" ? token[3] + 1 : token[2]\n      );\n    }\n    colon(tokens) {\n      let brackets = 0;\n      let prev, token, type;\n      for (let [i2, element] of tokens.entries()) {\n        token = element;\n        type = token[0];\n        if (type === \"(\") {\n          brackets += 1;\n        }\n        if (type === \")\") {\n          brackets -= 1;\n        }\n        if (brackets === 0 && type === \":\") {\n          if (!prev) {\n            this.doubleColon(token);\n          } else if (prev[0] === \"word\" && prev[1] === \"progid\") {\n            continue;\n          } else {\n            return i2;\n          }\n        }\n        prev = token;\n      }\n      return false;\n    }\n    comment(token) {\n      let node2 = new Comment();\n      this.init(node2, token[2]);\n      node2.source.end = this.getPosition(token[3] || token[2]);\n      node2.source.end.offset++;\n      let text = token[1].slice(2, -2);\n      if (/^\\s*$/.test(text)) {\n        node2.text = \"\";\n        node2.raws.left = text;\n        node2.raws.right = \"\";\n      } else {\n        let match = text.match(/^(\\s*)([^]*\\S)(\\s*)$/);\n        node2.text = match[2];\n        node2.raws.left = match[1];\n        node2.raws.right = match[3];\n      }\n    }\n    createTokenizer() {\n      this.tokenizer = tokenizer(this.input);\n    }\n    decl(tokens, customProperty) {\n      let node2 = new Declaration();\n      this.init(node2, tokens[0][2]);\n      let last = tokens[tokens.length - 1];\n      if (last[0] === \";\") {\n        this.semicolon = true;\n        tokens.pop();\n      }\n      node2.source.end = this.getPosition(\n        last[3] || last[2] || findLastWithPosition(tokens)\n      );\n      node2.source.end.offset++;\n      while (tokens[0][0] !== \"word\") {\n        if (tokens.length === 1) this.unknownWord(tokens);\n        node2.raws.before += tokens.shift()[1];\n      }\n      node2.source.start = this.getPosition(tokens[0][2]);\n      node2.prop = \"\";\n      while (tokens.length) {\n        let type = tokens[0][0];\n        if (type === \":\" || type === \"space\" || type === \"comment\") {\n          break;\n        }\n        node2.prop += tokens.shift()[1];\n      }\n      node2.raws.between = \"\";\n      let token;\n      while (tokens.length) {\n        token = tokens.shift();\n        if (token[0] === \":\") {\n          node2.raws.between += token[1];\n          break;\n        } else {\n          if (token[0] === \"word\" && /\\w/.test(token[1])) {\n            this.unknownWord([token]);\n          }\n          node2.raws.between += token[1];\n        }\n      }\n      if (node2.prop[0] === \"_\" || node2.prop[0] === \"*\") {\n        node2.raws.before += node2.prop[0];\n        node2.prop = node2.prop.slice(1);\n      }\n      let firstSpaces = [];\n      let next;\n      while (tokens.length) {\n        next = tokens[0][0];\n        if (next !== \"space\" && next !== \"comment\") break;\n        firstSpaces.push(tokens.shift());\n      }\n      this.precheckMissedSemicolon(tokens);\n      for (let i2 = tokens.length - 1; i2 >= 0; i2--) {\n        token = tokens[i2];\n        if (token[1].toLowerCase() === \"!important\") {\n          node2.important = true;\n          let string = this.stringFrom(tokens, i2);\n          string = this.spacesFromEnd(tokens) + string;\n          if (string !== \" !important\") node2.raws.important = string;\n          break;\n        } else if (token[1].toLowerCase() === \"important\") {\n          let cache = tokens.slice(0);\n          let str = \"\";\n          for (let j2 = i2; j2 > 0; j2--) {\n            let type = cache[j2][0];\n            if (str.trim().startsWith(\"!\") && type !== \"space\") {\n              break;\n            }\n            str = cache.pop()[1] + str;\n          }\n          if (str.trim().startsWith(\"!\")) {\n            node2.important = true;\n            node2.raws.important = str;\n            tokens = cache;\n          }\n        }\n        if (token[0] !== \"space\" && token[0] !== \"comment\") {\n          break;\n        }\n      }\n      let hasWord = tokens.some((i2) => i2[0] !== \"space\" && i2[0] !== \"comment\");\n      if (hasWord) {\n        node2.raws.between += firstSpaces.map((i2) => i2[1]).join(\"\");\n        firstSpaces = [];\n      }\n      this.raw(node2, \"value\", firstSpaces.concat(tokens), customProperty);\n      if (node2.value.includes(\":\") && !customProperty) {\n        this.checkMissedSemicolon(tokens);\n      }\n    }\n    doubleColon(token) {\n      throw this.input.error(\n        \"Double colon\",\n        { offset: token[2] },\n        { offset: token[2] + token[1].length }\n      );\n    }\n    emptyRule(token) {\n      let node2 = new Rule();\n      this.init(node2, token[2]);\n      node2.selector = \"\";\n      node2.raws.between = \"\";\n      this.current = node2;\n    }\n    end(token) {\n      if (this.current.nodes && this.current.nodes.length) {\n        this.current.raws.semicolon = this.semicolon;\n      }\n      this.semicolon = false;\n      this.current.raws.after = (this.current.raws.after || \"\") + this.spaces;\n      this.spaces = \"\";\n      if (this.current.parent) {\n        this.current.source.end = this.getPosition(token[2]);\n        this.current.source.end.offset++;\n        this.current = this.current.parent;\n      } else {\n        this.unexpectedClose(token);\n      }\n    }\n    endFile() {\n      if (this.current.parent) this.unclosedBlock();\n      if (this.current.nodes && this.current.nodes.length) {\n        this.current.raws.semicolon = this.semicolon;\n      }\n      this.current.raws.after = (this.current.raws.after || \"\") + this.spaces;\n      this.root.source.end = this.getPosition(this.tokenizer.position());\n    }\n    freeSemicolon(token) {\n      this.spaces += token[1];\n      if (this.current.nodes) {\n        let prev = this.current.nodes[this.current.nodes.length - 1];\n        if (prev && prev.type === \"rule\" && !prev.raws.ownSemicolon) {\n          prev.raws.ownSemicolon = this.spaces;\n          this.spaces = \"\";\n          prev.source.end = this.getPosition(token[2]);\n          prev.source.end.offset += prev.raws.ownSemicolon.length;\n        }\n      }\n    }\n    // Helpers\n    getPosition(offset) {\n      let pos = this.input.fromOffset(offset);\n      return {\n        column: pos.col,\n        line: pos.line,\n        offset\n      };\n    }\n    init(node2, offset) {\n      this.current.push(node2);\n      node2.source = {\n        input: this.input,\n        start: this.getPosition(offset)\n      };\n      node2.raws.before = this.spaces;\n      this.spaces = \"\";\n      if (node2.type !== \"comment\") this.semicolon = false;\n    }\n    other(start) {\n      let end = false;\n      let type = null;\n      let colon = false;\n      let bracket = null;\n      let brackets = [];\n      let customProperty = start[1].startsWith(\"--\");\n      let tokens = [];\n      let token = start;\n      while (token) {\n        type = token[0];\n        tokens.push(token);\n        if (type === \"(\" || type === \"[\") {\n          if (!bracket) bracket = token;\n          brackets.push(type === \"(\" ? \")\" : \"]\");\n        } else if (customProperty && colon && type === \"{\") {\n          if (!bracket) bracket = token;\n          brackets.push(\"}\");\n        } else if (brackets.length === 0) {\n          if (type === \";\") {\n            if (colon) {\n              this.decl(tokens, customProperty);\n              return;\n            } else {\n              break;\n            }\n          } else if (type === \"{\") {\n            this.rule(tokens);\n            return;\n          } else if (type === \"}\") {\n            this.tokenizer.back(tokens.pop());\n            end = true;\n            break;\n          } else if (type === \":\") {\n            colon = true;\n          }\n        } else if (type === brackets[brackets.length - 1]) {\n          brackets.pop();\n          if (brackets.length === 0) bracket = null;\n        }\n        token = this.tokenizer.nextToken();\n      }\n      if (this.tokenizer.endOfFile()) end = true;\n      if (brackets.length > 0) this.unclosedBracket(bracket);\n      if (end && colon) {\n        if (!customProperty) {\n          while (tokens.length) {\n            token = tokens[tokens.length - 1][0];\n            if (token !== \"space\" && token !== \"comment\") break;\n            this.tokenizer.back(tokens.pop());\n          }\n        }\n        this.decl(tokens, customProperty);\n      } else {\n        this.unknownWord(tokens);\n      }\n    }\n    parse() {\n      let token;\n      while (!this.tokenizer.endOfFile()) {\n        token = this.tokenizer.nextToken();\n        switch (token[0]) {\n          case \"space\":\n            this.spaces += token[1];\n            break;\n          case \";\":\n            this.freeSemicolon(token);\n            break;\n          case \"}\":\n            this.end(token);\n            break;\n          case \"comment\":\n            this.comment(token);\n            break;\n          case \"at-word\":\n            this.atrule(token);\n            break;\n          case \"{\":\n            this.emptyRule(token);\n            break;\n          default:\n            this.other(token);\n            break;\n        }\n      }\n      this.endFile();\n    }\n    precheckMissedSemicolon() {\n    }\n    raw(node2, prop, tokens, customProperty) {\n      let token, type;\n      let length = tokens.length;\n      let value = \"\";\n      let clean = true;\n      let next, prev;\n      for (let i2 = 0; i2 < length; i2 += 1) {\n        token = tokens[i2];\n        type = token[0];\n        if (type === \"space\" && i2 === length - 1 && !customProperty) {\n          clean = false;\n        } else if (type === \"comment\") {\n          prev = tokens[i2 - 1] ? tokens[i2 - 1][0] : \"empty\";\n          next = tokens[i2 + 1] ? tokens[i2 + 1][0] : \"empty\";\n          if (!SAFE_COMMENT_NEIGHBOR[prev] && !SAFE_COMMENT_NEIGHBOR[next]) {\n            if (value.slice(-1) === \",\") {\n              clean = false;\n            } else {\n              value += token[1];\n            }\n          } else {\n            clean = false;\n          }\n        } else {\n          value += token[1];\n        }\n      }\n      if (!clean) {\n        let raw = tokens.reduce((all, i2) => all + i2[1], \"\");\n        node2.raws[prop] = { raw, value };\n      }\n      node2[prop] = value;\n    }\n    rule(tokens) {\n      tokens.pop();\n      let node2 = new Rule();\n      this.init(node2, tokens[0][2]);\n      node2.raws.between = this.spacesAndCommentsFromEnd(tokens);\n      this.raw(node2, \"selector\", tokens);\n      this.current = node2;\n    }\n    spacesAndCommentsFromEnd(tokens) {\n      let lastTokenType;\n      let spaces = \"\";\n      while (tokens.length) {\n        lastTokenType = tokens[tokens.length - 1][0];\n        if (lastTokenType !== \"space\" && lastTokenType !== \"comment\") break;\n        spaces = tokens.pop()[1] + spaces;\n      }\n      return spaces;\n    }\n    // Errors\n    spacesAndCommentsFromStart(tokens) {\n      let next;\n      let spaces = \"\";\n      while (tokens.length) {\n        next = tokens[0][0];\n        if (next !== \"space\" && next !== \"comment\") break;\n        spaces += tokens.shift()[1];\n      }\n      return spaces;\n    }\n    spacesFromEnd(tokens) {\n      let lastTokenType;\n      let spaces = \"\";\n      while (tokens.length) {\n        lastTokenType = tokens[tokens.length - 1][0];\n        if (lastTokenType !== \"space\") break;\n        spaces = tokens.pop()[1] + spaces;\n      }\n      return spaces;\n    }\n    stringFrom(tokens, from) {\n      let result2 = \"\";\n      for (let i2 = from; i2 < tokens.length; i2++) {\n        result2 += tokens[i2][1];\n      }\n      tokens.splice(from, tokens.length - from);\n      return result2;\n    }\n    unclosedBlock() {\n      let pos = this.current.source.start;\n      throw this.input.error(\"Unclosed block\", pos.line, pos.column);\n    }\n    unclosedBracket(bracket) {\n      throw this.input.error(\n        \"Unclosed bracket\",\n        { offset: bracket[2] },\n        { offset: bracket[2] + 1 }\n      );\n    }\n    unexpectedClose(token) {\n      throw this.input.error(\n        \"Unexpected }\",\n        { offset: token[2] },\n        { offset: token[2] + 1 }\n      );\n    }\n    unknownWord(tokens) {\n      throw this.input.error(\n        \"Unknown word \" + tokens[0][1],\n        { offset: tokens[0][2] },\n        { offset: tokens[0][2] + tokens[0][1].length }\n      );\n    }\n    unnamedAtrule(node2, token) {\n      throw this.input.error(\n        \"At-rule without name\",\n        { offset: token[2] },\n        { offset: token[2] + token[1].length }\n      );\n    }\n  }\n  parser$1 = Parser;\n  return parser$1;\n}\nvar parse_1$1;\nvar hasRequiredParse$1;\nfunction requireParse$1() {\n  if (hasRequiredParse$1) return parse_1$1;\n  hasRequiredParse$1 = 1;\n  let Container = requireContainer$1();\n  let Input = requireInput$1();\n  let Parser = requireParser$1();\n  function parse(css, opts) {\n    let input2 = new Input(css, opts);\n    let parser2 = new Parser(input2);\n    try {\n      parser2.parse();\n    } catch (e2) {\n      if (process.env.NODE_ENV !== \"production\") {\n        if (e2.name === \"CssSyntaxError\" && opts && opts.from) {\n          if (/\\.scss$/i.test(opts.from)) {\n            e2.message += \"\\nYou tried to parse SCSS with the standard CSS parser; try again with the postcss-scss parser\";\n          } else if (/\\.sass/i.test(opts.from)) {\n            e2.message += \"\\nYou tried to parse Sass with the standard CSS parser; try again with the postcss-sass parser\";\n          } else if (/\\.less$/i.test(opts.from)) {\n            e2.message += \"\\nYou tried to parse Less with the standard CSS parser; try again with the postcss-less parser\";\n          }\n        }\n      }\n      throw e2;\n    }\n    return parser2.root;\n  }\n  parse_1$1 = parse;\n  parse.default = parse;\n  Container.registerParse(parse);\n  return parse_1$1;\n}\nvar warning$1;\nvar hasRequiredWarning$1;\nfunction requireWarning$1() {\n  if (hasRequiredWarning$1) return warning$1;\n  hasRequiredWarning$1 = 1;\n  class Warning {\n    constructor(text, opts = {}) {\n      this.type = \"warning\";\n      this.text = text;\n      if (opts.node && opts.node.source) {\n        let range = opts.node.rangeBy(opts);\n        this.line = range.start.line;\n        this.column = range.start.column;\n        this.endLine = range.end.line;\n        this.endColumn = range.end.column;\n      }\n      for (let opt in opts) this[opt] = opts[opt];\n    }\n    toString() {\n      if (this.node) {\n        return this.node.error(this.text, {\n          index: this.index,\n          plugin: this.plugin,\n          word: this.word\n        }).message;\n      }\n      if (this.plugin) {\n        return this.plugin + \": \" + this.text;\n      }\n      return this.text;\n    }\n  }\n  warning$1 = Warning;\n  Warning.default = Warning;\n  return warning$1;\n}\nvar result$1;\nvar hasRequiredResult$1;\nfunction requireResult$1() {\n  if (hasRequiredResult$1) return result$1;\n  hasRequiredResult$1 = 1;\n  let Warning = requireWarning$1();\n  class Result {\n    get content() {\n      return this.css;\n    }\n    constructor(processor2, root2, opts) {\n      this.processor = processor2;\n      this.messages = [];\n      this.root = root2;\n      this.opts = opts;\n      this.css = \"\";\n      this.map = void 0;\n    }\n    toString() {\n      return this.css;\n    }\n    warn(text, opts = {}) {\n      if (!opts.plugin) {\n        if (this.lastPlugin && this.lastPlugin.postcssPlugin) {\n          opts.plugin = this.lastPlugin.postcssPlugin;\n        }\n      }\n      let warning2 = new Warning(text, opts);\n      this.messages.push(warning2);\n      return warning2;\n    }\n    warnings() {\n      return this.messages.filter((i2) => i2.type === \"warning\");\n    }\n  }\n  result$1 = Result;\n  Result.default = Result;\n  return result$1;\n}\nvar warnOnce$1;\nvar hasRequiredWarnOnce$1;\nfunction requireWarnOnce$1() {\n  if (hasRequiredWarnOnce$1) return warnOnce$1;\n  hasRequiredWarnOnce$1 = 1;\n  let printed = {};\n  warnOnce$1 = function warnOnce2(message) {\n    if (printed[message]) return;\n    printed[message] = true;\n    if (typeof console !== \"undefined\" && console.warn) {\n      console.warn(message);\n    }\n  };\n  return warnOnce$1;\n}\nvar lazyResult$1;\nvar hasRequiredLazyResult$1;\nfunction requireLazyResult$1() {\n  if (hasRequiredLazyResult$1) return lazyResult$1;\n  hasRequiredLazyResult$1 = 1;\n  let Container = requireContainer$1();\n  let Document2 = requireDocument$1();\n  let MapGenerator = requireMapGenerator$1();\n  let parse = requireParse$1();\n  let Result = requireResult$1();\n  let Root = requireRoot$1();\n  let stringify = requireStringify$1();\n  let { isClean, my } = requireSymbols$1();\n  let warnOnce2 = requireWarnOnce$1();\n  const TYPE_TO_CLASS_NAME = {\n    atrule: \"AtRule\",\n    comment: \"Comment\",\n    decl: \"Declaration\",\n    document: \"Document\",\n    root: \"Root\",\n    rule: \"Rule\"\n  };\n  const PLUGIN_PROPS = {\n    AtRule: true,\n    AtRuleExit: true,\n    Comment: true,\n    CommentExit: true,\n    Declaration: true,\n    DeclarationExit: true,\n    Document: true,\n    DocumentExit: true,\n    Once: true,\n    OnceExit: true,\n    postcssPlugin: true,\n    prepare: true,\n    Root: true,\n    RootExit: true,\n    Rule: true,\n    RuleExit: true\n  };\n  const NOT_VISITORS = {\n    Once: true,\n    postcssPlugin: true,\n    prepare: true\n  };\n  const CHILDREN = 0;\n  function isPromise(obj) {\n    return typeof obj === \"object\" && typeof obj.then === \"function\";\n  }\n  function getEvents(node2) {\n    let key = false;\n    let type = TYPE_TO_CLASS_NAME[node2.type];\n    if (node2.type === \"decl\") {\n      key = node2.prop.toLowerCase();\n    } else if (node2.type === \"atrule\") {\n      key = node2.name.toLowerCase();\n    }\n    if (key && node2.append) {\n      return [\n        type,\n        type + \"-\" + key,\n        CHILDREN,\n        type + \"Exit\",\n        type + \"Exit-\" + key\n      ];\n    } else if (key) {\n      return [type, type + \"-\" + key, type + \"Exit\", type + \"Exit-\" + key];\n    } else if (node2.append) {\n      return [type, CHILDREN, type + \"Exit\"];\n    } else {\n      return [type, type + \"Exit\"];\n    }\n  }\n  function toStack(node2) {\n    let events;\n    if (node2.type === \"document\") {\n      events = [\"Document\", CHILDREN, \"DocumentExit\"];\n    } else if (node2.type === \"root\") {\n      events = [\"Root\", CHILDREN, \"RootExit\"];\n    } else {\n      events = getEvents(node2);\n    }\n    return {\n      eventIndex: 0,\n      events,\n      iterator: 0,\n      node: node2,\n      visitorIndex: 0,\n      visitors: []\n    };\n  }\n  function cleanMarks(node2) {\n    node2[isClean] = false;\n    if (node2.nodes) node2.nodes.forEach((i2) => cleanMarks(i2));\n    return node2;\n  }\n  let postcss2 = {};\n  class LazyResult {\n    get content() {\n      return this.stringify().content;\n    }\n    get css() {\n      return this.stringify().css;\n    }\n    get map() {\n      return this.stringify().map;\n    }\n    get messages() {\n      return this.sync().messages;\n    }\n    get opts() {\n      return this.result.opts;\n    }\n    get processor() {\n      return this.result.processor;\n    }\n    get root() {\n      return this.sync().root;\n    }\n    get [Symbol.toStringTag]() {\n      return \"LazyResult\";\n    }\n    constructor(processor2, css, opts) {\n      this.stringified = false;\n      this.processed = false;\n      let root2;\n      if (typeof css === \"object\" && css !== null && (css.type === \"root\" || css.type === \"document\")) {\n        root2 = cleanMarks(css);\n      } else if (css instanceof LazyResult || css instanceof Result) {\n        root2 = cleanMarks(css.root);\n        if (css.map) {\n          if (typeof opts.map === \"undefined\") opts.map = {};\n          if (!opts.map.inline) opts.map.inline = false;\n          opts.map.prev = css.map;\n        }\n      } else {\n        let parser2 = parse;\n        if (opts.syntax) parser2 = opts.syntax.parse;\n        if (opts.parser) parser2 = opts.parser;\n        if (parser2.parse) parser2 = parser2.parse;\n        try {\n          root2 = parser2(css, opts);\n        } catch (error) {\n          this.processed = true;\n          this.error = error;\n        }\n        if (root2 && !root2[my]) {\n          Container.rebuild(root2);\n        }\n      }\n      this.result = new Result(processor2, root2, opts);\n      this.helpers = { ...postcss2, postcss: postcss2, result: this.result };\n      this.plugins = this.processor.plugins.map((plugin) => {\n        if (typeof plugin === \"object\" && plugin.prepare) {\n          return { ...plugin, ...plugin.prepare(this.result) };\n        } else {\n          return plugin;\n        }\n      });\n    }\n    async() {\n      if (this.error) return Promise.reject(this.error);\n      if (this.processed) return Promise.resolve(this.result);\n      if (!this.processing) {\n        this.processing = this.runAsync();\n      }\n      return this.processing;\n    }\n    catch(onRejected) {\n      return this.async().catch(onRejected);\n    }\n    finally(onFinally) {\n      return this.async().then(onFinally, onFinally);\n    }\n    getAsyncError() {\n      throw new Error(\"Use process(css).then(cb) to work with async plugins\");\n    }\n    handleError(error, node2) {\n      let plugin = this.result.lastPlugin;\n      try {\n        if (node2) node2.addToError(error);\n        this.error = error;\n        if (error.name === \"CssSyntaxError\" && !error.plugin) {\n          error.plugin = plugin.postcssPlugin;\n          error.setMessage();\n        } else if (plugin.postcssVersion) {\n          if (process.env.NODE_ENV !== \"production\") {\n            let pluginName = plugin.postcssPlugin;\n            let pluginVer = plugin.postcssVersion;\n            let runtimeVer = this.result.processor.version;\n            let a2 = pluginVer.split(\".\");\n            let b2 = runtimeVer.split(\".\");\n            if (a2[0] !== b2[0] || parseInt(a2[1]) > parseInt(b2[1])) {\n              console.error(\n                \"Unknown error from PostCSS plugin. Your current PostCSS version is \" + runtimeVer + \", but \" + pluginName + \" uses \" + pluginVer + \". Perhaps this is the source of the error below.\"\n              );\n            }\n          }\n        }\n      } catch (err) {\n        if (console && console.error) console.error(err);\n      }\n      return error;\n    }\n    prepareVisitors() {\n      this.listeners = {};\n      let add = (plugin, type, cb) => {\n        if (!this.listeners[type]) this.listeners[type] = [];\n        this.listeners[type].push([plugin, cb]);\n      };\n      for (let plugin of this.plugins) {\n        if (typeof plugin === \"object\") {\n          for (let event in plugin) {\n            if (!PLUGIN_PROPS[event] && /^[A-Z]/.test(event)) {\n              throw new Error(\n                `Unknown event ${event} in ${plugin.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`\n              );\n            }\n            if (!NOT_VISITORS[event]) {\n              if (typeof plugin[event] === \"object\") {\n                for (let filter in plugin[event]) {\n                  if (filter === \"*\") {\n                    add(plugin, event, plugin[event][filter]);\n                  } else {\n                    add(\n                      plugin,\n                      event + \"-\" + filter.toLowerCase(),\n                      plugin[event][filter]\n                    );\n                  }\n                }\n              } else if (typeof plugin[event] === \"function\") {\n                add(plugin, event, plugin[event]);\n              }\n            }\n          }\n        }\n      }\n      this.hasListener = Object.keys(this.listeners).length > 0;\n    }\n    async runAsync() {\n      this.plugin = 0;\n      for (let i2 = 0; i2 < this.plugins.length; i2++) {\n        let plugin = this.plugins[i2];\n        let promise = this.runOnRoot(plugin);\n        if (isPromise(promise)) {\n          try {\n            await promise;\n          } catch (error) {\n            throw this.handleError(error);\n          }\n        }\n      }\n      this.prepareVisitors();\n      if (this.hasListener) {\n        let root2 = this.result.root;\n        while (!root2[isClean]) {\n          root2[isClean] = true;\n          let stack = [toStack(root2)];\n          while (stack.length > 0) {\n            let promise = this.visitTick(stack);\n            if (isPromise(promise)) {\n              try {\n                await promise;\n              } catch (e2) {\n                let node2 = stack[stack.length - 1].node;\n                throw this.handleError(e2, node2);\n              }\n            }\n          }\n        }\n        if (this.listeners.OnceExit) {\n          for (let [plugin, visitor] of this.listeners.OnceExit) {\n            this.result.lastPlugin = plugin;\n            try {\n              if (root2.type === \"document\") {\n                let roots = root2.nodes.map(\n                  (subRoot) => visitor(subRoot, this.helpers)\n                );\n                await Promise.all(roots);\n              } else {\n                await visitor(root2, this.helpers);\n              }\n            } catch (e2) {\n              throw this.handleError(e2);\n            }\n          }\n        }\n      }\n      this.processed = true;\n      return this.stringify();\n    }\n    runOnRoot(plugin) {\n      this.result.lastPlugin = plugin;\n      try {\n        if (typeof plugin === \"object\" && plugin.Once) {\n          if (this.result.root.type === \"document\") {\n            let roots = this.result.root.nodes.map(\n              (root2) => plugin.Once(root2, this.helpers)\n            );\n            if (isPromise(roots[0])) {\n              return Promise.all(roots);\n            }\n            return roots;\n          }\n          return plugin.Once(this.result.root, this.helpers);\n        } else if (typeof plugin === \"function\") {\n          return plugin(this.result.root, this.result);\n        }\n      } catch (error) {\n        throw this.handleError(error);\n      }\n    }\n    stringify() {\n      if (this.error) throw this.error;\n      if (this.stringified) return this.result;\n      this.stringified = true;\n      this.sync();\n      let opts = this.result.opts;\n      let str = stringify;\n      if (opts.syntax) str = opts.syntax.stringify;\n      if (opts.stringifier) str = opts.stringifier;\n      if (str.stringify) str = str.stringify;\n      let map = new MapGenerator(str, this.result.root, this.result.opts);\n      let data = map.generate();\n      this.result.css = data[0];\n      this.result.map = data[1];\n      return this.result;\n    }\n    sync() {\n      if (this.error) throw this.error;\n      if (this.processed) return this.result;\n      this.processed = true;\n      if (this.processing) {\n        throw this.getAsyncError();\n      }\n      for (let plugin of this.plugins) {\n        let promise = this.runOnRoot(plugin);\n        if (isPromise(promise)) {\n          throw this.getAsyncError();\n        }\n      }\n      this.prepareVisitors();\n      if (this.hasListener) {\n        let root2 = this.result.root;\n        while (!root2[isClean]) {\n          root2[isClean] = true;\n          this.walkSync(root2);\n        }\n        if (this.listeners.OnceExit) {\n          if (root2.type === \"document\") {\n            for (let subRoot of root2.nodes) {\n              this.visitSync(this.listeners.OnceExit, subRoot);\n            }\n          } else {\n            this.visitSync(this.listeners.OnceExit, root2);\n          }\n        }\n      }\n      return this.result;\n    }\n    then(onFulfilled, onRejected) {\n      if (process.env.NODE_ENV !== \"production\") {\n        if (!(\"from\" in this.opts)) {\n          warnOnce2(\n            \"Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning.\"\n          );\n        }\n      }\n      return this.async().then(onFulfilled, onRejected);\n    }\n    toString() {\n      return this.css;\n    }\n    visitSync(visitors, node2) {\n      for (let [plugin, visitor] of visitors) {\n        this.result.lastPlugin = plugin;\n        let promise;\n        try {\n          promise = visitor(node2, this.helpers);\n        } catch (e2) {\n          throw this.handleError(e2, node2.proxyOf);\n        }\n        if (node2.type !== \"root\" && node2.type !== \"document\" && !node2.parent) {\n          return true;\n        }\n        if (isPromise(promise)) {\n          throw this.getAsyncError();\n        }\n      }\n    }\n    visitTick(stack) {\n      let visit2 = stack[stack.length - 1];\n      let { node: node2, visitors } = visit2;\n      if (node2.type !== \"root\" && node2.type !== \"document\" && !node2.parent) {\n        stack.pop();\n        return;\n      }\n      if (visitors.length > 0 && visit2.visitorIndex < visitors.length) {\n        let [plugin, visitor] = visitors[visit2.visitorIndex];\n        visit2.visitorIndex += 1;\n        if (visit2.visitorIndex === visitors.length) {\n          visit2.visitors = [];\n          visit2.visitorIndex = 0;\n        }\n        this.result.lastPlugin = plugin;\n        try {\n          return visitor(node2.toProxy(), this.helpers);\n        } catch (e2) {\n          throw this.handleError(e2, node2);\n        }\n      }\n      if (visit2.iterator !== 0) {\n        let iterator = visit2.iterator;\n        let child;\n        while (child = node2.nodes[node2.indexes[iterator]]) {\n          node2.indexes[iterator] += 1;\n          if (!child[isClean]) {\n            child[isClean] = true;\n            stack.push(toStack(child));\n            return;\n          }\n        }\n        visit2.iterator = 0;\n        delete node2.indexes[iterator];\n      }\n      let events = visit2.events;\n      while (visit2.eventIndex < events.length) {\n        let event = events[visit2.eventIndex];\n        visit2.eventIndex += 1;\n        if (event === CHILDREN) {\n          if (node2.nodes && node2.nodes.length) {\n            node2[isClean] = true;\n            visit2.iterator = node2.getIterator();\n          }\n          return;\n        } else if (this.listeners[event]) {\n          visit2.visitors = this.listeners[event];\n          return;\n        }\n      }\n      stack.pop();\n    }\n    walkSync(node2) {\n      node2[isClean] = true;\n      let events = getEvents(node2);\n      for (let event of events) {\n        if (event === CHILDREN) {\n          if (node2.nodes) {\n            node2.each((child) => {\n              if (!child[isClean]) this.walkSync(child);\n            });\n          }\n        } else {\n          let visitors = this.listeners[event];\n          if (visitors) {\n            if (this.visitSync(visitors, node2.toProxy())) return;\n          }\n        }\n      }\n    }\n    warnings() {\n      return this.sync().warnings();\n    }\n  }\n  LazyResult.registerPostcss = (dependant) => {\n    postcss2 = dependant;\n  };\n  lazyResult$1 = LazyResult;\n  LazyResult.default = LazyResult;\n  Root.registerLazyResult(LazyResult);\n  Document2.registerLazyResult(LazyResult);\n  return lazyResult$1;\n}\nvar noWorkResult$1;\nvar hasRequiredNoWorkResult$1;\nfunction requireNoWorkResult$1() {\n  if (hasRequiredNoWorkResult$1) return noWorkResult$1;\n  hasRequiredNoWorkResult$1 = 1;\n  let MapGenerator = requireMapGenerator$1();\n  let parse = requireParse$1();\n  const Result = requireResult$1();\n  let stringify = requireStringify$1();\n  let warnOnce2 = requireWarnOnce$1();\n  class NoWorkResult {\n    get content() {\n      return this.result.css;\n    }\n    get css() {\n      return this.result.css;\n    }\n    get map() {\n      return this.result.map;\n    }\n    get messages() {\n      return [];\n    }\n    get opts() {\n      return this.result.opts;\n    }\n    get processor() {\n      return this.result.processor;\n    }\n    get root() {\n      if (this._root) {\n        return this._root;\n      }\n      let root2;\n      let parser2 = parse;\n      try {\n        root2 = parser2(this._css, this._opts);\n      } catch (error) {\n        this.error = error;\n      }\n      if (this.error) {\n        throw this.error;\n      } else {\n        this._root = root2;\n        return root2;\n      }\n    }\n    get [Symbol.toStringTag]() {\n      return \"NoWorkResult\";\n    }\n    constructor(processor2, css, opts) {\n      css = css.toString();\n      this.stringified = false;\n      this._processor = processor2;\n      this._css = css;\n      this._opts = opts;\n      this._map = void 0;\n      let root2;\n      let str = stringify;\n      this.result = new Result(this._processor, root2, this._opts);\n      this.result.css = css;\n      let self2 = this;\n      Object.defineProperty(this.result, \"root\", {\n        get() {\n          return self2.root;\n        }\n      });\n      let map = new MapGenerator(str, root2, this._opts, css);\n      if (map.isMap()) {\n        let [generatedCSS, generatedMap] = map.generate();\n        if (generatedCSS) {\n          this.result.css = generatedCSS;\n        }\n        if (generatedMap) {\n          this.result.map = generatedMap;\n        }\n      } else {\n        map.clearAnnotation();\n        this.result.css = map.css;\n      }\n    }\n    async() {\n      if (this.error) return Promise.reject(this.error);\n      return Promise.resolve(this.result);\n    }\n    catch(onRejected) {\n      return this.async().catch(onRejected);\n    }\n    finally(onFinally) {\n      return this.async().then(onFinally, onFinally);\n    }\n    sync() {\n      if (this.error) throw this.error;\n      return this.result;\n    }\n    then(onFulfilled, onRejected) {\n      if (process.env.NODE_ENV !== \"production\") {\n        if (!(\"from\" in this._opts)) {\n          warnOnce2(\n            \"Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning.\"\n          );\n        }\n      }\n      return this.async().then(onFulfilled, onRejected);\n    }\n    toString() {\n      return this._css;\n    }\n    warnings() {\n      return [];\n    }\n  }\n  noWorkResult$1 = NoWorkResult;\n  NoWorkResult.default = NoWorkResult;\n  return noWorkResult$1;\n}\nvar processor$1;\nvar hasRequiredProcessor$1;\nfunction requireProcessor$1() {\n  if (hasRequiredProcessor$1) return processor$1;\n  hasRequiredProcessor$1 = 1;\n  let Document2 = requireDocument$1();\n  let LazyResult = requireLazyResult$1();\n  let NoWorkResult = requireNoWorkResult$1();\n  let Root = requireRoot$1();\n  class Processor {\n    constructor(plugins = []) {\n      this.version = \"8.5.6\";\n      this.plugins = this.normalize(plugins);\n    }\n    normalize(plugins) {\n      let normalized = [];\n      for (let i2 of plugins) {\n        if (i2.postcss === true) {\n          i2 = i2();\n        } else if (i2.postcss) {\n          i2 = i2.postcss;\n        }\n        if (typeof i2 === \"object\" && Array.isArray(i2.plugins)) {\n          normalized = normalized.concat(i2.plugins);\n        } else if (typeof i2 === \"object\" && i2.postcssPlugin) {\n          normalized.push(i2);\n        } else if (typeof i2 === \"function\") {\n          normalized.push(i2);\n        } else if (typeof i2 === \"object\" && (i2.parse || i2.stringify)) {\n          if (process.env.NODE_ENV !== \"production\") {\n            throw new Error(\n              \"PostCSS syntaxes cannot be used as plugins. Instead, please use one of the syntax/parser/stringifier options as outlined in your PostCSS runner documentation.\"\n            );\n          }\n        } else {\n          throw new Error(i2 + \" is not a PostCSS plugin\");\n        }\n      }\n      return normalized;\n    }\n    process(css, opts = {}) {\n      if (!this.plugins.length && !opts.parser && !opts.stringifier && !opts.syntax) {\n        return new NoWorkResult(this, css, opts);\n      } else {\n        return new LazyResult(this, css, opts);\n      }\n    }\n    use(plugin) {\n      this.plugins = this.plugins.concat(this.normalize([plugin]));\n      return this;\n    }\n  }\n  processor$1 = Processor;\n  Processor.default = Processor;\n  Root.registerProcessor(Processor);\n  Document2.registerProcessor(Processor);\n  return processor$1;\n}\nvar postcss_1$1;\nvar hasRequiredPostcss$1;\nfunction requirePostcss$1() {\n  if (hasRequiredPostcss$1) return postcss_1$1;\n  hasRequiredPostcss$1 = 1;\n  let AtRule = requireAtRule$1();\n  let Comment = requireComment$1();\n  let Container = requireContainer$1();\n  let CssSyntaxError = requireCssSyntaxError$1();\n  let Declaration = requireDeclaration$1();\n  let Document2 = requireDocument$1();\n  let fromJSON = requireFromJSON$1();\n  let Input = requireInput$1();\n  let LazyResult = requireLazyResult$1();\n  let list = requireList$1();\n  let Node2 = requireNode$1();\n  let parse = requireParse$1();\n  let Processor = requireProcessor$1();\n  let Result = requireResult$1();\n  let Root = requireRoot$1();\n  let Rule = requireRule$1();\n  let stringify = requireStringify$1();\n  let Warning = requireWarning$1();\n  function postcss2(...plugins) {\n    if (plugins.length === 1 && Array.isArray(plugins[0])) {\n      plugins = plugins[0];\n    }\n    return new Processor(plugins);\n  }\n  postcss2.plugin = function plugin(name, initializer) {\n    let warningPrinted = false;\n    function creator(...args) {\n      if (console && console.warn && !warningPrinted) {\n        warningPrinted = true;\n        console.warn(\n          name + \": postcss.plugin was deprecated. Migration guide:\\nhttps://evilmartians.com/chronicles/postcss-8-plugin-migration\"\n        );\n        if (process.env.LANG && process.env.LANG.startsWith(\"cn\")) {\n          console.warn(\n            name + \":  postcss.plugin . :\\nhttps://www.w3ctech.com/topic/2226\"\n          );\n        }\n      }\n      let transformer = initializer(...args);\n      transformer.postcssPlugin = name;\n      transformer.postcssVersion = new Processor().version;\n      return transformer;\n    }\n    let cache;\n    Object.defineProperty(creator, \"postcss\", {\n      get() {\n        if (!cache) cache = creator();\n        return cache;\n      }\n    });\n    creator.process = function(css, processOpts, pluginOpts) {\n      return postcss2([creator(pluginOpts)]).process(css, processOpts);\n    };\n    return creator;\n  };\n  postcss2.stringify = stringify;\n  postcss2.parse = parse;\n  postcss2.fromJSON = fromJSON;\n  postcss2.list = list;\n  postcss2.comment = (defaults) => new Comment(defaults);\n  postcss2.atRule = (defaults) => new AtRule(defaults);\n  postcss2.decl = (defaults) => new Declaration(defaults);\n  postcss2.rule = (defaults) => new Rule(defaults);\n  postcss2.root = (defaults) => new Root(defaults);\n  postcss2.document = (defaults) => new Document2(defaults);\n  postcss2.CssSyntaxError = CssSyntaxError;\n  postcss2.Declaration = Declaration;\n  postcss2.Container = Container;\n  postcss2.Processor = Processor;\n  postcss2.Document = Document2;\n  postcss2.Comment = Comment;\n  postcss2.Warning = Warning;\n  postcss2.AtRule = AtRule;\n  postcss2.Result = Result;\n  postcss2.Input = Input;\n  postcss2.Rule = Rule;\n  postcss2.Root = Root;\n  postcss2.Node = Node2;\n  LazyResult.registerPostcss(postcss2);\n  postcss_1$1 = postcss2;\n  postcss2.default = postcss2;\n  return postcss_1$1;\n}\nvar safeParser$1$1;\nvar hasRequiredSafeParser$1;\nfunction requireSafeParser$1() {\n  if (hasRequiredSafeParser$1) return safeParser$1$1;\n  hasRequiredSafeParser$1 = 1;\n  let Comment = requireComment$1();\n  let Parser = requireParser$1();\n  let tokenizer = requireTokenize$1();\n  class SafeParser extends Parser {\n    checkMissedSemicolon() {\n    }\n    comment(token) {\n      let node2 = new Comment();\n      this.init(node2, token[2]);\n      let pos = this.input.fromOffset(token[3]) || this.input.fromOffset(this.input.css.length - 1);\n      node2.source.end = {\n        column: pos.col,\n        line: pos.line,\n        offset: token[3] + 1\n      };\n      let text = token[1].slice(2);\n      if (text.slice(-2) === \"*/\") text = text.slice(0, -2);\n      if (/^\\s*$/.test(text)) {\n        node2.text = \"\";\n        node2.raws.left = text;\n        node2.raws.right = \"\";\n      } else {\n        let match = text.match(/^(\\s*)([^]*\\S)(\\s*)$/);\n        node2.text = match[2];\n        node2.raws.left = match[1];\n        node2.raws.right = match[3];\n      }\n    }\n    createTokenizer() {\n      this.tokenizer = tokenizer(this.input, { ignoreErrors: true });\n    }\n    decl(tokens) {\n      if (tokens.length > 1 && tokens.some((i2) => i2[0] === \"word\")) {\n        super.decl(tokens);\n      }\n    }\n    doubleColon() {\n    }\n    endFile() {\n      if (this.current.nodes && this.current.nodes.length) {\n        this.current.raws.semicolon = this.semicolon;\n      }\n      this.current.raws.after = (this.current.raws.after || \"\") + this.spaces;\n      while (this.current.parent) {\n        this.current = this.current.parent;\n        this.current.raws.after = \"\";\n      }\n      this.root.source.end = this.getPosition(this.tokenizer.position());\n    }\n    precheckMissedSemicolon(tokens) {\n      let colon = this.colon(tokens);\n      if (colon === false) return;\n      let nextStart, prevEnd;\n      for (nextStart = colon - 1; nextStart >= 0; nextStart--) {\n        if (tokens[nextStart][0] === \"word\") break;\n      }\n      if (nextStart === 0 || nextStart < 0) return;\n      for (prevEnd = nextStart - 1; prevEnd >= 0; prevEnd--) {\n        if (tokens[prevEnd][0] !== \"space\") {\n          prevEnd += 1;\n          break;\n        }\n      }\n      let other = tokens.slice(nextStart);\n      let spaces = tokens.slice(prevEnd, nextStart);\n      tokens.splice(prevEnd, tokens.length - prevEnd);\n      this.spaces = spaces.map((i2) => i2[1]).join(\"\");\n      this.decl(other);\n    }\n    unclosedBracket() {\n    }\n    unexpectedClose() {\n      this.current.raws.after += \"}\";\n    }\n    unknownWord(tokens) {\n      this.spaces += tokens.map((i2) => i2[1]).join(\"\");\n    }\n    unnamedAtrule(node2) {\n      node2.name = \"\";\n    }\n  }\n  safeParser$1$1 = SafeParser;\n  return safeParser$1$1;\n}\nvar safeParse$1;\nvar hasRequiredSafeParse$1;\nfunction requireSafeParse$1() {\n  if (hasRequiredSafeParse$1) return safeParse$1;\n  hasRequiredSafeParse$1 = 1;\n  let { Input } = requirePostcss$1();\n  let SafeParser = requireSafeParser$1();\n  safeParse$1 = function safeParse2(css, opts) {\n    let input2 = new Input(css, opts);\n    let parser2 = new SafeParser(input2);\n    parser2.parse();\n    return parser2.root;\n  };\n  return safeParse$1;\n}\nrequireSafeParse$1();\nvar postcssExports$1 = requirePostcss$1();\nconst postcss$1 = /* @__PURE__ */ getDefaultExportFromCjs$1(postcssExports$1);\npostcss$1.stringify;\npostcss$1.fromJSON;\npostcss$1.plugin;\npostcss$1.parse;\npostcss$1.list;\npostcss$1.document;\npostcss$1.comment;\npostcss$1.atRule;\npostcss$1.rule;\npostcss$1.decl;\npostcss$1.root;\npostcss$1.CssSyntaxError;\npostcss$1.Declaration;\npostcss$1.Container;\npostcss$1.Processor;\npostcss$1.Document;\npostcss$1.Comment;\npostcss$1.Warning;\npostcss$1.AtRule;\npostcss$1.Result;\npostcss$1.Input;\npostcss$1.Rule;\npostcss$1.Root;\npostcss$1.Node;\nvar __defProp2 = Object.defineProperty;\nvar __defNormalProp2 = (obj, key, value) => key in obj ? __defProp2(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField2 = (obj, key, value) => __defNormalProp2(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nfunction getDefaultExportFromCjs(x) {\n  return x && x.__esModule && Object.prototype.hasOwnProperty.call(x, \"default\") ? x[\"default\"] : x;\n}\nfunction getAugmentedNamespace(n2) {\n  if (Object.prototype.hasOwnProperty.call(n2, \"__esModule\")) return n2;\n  var f2 = n2.default;\n  if (typeof f2 == \"function\") {\n    var a2 = function a3() {\n      if (this instanceof a3) {\n        return Reflect.construct(f2, arguments, this.constructor);\n      }\n      return f2.apply(this, arguments);\n    };\n    a2.prototype = f2.prototype;\n  } else a2 = {};\n  Object.defineProperty(a2, \"__esModule\", { value: true });\n  Object.keys(n2).forEach(function(k) {\n    var d2 = Object.getOwnPropertyDescriptor(n2, k);\n    Object.defineProperty(a2, k, d2.get ? d2 : {\n      enumerable: true,\n      get: function() {\n        return n2[k];\n      }\n    });\n  });\n  return a2;\n}\nvar picocolors_browser = { exports: {} };\nvar hasRequiredPicocolors_browser;\nfunction requirePicocolors_browser() {\n  if (hasRequiredPicocolors_browser) return picocolors_browser.exports;\n  hasRequiredPicocolors_browser = 1;\n  var x = String;\n  var create = function() {\n    return { isColorSupported: false, reset: x, bold: x, dim: x, italic: x, underline: x, inverse: x, hidden: x, strikethrough: x, black: x, red: x, green: x, yellow: x, blue: x, magenta: x, cyan: x, white: x, gray: x, bgBlack: x, bgRed: x, bgGreen: x, bgYellow: x, bgBlue: x, bgMagenta: x, bgCyan: x, bgWhite: x, blackBright: x, redBright: x, greenBright: x, yellowBright: x, blueBright: x, magentaBright: x, cyanBright: x, whiteBright: x, bgBlackBright: x, bgRedBright: x, bgGreenBright: x, bgYellowBright: x, bgBlueBright: x, bgMagentaBright: x, bgCyanBright: x, bgWhiteBright: x };\n  };\n  picocolors_browser.exports = create();\n  picocolors_browser.exports.createColors = create;\n  return picocolors_browser.exports;\n}\nconst __viteBrowserExternal = {};\nconst __viteBrowserExternal$1 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null,\n  default: __viteBrowserExternal\n}, Symbol.toStringTag, { value: \"Module\" }));\nconst require$$2 = /* @__PURE__ */ getAugmentedNamespace(__viteBrowserExternal$1);\nvar cssSyntaxError;\nvar hasRequiredCssSyntaxError;\nfunction requireCssSyntaxError() {\n  if (hasRequiredCssSyntaxError) return cssSyntaxError;\n  hasRequiredCssSyntaxError = 1;\n  let pico = /* @__PURE__ */ requirePicocolors_browser();\n  let terminalHighlight = require$$2;\n  class CssSyntaxError extends Error {\n    constructor(message, line, column, source, file, plugin) {\n      super(message);\n      this.name = \"CssSyntaxError\";\n      this.reason = message;\n      if (file) {\n        this.file = file;\n      }\n      if (source) {\n        this.source = source;\n      }\n      if (plugin) {\n        this.plugin = plugin;\n      }\n      if (typeof line !== \"undefined\" && typeof column !== \"undefined\") {\n        if (typeof line === \"number\") {\n          this.line = line;\n          this.column = column;\n        } else {\n          this.line = line.line;\n          this.column = line.column;\n          this.endLine = column.line;\n          this.endColumn = column.column;\n        }\n      }\n      this.setMessage();\n      if (Error.captureStackTrace) {\n        Error.captureStackTrace(this, CssSyntaxError);\n      }\n    }\n    setMessage() {\n      this.message = this.plugin ? this.plugin + \": \" : \"\";\n      this.message += this.file ? this.file : \"<css input>\";\n      if (typeof this.line !== \"undefined\") {\n        this.message += \":\" + this.line + \":\" + this.column;\n      }\n      this.message += \": \" + this.reason;\n    }\n    showSourceCode(color) {\n      if (!this.source) return \"\";\n      let css = this.source;\n      if (color == null) color = pico.isColorSupported;\n      let aside = (text) => text;\n      let mark = (text) => text;\n      let highlight = (text) => text;\n      if (color) {\n        let { bold, gray, red } = pico.createColors(true);\n        mark = (text) => bold(red(text));\n        aside = (text) => gray(text);\n        if (terminalHighlight) {\n          highlight = (text) => terminalHighlight(text);\n        }\n      }\n      let lines = css.split(/\\r?\\n/);\n      let start = Math.max(this.line - 3, 0);\n      let end = Math.min(this.line + 2, lines.length);\n      let maxWidth = String(end).length;\n      return lines.slice(start, end).map((line, index2) => {\n        let number = start + 1 + index2;\n        let gutter = \" \" + (\" \" + number).slice(-maxWidth) + \" | \";\n        if (number === this.line) {\n          if (line.length > 160) {\n            let padding = 20;\n            let subLineStart = Math.max(0, this.column - padding);\n            let subLineEnd = Math.max(\n              this.column + padding,\n              this.endColumn + padding\n            );\n            let subLine = line.slice(subLineStart, subLineEnd);\n            let spacing2 = aside(gutter.replace(/\\d/g, \" \")) + line.slice(0, Math.min(this.column - 1, padding - 1)).replace(/[^\\t]/g, \" \");\n            return mark(\">\") + aside(gutter) + highlight(subLine) + \"\\n \" + spacing2 + mark(\"^\");\n          }\n          let spacing = aside(gutter.replace(/\\d/g, \" \")) + line.slice(0, this.column - 1).replace(/[^\\t]/g, \" \");\n          return mark(\">\") + aside(gutter) + highlight(line) + \"\\n \" + spacing + mark(\"^\");\n        }\n        return \" \" + aside(gutter) + highlight(line);\n      }).join(\"\\n\");\n    }\n    toString() {\n      let code = this.showSourceCode();\n      if (code) {\n        code = \"\\n\\n\" + code + \"\\n\";\n      }\n      return this.name + \": \" + this.message + code;\n    }\n  }\n  cssSyntaxError = CssSyntaxError;\n  CssSyntaxError.default = CssSyntaxError;\n  return cssSyntaxError;\n}\nvar stringifier;\nvar hasRequiredStringifier;\nfunction requireStringifier() {\n  if (hasRequiredStringifier) return stringifier;\n  hasRequiredStringifier = 1;\n  const DEFAULT_RAW = {\n    after: \"\\n\",\n    beforeClose: \"\\n\",\n    beforeComment: \"\\n\",\n    beforeDecl: \"\\n\",\n    beforeOpen: \" \",\n    beforeRule: \"\\n\",\n    colon: \": \",\n    commentLeft: \" \",\n    commentRight: \" \",\n    emptyBody: \"\",\n    indent: \"    \",\n    semicolon: false\n  };\n  function capitalize(str) {\n    return str[0].toUpperCase() + str.slice(1);\n  }\n  class Stringifier {\n    constructor(builder) {\n      this.builder = builder;\n    }\n    atrule(node2, semicolon) {\n      let name = \"@\" + node2.name;\n      let params = node2.params ? this.rawValue(node2, \"params\") : \"\";\n      if (typeof node2.raws.afterName !== \"undefined\") {\n        name += node2.raws.afterName;\n      } else if (params) {\n        name += \" \";\n      }\n      if (node2.nodes) {\n        this.block(node2, name + params);\n      } else {\n        let end = (node2.raws.between || \"\") + (semicolon ? \";\" : \"\");\n        this.builder(name + params + end, node2);\n      }\n    }\n    beforeAfter(node2, detect) {\n      let value;\n      if (node2.type === \"decl\") {\n        value = this.raw(node2, null, \"beforeDecl\");\n      } else if (node2.type === \"comment\") {\n        value = this.raw(node2, null, \"beforeComment\");\n      } else if (detect === \"before\") {\n        value = this.raw(node2, null, \"beforeRule\");\n      } else {\n        value = this.raw(node2, null, \"beforeClose\");\n      }\n      let buf = node2.parent;\n      let depth = 0;\n      while (buf && buf.type !== \"root\") {\n        depth += 1;\n        buf = buf.parent;\n      }\n      if (value.includes(\"\\n\")) {\n        let indent = this.raw(node2, null, \"indent\");\n        if (indent.length) {\n          for (let step = 0; step < depth; step++) value += indent;\n        }\n      }\n      return value;\n    }\n    block(node2, start) {\n      let between = this.raw(node2, \"between\", \"beforeOpen\");\n      this.builder(start + between + \"{\", node2, \"start\");\n      let after;\n      if (node2.nodes && node2.nodes.length) {\n        this.body(node2);\n        after = this.raw(node2, \"after\");\n      } else {\n        after = this.raw(node2, \"after\", \"emptyBody\");\n      }\n      if (after) this.builder(after);\n      this.builder(\"}\", node2, \"end\");\n    }\n    body(node2) {\n      let last = node2.nodes.length - 1;\n      while (last > 0) {\n        if (node2.nodes[last].type !== \"comment\") break;\n        last -= 1;\n      }\n      let semicolon = this.raw(node2, \"semicolon\");\n      for (let i2 = 0; i2 < node2.nodes.length; i2++) {\n        let child = node2.nodes[i2];\n        let before = this.raw(child, \"before\");\n        if (before) this.builder(before);\n        this.stringify(child, last !== i2 || semicolon);\n      }\n    }\n    comment(node2) {\n      let left = this.raw(node2, \"left\", \"commentLeft\");\n      let right = this.raw(node2, \"right\", \"commentRight\");\n      this.builder(\"/*\" + left + node2.text + right + \"*/\", node2);\n    }\n    decl(node2, semicolon) {\n      let between = this.raw(node2, \"between\", \"colon\");\n      let string = node2.prop + between + this.rawValue(node2, \"value\");\n      if (node2.important) {\n        string += node2.raws.important || \" !important\";\n      }\n      if (semicolon) string += \";\";\n      this.builder(string, node2);\n    }\n    document(node2) {\n      this.body(node2);\n    }\n    raw(node2, own, detect) {\n      let value;\n      if (!detect) detect = own;\n      if (own) {\n        value = node2.raws[own];\n        if (typeof value !== \"undefined\") return value;\n      }\n      let parent = node2.parent;\n      if (detect === \"before\") {\n        if (!parent || parent.type === \"root\" && parent.first === node2) {\n          return \"\";\n        }\n        if (parent && parent.type === \"document\") {\n          return \"\";\n        }\n      }\n      if (!parent) return DEFAULT_RAW[detect];\n      let root2 = node2.root();\n      if (!root2.rawCache) root2.rawCache = {};\n      if (typeof root2.rawCache[detect] !== \"undefined\") {\n        return root2.rawCache[detect];\n      }\n      if (detect === \"before\" || detect === \"after\") {\n        return this.beforeAfter(node2, detect);\n      } else {\n        let method = \"raw\" + capitalize(detect);\n        if (this[method]) {\n          value = this[method](root2, node2);\n        } else {\n          root2.walk((i2) => {\n            value = i2.raws[own];\n            if (typeof value !== \"undefined\") return false;\n          });\n        }\n      }\n      if (typeof value === \"undefined\") value = DEFAULT_RAW[detect];\n      root2.rawCache[detect] = value;\n      return value;\n    }\n    rawBeforeClose(root2) {\n      let value;\n      root2.walk((i2) => {\n        if (i2.nodes && i2.nodes.length > 0) {\n          if (typeof i2.raws.after !== \"undefined\") {\n            value = i2.raws.after;\n            if (value.includes(\"\\n\")) {\n              value = value.replace(/[^\\n]+$/, \"\");\n            }\n            return false;\n          }\n        }\n      });\n      if (value) value = value.replace(/\\S/g, \"\");\n      return value;\n    }\n    rawBeforeComment(root2, node2) {\n      let value;\n      root2.walkComments((i2) => {\n        if (typeof i2.raws.before !== \"undefined\") {\n          value = i2.raws.before;\n          if (value.includes(\"\\n\")) {\n            value = value.replace(/[^\\n]+$/, \"\");\n          }\n          return false;\n        }\n      });\n      if (typeof value === \"undefined\") {\n        value = this.raw(node2, null, \"beforeDecl\");\n      } else if (value) {\n        value = value.replace(/\\S/g, \"\");\n      }\n      return value;\n    }\n    rawBeforeDecl(root2, node2) {\n      let value;\n      root2.walkDecls((i2) => {\n        if (typeof i2.raws.before !== \"undefined\") {\n          value = i2.raws.before;\n          if (value.includes(\"\\n\")) {\n            value = value.replace(/[^\\n]+$/, \"\");\n          }\n          return false;\n        }\n      });\n      if (typeof value === \"undefined\") {\n        value = this.raw(node2, null, \"beforeRule\");\n      } else if (value) {\n        value = value.replace(/\\S/g, \"\");\n      }\n      return value;\n    }\n    rawBeforeOpen(root2) {\n      let value;\n      root2.walk((i2) => {\n        if (i2.type !== \"decl\") {\n          value = i2.raws.between;\n          if (typeof value !== \"undefined\") return false;\n        }\n      });\n      return value;\n    }\n    rawBeforeRule(root2) {\n      let value;\n      root2.walk((i2) => {\n        if (i2.nodes && (i2.parent !== root2 || root2.first !== i2)) {\n          if (typeof i2.raws.before !== \"undefined\") {\n            value = i2.raws.before;\n            if (value.includes(\"\\n\")) {\n              value = value.replace(/[^\\n]+$/, \"\");\n            }\n            return false;\n          }\n        }\n      });\n      if (value) value = value.replace(/\\S/g, \"\");\n      return value;\n    }\n    rawColon(root2) {\n      let value;\n      root2.walkDecls((i2) => {\n        if (typeof i2.raws.between !== \"undefined\") {\n          value = i2.raws.between.replace(/[^\\s:]/g, \"\");\n          return false;\n        }\n      });\n      return value;\n    }\n    rawEmptyBody(root2) {\n      let value;\n      root2.walk((i2) => {\n        if (i2.nodes && i2.nodes.length === 0) {\n          value = i2.raws.after;\n          if (typeof value !== \"undefined\") return false;\n        }\n      });\n      return value;\n    }\n    rawIndent(root2) {\n      if (root2.raws.indent) return root2.raws.indent;\n      let value;\n      root2.walk((i2) => {\n        let p2 = i2.parent;\n        if (p2 && p2 !== root2 && p2.parent && p2.parent === root2) {\n          if (typeof i2.raws.before !== \"undefined\") {\n            let parts = i2.raws.before.split(\"\\n\");\n            value = parts[parts.length - 1];\n            value = value.replace(/\\S/g, \"\");\n            return false;\n          }\n        }\n      });\n      return value;\n    }\n    rawSemicolon(root2) {\n      let value;\n      root2.walk((i2) => {\n        if (i2.nodes && i2.nodes.length && i2.last.type === \"decl\") {\n          value = i2.raws.semicolon;\n          if (typeof value !== \"undefined\") return false;\n        }\n      });\n      return value;\n    }\n    rawValue(node2, prop) {\n      let value = node2[prop];\n      let raw = node2.raws[prop];\n      if (raw && raw.value === value) {\n        return raw.raw;\n      }\n      return value;\n    }\n    root(node2) {\n      this.body(node2);\n      if (node2.raws.after) this.builder(node2.raws.after);\n    }\n    rule(node2) {\n      this.block(node2, this.rawValue(node2, \"selector\"));\n      if (node2.raws.ownSemicolon) {\n        this.builder(node2.raws.ownSemicolon, node2, \"end\");\n      }\n    }\n    stringify(node2, semicolon) {\n      if (!this[node2.type]) {\n        throw new Error(\n          \"Unknown AST node type \" + node2.type + \". Maybe you need to change PostCSS stringifier.\"\n        );\n      }\n      this[node2.type](node2, semicolon);\n    }\n  }\n  stringifier = Stringifier;\n  Stringifier.default = Stringifier;\n  return stringifier;\n}\nvar stringify_1;\nvar hasRequiredStringify;\nfunction requireStringify() {\n  if (hasRequiredStringify) return stringify_1;\n  hasRequiredStringify = 1;\n  let Stringifier = requireStringifier();\n  function stringify(node2, builder) {\n    let str = new Stringifier(builder);\n    str.stringify(node2);\n  }\n  stringify_1 = stringify;\n  stringify.default = stringify;\n  return stringify_1;\n}\nvar symbols = {};\nvar hasRequiredSymbols;\nfunction requireSymbols() {\n  if (hasRequiredSymbols) return symbols;\n  hasRequiredSymbols = 1;\n  symbols.isClean = Symbol(\"isClean\");\n  symbols.my = Symbol(\"my\");\n  return symbols;\n}\nvar node;\nvar hasRequiredNode;\nfunction requireNode() {\n  if (hasRequiredNode) return node;\n  hasRequiredNode = 1;\n  let CssSyntaxError = requireCssSyntaxError();\n  let Stringifier = requireStringifier();\n  let stringify = requireStringify();\n  let { isClean, my } = requireSymbols();\n  function cloneNode(obj, parent) {\n    let cloned = new obj.constructor();\n    for (let i2 in obj) {\n      if (!Object.prototype.hasOwnProperty.call(obj, i2)) {\n        continue;\n      }\n      if (i2 === \"proxyCache\") continue;\n      let value = obj[i2];\n      let type = typeof value;\n      if (i2 === \"parent\" && type === \"object\") {\n        if (parent) cloned[i2] = parent;\n      } else if (i2 === \"source\") {\n        cloned[i2] = value;\n      } else if (Array.isArray(value)) {\n        cloned[i2] = value.map((j2) => cloneNode(j2, cloned));\n      } else {\n        if (type === \"object\" && value !== null) value = cloneNode(value);\n        cloned[i2] = value;\n      }\n    }\n    return cloned;\n  }\n  function sourceOffset(inputCSS, position) {\n    if (position && typeof position.offset !== \"undefined\") {\n      return position.offset;\n    }\n    let column = 1;\n    let line = 1;\n    let offset = 0;\n    for (let i2 = 0; i2 < inputCSS.length; i2++) {\n      if (line === position.line && column === position.column) {\n        offset = i2;\n        break;\n      }\n      if (inputCSS[i2] === \"\\n\") {\n        column = 1;\n        line += 1;\n      } else {\n        column += 1;\n      }\n    }\n    return offset;\n  }\n  class Node2 {\n    get proxyOf() {\n      return this;\n    }\n    constructor(defaults = {}) {\n      this.raws = {};\n      this[isClean] = false;\n      this[my] = true;\n      for (let name in defaults) {\n        if (name === \"nodes\") {\n          this.nodes = [];\n          for (let node2 of defaults[name]) {\n            if (typeof node2.clone === \"function\") {\n              this.append(node2.clone());\n            } else {\n              this.append(node2);\n            }\n          }\n        } else {\n          this[name] = defaults[name];\n        }\n      }\n    }\n    addToError(error) {\n      error.postcssNode = this;\n      if (error.stack && this.source && /\\n\\s{4}at /.test(error.stack)) {\n        let s2 = this.source;\n        error.stack = error.stack.replace(\n          /\\n\\s{4}at /,\n          `$&${s2.input.from}:${s2.start.line}:${s2.start.column}$&`\n        );\n      }\n      return error;\n    }\n    after(add) {\n      this.parent.insertAfter(this, add);\n      return this;\n    }\n    assign(overrides = {}) {\n      for (let name in overrides) {\n        this[name] = overrides[name];\n      }\n      return this;\n    }\n    before(add) {\n      this.parent.insertBefore(this, add);\n      return this;\n    }\n    cleanRaws(keepBetween) {\n      delete this.raws.before;\n      delete this.raws.after;\n      if (!keepBetween) delete this.raws.between;\n    }\n    clone(overrides = {}) {\n      let cloned = cloneNode(this);\n      for (let name in overrides) {\n        cloned[name] = overrides[name];\n      }\n      return cloned;\n    }\n    cloneAfter(overrides = {}) {\n      let cloned = this.clone(overrides);\n      this.parent.insertAfter(this, cloned);\n      return cloned;\n    }\n    cloneBefore(overrides = {}) {\n      let cloned = this.clone(overrides);\n      this.parent.insertBefore(this, cloned);\n      return cloned;\n    }\n    error(message, opts = {}) {\n      if (this.source) {\n        let { end, start } = this.rangeBy(opts);\n        return this.source.input.error(\n          message,\n          { column: start.column, line: start.line },\n          { column: end.column, line: end.line },\n          opts\n        );\n      }\n      return new CssSyntaxError(message);\n    }\n    getProxyProcessor() {\n      return {\n        get(node2, prop) {\n          if (prop === \"proxyOf\") {\n            return node2;\n          } else if (prop === \"root\") {\n            return () => node2.root().toProxy();\n          } else {\n            return node2[prop];\n          }\n        },\n        set(node2, prop, value) {\n          if (node2[prop] === value) return true;\n          node2[prop] = value;\n          if (prop === \"prop\" || prop === \"value\" || prop === \"name\" || prop === \"params\" || prop === \"important\" || /* c8 ignore next */\n          prop === \"text\") {\n            node2.markDirty();\n          }\n          return true;\n        }\n      };\n    }\n    /* c8 ignore next 3 */\n    markClean() {\n      this[isClean] = true;\n    }\n    markDirty() {\n      if (this[isClean]) {\n        this[isClean] = false;\n        let next = this;\n        while (next = next.parent) {\n          next[isClean] = false;\n        }\n      }\n    }\n    next() {\n      if (!this.parent) return void 0;\n      let index2 = this.parent.index(this);\n      return this.parent.nodes[index2 + 1];\n    }\n    positionBy(opts = {}) {\n      let pos = this.source.start;\n      if (opts.index) {\n        pos = this.positionInside(opts.index);\n      } else if (opts.word) {\n        let inputString = \"document\" in this.source.input ? this.source.input.document : this.source.input.css;\n        let stringRepresentation = inputString.slice(\n          sourceOffset(inputString, this.source.start),\n          sourceOffset(inputString, this.source.end)\n        );\n        let index2 = stringRepresentation.indexOf(opts.word);\n        if (index2 !== -1) pos = this.positionInside(index2);\n      }\n      return pos;\n    }\n    positionInside(index2) {\n      let column = this.source.start.column;\n      let line = this.source.start.line;\n      let inputString = \"document\" in this.source.input ? this.source.input.document : this.source.input.css;\n      let offset = sourceOffset(inputString, this.source.start);\n      let end = offset + index2;\n      for (let i2 = offset; i2 < end; i2++) {\n        if (inputString[i2] === \"\\n\") {\n          column = 1;\n          line += 1;\n        } else {\n          column += 1;\n        }\n      }\n      return { column, line, offset: end };\n    }\n    prev() {\n      if (!this.parent) return void 0;\n      let index2 = this.parent.index(this);\n      return this.parent.nodes[index2 - 1];\n    }\n    rangeBy(opts = {}) {\n      let inputString = \"document\" in this.source.input ? this.source.input.document : this.source.input.css;\n      let start = {\n        column: this.source.start.column,\n        line: this.source.start.line,\n        offset: sourceOffset(inputString, this.source.start)\n      };\n      let end = this.source.end ? {\n        column: this.source.end.column + 1,\n        line: this.source.end.line,\n        offset: typeof this.source.end.offset === \"number\" ? (\n          // `source.end.offset` is exclusive, so we don't need to add 1\n          this.source.end.offset\n        ) : (\n          // Since line/column in this.source.end is inclusive,\n          // the `sourceOffset(... , this.source.end)` returns an inclusive offset.\n          // So, we add 1 to convert it to exclusive.\n          sourceOffset(inputString, this.source.end) + 1\n        )\n      } : {\n        column: start.column + 1,\n        line: start.line,\n        offset: start.offset + 1\n      };\n      if (opts.word) {\n        let stringRepresentation = inputString.slice(\n          sourceOffset(inputString, this.source.start),\n          sourceOffset(inputString, this.source.end)\n        );\n        let index2 = stringRepresentation.indexOf(opts.word);\n        if (index2 !== -1) {\n          start = this.positionInside(index2);\n          end = this.positionInside(index2 + opts.word.length);\n        }\n      } else {\n        if (opts.start) {\n          start = {\n            column: opts.start.column,\n            line: opts.start.line,\n            offset: sourceOffset(inputString, opts.start)\n          };\n        } else if (opts.index) {\n          start = this.positionInside(opts.index);\n        }\n        if (opts.end) {\n          end = {\n            column: opts.end.column,\n            line: opts.end.line,\n            offset: sourceOffset(inputString, opts.end)\n          };\n        } else if (typeof opts.endIndex === \"number\") {\n          end = this.positionInside(opts.endIndex);\n        } else if (opts.index) {\n          end = this.positionInside(opts.index + 1);\n        }\n      }\n      if (end.line < start.line || end.line === start.line && end.column <= start.column) {\n        end = {\n          column: start.column + 1,\n          line: start.line,\n          offset: start.offset + 1\n        };\n      }\n      return { end, start };\n    }\n    raw(prop, defaultType) {\n      let str = new Stringifier();\n      return str.raw(this, prop, defaultType);\n    }\n    remove() {\n      if (this.parent) {\n        this.parent.removeChild(this);\n      }\n      this.parent = void 0;\n      return this;\n    }\n    replaceWith(...nodes) {\n      if (this.parent) {\n        let bookmark = this;\n        let foundSelf = false;\n        for (let node2 of nodes) {\n          if (node2 === this) {\n            foundSelf = true;\n          } else if (foundSelf) {\n            this.parent.insertAfter(bookmark, node2);\n            bookmark = node2;\n          } else {\n            this.parent.insertBefore(bookmark, node2);\n          }\n        }\n        if (!foundSelf) {\n          this.remove();\n        }\n      }\n      return this;\n    }\n    root() {\n      let result2 = this;\n      while (result2.parent && result2.parent.type !== \"document\") {\n        result2 = result2.parent;\n      }\n      return result2;\n    }\n    toJSON(_, inputs) {\n      let fixed = {};\n      let emitInputs = inputs == null;\n      inputs = inputs || /* @__PURE__ */ new Map();\n      let inputsNextIndex = 0;\n      for (let name in this) {\n        if (!Object.prototype.hasOwnProperty.call(this, name)) {\n          continue;\n        }\n        if (name === \"parent\" || name === \"proxyCache\") continue;\n        let value = this[name];\n        if (Array.isArray(value)) {\n          fixed[name] = value.map((i2) => {\n            if (typeof i2 === \"object\" && i2.toJSON) {\n              return i2.toJSON(null, inputs);\n            } else {\n              return i2;\n            }\n          });\n        } else if (typeof value === \"object\" && value.toJSON) {\n          fixed[name] = value.toJSON(null, inputs);\n        } else if (name === \"source\") {\n          if (value == null) continue;\n          let inputId = inputs.get(value.input);\n          if (inputId == null) {\n            inputId = inputsNextIndex;\n            inputs.set(value.input, inputsNextIndex);\n            inputsNextIndex++;\n          }\n          fixed[name] = {\n            end: value.end,\n            inputId,\n            start: value.start\n          };\n        } else {\n          fixed[name] = value;\n        }\n      }\n      if (emitInputs) {\n        fixed.inputs = [...inputs.keys()].map((input2) => input2.toJSON());\n      }\n      return fixed;\n    }\n    toProxy() {\n      if (!this.proxyCache) {\n        this.proxyCache = new Proxy(this, this.getProxyProcessor());\n      }\n      return this.proxyCache;\n    }\n    toString(stringifier2 = stringify) {\n      if (stringifier2.stringify) stringifier2 = stringifier2.stringify;\n      let result2 = \"\";\n      stringifier2(this, (i2) => {\n        result2 += i2;\n      });\n      return result2;\n    }\n    warn(result2, text, opts = {}) {\n      let data = { node: this };\n      for (let i2 in opts) data[i2] = opts[i2];\n      return result2.warn(text, data);\n    }\n  }\n  node = Node2;\n  Node2.default = Node2;\n  return node;\n}\nvar comment;\nvar hasRequiredComment;\nfunction requireComment() {\n  if (hasRequiredComment) return comment;\n  hasRequiredComment = 1;\n  let Node2 = requireNode();\n  class Comment extends Node2 {\n    constructor(defaults) {\n      super(defaults);\n      this.type = \"comment\";\n    }\n  }\n  comment = Comment;\n  Comment.default = Comment;\n  return comment;\n}\nvar declaration;\nvar hasRequiredDeclaration;\nfunction requireDeclaration() {\n  if (hasRequiredDeclaration) return declaration;\n  hasRequiredDeclaration = 1;\n  let Node2 = requireNode();\n  class Declaration extends Node2 {\n    get variable() {\n      return this.prop.startsWith(\"--\") || this.prop[0] === \"$\";\n    }\n    constructor(defaults) {\n      if (defaults && typeof defaults.value !== \"undefined\" && typeof defaults.value !== \"string\") {\n        defaults = { ...defaults, value: String(defaults.value) };\n      }\n      super(defaults);\n      this.type = \"decl\";\n    }\n  }\n  declaration = Declaration;\n  Declaration.default = Declaration;\n  return declaration;\n}\nvar container;\nvar hasRequiredContainer;\nfunction requireContainer() {\n  if (hasRequiredContainer) return container;\n  hasRequiredContainer = 1;\n  let Comment = requireComment();\n  let Declaration = requireDeclaration();\n  let Node2 = requireNode();\n  let { isClean, my } = requireSymbols();\n  let AtRule, parse, Root, Rule;\n  function cleanSource(nodes) {\n    return nodes.map((i2) => {\n      if (i2.nodes) i2.nodes = cleanSource(i2.nodes);\n      delete i2.source;\n      return i2;\n    });\n  }\n  function markTreeDirty(node2) {\n    node2[isClean] = false;\n    if (node2.proxyOf.nodes) {\n      for (let i2 of node2.proxyOf.nodes) {\n        markTreeDirty(i2);\n      }\n    }\n  }\n  class Container extends Node2 {\n    get first() {\n      if (!this.proxyOf.nodes) return void 0;\n      return this.proxyOf.nodes[0];\n    }\n    get last() {\n      if (!this.proxyOf.nodes) return void 0;\n      return this.proxyOf.nodes[this.proxyOf.nodes.length - 1];\n    }\n    append(...children) {\n      for (let child of children) {\n        let nodes = this.normalize(child, this.last);\n        for (let node2 of nodes) this.proxyOf.nodes.push(node2);\n      }\n      this.markDirty();\n      return this;\n    }\n    cleanRaws(keepBetween) {\n      super.cleanRaws(keepBetween);\n      if (this.nodes) {\n        for (let node2 of this.nodes) node2.cleanRaws(keepBetween);\n      }\n    }\n    each(callback) {\n      if (!this.proxyOf.nodes) return void 0;\n      let iterator = this.getIterator();\n      let index2, result2;\n      while (this.indexes[iterator] < this.proxyOf.nodes.length) {\n        index2 = this.indexes[iterator];\n        result2 = callback(this.proxyOf.nodes[index2], index2);\n        if (result2 === false) break;\n        this.indexes[iterator] += 1;\n      }\n      delete this.indexes[iterator];\n      return result2;\n    }\n    every(condition) {\n      return this.nodes.every(condition);\n    }\n    getIterator() {\n      if (!this.lastEach) this.lastEach = 0;\n      if (!this.indexes) this.indexes = {};\n      this.lastEach += 1;\n      let iterator = this.lastEach;\n      this.indexes[iterator] = 0;\n      return iterator;\n    }\n    getProxyProcessor() {\n      return {\n        get(node2, prop) {\n          if (prop === \"proxyOf\") {\n            return node2;\n          } else if (!node2[prop]) {\n            return node2[prop];\n          } else if (prop === \"each\" || typeof prop === \"string\" && prop.startsWith(\"walk\")) {\n            return (...args) => {\n              return node2[prop](\n                ...args.map((i2) => {\n                  if (typeof i2 === \"function\") {\n                    return (child, index2) => i2(child.toProxy(), index2);\n                  } else {\n                    return i2;\n                  }\n                })\n              );\n            };\n          } else if (prop === \"every\" || prop === \"some\") {\n            return (cb) => {\n              return node2[prop](\n                (child, ...other) => cb(child.toProxy(), ...other)\n              );\n            };\n          } else if (prop === \"root\") {\n            return () => node2.root().toProxy();\n          } else if (prop === \"nodes\") {\n            return node2.nodes.map((i2) => i2.toProxy());\n          } else if (prop === \"first\" || prop === \"last\") {\n            return node2[prop].toProxy();\n          } else {\n            return node2[prop];\n          }\n        },\n        set(node2, prop, value) {\n          if (node2[prop] === value) return true;\n          node2[prop] = value;\n          if (prop === \"name\" || prop === \"params\" || prop === \"selector\") {\n            node2.markDirty();\n          }\n          return true;\n        }\n      };\n    }\n    index(child) {\n      if (typeof child === \"number\") return child;\n      if (child.proxyOf) child = child.proxyOf;\n      return this.proxyOf.nodes.indexOf(child);\n    }\n    insertAfter(exist, add) {\n      let existIndex = this.index(exist);\n      let nodes = this.normalize(add, this.proxyOf.nodes[existIndex]).reverse();\n      existIndex = this.index(exist);\n      for (let node2 of nodes) this.proxyOf.nodes.splice(existIndex + 1, 0, node2);\n      let index2;\n      for (let id in this.indexes) {\n        index2 = this.indexes[id];\n        if (existIndex < index2) {\n          this.indexes[id] = index2 + nodes.length;\n        }\n      }\n      this.markDirty();\n      return this;\n    }\n    insertBefore(exist, add) {\n      let existIndex = this.index(exist);\n      let type = existIndex === 0 ? \"prepend\" : false;\n      let nodes = this.normalize(\n        add,\n        this.proxyOf.nodes[existIndex],\n        type\n      ).reverse();\n      existIndex = this.index(exist);\n      for (let node2 of nodes) this.proxyOf.nodes.splice(existIndex, 0, node2);\n      let index2;\n      for (let id in this.indexes) {\n        index2 = this.indexes[id];\n        if (existIndex <= index2) {\n          this.indexes[id] = index2 + nodes.length;\n        }\n      }\n      this.markDirty();\n      return this;\n    }\n    normalize(nodes, sample) {\n      if (typeof nodes === \"string\") {\n        nodes = cleanSource(parse(nodes).nodes);\n      } else if (typeof nodes === \"undefined\") {\n        nodes = [];\n      } else if (Array.isArray(nodes)) {\n        nodes = nodes.slice(0);\n        for (let i2 of nodes) {\n          if (i2.parent) i2.parent.removeChild(i2, \"ignore\");\n        }\n      } else if (nodes.type === \"root\" && this.type !== \"document\") {\n        nodes = nodes.nodes.slice(0);\n        for (let i2 of nodes) {\n          if (i2.parent) i2.parent.removeChild(i2, \"ignore\");\n        }\n      } else if (nodes.type) {\n        nodes = [nodes];\n      } else if (nodes.prop) {\n        if (typeof nodes.value === \"undefined\") {\n          throw new Error(\"Value field is missed in node creation\");\n        } else if (typeof nodes.value !== \"string\") {\n          nodes.value = String(nodes.value);\n        }\n        nodes = [new Declaration(nodes)];\n      } else if (nodes.selector || nodes.selectors) {\n        nodes = [new Rule(nodes)];\n      } else if (nodes.name) {\n        nodes = [new AtRule(nodes)];\n      } else if (nodes.text) {\n        nodes = [new Comment(nodes)];\n      } else {\n        throw new Error(\"Unknown node type in node creation\");\n      }\n      let processed = nodes.map((i2) => {\n        if (!i2[my]) Container.rebuild(i2);\n        i2 = i2.proxyOf;\n        if (i2.parent) i2.parent.removeChild(i2);\n        if (i2[isClean]) markTreeDirty(i2);\n        if (!i2.raws) i2.raws = {};\n        if (typeof i2.raws.before === \"undefined\") {\n          if (sample && typeof sample.raws.before !== \"undefined\") {\n            i2.raws.before = sample.raws.before.replace(/\\S/g, \"\");\n          }\n        }\n        i2.parent = this.proxyOf;\n        return i2;\n      });\n      return processed;\n    }\n    prepend(...children) {\n      children = children.reverse();\n      for (let child of children) {\n        let nodes = this.normalize(child, this.first, \"prepend\").reverse();\n        for (let node2 of nodes) this.proxyOf.nodes.unshift(node2);\n        for (let id in this.indexes) {\n          this.indexes[id] = this.indexes[id] + nodes.length;\n        }\n      }\n      this.markDirty();\n      return this;\n    }\n    push(child) {\n      child.parent = this;\n      this.proxyOf.nodes.push(child);\n      return this;\n    }\n    removeAll() {\n      for (let node2 of this.proxyOf.nodes) node2.parent = void 0;\n      this.proxyOf.nodes = [];\n      this.markDirty();\n      return this;\n    }\n    removeChild(child) {\n      child = this.index(child);\n      this.proxyOf.nodes[child].parent = void 0;\n      this.proxyOf.nodes.splice(child, 1);\n      let index2;\n      for (let id in this.indexes) {\n        index2 = this.indexes[id];\n        if (index2 >= child) {\n          this.indexes[id] = index2 - 1;\n        }\n      }\n      this.markDirty();\n      return this;\n    }\n    replaceValues(pattern, opts, callback) {\n      if (!callback) {\n        callback = opts;\n        opts = {};\n      }\n      this.walkDecls((decl) => {\n        if (opts.props && !opts.props.includes(decl.prop)) return;\n        if (opts.fast && !decl.value.includes(opts.fast)) return;\n        decl.value = decl.value.replace(pattern, callback);\n      });\n      this.markDirty();\n      return this;\n    }\n    some(condition) {\n      return this.nodes.some(condition);\n    }\n    walk(callback) {\n      return this.each((child, i2) => {\n        let result2;\n        try {\n          result2 = callback(child, i2);\n        } catch (e2) {\n          throw child.addToError(e2);\n        }\n        if (result2 !== false && child.walk) {\n          result2 = child.walk(callback);\n        }\n        return result2;\n      });\n    }\n    walkAtRules(name, callback) {\n      if (!callback) {\n        callback = name;\n        return this.walk((child, i2) => {\n          if (child.type === \"atrule\") {\n            return callback(child, i2);\n          }\n        });\n      }\n      if (name instanceof RegExp) {\n        return this.walk((child, i2) => {\n          if (child.type === \"atrule\" && name.test(child.name)) {\n            return callback(child, i2);\n          }\n        });\n      }\n      return this.walk((child, i2) => {\n        if (child.type === \"atrule\" && child.name === name) {\n          return callback(child, i2);\n        }\n      });\n    }\n    walkComments(callback) {\n      return this.walk((child, i2) => {\n        if (child.type === \"comment\") {\n          return callback(child, i2);\n        }\n      });\n    }\n    walkDecls(prop, callback) {\n      if (!callback) {\n        callback = prop;\n        return this.walk((child, i2) => {\n          if (child.type === \"decl\") {\n            return callback(child, i2);\n          }\n        });\n      }\n      if (prop instanceof RegExp) {\n        return this.walk((child, i2) => {\n          if (child.type === \"decl\" && prop.test(child.prop)) {\n            return callback(child, i2);\n          }\n        });\n      }\n      return this.walk((child, i2) => {\n        if (child.type === \"decl\" && child.prop === prop) {\n          return callback(child, i2);\n        }\n      });\n    }\n    walkRules(selector, callback) {\n      if (!callback) {\n        callback = selector;\n        return this.walk((child, i2) => {\n          if (child.type === \"rule\") {\n            return callback(child, i2);\n          }\n        });\n      }\n      if (selector instanceof RegExp) {\n        return this.walk((child, i2) => {\n          if (child.type === \"rule\" && selector.test(child.selector)) {\n            return callback(child, i2);\n          }\n        });\n      }\n      return this.walk((child, i2) => {\n        if (child.type === \"rule\" && child.selector === selector) {\n          return callback(child, i2);\n        }\n      });\n    }\n  }\n  Container.registerParse = (dependant) => {\n    parse = dependant;\n  };\n  Container.registerRule = (dependant) => {\n    Rule = dependant;\n  };\n  Container.registerAtRule = (dependant) => {\n    AtRule = dependant;\n  };\n  Container.registerRoot = (dependant) => {\n    Root = dependant;\n  };\n  container = Container;\n  Container.default = Container;\n  Container.rebuild = (node2) => {\n    if (node2.type === \"atrule\") {\n      Object.setPrototypeOf(node2, AtRule.prototype);\n    } else if (node2.type === \"rule\") {\n      Object.setPrototypeOf(node2, Rule.prototype);\n    } else if (node2.type === \"decl\") {\n      Object.setPrototypeOf(node2, Declaration.prototype);\n    } else if (node2.type === \"comment\") {\n      Object.setPrototypeOf(node2, Comment.prototype);\n    } else if (node2.type === \"root\") {\n      Object.setPrototypeOf(node2, Root.prototype);\n    }\n    node2[my] = true;\n    if (node2.nodes) {\n      node2.nodes.forEach((child) => {\n        Container.rebuild(child);\n      });\n    }\n  };\n  return container;\n}\nvar atRule;\nvar hasRequiredAtRule;\nfunction requireAtRule() {\n  if (hasRequiredAtRule) return atRule;\n  hasRequiredAtRule = 1;\n  let Container = requireContainer();\n  class AtRule extends Container {\n    constructor(defaults) {\n      super(defaults);\n      this.type = \"atrule\";\n    }\n    append(...children) {\n      if (!this.proxyOf.nodes) this.nodes = [];\n      return super.append(...children);\n    }\n    prepend(...children) {\n      if (!this.proxyOf.nodes) this.nodes = [];\n      return super.prepend(...children);\n    }\n  }\n  atRule = AtRule;\n  AtRule.default = AtRule;\n  Container.registerAtRule(AtRule);\n  return atRule;\n}\nvar document$1;\nvar hasRequiredDocument;\nfunction requireDocument() {\n  if (hasRequiredDocument) return document$1;\n  hasRequiredDocument = 1;\n  let Container = requireContainer();\n  let LazyResult, Processor;\n  class Document2 extends Container {\n    constructor(defaults) {\n      super({ type: \"document\", ...defaults });\n      if (!this.nodes) {\n        this.nodes = [];\n      }\n    }\n    toResult(opts = {}) {\n      let lazy = new LazyResult(new Processor(), this, opts);\n      return lazy.stringify();\n    }\n  }\n  Document2.registerLazyResult = (dependant) => {\n    LazyResult = dependant;\n  };\n  Document2.registerProcessor = (dependant) => {\n    Processor = dependant;\n  };\n  document$1 = Document2;\n  Document2.default = Document2;\n  return document$1;\n}\nvar nonSecure;\nvar hasRequiredNonSecure;\nfunction requireNonSecure() {\n  if (hasRequiredNonSecure) return nonSecure;\n  hasRequiredNonSecure = 1;\n  let urlAlphabet = \"useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict\";\n  let customAlphabet = (alphabet, defaultSize = 21) => {\n    return (size = defaultSize) => {\n      let id = \"\";\n      let i2 = size | 0;\n      while (i2--) {\n        id += alphabet[Math.random() * alphabet.length | 0];\n      }\n      return id;\n    };\n  };\n  let nanoid = (size = 21) => {\n    let id = \"\";\n    let i2 = size | 0;\n    while (i2--) {\n      id += urlAlphabet[Math.random() * 64 | 0];\n    }\n    return id;\n  };\n  nonSecure = { nanoid, customAlphabet };\n  return nonSecure;\n}\nvar previousMap;\nvar hasRequiredPreviousMap;\nfunction requirePreviousMap() {\n  if (hasRequiredPreviousMap) return previousMap;\n  hasRequiredPreviousMap = 1;\n  let { existsSync, readFileSync } = require$$2;\n  let { dirname, join } = require$$2;\n  let { SourceMapConsumer, SourceMapGenerator } = require$$2;\n  function fromBase64(str) {\n    if (Buffer) {\n      return Buffer.from(str, \"base64\").toString();\n    } else {\n      return window.atob(str);\n    }\n  }\n  class PreviousMap {\n    constructor(css, opts) {\n      if (opts.map === false) return;\n      this.loadAnnotation(css);\n      this.inline = this.startWith(this.annotation, \"data:\");\n      let prev = opts.map ? opts.map.prev : void 0;\n      let text = this.loadMap(opts.from, prev);\n      if (!this.mapFile && opts.from) {\n        this.mapFile = opts.from;\n      }\n      if (this.mapFile) this.root = dirname(this.mapFile);\n      if (text) this.text = text;\n    }\n    consumer() {\n      if (!this.consumerCache) {\n        this.consumerCache = new SourceMapConsumer(this.text);\n      }\n      return this.consumerCache;\n    }\n    decodeInline(text) {\n      let baseCharsetUri = /^data:application\\/json;charset=utf-?8;base64,/;\n      let baseUri = /^data:application\\/json;base64,/;\n      let charsetUri = /^data:application\\/json;charset=utf-?8,/;\n      let uri = /^data:application\\/json,/;\n      let uriMatch = text.match(charsetUri) || text.match(uri);\n      if (uriMatch) {\n        return decodeURIComponent(text.substr(uriMatch[0].length));\n      }\n      let baseUriMatch = text.match(baseCharsetUri) || text.match(baseUri);\n      if (baseUriMatch) {\n        return fromBase64(text.substr(baseUriMatch[0].length));\n      }\n      let encoding = text.match(/data:application\\/json;([^,]+),/)[1];\n      throw new Error(\"Unsupported source map encoding \" + encoding);\n    }\n    getAnnotationURL(sourceMapString) {\n      return sourceMapString.replace(/^\\/\\*\\s*# sourceMappingURL=/, \"\").trim();\n    }\n    isMap(map) {\n      if (typeof map !== \"object\") return false;\n      return typeof map.mappings === \"string\" || typeof map._mappings === \"string\" || Array.isArray(map.sections);\n    }\n    loadAnnotation(css) {\n      let comments = css.match(/\\/\\*\\s*# sourceMappingURL=/g);\n      if (!comments) return;\n      let start = css.lastIndexOf(comments.pop());\n      let end = css.indexOf(\"*/\", start);\n      if (start > -1 && end > -1) {\n        this.annotation = this.getAnnotationURL(css.substring(start, end));\n      }\n    }\n    loadFile(path) {\n      this.root = dirname(path);\n      if (existsSync(path)) {\n        this.mapFile = path;\n        return readFileSync(path, \"utf-8\").toString().trim();\n      }\n    }\n    loadMap(file, prev) {\n      if (prev === false) return false;\n      if (prev) {\n        if (typeof prev === \"string\") {\n          return prev;\n        } else if (typeof prev === \"function\") {\n          let prevPath = prev(file);\n          if (prevPath) {\n            let map = this.loadFile(prevPath);\n            if (!map) {\n              throw new Error(\n                \"Unable to load previous source map: \" + prevPath.toString()\n              );\n            }\n            return map;\n          }\n        } else if (prev instanceof SourceMapConsumer) {\n          return SourceMapGenerator.fromSourceMap(prev).toString();\n        } else if (prev instanceof SourceMapGenerator) {\n          return prev.toString();\n        } else if (this.isMap(prev)) {\n          return JSON.stringify(prev);\n        } else {\n          throw new Error(\n            \"Unsupported previous source map format: \" + prev.toString()\n          );\n        }\n      } else if (this.inline) {\n        return this.decodeInline(this.annotation);\n      } else if (this.annotation) {\n        let map = this.annotation;\n        if (file) map = join(dirname(file), map);\n        return this.loadFile(map);\n      }\n    }\n    startWith(string, start) {\n      if (!string) return false;\n      return string.substr(0, start.length) === start;\n    }\n    withContent() {\n      return !!(this.consumer().sourcesContent && this.consumer().sourcesContent.length > 0);\n    }\n  }\n  previousMap = PreviousMap;\n  PreviousMap.default = PreviousMap;\n  return previousMap;\n}\nvar input;\nvar hasRequiredInput;\nfunction requireInput() {\n  if (hasRequiredInput) return input;\n  hasRequiredInput = 1;\n  let { nanoid } = /* @__PURE__ */ requireNonSecure();\n  let { isAbsolute, resolve } = require$$2;\n  let { SourceMapConsumer, SourceMapGenerator } = require$$2;\n  let { fileURLToPath, pathToFileURL } = require$$2;\n  let CssSyntaxError = requireCssSyntaxError();\n  let PreviousMap = requirePreviousMap();\n  let terminalHighlight = require$$2;\n  let lineToIndexCache = Symbol(\"lineToIndexCache\");\n  let sourceMapAvailable = Boolean(SourceMapConsumer && SourceMapGenerator);\n  let pathAvailable = Boolean(resolve && isAbsolute);\n  function getLineToIndex(input2) {\n    if (input2[lineToIndexCache]) return input2[lineToIndexCache];\n    let lines = input2.css.split(\"\\n\");\n    let lineToIndex = new Array(lines.length);\n    let prevIndex = 0;\n    for (let i2 = 0, l2 = lines.length; i2 < l2; i2++) {\n      lineToIndex[i2] = prevIndex;\n      prevIndex += lines[i2].length + 1;\n    }\n    input2[lineToIndexCache] = lineToIndex;\n    return lineToIndex;\n  }\n  class Input {\n    get from() {\n      return this.file || this.id;\n    }\n    constructor(css, opts = {}) {\n      if (css === null || typeof css === \"undefined\" || typeof css === \"object\" && !css.toString) {\n        throw new Error(`PostCSS received ${css} instead of CSS string`);\n      }\n      this.css = css.toString();\n      if (this.css[0] === \"\\uFEFF\" || this.css[0] === \"\") {\n        this.hasBOM = true;\n        this.css = this.css.slice(1);\n      } else {\n        this.hasBOM = false;\n      }\n      this.document = this.css;\n      if (opts.document) this.document = opts.document.toString();\n      if (opts.from) {\n        if (!pathAvailable || /^\\w+:\\/\\//.test(opts.from) || isAbsolute(opts.from)) {\n          this.file = opts.from;\n        } else {\n          this.file = resolve(opts.from);\n        }\n      }\n      if (pathAvailable && sourceMapAvailable) {\n        let map = new PreviousMap(this.css, opts);\n        if (map.text) {\n          this.map = map;\n          let file = map.consumer().file;\n          if (!this.file && file) this.file = this.mapResolve(file);\n        }\n      }\n      if (!this.file) {\n        this.id = \"<input css \" + nanoid(6) + \">\";\n      }\n      if (this.map) this.map.file = this.from;\n    }\n    error(message, line, column, opts = {}) {\n      let endColumn, endLine, endOffset, offset, result2;\n      if (line && typeof line === \"object\") {\n        let start = line;\n        let end = column;\n        if (typeof start.offset === \"number\") {\n          offset = start.offset;\n          let pos = this.fromOffset(offset);\n          line = pos.line;\n          column = pos.col;\n        } else {\n          line = start.line;\n          column = start.column;\n          offset = this.fromLineAndColumn(line, column);\n        }\n        if (typeof end.offset === \"number\") {\n          endOffset = end.offset;\n          let pos = this.fromOffset(endOffset);\n          endLine = pos.line;\n          endColumn = pos.col;\n        } else {\n          endLine = end.line;\n          endColumn = end.column;\n          endOffset = this.fromLineAndColumn(end.line, end.column);\n        }\n      } else if (!column) {\n        offset = line;\n        let pos = this.fromOffset(offset);\n        line = pos.line;\n        column = pos.col;\n      } else {\n        offset = this.fromLineAndColumn(line, column);\n      }\n      let origin = this.origin(line, column, endLine, endColumn);\n      if (origin) {\n        result2 = new CssSyntaxError(\n          message,\n          origin.endLine === void 0 ? origin.line : { column: origin.column, line: origin.line },\n          origin.endLine === void 0 ? origin.column : { column: origin.endColumn, line: origin.endLine },\n          origin.source,\n          origin.file,\n          opts.plugin\n        );\n      } else {\n        result2 = new CssSyntaxError(\n          message,\n          endLine === void 0 ? line : { column, line },\n          endLine === void 0 ? column : { column: endColumn, line: endLine },\n          this.css,\n          this.file,\n          opts.plugin\n        );\n      }\n      result2.input = { column, endColumn, endLine, endOffset, line, offset, source: this.css };\n      if (this.file) {\n        if (pathToFileURL) {\n          result2.input.url = pathToFileURL(this.file).toString();\n        }\n        result2.input.file = this.file;\n      }\n      return result2;\n    }\n    fromLineAndColumn(line, column) {\n      let lineToIndex = getLineToIndex(this);\n      let index2 = lineToIndex[line - 1];\n      return index2 + column - 1;\n    }\n    fromOffset(offset) {\n      let lineToIndex = getLineToIndex(this);\n      let lastLine = lineToIndex[lineToIndex.length - 1];\n      let min = 0;\n      if (offset >= lastLine) {\n        min = lineToIndex.length - 1;\n      } else {\n        let max = lineToIndex.length - 2;\n        let mid;\n        while (min < max) {\n          mid = min + (max - min >> 1);\n          if (offset < lineToIndex[mid]) {\n            max = mid - 1;\n          } else if (offset >= lineToIndex[mid + 1]) {\n            min = mid + 1;\n          } else {\n            min = mid;\n            break;\n          }\n        }\n      }\n      return {\n        col: offset - lineToIndex[min] + 1,\n        line: min + 1\n      };\n    }\n    mapResolve(file) {\n      if (/^\\w+:\\/\\//.test(file)) {\n        return file;\n      }\n      return resolve(this.map.consumer().sourceRoot || this.map.root || \".\", file);\n    }\n    origin(line, column, endLine, endColumn) {\n      if (!this.map) return false;\n      let consumer = this.map.consumer();\n      let from = consumer.originalPositionFor({ column, line });\n      if (!from.source) return false;\n      let to;\n      if (typeof endLine === \"number\") {\n        to = consumer.originalPositionFor({ column: endColumn, line: endLine });\n      }\n      let fromUrl;\n      if (isAbsolute(from.source)) {\n        fromUrl = pathToFileURL(from.source);\n      } else {\n        fromUrl = new URL(\n          from.source,\n          this.map.consumer().sourceRoot || pathToFileURL(this.map.mapFile)\n        );\n      }\n      let result2 = {\n        column: from.column,\n        endColumn: to && to.column,\n        endLine: to && to.line,\n        line: from.line,\n        url: fromUrl.toString()\n      };\n      if (fromUrl.protocol === \"file:\") {\n        if (fileURLToPath) {\n          result2.file = fileURLToPath(fromUrl);\n        } else {\n          throw new Error(`file: protocol is not available in this PostCSS build`);\n        }\n      }\n      let source = consumer.sourceContentFor(from.source);\n      if (source) result2.source = source;\n      return result2;\n    }\n    toJSON() {\n      let json = {};\n      for (let name of [\"hasBOM\", \"css\", \"file\", \"id\"]) {\n        if (this[name] != null) {\n          json[name] = this[name];\n        }\n      }\n      if (this.map) {\n        json.map = { ...this.map };\n        if (json.map.consumerCache) {\n          json.map.consumerCache = void 0;\n        }\n      }\n      return json;\n    }\n  }\n  input = Input;\n  Input.default = Input;\n  if (terminalHighlight && terminalHighlight.registerInput) {\n    terminalHighlight.registerInput(Input);\n  }\n  return input;\n}\nvar root;\nvar hasRequiredRoot;\nfunction requireRoot() {\n  if (hasRequiredRoot) return root;\n  hasRequiredRoot = 1;\n  let Container = requireContainer();\n  let LazyResult, Processor;\n  class Root extends Container {\n    constructor(defaults) {\n      super(defaults);\n      this.type = \"root\";\n      if (!this.nodes) this.nodes = [];\n    }\n    normalize(child, sample, type) {\n      let nodes = super.normalize(child);\n      if (sample) {\n        if (type === \"prepend\") {\n          if (this.nodes.length > 1) {\n            sample.raws.before = this.nodes[1].raws.before;\n          } else {\n            delete sample.raws.before;\n          }\n        } else if (this.first !== sample) {\n          for (let node2 of nodes) {\n            node2.raws.before = sample.raws.before;\n          }\n        }\n      }\n      return nodes;\n    }\n    removeChild(child, ignore) {\n      let index2 = this.index(child);\n      if (!ignore && index2 === 0 && this.nodes.length > 1) {\n        this.nodes[1].raws.before = this.nodes[index2].raws.before;\n      }\n      return super.removeChild(child);\n    }\n    toResult(opts = {}) {\n      let lazy = new LazyResult(new Processor(), this, opts);\n      return lazy.stringify();\n    }\n  }\n  Root.registerLazyResult = (dependant) => {\n    LazyResult = dependant;\n  };\n  Root.registerProcessor = (dependant) => {\n    Processor = dependant;\n  };\n  root = Root;\n  Root.default = Root;\n  Container.registerRoot(Root);\n  return root;\n}\nvar list_1;\nvar hasRequiredList;\nfunction requireList() {\n  if (hasRequiredList) return list_1;\n  hasRequiredList = 1;\n  let list = {\n    comma(string) {\n      return list.split(string, [\",\"], true);\n    },\n    space(string) {\n      let spaces = [\" \", \"\\n\", \"\t\"];\n      return list.split(string, spaces);\n    },\n    split(string, separators, last) {\n      let array = [];\n      let current = \"\";\n      let split = false;\n      let func = 0;\n      let inQuote = false;\n      let prevQuote = \"\";\n      let escape = false;\n      for (let letter of string) {\n        if (escape) {\n          escape = false;\n        } else if (letter === \"\\\\\") {\n          escape = true;\n        } else if (inQuote) {\n          if (letter === prevQuote) {\n            inQuote = false;\n          }\n        } else if (letter === '\"' || letter === \"'\") {\n          inQuote = true;\n          prevQuote = letter;\n        } else if (letter === \"(\") {\n          func += 1;\n        } else if (letter === \")\") {\n          if (func > 0) func -= 1;\n        } else if (func === 0) {\n          if (separators.includes(letter)) split = true;\n        }\n        if (split) {\n          if (current !== \"\") array.push(current.trim());\n          current = \"\";\n          split = false;\n        } else {\n          current += letter;\n        }\n      }\n      if (last || current !== \"\") array.push(current.trim());\n      return array;\n    }\n  };\n  list_1 = list;\n  list.default = list;\n  return list_1;\n}\nvar rule;\nvar hasRequiredRule;\nfunction requireRule() {\n  if (hasRequiredRule) return rule;\n  hasRequiredRule = 1;\n  let Container = requireContainer();\n  let list = requireList();\n  class Rule extends Container {\n    get selectors() {\n      return list.comma(this.selector);\n    }\n    set selectors(values) {\n      let match = this.selector ? this.selector.match(/,\\s*/) : null;\n      let sep = match ? match[0] : \",\" + this.raw(\"between\", \"beforeOpen\");\n      this.selector = values.join(sep);\n    }\n    constructor(defaults) {\n      super(defaults);\n      this.type = \"rule\";\n      if (!this.nodes) this.nodes = [];\n    }\n  }\n  rule = Rule;\n  Rule.default = Rule;\n  Container.registerRule(Rule);\n  return rule;\n}\nvar fromJSON_1;\nvar hasRequiredFromJSON;\nfunction requireFromJSON() {\n  if (hasRequiredFromJSON) return fromJSON_1;\n  hasRequiredFromJSON = 1;\n  let AtRule = requireAtRule();\n  let Comment = requireComment();\n  let Declaration = requireDeclaration();\n  let Input = requireInput();\n  let PreviousMap = requirePreviousMap();\n  let Root = requireRoot();\n  let Rule = requireRule();\n  function fromJSON(json, inputs) {\n    if (Array.isArray(json)) return json.map((n2) => fromJSON(n2));\n    let { inputs: ownInputs, ...defaults } = json;\n    if (ownInputs) {\n      inputs = [];\n      for (let input2 of ownInputs) {\n        let inputHydrated = { ...input2, __proto__: Input.prototype };\n        if (inputHydrated.map) {\n          inputHydrated.map = {\n            ...inputHydrated.map,\n            __proto__: PreviousMap.prototype\n          };\n        }\n        inputs.push(inputHydrated);\n      }\n    }\n    if (defaults.nodes) {\n      defaults.nodes = json.nodes.map((n2) => fromJSON(n2, inputs));\n    }\n    if (defaults.source) {\n      let { inputId, ...source } = defaults.source;\n      defaults.source = source;\n      if (inputId != null) {\n        defaults.source.input = inputs[inputId];\n      }\n    }\n    if (defaults.type === \"root\") {\n      return new Root(defaults);\n    } else if (defaults.type === \"decl\") {\n      return new Declaration(defaults);\n    } else if (defaults.type === \"rule\") {\n      return new Rule(defaults);\n    } else if (defaults.type === \"comment\") {\n      return new Comment(defaults);\n    } else if (defaults.type === \"atrule\") {\n      return new AtRule(defaults);\n    } else {\n      throw new Error(\"Unknown node type: \" + json.type);\n    }\n  }\n  fromJSON_1 = fromJSON;\n  fromJSON.default = fromJSON;\n  return fromJSON_1;\n}\nvar mapGenerator;\nvar hasRequiredMapGenerator;\nfunction requireMapGenerator() {\n  if (hasRequiredMapGenerator) return mapGenerator;\n  hasRequiredMapGenerator = 1;\n  let { dirname, relative, resolve, sep } = require$$2;\n  let { SourceMapConsumer, SourceMapGenerator } = require$$2;\n  let { pathToFileURL } = require$$2;\n  let Input = requireInput();\n  let sourceMapAvailable = Boolean(SourceMapConsumer && SourceMapGenerator);\n  let pathAvailable = Boolean(dirname && resolve && relative && sep);\n  class MapGenerator {\n    constructor(stringify, root2, opts, cssString) {\n      this.stringify = stringify;\n      this.mapOpts = opts.map || {};\n      this.root = root2;\n      this.opts = opts;\n      this.css = cssString;\n      this.originalCSS = cssString;\n      this.usesFileUrls = !this.mapOpts.from && this.mapOpts.absolute;\n      this.memoizedFileURLs = /* @__PURE__ */ new Map();\n      this.memoizedPaths = /* @__PURE__ */ new Map();\n      this.memoizedURLs = /* @__PURE__ */ new Map();\n    }\n    addAnnotation() {\n      let content;\n      if (this.isInline()) {\n        content = \"data:application/json;base64,\" + this.toBase64(this.map.toString());\n      } else if (typeof this.mapOpts.annotation === \"string\") {\n        content = this.mapOpts.annotation;\n      } else if (typeof this.mapOpts.annotation === \"function\") {\n        content = this.mapOpts.annotation(this.opts.to, this.root);\n      } else {\n        content = this.outputFile() + \".map\";\n      }\n      let eol = \"\\n\";\n      if (this.css.includes(\"\\r\\n\")) eol = \"\\r\\n\";\n      this.css += eol + \"/*# sourceMappingURL=\" + content + \" */\";\n    }\n    applyPrevMaps() {\n      for (let prev of this.previous()) {\n        let from = this.toUrl(this.path(prev.file));\n        let root2 = prev.root || dirname(prev.file);\n        let map;\n        if (this.mapOpts.sourcesContent === false) {\n          map = new SourceMapConsumer(prev.text);\n          if (map.sourcesContent) {\n            map.sourcesContent = null;\n          }\n        } else {\n          map = prev.consumer();\n        }\n        this.map.applySourceMap(map, from, this.toUrl(this.path(root2)));\n      }\n    }\n    clearAnnotation() {\n      if (this.mapOpts.annotation === false) return;\n      if (this.root) {\n        let node2;\n        for (let i2 = this.root.nodes.length - 1; i2 >= 0; i2--) {\n          node2 = this.root.nodes[i2];\n          if (node2.type !== \"comment\") continue;\n          if (node2.text.startsWith(\"# sourceMappingURL=\")) {\n            this.root.removeChild(i2);\n          }\n        }\n      } else if (this.css) {\n        this.css = this.css.replace(/\\n*\\/\\*#[\\S\\s]*?\\*\\/$/gm, \"\");\n      }\n    }\n    generate() {\n      this.clearAnnotation();\n      if (pathAvailable && sourceMapAvailable && this.isMap()) {\n        return this.generateMap();\n      } else {\n        let result2 = \"\";\n        this.stringify(this.root, (i2) => {\n          result2 += i2;\n        });\n        return [result2];\n      }\n    }\n    generateMap() {\n      if (this.root) {\n        this.generateString();\n      } else if (this.previous().length === 1) {\n        let prev = this.previous()[0].consumer();\n        prev.file = this.outputFile();\n        this.map = SourceMapGenerator.fromSourceMap(prev, {\n          ignoreInvalidMapping: true\n        });\n      } else {\n        this.map = new SourceMapGenerator({\n          file: this.outputFile(),\n          ignoreInvalidMapping: true\n        });\n        this.map.addMapping({\n          generated: { column: 0, line: 1 },\n          original: { column: 0, line: 1 },\n          source: this.opts.from ? this.toUrl(this.path(this.opts.from)) : \"<no source>\"\n        });\n      }\n      if (this.isSourcesContent()) this.setSourcesContent();\n      if (this.root && this.previous().length > 0) this.applyPrevMaps();\n      if (this.isAnnotation()) this.addAnnotation();\n      if (this.isInline()) {\n        return [this.css];\n      } else {\n        return [this.css, this.map];\n      }\n    }\n    generateString() {\n      this.css = \"\";\n      this.map = new SourceMapGenerator({\n        file: this.outputFile(),\n        ignoreInvalidMapping: true\n      });\n      let line = 1;\n      let column = 1;\n      let noSource = \"<no source>\";\n      let mapping = {\n        generated: { column: 0, line: 0 },\n        original: { column: 0, line: 0 },\n        source: \"\"\n      };\n      let last, lines;\n      this.stringify(this.root, (str, node2, type) => {\n        this.css += str;\n        if (node2 && type !== \"end\") {\n          mapping.generated.line = line;\n          mapping.generated.column = column - 1;\n          if (node2.source && node2.source.start) {\n            mapping.source = this.sourcePath(node2);\n            mapping.original.line = node2.source.start.line;\n            mapping.original.column = node2.source.start.column - 1;\n            this.map.addMapping(mapping);\n          } else {\n            mapping.source = noSource;\n            mapping.original.line = 1;\n            mapping.original.column = 0;\n            this.map.addMapping(mapping);\n          }\n        }\n        lines = str.match(/\\n/g);\n        if (lines) {\n          line += lines.length;\n          last = str.lastIndexOf(\"\\n\");\n          column = str.length - last;\n        } else {\n          column += str.length;\n        }\n        if (node2 && type !== \"start\") {\n          let p2 = node2.parent || { raws: {} };\n          let childless = node2.type === \"decl\" || node2.type === \"atrule\" && !node2.nodes;\n          if (!childless || node2 !== p2.last || p2.raws.semicolon) {\n            if (node2.source && node2.source.end) {\n              mapping.source = this.sourcePath(node2);\n              mapping.original.line = node2.source.end.line;\n              mapping.original.column = node2.source.end.column - 1;\n              mapping.generated.line = line;\n              mapping.generated.column = column - 2;\n              this.map.addMapping(mapping);\n            } else {\n              mapping.source = noSource;\n              mapping.original.line = 1;\n              mapping.original.column = 0;\n              mapping.generated.line = line;\n              mapping.generated.column = column - 1;\n              this.map.addMapping(mapping);\n            }\n          }\n        }\n      });\n    }\n    isAnnotation() {\n      if (this.isInline()) {\n        return true;\n      }\n      if (typeof this.mapOpts.annotation !== \"undefined\") {\n        return this.mapOpts.annotation;\n      }\n      if (this.previous().length) {\n        return this.previous().some((i2) => i2.annotation);\n      }\n      return true;\n    }\n    isInline() {\n      if (typeof this.mapOpts.inline !== \"undefined\") {\n        return this.mapOpts.inline;\n      }\n      let annotation = this.mapOpts.annotation;\n      if (typeof annotation !== \"undefined\" && annotation !== true) {\n        return false;\n      }\n      if (this.previous().length) {\n        return this.previous().some((i2) => i2.inline);\n      }\n      return true;\n    }\n    isMap() {\n      if (typeof this.opts.map !== \"undefined\") {\n        return !!this.opts.map;\n      }\n      return this.previous().length > 0;\n    }\n    isSourcesContent() {\n      if (typeof this.mapOpts.sourcesContent !== \"undefined\") {\n        return this.mapOpts.sourcesContent;\n      }\n      if (this.previous().length) {\n        return this.previous().some((i2) => i2.withContent());\n      }\n      return true;\n    }\n    outputFile() {\n      if (this.opts.to) {\n        return this.path(this.opts.to);\n      } else if (this.opts.from) {\n        return this.path(this.opts.from);\n      } else {\n        return \"to.css\";\n      }\n    }\n    path(file) {\n      if (this.mapOpts.absolute) return file;\n      if (file.charCodeAt(0) === 60) return file;\n      if (/^\\w+:\\/\\//.test(file)) return file;\n      let cached = this.memoizedPaths.get(file);\n      if (cached) return cached;\n      let from = this.opts.to ? dirname(this.opts.to) : \".\";\n      if (typeof this.mapOpts.annotation === \"string\") {\n        from = dirname(resolve(from, this.mapOpts.annotation));\n      }\n      let path = relative(from, file);\n      this.memoizedPaths.set(file, path);\n      return path;\n    }\n    previous() {\n      if (!this.previousMaps) {\n        this.previousMaps = [];\n        if (this.root) {\n          this.root.walk((node2) => {\n            if (node2.source && node2.source.input.map) {\n              let map = node2.source.input.map;\n              if (!this.previousMaps.includes(map)) {\n                this.previousMaps.push(map);\n              }\n            }\n          });\n        } else {\n          let input2 = new Input(this.originalCSS, this.opts);\n          if (input2.map) this.previousMaps.push(input2.map);\n        }\n      }\n      return this.previousMaps;\n    }\n    setSourcesContent() {\n      let already = {};\n      if (this.root) {\n        this.root.walk((node2) => {\n          if (node2.source) {\n            let from = node2.source.input.from;\n            if (from && !already[from]) {\n              already[from] = true;\n              let fromUrl = this.usesFileUrls ? this.toFileUrl(from) : this.toUrl(this.path(from));\n              this.map.setSourceContent(fromUrl, node2.source.input.css);\n            }\n          }\n        });\n      } else if (this.css) {\n        let from = this.opts.from ? this.toUrl(this.path(this.opts.from)) : \"<no source>\";\n        this.map.setSourceContent(from, this.css);\n      }\n    }\n    sourcePath(node2) {\n      if (this.mapOpts.from) {\n        return this.toUrl(this.mapOpts.from);\n      } else if (this.usesFileUrls) {\n        return this.toFileUrl(node2.source.input.from);\n      } else {\n        return this.toUrl(this.path(node2.source.input.from));\n      }\n    }\n    toBase64(str) {\n      if (Buffer) {\n        return Buffer.from(str).toString(\"base64\");\n      } else {\n        return window.btoa(unescape(encodeURIComponent(str)));\n      }\n    }\n    toFileUrl(path) {\n      let cached = this.memoizedFileURLs.get(path);\n      if (cached) return cached;\n      if (pathToFileURL) {\n        let fileURL = pathToFileURL(path).toString();\n        this.memoizedFileURLs.set(path, fileURL);\n        return fileURL;\n      } else {\n        throw new Error(\n          \"`map.absolute` option is not available in this PostCSS build\"\n        );\n      }\n    }\n    toUrl(path) {\n      let cached = this.memoizedURLs.get(path);\n      if (cached) return cached;\n      if (sep === \"\\\\\") {\n        path = path.replace(/\\\\/g, \"/\");\n      }\n      let url = encodeURI(path).replace(/[#?]/g, encodeURIComponent);\n      this.memoizedURLs.set(path, url);\n      return url;\n    }\n  }\n  mapGenerator = MapGenerator;\n  return mapGenerator;\n}\nvar tokenize;\nvar hasRequiredTokenize;\nfunction requireTokenize() {\n  if (hasRequiredTokenize) return tokenize;\n  hasRequiredTokenize = 1;\n  const SINGLE_QUOTE = \"'\".charCodeAt(0);\n  const DOUBLE_QUOTE = '\"'.charCodeAt(0);\n  const BACKSLASH = \"\\\\\".charCodeAt(0);\n  const SLASH = \"/\".charCodeAt(0);\n  const NEWLINE = \"\\n\".charCodeAt(0);\n  const SPACE = \" \".charCodeAt(0);\n  const FEED = \"\\f\".charCodeAt(0);\n  const TAB = \"\t\".charCodeAt(0);\n  const CR = \"\\r\".charCodeAt(0);\n  const OPEN_SQUARE = \"[\".charCodeAt(0);\n  const CLOSE_SQUARE = \"]\".charCodeAt(0);\n  const OPEN_PARENTHESES = \"(\".charCodeAt(0);\n  const CLOSE_PARENTHESES = \")\".charCodeAt(0);\n  const OPEN_CURLY = \"{\".charCodeAt(0);\n  const CLOSE_CURLY = \"}\".charCodeAt(0);\n  const SEMICOLON = \";\".charCodeAt(0);\n  const ASTERISK = \"*\".charCodeAt(0);\n  const COLON = \":\".charCodeAt(0);\n  const AT = \"@\".charCodeAt(0);\n  const RE_AT_END = /[\\t\\n\\f\\r \"#'()/;[\\\\\\]{}]/g;\n  const RE_WORD_END = /[\\t\\n\\f\\r !\"#'():;@[\\\\\\]{}]|\\/(?=\\*)/g;\n  const RE_BAD_BRACKET = /.[\\r\\n\"'(/\\\\]/;\n  const RE_HEX_ESCAPE = /[\\da-f]/i;\n  tokenize = function tokenizer(input2, options = {}) {\n    let css = input2.css.valueOf();\n    let ignore = options.ignoreErrors;\n    let code, content, escape, next, quote;\n    let currentToken, escaped, escapePos, n2, prev;\n    let length = css.length;\n    let pos = 0;\n    let buffer = [];\n    let returned = [];\n    function position() {\n      return pos;\n    }\n    function unclosed(what) {\n      throw input2.error(\"Unclosed \" + what, pos);\n    }\n    function endOfFile() {\n      return returned.length === 0 && pos >= length;\n    }\n    function nextToken(opts) {\n      if (returned.length) return returned.pop();\n      if (pos >= length) return;\n      let ignoreUnclosed = opts ? opts.ignoreUnclosed : false;\n      code = css.charCodeAt(pos);\n      switch (code) {\n        case NEWLINE:\n        case SPACE:\n        case TAB:\n        case CR:\n        case FEED: {\n          next = pos;\n          do {\n            next += 1;\n            code = css.charCodeAt(next);\n          } while (code === SPACE || code === NEWLINE || code === TAB || code === CR || code === FEED);\n          currentToken = [\"space\", css.slice(pos, next)];\n          pos = next - 1;\n          break;\n        }\n        case OPEN_SQUARE:\n        case CLOSE_SQUARE:\n        case OPEN_CURLY:\n        case CLOSE_CURLY:\n        case COLON:\n        case SEMICOLON:\n        case CLOSE_PARENTHESES: {\n          let controlChar = String.fromCharCode(code);\n          currentToken = [controlChar, controlChar, pos];\n          break;\n        }\n        case OPEN_PARENTHESES: {\n          prev = buffer.length ? buffer.pop()[1] : \"\";\n          n2 = css.charCodeAt(pos + 1);\n          if (prev === \"url\" && n2 !== SINGLE_QUOTE && n2 !== DOUBLE_QUOTE && n2 !== SPACE && n2 !== NEWLINE && n2 !== TAB && n2 !== FEED && n2 !== CR) {\n            next = pos;\n            do {\n              escaped = false;\n              next = css.indexOf(\")\", next + 1);\n              if (next === -1) {\n                if (ignore || ignoreUnclosed) {\n                  next = pos;\n                  break;\n                } else {\n                  unclosed(\"bracket\");\n                }\n              }\n              escapePos = next;\n              while (css.charCodeAt(escapePos - 1) === BACKSLASH) {\n                escapePos -= 1;\n                escaped = !escaped;\n              }\n            } while (escaped);\n            currentToken = [\"brackets\", css.slice(pos, next + 1), pos, next];\n            pos = next;\n          } else {\n            next = css.indexOf(\")\", pos + 1);\n            content = css.slice(pos, next + 1);\n            if (next === -1 || RE_BAD_BRACKET.test(content)) {\n              currentToken = [\"(\", \"(\", pos];\n            } else {\n              currentToken = [\"brackets\", content, pos, next];\n              pos = next;\n            }\n          }\n          break;\n        }\n        case SINGLE_QUOTE:\n        case DOUBLE_QUOTE: {\n          quote = code === SINGLE_QUOTE ? \"'\" : '\"';\n          next = pos;\n          do {\n            escaped = false;\n            next = css.indexOf(quote, next + 1);\n            if (next === -1) {\n              if (ignore || ignoreUnclosed) {\n                next = pos + 1;\n                break;\n              } else {\n                unclosed(\"string\");\n              }\n            }\n            escapePos = next;\n            while (css.charCodeAt(escapePos - 1) === BACKSLASH) {\n              escapePos -= 1;\n              escaped = !escaped;\n            }\n          } while (escaped);\n          currentToken = [\"string\", css.slice(pos, next + 1), pos, next];\n          pos = next;\n          break;\n        }\n        case AT: {\n          RE_AT_END.lastIndex = pos + 1;\n          RE_AT_END.test(css);\n          if (RE_AT_END.lastIndex === 0) {\n            next = css.length - 1;\n          } else {\n            next = RE_AT_END.lastIndex - 2;\n          }\n          currentToken = [\"at-word\", css.slice(pos, next + 1), pos, next];\n          pos = next;\n          break;\n        }\n        case BACKSLASH: {\n          next = pos;\n          escape = true;\n          while (css.charCodeAt(next + 1) === BACKSLASH) {\n            next += 1;\n            escape = !escape;\n          }\n          code = css.charCodeAt(next + 1);\n          if (escape && code !== SLASH && code !== SPACE && code !== NEWLINE && code !== TAB && code !== CR && code !== FEED) {\n            next += 1;\n            if (RE_HEX_ESCAPE.test(css.charAt(next))) {\n              while (RE_HEX_ESCAPE.test(css.charAt(next + 1))) {\n                next += 1;\n              }\n              if (css.charCodeAt(next + 1) === SPACE) {\n                next += 1;\n              }\n            }\n          }\n          currentToken = [\"word\", css.slice(pos, next + 1), pos, next];\n          pos = next;\n          break;\n        }\n        default: {\n          if (code === SLASH && css.charCodeAt(pos + 1) === ASTERISK) {\n            next = css.indexOf(\"*/\", pos + 2) + 1;\n            if (next === 0) {\n              if (ignore || ignoreUnclosed) {\n                next = css.length;\n              } else {\n                unclosed(\"comment\");\n              }\n            }\n            currentToken = [\"comment\", css.slice(pos, next + 1), pos, next];\n            pos = next;\n          } else {\n            RE_WORD_END.lastIndex = pos + 1;\n            RE_WORD_END.test(css);\n            if (RE_WORD_END.lastIndex === 0) {\n              next = css.length - 1;\n            } else {\n              next = RE_WORD_END.lastIndex - 2;\n            }\n            currentToken = [\"word\", css.slice(pos, next + 1), pos, next];\n            buffer.push(currentToken);\n            pos = next;\n          }\n          break;\n        }\n      }\n      pos++;\n      return currentToken;\n    }\n    function back(token) {\n      returned.push(token);\n    }\n    return {\n      back,\n      endOfFile,\n      nextToken,\n      position\n    };\n  };\n  return tokenize;\n}\nvar parser;\nvar hasRequiredParser;\nfunction requireParser() {\n  if (hasRequiredParser) return parser;\n  hasRequiredParser = 1;\n  let AtRule = requireAtRule();\n  let Comment = requireComment();\n  let Declaration = requireDeclaration();\n  let Root = requireRoot();\n  let Rule = requireRule();\n  let tokenizer = requireTokenize();\n  const SAFE_COMMENT_NEIGHBOR = {\n    empty: true,\n    space: true\n  };\n  function findLastWithPosition(tokens) {\n    for (let i2 = tokens.length - 1; i2 >= 0; i2--) {\n      let token = tokens[i2];\n      let pos = token[3] || token[2];\n      if (pos) return pos;\n    }\n  }\n  class Parser {\n    constructor(input2) {\n      this.input = input2;\n      this.root = new Root();\n      this.current = this.root;\n      this.spaces = \"\";\n      this.semicolon = false;\n      this.createTokenizer();\n      this.root.source = { input: input2, start: { column: 1, line: 1, offset: 0 } };\n    }\n    atrule(token) {\n      let node2 = new AtRule();\n      node2.name = token[1].slice(1);\n      if (node2.name === \"\") {\n        this.unnamedAtrule(node2, token);\n      }\n      this.init(node2, token[2]);\n      let type;\n      let prev;\n      let shift;\n      let last = false;\n      let open = false;\n      let params = [];\n      let brackets = [];\n      while (!this.tokenizer.endOfFile()) {\n        token = this.tokenizer.nextToken();\n        type = token[0];\n        if (type === \"(\" || type === \"[\") {\n          brackets.push(type === \"(\" ? \")\" : \"]\");\n        } else if (type === \"{\" && brackets.length > 0) {\n          brackets.push(\"}\");\n        } else if (type === brackets[brackets.length - 1]) {\n          brackets.pop();\n        }\n        if (brackets.length === 0) {\n          if (type === \";\") {\n            node2.source.end = this.getPosition(token[2]);\n            node2.source.end.offset++;\n            this.semicolon = true;\n            break;\n          } else if (type === \"{\") {\n            open = true;\n            break;\n          } else if (type === \"}\") {\n            if (params.length > 0) {\n              shift = params.length - 1;\n              prev = params[shift];\n              while (prev && prev[0] === \"space\") {\n                prev = params[--shift];\n              }\n              if (prev) {\n                node2.source.end = this.getPosition(prev[3] || prev[2]);\n                node2.source.end.offset++;\n              }\n            }\n            this.end(token);\n            break;\n          } else {\n            params.push(token);\n          }\n        } else {\n          params.push(token);\n        }\n        if (this.tokenizer.endOfFile()) {\n          last = true;\n          break;\n        }\n      }\n      node2.raws.between = this.spacesAndCommentsFromEnd(params);\n      if (params.length) {\n        node2.raws.afterName = this.spacesAndCommentsFromStart(params);\n        this.raw(node2, \"params\", params);\n        if (last) {\n          token = params[params.length - 1];\n          node2.source.end = this.getPosition(token[3] || token[2]);\n          node2.source.end.offset++;\n          this.spaces = node2.raws.between;\n          node2.raws.between = \"\";\n        }\n      } else {\n        node2.raws.afterName = \"\";\n        node2.params = \"\";\n      }\n      if (open) {\n        node2.nodes = [];\n        this.current = node2;\n      }\n    }\n    checkMissedSemicolon(tokens) {\n      let colon = this.colon(tokens);\n      if (colon === false) return;\n      let founded = 0;\n      let token;\n      for (let j2 = colon - 1; j2 >= 0; j2--) {\n        token = tokens[j2];\n        if (token[0] !== \"space\") {\n          founded += 1;\n          if (founded === 2) break;\n        }\n      }\n      throw this.input.error(\n        \"Missed semicolon\",\n        token[0] === \"word\" ? token[3] + 1 : token[2]\n      );\n    }\n    colon(tokens) {\n      let brackets = 0;\n      let prev, token, type;\n      for (let [i2, element] of tokens.entries()) {\n        token = element;\n        type = token[0];\n        if (type === \"(\") {\n          brackets += 1;\n        }\n        if (type === \")\") {\n          brackets -= 1;\n        }\n        if (brackets === 0 && type === \":\") {\n          if (!prev) {\n            this.doubleColon(token);\n          } else if (prev[0] === \"word\" && prev[1] === \"progid\") {\n            continue;\n          } else {\n            return i2;\n          }\n        }\n        prev = token;\n      }\n      return false;\n    }\n    comment(token) {\n      let node2 = new Comment();\n      this.init(node2, token[2]);\n      node2.source.end = this.getPosition(token[3] || token[2]);\n      node2.source.end.offset++;\n      let text = token[1].slice(2, -2);\n      if (/^\\s*$/.test(text)) {\n        node2.text = \"\";\n        node2.raws.left = text;\n        node2.raws.right = \"\";\n      } else {\n        let match = text.match(/^(\\s*)([^]*\\S)(\\s*)$/);\n        node2.text = match[2];\n        node2.raws.left = match[1];\n        node2.raws.right = match[3];\n      }\n    }\n    createTokenizer() {\n      this.tokenizer = tokenizer(this.input);\n    }\n    decl(tokens, customProperty) {\n      let node2 = new Declaration();\n      this.init(node2, tokens[0][2]);\n      let last = tokens[tokens.length - 1];\n      if (last[0] === \";\") {\n        this.semicolon = true;\n        tokens.pop();\n      }\n      node2.source.end = this.getPosition(\n        last[3] || last[2] || findLastWithPosition(tokens)\n      );\n      node2.source.end.offset++;\n      while (tokens[0][0] !== \"word\") {\n        if (tokens.length === 1) this.unknownWord(tokens);\n        node2.raws.before += tokens.shift()[1];\n      }\n      node2.source.start = this.getPosition(tokens[0][2]);\n      node2.prop = \"\";\n      while (tokens.length) {\n        let type = tokens[0][0];\n        if (type === \":\" || type === \"space\" || type === \"comment\") {\n          break;\n        }\n        node2.prop += tokens.shift()[1];\n      }\n      node2.raws.between = \"\";\n      let token;\n      while (tokens.length) {\n        token = tokens.shift();\n        if (token[0] === \":\") {\n          node2.raws.between += token[1];\n          break;\n        } else {\n          if (token[0] === \"word\" && /\\w/.test(token[1])) {\n            this.unknownWord([token]);\n          }\n          node2.raws.between += token[1];\n        }\n      }\n      if (node2.prop[0] === \"_\" || node2.prop[0] === \"*\") {\n        node2.raws.before += node2.prop[0];\n        node2.prop = node2.prop.slice(1);\n      }\n      let firstSpaces = [];\n      let next;\n      while (tokens.length) {\n        next = tokens[0][0];\n        if (next !== \"space\" && next !== \"comment\") break;\n        firstSpaces.push(tokens.shift());\n      }\n      this.precheckMissedSemicolon(tokens);\n      for (let i2 = tokens.length - 1; i2 >= 0; i2--) {\n        token = tokens[i2];\n        if (token[1].toLowerCase() === \"!important\") {\n          node2.important = true;\n          let string = this.stringFrom(tokens, i2);\n          string = this.spacesFromEnd(tokens) + string;\n          if (string !== \" !important\") node2.raws.important = string;\n          break;\n        } else if (token[1].toLowerCase() === \"important\") {\n          let cache = tokens.slice(0);\n          let str = \"\";\n          for (let j2 = i2; j2 > 0; j2--) {\n            let type = cache[j2][0];\n            if (str.trim().startsWith(\"!\") && type !== \"space\") {\n              break;\n            }\n            str = cache.pop()[1] + str;\n          }\n          if (str.trim().startsWith(\"!\")) {\n            node2.important = true;\n            node2.raws.important = str;\n            tokens = cache;\n          }\n        }\n        if (token[0] !== \"space\" && token[0] !== \"comment\") {\n          break;\n        }\n      }\n      let hasWord = tokens.some((i2) => i2[0] !== \"space\" && i2[0] !== \"comment\");\n      if (hasWord) {\n        node2.raws.between += firstSpaces.map((i2) => i2[1]).join(\"\");\n        firstSpaces = [];\n      }\n      this.raw(node2, \"value\", firstSpaces.concat(tokens), customProperty);\n      if (node2.value.includes(\":\") && !customProperty) {\n        this.checkMissedSemicolon(tokens);\n      }\n    }\n    doubleColon(token) {\n      throw this.input.error(\n        \"Double colon\",\n        { offset: token[2] },\n        { offset: token[2] + token[1].length }\n      );\n    }\n    emptyRule(token) {\n      let node2 = new Rule();\n      this.init(node2, token[2]);\n      node2.selector = \"\";\n      node2.raws.between = \"\";\n      this.current = node2;\n    }\n    end(token) {\n      if (this.current.nodes && this.current.nodes.length) {\n        this.current.raws.semicolon = this.semicolon;\n      }\n      this.semicolon = false;\n      this.current.raws.after = (this.current.raws.after || \"\") + this.spaces;\n      this.spaces = \"\";\n      if (this.current.parent) {\n        this.current.source.end = this.getPosition(token[2]);\n        this.current.source.end.offset++;\n        this.current = this.current.parent;\n      } else {\n        this.unexpectedClose(token);\n      }\n    }\n    endFile() {\n      if (this.current.parent) this.unclosedBlock();\n      if (this.current.nodes && this.current.nodes.length) {\n        this.current.raws.semicolon = this.semicolon;\n      }\n      this.current.raws.after = (this.current.raws.after || \"\") + this.spaces;\n      this.root.source.end = this.getPosition(this.tokenizer.position());\n    }\n    freeSemicolon(token) {\n      this.spaces += token[1];\n      if (this.current.nodes) {\n        let prev = this.current.nodes[this.current.nodes.length - 1];\n        if (prev && prev.type === \"rule\" && !prev.raws.ownSemicolon) {\n          prev.raws.ownSemicolon = this.spaces;\n          this.spaces = \"\";\n          prev.source.end = this.getPosition(token[2]);\n          prev.source.end.offset += prev.raws.ownSemicolon.length;\n        }\n      }\n    }\n    // Helpers\n    getPosition(offset) {\n      let pos = this.input.fromOffset(offset);\n      return {\n        column: pos.col,\n        line: pos.line,\n        offset\n      };\n    }\n    init(node2, offset) {\n      this.current.push(node2);\n      node2.source = {\n        input: this.input,\n        start: this.getPosition(offset)\n      };\n      node2.raws.before = this.spaces;\n      this.spaces = \"\";\n      if (node2.type !== \"comment\") this.semicolon = false;\n    }\n    other(start) {\n      let end = false;\n      let type = null;\n      let colon = false;\n      let bracket = null;\n      let brackets = [];\n      let customProperty = start[1].startsWith(\"--\");\n      let tokens = [];\n      let token = start;\n      while (token) {\n        type = token[0];\n        tokens.push(token);\n        if (type === \"(\" || type === \"[\") {\n          if (!bracket) bracket = token;\n          brackets.push(type === \"(\" ? \")\" : \"]\");\n        } else if (customProperty && colon && type === \"{\") {\n          if (!bracket) bracket = token;\n          brackets.push(\"}\");\n        } else if (brackets.length === 0) {\n          if (type === \";\") {\n            if (colon) {\n              this.decl(tokens, customProperty);\n              return;\n            } else {\n              break;\n            }\n          } else if (type === \"{\") {\n            this.rule(tokens);\n            return;\n          } else if (type === \"}\") {\n            this.tokenizer.back(tokens.pop());\n            end = true;\n            break;\n          } else if (type === \":\") {\n            colon = true;\n          }\n        } else if (type === brackets[brackets.length - 1]) {\n          brackets.pop();\n          if (brackets.length === 0) bracket = null;\n        }\n        token = this.tokenizer.nextToken();\n      }\n      if (this.tokenizer.endOfFile()) end = true;\n      if (brackets.length > 0) this.unclosedBracket(bracket);\n      if (end && colon) {\n        if (!customProperty) {\n          while (tokens.length) {\n            token = tokens[tokens.length - 1][0];\n            if (token !== \"space\" && token !== \"comment\") break;\n            this.tokenizer.back(tokens.pop());\n          }\n        }\n        this.decl(tokens, customProperty);\n      } else {\n        this.unknownWord(tokens);\n      }\n    }\n    parse() {\n      let token;\n      while (!this.tokenizer.endOfFile()) {\n        token = this.tokenizer.nextToken();\n        switch (token[0]) {\n          case \"space\":\n            this.spaces += token[1];\n            break;\n          case \";\":\n            this.freeSemicolon(token);\n            break;\n          case \"}\":\n            this.end(token);\n            break;\n          case \"comment\":\n            this.comment(token);\n            break;\n          case \"at-word\":\n            this.atrule(token);\n            break;\n          case \"{\":\n            this.emptyRule(token);\n            break;\n          default:\n            this.other(token);\n            break;\n        }\n      }\n      this.endFile();\n    }\n    precheckMissedSemicolon() {\n    }\n    raw(node2, prop, tokens, customProperty) {\n      let token, type;\n      let length = tokens.length;\n      let value = \"\";\n      let clean = true;\n      let next, prev;\n      for (let i2 = 0; i2 < length; i2 += 1) {\n        token = tokens[i2];\n        type = token[0];\n        if (type === \"space\" && i2 === length - 1 && !customProperty) {\n          clean = false;\n        } else if (type === \"comment\") {\n          prev = tokens[i2 - 1] ? tokens[i2 - 1][0] : \"empty\";\n          next = tokens[i2 + 1] ? tokens[i2 + 1][0] : \"empty\";\n          if (!SAFE_COMMENT_NEIGHBOR[prev] && !SAFE_COMMENT_NEIGHBOR[next]) {\n            if (value.slice(-1) === \",\") {\n              clean = false;\n            } else {\n              value += token[1];\n            }\n          } else {\n            clean = false;\n          }\n        } else {\n          value += token[1];\n        }\n      }\n      if (!clean) {\n        let raw = tokens.reduce((all, i2) => all + i2[1], \"\");\n        node2.raws[prop] = { raw, value };\n      }\n      node2[prop] = value;\n    }\n    rule(tokens) {\n      tokens.pop();\n      let node2 = new Rule();\n      this.init(node2, tokens[0][2]);\n      node2.raws.between = this.spacesAndCommentsFromEnd(tokens);\n      this.raw(node2, \"selector\", tokens);\n      this.current = node2;\n    }\n    spacesAndCommentsFromEnd(tokens) {\n      let lastTokenType;\n      let spaces = \"\";\n      while (tokens.length) {\n        lastTokenType = tokens[tokens.length - 1][0];\n        if (lastTokenType !== \"space\" && lastTokenType !== \"comment\") break;\n        spaces = tokens.pop()[1] + spaces;\n      }\n      return spaces;\n    }\n    // Errors\n    spacesAndCommentsFromStart(tokens) {\n      let next;\n      let spaces = \"\";\n      while (tokens.length) {\n        next = tokens[0][0];\n        if (next !== \"space\" && next !== \"comment\") break;\n        spaces += tokens.shift()[1];\n      }\n      return spaces;\n    }\n    spacesFromEnd(tokens) {\n      let lastTokenType;\n      let spaces = \"\";\n      while (tokens.length) {\n        lastTokenType = tokens[tokens.length - 1][0];\n        if (lastTokenType !== \"space\") break;\n        spaces = tokens.pop()[1] + spaces;\n      }\n      return spaces;\n    }\n    stringFrom(tokens, from) {\n      let result2 = \"\";\n      for (let i2 = from; i2 < tokens.length; i2++) {\n        result2 += tokens[i2][1];\n      }\n      tokens.splice(from, tokens.length - from);\n      return result2;\n    }\n    unclosedBlock() {\n      let pos = this.current.source.start;\n      throw this.input.error(\"Unclosed block\", pos.line, pos.column);\n    }\n    unclosedBracket(bracket) {\n      throw this.input.error(\n        \"Unclosed bracket\",\n        { offset: bracket[2] },\n        { offset: bracket[2] + 1 }\n      );\n    }\n    unexpectedClose(token) {\n      throw this.input.error(\n        \"Unexpected }\",\n        { offset: token[2] },\n        { offset: token[2] + 1 }\n      );\n    }\n    unknownWord(tokens) {\n      throw this.input.error(\n        \"Unknown word \" + tokens[0][1],\n        { offset: tokens[0][2] },\n        { offset: tokens[0][2] + tokens[0][1].length }\n      );\n    }\n    unnamedAtrule(node2, token) {\n      throw this.input.error(\n        \"At-rule without name\",\n        { offset: token[2] },\n        { offset: token[2] + token[1].length }\n      );\n    }\n  }\n  parser = Parser;\n  return parser;\n}\nvar parse_1;\nvar hasRequiredParse;\nfunction requireParse() {\n  if (hasRequiredParse) return parse_1;\n  hasRequiredParse = 1;\n  let Container = requireContainer();\n  let Input = requireInput();\n  let Parser = requireParser();\n  function parse(css, opts) {\n    let input2 = new Input(css, opts);\n    let parser2 = new Parser(input2);\n    try {\n      parser2.parse();\n    } catch (e2) {\n      if (process.env.NODE_ENV !== \"production\") {\n        if (e2.name === \"CssSyntaxError\" && opts && opts.from) {\n          if (/\\.scss$/i.test(opts.from)) {\n            e2.message += \"\\nYou tried to parse SCSS with the standard CSS parser; try again with the postcss-scss parser\";\n          } else if (/\\.sass/i.test(opts.from)) {\n            e2.message += \"\\nYou tried to parse Sass with the standard CSS parser; try again with the postcss-sass parser\";\n          } else if (/\\.less$/i.test(opts.from)) {\n            e2.message += \"\\nYou tried to parse Less with the standard CSS parser; try again with the postcss-less parser\";\n          }\n        }\n      }\n      throw e2;\n    }\n    return parser2.root;\n  }\n  parse_1 = parse;\n  parse.default = parse;\n  Container.registerParse(parse);\n  return parse_1;\n}\nvar warning;\nvar hasRequiredWarning;\nfunction requireWarning() {\n  if (hasRequiredWarning) return warning;\n  hasRequiredWarning = 1;\n  class Warning {\n    constructor(text, opts = {}) {\n      this.type = \"warning\";\n      this.text = text;\n      if (opts.node && opts.node.source) {\n        let range = opts.node.rangeBy(opts);\n        this.line = range.start.line;\n        this.column = range.start.column;\n        this.endLine = range.end.line;\n        this.endColumn = range.end.column;\n      }\n      for (let opt in opts) this[opt] = opts[opt];\n    }\n    toString() {\n      if (this.node) {\n        return this.node.error(this.text, {\n          index: this.index,\n          plugin: this.plugin,\n          word: this.word\n        }).message;\n      }\n      if (this.plugin) {\n        return this.plugin + \": \" + this.text;\n      }\n      return this.text;\n    }\n  }\n  warning = Warning;\n  Warning.default = Warning;\n  return warning;\n}\nvar result;\nvar hasRequiredResult;\nfunction requireResult() {\n  if (hasRequiredResult) return result;\n  hasRequiredResult = 1;\n  let Warning = requireWarning();\n  class Result {\n    get content() {\n      return this.css;\n    }\n    constructor(processor2, root2, opts) {\n      this.processor = processor2;\n      this.messages = [];\n      this.root = root2;\n      this.opts = opts;\n      this.css = \"\";\n      this.map = void 0;\n    }\n    toString() {\n      return this.css;\n    }\n    warn(text, opts = {}) {\n      if (!opts.plugin) {\n        if (this.lastPlugin && this.lastPlugin.postcssPlugin) {\n          opts.plugin = this.lastPlugin.postcssPlugin;\n        }\n      }\n      let warning2 = new Warning(text, opts);\n      this.messages.push(warning2);\n      return warning2;\n    }\n    warnings() {\n      return this.messages.filter((i2) => i2.type === \"warning\");\n    }\n  }\n  result = Result;\n  Result.default = Result;\n  return result;\n}\nvar warnOnce;\nvar hasRequiredWarnOnce;\nfunction requireWarnOnce() {\n  if (hasRequiredWarnOnce) return warnOnce;\n  hasRequiredWarnOnce = 1;\n  let printed = {};\n  warnOnce = function warnOnce2(message) {\n    if (printed[message]) return;\n    printed[message] = true;\n    if (typeof console !== \"undefined\" && console.warn) {\n      console.warn(message);\n    }\n  };\n  return warnOnce;\n}\nvar lazyResult;\nvar hasRequiredLazyResult;\nfunction requireLazyResult() {\n  if (hasRequiredLazyResult) return lazyResult;\n  hasRequiredLazyResult = 1;\n  let Container = requireContainer();\n  let Document2 = requireDocument();\n  let MapGenerator = requireMapGenerator();\n  let parse = requireParse();\n  let Result = requireResult();\n  let Root = requireRoot();\n  let stringify = requireStringify();\n  let { isClean, my } = requireSymbols();\n  let warnOnce2 = requireWarnOnce();\n  const TYPE_TO_CLASS_NAME = {\n    atrule: \"AtRule\",\n    comment: \"Comment\",\n    decl: \"Declaration\",\n    document: \"Document\",\n    root: \"Root\",\n    rule: \"Rule\"\n  };\n  const PLUGIN_PROPS = {\n    AtRule: true,\n    AtRuleExit: true,\n    Comment: true,\n    CommentExit: true,\n    Declaration: true,\n    DeclarationExit: true,\n    Document: true,\n    DocumentExit: true,\n    Once: true,\n    OnceExit: true,\n    postcssPlugin: true,\n    prepare: true,\n    Root: true,\n    RootExit: true,\n    Rule: true,\n    RuleExit: true\n  };\n  const NOT_VISITORS = {\n    Once: true,\n    postcssPlugin: true,\n    prepare: true\n  };\n  const CHILDREN = 0;\n  function isPromise(obj) {\n    return typeof obj === \"object\" && typeof obj.then === \"function\";\n  }\n  function getEvents(node2) {\n    let key = false;\n    let type = TYPE_TO_CLASS_NAME[node2.type];\n    if (node2.type === \"decl\") {\n      key = node2.prop.toLowerCase();\n    } else if (node2.type === \"atrule\") {\n      key = node2.name.toLowerCase();\n    }\n    if (key && node2.append) {\n      return [\n        type,\n        type + \"-\" + key,\n        CHILDREN,\n        type + \"Exit\",\n        type + \"Exit-\" + key\n      ];\n    } else if (key) {\n      return [type, type + \"-\" + key, type + \"Exit\", type + \"Exit-\" + key];\n    } else if (node2.append) {\n      return [type, CHILDREN, type + \"Exit\"];\n    } else {\n      return [type, type + \"Exit\"];\n    }\n  }\n  function toStack(node2) {\n    let events;\n    if (node2.type === \"document\") {\n      events = [\"Document\", CHILDREN, \"DocumentExit\"];\n    } else if (node2.type === \"root\") {\n      events = [\"Root\", CHILDREN, \"RootExit\"];\n    } else {\n      events = getEvents(node2);\n    }\n    return {\n      eventIndex: 0,\n      events,\n      iterator: 0,\n      node: node2,\n      visitorIndex: 0,\n      visitors: []\n    };\n  }\n  function cleanMarks(node2) {\n    node2[isClean] = false;\n    if (node2.nodes) node2.nodes.forEach((i2) => cleanMarks(i2));\n    return node2;\n  }\n  let postcss2 = {};\n  class LazyResult {\n    get content() {\n      return this.stringify().content;\n    }\n    get css() {\n      return this.stringify().css;\n    }\n    get map() {\n      return this.stringify().map;\n    }\n    get messages() {\n      return this.sync().messages;\n    }\n    get opts() {\n      return this.result.opts;\n    }\n    get processor() {\n      return this.result.processor;\n    }\n    get root() {\n      return this.sync().root;\n    }\n    get [Symbol.toStringTag]() {\n      return \"LazyResult\";\n    }\n    constructor(processor2, css, opts) {\n      this.stringified = false;\n      this.processed = false;\n      let root2;\n      if (typeof css === \"object\" && css !== null && (css.type === \"root\" || css.type === \"document\")) {\n        root2 = cleanMarks(css);\n      } else if (css instanceof LazyResult || css instanceof Result) {\n        root2 = cleanMarks(css.root);\n        if (css.map) {\n          if (typeof opts.map === \"undefined\") opts.map = {};\n          if (!opts.map.inline) opts.map.inline = false;\n          opts.map.prev = css.map;\n        }\n      } else {\n        let parser2 = parse;\n        if (opts.syntax) parser2 = opts.syntax.parse;\n        if (opts.parser) parser2 = opts.parser;\n        if (parser2.parse) parser2 = parser2.parse;\n        try {\n          root2 = parser2(css, opts);\n        } catch (error) {\n          this.processed = true;\n          this.error = error;\n        }\n        if (root2 && !root2[my]) {\n          Container.rebuild(root2);\n        }\n      }\n      this.result = new Result(processor2, root2, opts);\n      this.helpers = { ...postcss2, postcss: postcss2, result: this.result };\n      this.plugins = this.processor.plugins.map((plugin) => {\n        if (typeof plugin === \"object\" && plugin.prepare) {\n          return { ...plugin, ...plugin.prepare(this.result) };\n        } else {\n          return plugin;\n        }\n      });\n    }\n    async() {\n      if (this.error) return Promise.reject(this.error);\n      if (this.processed) return Promise.resolve(this.result);\n      if (!this.processing) {\n        this.processing = this.runAsync();\n      }\n      return this.processing;\n    }\n    catch(onRejected) {\n      return this.async().catch(onRejected);\n    }\n    finally(onFinally) {\n      return this.async().then(onFinally, onFinally);\n    }\n    getAsyncError() {\n      throw new Error(\"Use process(css).then(cb) to work with async plugins\");\n    }\n    handleError(error, node2) {\n      let plugin = this.result.lastPlugin;\n      try {\n        if (node2) node2.addToError(error);\n        this.error = error;\n        if (error.name === \"CssSyntaxError\" && !error.plugin) {\n          error.plugin = plugin.postcssPlugin;\n          error.setMessage();\n        } else if (plugin.postcssVersion) {\n          if (process.env.NODE_ENV !== \"production\") {\n            let pluginName = plugin.postcssPlugin;\n            let pluginVer = plugin.postcssVersion;\n            let runtimeVer = this.result.processor.version;\n            let a2 = pluginVer.split(\".\");\n            let b2 = runtimeVer.split(\".\");\n            if (a2[0] !== b2[0] || parseInt(a2[1]) > parseInt(b2[1])) {\n              console.error(\n                \"Unknown error from PostCSS plugin. Your current PostCSS version is \" + runtimeVer + \", but \" + pluginName + \" uses \" + pluginVer + \". Perhaps this is the source of the error below.\"\n              );\n            }\n          }\n        }\n      } catch (err) {\n        if (console && console.error) console.error(err);\n      }\n      return error;\n    }\n    prepareVisitors() {\n      this.listeners = {};\n      let add = (plugin, type, cb) => {\n        if (!this.listeners[type]) this.listeners[type] = [];\n        this.listeners[type].push([plugin, cb]);\n      };\n      for (let plugin of this.plugins) {\n        if (typeof plugin === \"object\") {\n          for (let event in plugin) {\n            if (!PLUGIN_PROPS[event] && /^[A-Z]/.test(event)) {\n              throw new Error(\n                `Unknown event ${event} in ${plugin.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`\n              );\n            }\n            if (!NOT_VISITORS[event]) {\n              if (typeof plugin[event] === \"object\") {\n                for (let filter in plugin[event]) {\n                  if (filter === \"*\") {\n                    add(plugin, event, plugin[event][filter]);\n                  } else {\n                    add(\n                      plugin,\n                      event + \"-\" + filter.toLowerCase(),\n                      plugin[event][filter]\n                    );\n                  }\n                }\n              } else if (typeof plugin[event] === \"function\") {\n                add(plugin, event, plugin[event]);\n              }\n            }\n          }\n        }\n      }\n      this.hasListener = Object.keys(this.listeners).length > 0;\n    }\n    async runAsync() {\n      this.plugin = 0;\n      for (let i2 = 0; i2 < this.plugins.length; i2++) {\n        let plugin = this.plugins[i2];\n        let promise = this.runOnRoot(plugin);\n        if (isPromise(promise)) {\n          try {\n            await promise;\n          } catch (error) {\n            throw this.handleError(error);\n          }\n        }\n      }\n      this.prepareVisitors();\n      if (this.hasListener) {\n        let root2 = this.result.root;\n        while (!root2[isClean]) {\n          root2[isClean] = true;\n          let stack = [toStack(root2)];\n          while (stack.length > 0) {\n            let promise = this.visitTick(stack);\n            if (isPromise(promise)) {\n              try {\n                await promise;\n              } catch (e2) {\n                let node2 = stack[stack.length - 1].node;\n                throw this.handleError(e2, node2);\n              }\n            }\n          }\n        }\n        if (this.listeners.OnceExit) {\n          for (let [plugin, visitor] of this.listeners.OnceExit) {\n            this.result.lastPlugin = plugin;\n            try {\n              if (root2.type === \"document\") {\n                let roots = root2.nodes.map(\n                  (subRoot) => visitor(subRoot, this.helpers)\n                );\n                await Promise.all(roots);\n              } else {\n                await visitor(root2, this.helpers);\n              }\n            } catch (e2) {\n              throw this.handleError(e2);\n            }\n          }\n        }\n      }\n      this.processed = true;\n      return this.stringify();\n    }\n    runOnRoot(plugin) {\n      this.result.lastPlugin = plugin;\n      try {\n        if (typeof plugin === \"object\" && plugin.Once) {\n          if (this.result.root.type === \"document\") {\n            let roots = this.result.root.nodes.map(\n              (root2) => plugin.Once(root2, this.helpers)\n            );\n            if (isPromise(roots[0])) {\n              return Promise.all(roots);\n            }\n            return roots;\n          }\n          return plugin.Once(this.result.root, this.helpers);\n        } else if (typeof plugin === \"function\") {\n          return plugin(this.result.root, this.result);\n        }\n      } catch (error) {\n        throw this.handleError(error);\n      }\n    }\n    stringify() {\n      if (this.error) throw this.error;\n      if (this.stringified) return this.result;\n      this.stringified = true;\n      this.sync();\n      let opts = this.result.opts;\n      let str = stringify;\n      if (opts.syntax) str = opts.syntax.stringify;\n      if (opts.stringifier) str = opts.stringifier;\n      if (str.stringify) str = str.stringify;\n      let map = new MapGenerator(str, this.result.root, this.result.opts);\n      let data = map.generate();\n      this.result.css = data[0];\n      this.result.map = data[1];\n      return this.result;\n    }\n    sync() {\n      if (this.error) throw this.error;\n      if (this.processed) return this.result;\n      this.processed = true;\n      if (this.processing) {\n        throw this.getAsyncError();\n      }\n      for (let plugin of this.plugins) {\n        let promise = this.runOnRoot(plugin);\n        if (isPromise(promise)) {\n          throw this.getAsyncError();\n        }\n      }\n      this.prepareVisitors();\n      if (this.hasListener) {\n        let root2 = this.result.root;\n        while (!root2[isClean]) {\n          root2[isClean] = true;\n          this.walkSync(root2);\n        }\n        if (this.listeners.OnceExit) {\n          if (root2.type === \"document\") {\n            for (let subRoot of root2.nodes) {\n              this.visitSync(this.listeners.OnceExit, subRoot);\n            }\n          } else {\n            this.visitSync(this.listeners.OnceExit, root2);\n          }\n        }\n      }\n      return this.result;\n    }\n    then(onFulfilled, onRejected) {\n      if (process.env.NODE_ENV !== \"production\") {\n        if (!(\"from\" in this.opts)) {\n          warnOnce2(\n            \"Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning.\"\n          );\n        }\n      }\n      return this.async().then(onFulfilled, onRejected);\n    }\n    toString() {\n      return this.css;\n    }\n    visitSync(visitors, node2) {\n      for (let [plugin, visitor] of visitors) {\n        this.result.lastPlugin = plugin;\n        let promise;\n        try {\n          promise = visitor(node2, this.helpers);\n        } catch (e2) {\n          throw this.handleError(e2, node2.proxyOf);\n        }\n        if (node2.type !== \"root\" && node2.type !== \"document\" && !node2.parent) {\n          return true;\n        }\n        if (isPromise(promise)) {\n          throw this.getAsyncError();\n        }\n      }\n    }\n    visitTick(stack) {\n      let visit2 = stack[stack.length - 1];\n      let { node: node2, visitors } = visit2;\n      if (node2.type !== \"root\" && node2.type !== \"document\" && !node2.parent) {\n        stack.pop();\n        return;\n      }\n      if (visitors.length > 0 && visit2.visitorIndex < visitors.length) {\n        let [plugin, visitor] = visitors[visit2.visitorIndex];\n        visit2.visitorIndex += 1;\n        if (visit2.visitorIndex === visitors.length) {\n          visit2.visitors = [];\n          visit2.visitorIndex = 0;\n        }\n        this.result.lastPlugin = plugin;\n        try {\n          return visitor(node2.toProxy(), this.helpers);\n        } catch (e2) {\n          throw this.handleError(e2, node2);\n        }\n      }\n      if (visit2.iterator !== 0) {\n        let iterator = visit2.iterator;\n        let child;\n        while (child = node2.nodes[node2.indexes[iterator]]) {\n          node2.indexes[iterator] += 1;\n          if (!child[isClean]) {\n            child[isClean] = true;\n            stack.push(toStack(child));\n            return;\n          }\n        }\n        visit2.iterator = 0;\n        delete node2.indexes[iterator];\n      }\n      let events = visit2.events;\n      while (visit2.eventIndex < events.length) {\n        let event = events[visit2.eventIndex];\n        visit2.eventIndex += 1;\n        if (event === CHILDREN) {\n          if (node2.nodes && node2.nodes.length) {\n            node2[isClean] = true;\n            visit2.iterator = node2.getIterator();\n          }\n          return;\n        } else if (this.listeners[event]) {\n          visit2.visitors = this.listeners[event];\n          return;\n        }\n      }\n      stack.pop();\n    }\n    walkSync(node2) {\n      node2[isClean] = true;\n      let events = getEvents(node2);\n      for (let event of events) {\n        if (event === CHILDREN) {\n          if (node2.nodes) {\n            node2.each((child) => {\n              if (!child[isClean]) this.walkSync(child);\n            });\n          }\n        } else {\n          let visitors = this.listeners[event];\n          if (visitors) {\n            if (this.visitSync(visitors, node2.toProxy())) return;\n          }\n        }\n      }\n    }\n    warnings() {\n      return this.sync().warnings();\n    }\n  }\n  LazyResult.registerPostcss = (dependant) => {\n    postcss2 = dependant;\n  };\n  lazyResult = LazyResult;\n  LazyResult.default = LazyResult;\n  Root.registerLazyResult(LazyResult);\n  Document2.registerLazyResult(LazyResult);\n  return lazyResult;\n}\nvar noWorkResult;\nvar hasRequiredNoWorkResult;\nfunction requireNoWorkResult() {\n  if (hasRequiredNoWorkResult) return noWorkResult;\n  hasRequiredNoWorkResult = 1;\n  let MapGenerator = requireMapGenerator();\n  let parse = requireParse();\n  const Result = requireResult();\n  let stringify = requireStringify();\n  let warnOnce2 = requireWarnOnce();\n  class NoWorkResult {\n    get content() {\n      return this.result.css;\n    }\n    get css() {\n      return this.result.css;\n    }\n    get map() {\n      return this.result.map;\n    }\n    get messages() {\n      return [];\n    }\n    get opts() {\n      return this.result.opts;\n    }\n    get processor() {\n      return this.result.processor;\n    }\n    get root() {\n      if (this._root) {\n        return this._root;\n      }\n      let root2;\n      let parser2 = parse;\n      try {\n        root2 = parser2(this._css, this._opts);\n      } catch (error) {\n        this.error = error;\n      }\n      if (this.error) {\n        throw this.error;\n      } else {\n        this._root = root2;\n        return root2;\n      }\n    }\n    get [Symbol.toStringTag]() {\n      return \"NoWorkResult\";\n    }\n    constructor(processor2, css, opts) {\n      css = css.toString();\n      this.stringified = false;\n      this._processor = processor2;\n      this._css = css;\n      this._opts = opts;\n      this._map = void 0;\n      let root2;\n      let str = stringify;\n      this.result = new Result(this._processor, root2, this._opts);\n      this.result.css = css;\n      let self2 = this;\n      Object.defineProperty(this.result, \"root\", {\n        get() {\n          return self2.root;\n        }\n      });\n      let map = new MapGenerator(str, root2, this._opts, css);\n      if (map.isMap()) {\n        let [generatedCSS, generatedMap] = map.generate();\n        if (generatedCSS) {\n          this.result.css = generatedCSS;\n        }\n        if (generatedMap) {\n          this.result.map = generatedMap;\n        }\n      } else {\n        map.clearAnnotation();\n        this.result.css = map.css;\n      }\n    }\n    async() {\n      if (this.error) return Promise.reject(this.error);\n      return Promise.resolve(this.result);\n    }\n    catch(onRejected) {\n      return this.async().catch(onRejected);\n    }\n    finally(onFinally) {\n      return this.async().then(onFinally, onFinally);\n    }\n    sync() {\n      if (this.error) throw this.error;\n      return this.result;\n    }\n    then(onFulfilled, onRejected) {\n      if (process.env.NODE_ENV !== \"production\") {\n        if (!(\"from\" in this._opts)) {\n          warnOnce2(\n            \"Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning.\"\n          );\n        }\n      }\n      return this.async().then(onFulfilled, onRejected);\n    }\n    toString() {\n      return this._css;\n    }\n    warnings() {\n      return [];\n    }\n  }\n  noWorkResult = NoWorkResult;\n  NoWorkResult.default = NoWorkResult;\n  return noWorkResult;\n}\nvar processor;\nvar hasRequiredProcessor;\nfunction requireProcessor() {\n  if (hasRequiredProcessor) return processor;\n  hasRequiredProcessor = 1;\n  let Document2 = requireDocument();\n  let LazyResult = requireLazyResult();\n  let NoWorkResult = requireNoWorkResult();\n  let Root = requireRoot();\n  class Processor {\n    constructor(plugins = []) {\n      this.version = \"8.5.6\";\n      this.plugins = this.normalize(plugins);\n    }\n    normalize(plugins) {\n      let normalized = [];\n      for (let i2 of plugins) {\n        if (i2.postcss === true) {\n          i2 = i2();\n        } else if (i2.postcss) {\n          i2 = i2.postcss;\n        }\n        if (typeof i2 === \"object\" && Array.isArray(i2.plugins)) {\n          normalized = normalized.concat(i2.plugins);\n        } else if (typeof i2 === \"object\" && i2.postcssPlugin) {\n          normalized.push(i2);\n        } else if (typeof i2 === \"function\") {\n          normalized.push(i2);\n        } else if (typeof i2 === \"object\" && (i2.parse || i2.stringify)) {\n          if (process.env.NODE_ENV !== \"production\") {\n            throw new Error(\n              \"PostCSS syntaxes cannot be used as plugins. Instead, please use one of the syntax/parser/stringifier options as outlined in your PostCSS runner documentation.\"\n            );\n          }\n        } else {\n          throw new Error(i2 + \" is not a PostCSS plugin\");\n        }\n      }\n      return normalized;\n    }\n    process(css, opts = {}) {\n      if (!this.plugins.length && !opts.parser && !opts.stringifier && !opts.syntax) {\n        return new NoWorkResult(this, css, opts);\n      } else {\n        return new LazyResult(this, css, opts);\n      }\n    }\n    use(plugin) {\n      this.plugins = this.plugins.concat(this.normalize([plugin]));\n      return this;\n    }\n  }\n  processor = Processor;\n  Processor.default = Processor;\n  Root.registerProcessor(Processor);\n  Document2.registerProcessor(Processor);\n  return processor;\n}\nvar postcss_1;\nvar hasRequiredPostcss;\nfunction requirePostcss() {\n  if (hasRequiredPostcss) return postcss_1;\n  hasRequiredPostcss = 1;\n  let AtRule = requireAtRule();\n  let Comment = requireComment();\n  let Container = requireContainer();\n  let CssSyntaxError = requireCssSyntaxError();\n  let Declaration = requireDeclaration();\n  let Document2 = requireDocument();\n  let fromJSON = requireFromJSON();\n  let Input = requireInput();\n  let LazyResult = requireLazyResult();\n  let list = requireList();\n  let Node2 = requireNode();\n  let parse = requireParse();\n  let Processor = requireProcessor();\n  let Result = requireResult();\n  let Root = requireRoot();\n  let Rule = requireRule();\n  let stringify = requireStringify();\n  let Warning = requireWarning();\n  function postcss2(...plugins) {\n    if (plugins.length === 1 && Array.isArray(plugins[0])) {\n      plugins = plugins[0];\n    }\n    return new Processor(plugins);\n  }\n  postcss2.plugin = function plugin(name, initializer) {\n    let warningPrinted = false;\n    function creator(...args) {\n      if (console && console.warn && !warningPrinted) {\n        warningPrinted = true;\n        console.warn(\n          name + \": postcss.plugin was deprecated. Migration guide:\\nhttps://evilmartians.com/chronicles/postcss-8-plugin-migration\"\n        );\n        if (process.env.LANG && process.env.LANG.startsWith(\"cn\")) {\n          console.warn(\n            name + \":  postcss.plugin . :\\nhttps://www.w3ctech.com/topic/2226\"\n          );\n        }\n      }\n      let transformer = initializer(...args);\n      transformer.postcssPlugin = name;\n      transformer.postcssVersion = new Processor().version;\n      return transformer;\n    }\n    let cache;\n    Object.defineProperty(creator, \"postcss\", {\n      get() {\n        if (!cache) cache = creator();\n        return cache;\n      }\n    });\n    creator.process = function(css, processOpts, pluginOpts) {\n      return postcss2([creator(pluginOpts)]).process(css, processOpts);\n    };\n    return creator;\n  };\n  postcss2.stringify = stringify;\n  postcss2.parse = parse;\n  postcss2.fromJSON = fromJSON;\n  postcss2.list = list;\n  postcss2.comment = (defaults) => new Comment(defaults);\n  postcss2.atRule = (defaults) => new AtRule(defaults);\n  postcss2.decl = (defaults) => new Declaration(defaults);\n  postcss2.rule = (defaults) => new Rule(defaults);\n  postcss2.root = (defaults) => new Root(defaults);\n  postcss2.document = (defaults) => new Document2(defaults);\n  postcss2.CssSyntaxError = CssSyntaxError;\n  postcss2.Declaration = Declaration;\n  postcss2.Container = Container;\n  postcss2.Processor = Processor;\n  postcss2.Document = Document2;\n  postcss2.Comment = Comment;\n  postcss2.Warning = Warning;\n  postcss2.AtRule = AtRule;\n  postcss2.Result = Result;\n  postcss2.Input = Input;\n  postcss2.Rule = Rule;\n  postcss2.Root = Root;\n  postcss2.Node = Node2;\n  LazyResult.registerPostcss(postcss2);\n  postcss_1 = postcss2;\n  postcss2.default = postcss2;\n  return postcss_1;\n}\nvar safeParser$1;\nvar hasRequiredSafeParser;\nfunction requireSafeParser() {\n  if (hasRequiredSafeParser) return safeParser$1;\n  hasRequiredSafeParser = 1;\n  let Comment = requireComment();\n  let Parser = requireParser();\n  let tokenizer = requireTokenize();\n  class SafeParser extends Parser {\n    checkMissedSemicolon() {\n    }\n    comment(token) {\n      let node2 = new Comment();\n      this.init(node2, token[2]);\n      let pos = this.input.fromOffset(token[3]) || this.input.fromOffset(this.input.css.length - 1);\n      node2.source.end = {\n        column: pos.col,\n        line: pos.line,\n        offset: token[3] + 1\n      };\n      let text = token[1].slice(2);\n      if (text.slice(-2) === \"*/\") text = text.slice(0, -2);\n      if (/^\\s*$/.test(text)) {\n        node2.text = \"\";\n        node2.raws.left = text;\n        node2.raws.right = \"\";\n      } else {\n        let match = text.match(/^(\\s*)([^]*\\S)(\\s*)$/);\n        node2.text = match[2];\n        node2.raws.left = match[1];\n        node2.raws.right = match[3];\n      }\n    }\n    createTokenizer() {\n      this.tokenizer = tokenizer(this.input, { ignoreErrors: true });\n    }\n    decl(tokens) {\n      if (tokens.length > 1 && tokens.some((i2) => i2[0] === \"word\")) {\n        super.decl(tokens);\n      }\n    }\n    doubleColon() {\n    }\n    endFile() {\n      if (this.current.nodes && this.current.nodes.length) {\n        this.current.raws.semicolon = this.semicolon;\n      }\n      this.current.raws.after = (this.current.raws.after || \"\") + this.spaces;\n      while (this.current.parent) {\n        this.current = this.current.parent;\n        this.current.raws.after = \"\";\n      }\n      this.root.source.end = this.getPosition(this.tokenizer.position());\n    }\n    precheckMissedSemicolon(tokens) {\n      let colon = this.colon(tokens);\n      if (colon === false) return;\n      let nextStart, prevEnd;\n      for (nextStart = colon - 1; nextStart >= 0; nextStart--) {\n        if (tokens[nextStart][0] === \"word\") break;\n      }\n      if (nextStart === 0 || nextStart < 0) return;\n      for (prevEnd = nextStart - 1; prevEnd >= 0; prevEnd--) {\n        if (tokens[prevEnd][0] !== \"space\") {\n          prevEnd += 1;\n          break;\n        }\n      }\n      let other = tokens.slice(nextStart);\n      let spaces = tokens.slice(prevEnd, nextStart);\n      tokens.splice(prevEnd, tokens.length - prevEnd);\n      this.spaces = spaces.map((i2) => i2[1]).join(\"\");\n      this.decl(other);\n    }\n    unclosedBracket() {\n    }\n    unexpectedClose() {\n      this.current.raws.after += \"}\";\n    }\n    unknownWord(tokens) {\n      this.spaces += tokens.map((i2) => i2[1]).join(\"\");\n    }\n    unnamedAtrule(node2) {\n      node2.name = \"\";\n    }\n  }\n  safeParser$1 = SafeParser;\n  return safeParser$1;\n}\nvar safeParse;\nvar hasRequiredSafeParse;\nfunction requireSafeParse() {\n  if (hasRequiredSafeParse) return safeParse;\n  hasRequiredSafeParse = 1;\n  let { Input } = requirePostcss();\n  let SafeParser = requireSafeParser();\n  safeParse = function safeParse2(css, opts) {\n    let input2 = new Input(css, opts);\n    let parser2 = new SafeParser(input2);\n    parser2.parse();\n    return parser2.root;\n  };\n  return safeParse;\n}\nrequireSafeParse();\nvar postcssExports = requirePostcss();\nconst postcss = /* @__PURE__ */ getDefaultExportFromCjs(postcssExports);\npostcss.stringify;\npostcss.fromJSON;\npostcss.plugin;\npostcss.parse;\npostcss.list;\npostcss.document;\npostcss.comment;\npostcss.atRule;\npostcss.rule;\npostcss.decl;\npostcss.root;\npostcss.CssSyntaxError;\npostcss.Declaration;\npostcss.Container;\npostcss.Processor;\npostcss.Document;\npostcss.Comment;\npostcss.Warning;\npostcss.AtRule;\npostcss.Result;\npostcss.Input;\npostcss.Rule;\npostcss.Root;\npostcss.Node;\nclass BaseRRNode {\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars, @typescript-eslint/no-explicit-any\n  constructor(..._args) {\n    __publicField2(this, \"parentElement\", null);\n    __publicField2(this, \"parentNode\", null);\n    __publicField2(this, \"ownerDocument\");\n    __publicField2(this, \"firstChild\", null);\n    __publicField2(this, \"lastChild\", null);\n    __publicField2(this, \"previousSibling\", null);\n    __publicField2(this, \"nextSibling\", null);\n    __publicField2(this, \"ELEMENT_NODE\", 1);\n    __publicField2(this, \"TEXT_NODE\", 3);\n    __publicField2(this, \"nodeType\");\n    __publicField2(this, \"nodeName\");\n    __publicField2(this, \"RRNodeType\");\n  }\n  get childNodes() {\n    const childNodes2 = [];\n    let childIterator = this.firstChild;\n    while (childIterator) {\n      childNodes2.push(childIterator);\n      childIterator = childIterator.nextSibling;\n    }\n    return childNodes2;\n  }\n  contains(node2) {\n    if (!(node2 instanceof BaseRRNode)) return false;\n    else if (node2.ownerDocument !== this.ownerDocument) return false;\n    else if (node2 === this) return true;\n    while (node2.parentNode) {\n      if (node2.parentNode === this) return true;\n      node2 = node2.parentNode;\n    }\n    return false;\n  }\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  appendChild(_newChild) {\n    throw new Error(\n      `RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.`\n    );\n  }\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  insertBefore(_newChild, _refChild) {\n    throw new Error(\n      `RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.`\n    );\n  }\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  removeChild(_node) {\n    throw new Error(\n      `RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.`\n    );\n  }\n  toString() {\n    return \"RRNode\";\n  }\n}\nconst testableAccessors = {\n  Node: [\"childNodes\", \"parentNode\", \"parentElement\", \"textContent\"],\n  ShadowRoot: [\"host\", \"styleSheets\"],\n  Element: [\"shadowRoot\", \"querySelector\", \"querySelectorAll\"],\n  MutationObserver: []\n};\nconst testableMethods = {\n  Node: [\"contains\", \"getRootNode\"],\n  ShadowRoot: [\"getSelection\"],\n  Element: [],\n  MutationObserver: [\"constructor\"]\n};\nconst untaintedBasePrototype = {};\nfunction angularZoneUnpatchedAlternative(key) {\n  var _a2, _b;\n  const angularUnpatchedVersionSymbol = (_b = (_a2 = globalThis == null ? void 0 : globalThis.Zone) == null ? void 0 : _a2.__symbol__) == null ? void 0 : _b.call(_a2, key);\n  if (angularUnpatchedVersionSymbol && globalThis[angularUnpatchedVersionSymbol]) {\n    return globalThis[angularUnpatchedVersionSymbol];\n  } else {\n    return void 0;\n  }\n}\nfunction getUntaintedPrototype(key) {\n  if (untaintedBasePrototype[key])\n    return untaintedBasePrototype[key];\n  const candidate = angularZoneUnpatchedAlternative(key) || globalThis[key];\n  const defaultPrototype = candidate.prototype;\n  const accessorNames = key in testableAccessors ? testableAccessors[key] : void 0;\n  const isUntaintedAccessors = Boolean(\n    accessorNames && // @ts-expect-error 2345\n    accessorNames.every(\n      (accessor) => {\n        var _a2, _b;\n        return Boolean(\n          (_b = (_a2 = Object.getOwnPropertyDescriptor(defaultPrototype, accessor)) == null ? void 0 : _a2.get) == null ? void 0 : _b.toString().includes(\"[native code]\")\n        );\n      }\n    )\n  );\n  const methodNames = key in testableMethods ? testableMethods[key] : void 0;\n  const isUntaintedMethods = Boolean(\n    methodNames && methodNames.every(\n      // @ts-expect-error 2345\n      (method) => {\n        var _a2;\n        return typeof defaultPrototype[method] === \"function\" && ((_a2 = defaultPrototype[method]) == null ? void 0 : _a2.toString().includes(\"[native code]\"));\n      }\n    )\n  );\n  if (isUntaintedAccessors && isUntaintedMethods) {\n    untaintedBasePrototype[key] = candidate.prototype;\n    return candidate.prototype;\n  }\n  try {\n    const iframeEl = document.createElement(\"iframe\");\n    document.body.appendChild(iframeEl);\n    const win = iframeEl.contentWindow;\n    if (!win) return candidate.prototype;\n    const untaintedObject = win[key].prototype;\n    document.body.removeChild(iframeEl);\n    if (!untaintedObject) return defaultPrototype;\n    return untaintedBasePrototype[key] = untaintedObject;\n  } catch {\n    return defaultPrototype;\n  }\n}\nconst untaintedAccessorCache = {};\nfunction getUntaintedAccessor(key, instance, accessor) {\n  var _a2;\n  const cacheKey = `${key}.${String(accessor)}`;\n  if (untaintedAccessorCache[cacheKey])\n    return untaintedAccessorCache[cacheKey].call(\n      instance\n    );\n  const untaintedPrototype = getUntaintedPrototype(key);\n  const untaintedAccessor = (_a2 = Object.getOwnPropertyDescriptor(\n    untaintedPrototype,\n    accessor\n  )) == null ? void 0 : _a2.get;\n  if (!untaintedAccessor) return instance[accessor];\n  untaintedAccessorCache[cacheKey] = untaintedAccessor;\n  return untaintedAccessor.call(instance);\n}\nconst untaintedMethodCache = {};\nfunction getUntaintedMethod(key, instance, method) {\n  const cacheKey = `${key}.${String(method)}`;\n  if (untaintedMethodCache[cacheKey])\n    return untaintedMethodCache[cacheKey].bind(\n      instance\n    );\n  const untaintedPrototype = getUntaintedPrototype(key);\n  const untaintedMethod = untaintedPrototype[method];\n  if (typeof untaintedMethod !== \"function\") return instance[method];\n  untaintedMethodCache[cacheKey] = untaintedMethod;\n  return untaintedMethod.bind(instance);\n}\nfunction childNodes(n2) {\n  return getUntaintedAccessor(\"Node\", n2, \"childNodes\");\n}\nfunction parentNode(n2) {\n  return getUntaintedAccessor(\"Node\", n2, \"parentNode\");\n}\nfunction parentElement(n2) {\n  return getUntaintedAccessor(\"Node\", n2, \"parentElement\");\n}\nfunction textContent(n2) {\n  return getUntaintedAccessor(\"Node\", n2, \"textContent\");\n}\nfunction contains(n2, other) {\n  return getUntaintedMethod(\"Node\", n2, \"contains\")(other);\n}\nfunction getRootNode(n2) {\n  return getUntaintedMethod(\"Node\", n2, \"getRootNode\")();\n}\nfunction host(n2) {\n  if (!n2 || !(\"host\" in n2)) return null;\n  return getUntaintedAccessor(\"ShadowRoot\", n2, \"host\");\n}\nfunction styleSheets(n2) {\n  return n2.styleSheets;\n}\nfunction shadowRoot(n2) {\n  if (!n2 || !(\"shadowRoot\" in n2)) return null;\n  return getUntaintedAccessor(\"Element\", n2, \"shadowRoot\");\n}\nfunction querySelector(n2, selectors) {\n  return getUntaintedAccessor(\"Element\", n2, \"querySelector\")(selectors);\n}\nfunction querySelectorAll(n2, selectors) {\n  return getUntaintedAccessor(\"Element\", n2, \"querySelectorAll\")(selectors);\n}\nfunction mutationObserverCtor() {\n  return getUntaintedPrototype(\"MutationObserver\").constructor;\n}\nfunction patch(source, name, replacement) {\n  try {\n    if (!(name in source)) {\n      return () => {\n      };\n    }\n    const original = source[name];\n    const wrapped = replacement(original);\n    if (typeof wrapped === \"function\") {\n      wrapped.prototype = wrapped.prototype || {};\n      Object.defineProperties(wrapped, {\n        __rrweb_original__: {\n          enumerable: false,\n          value: original\n        }\n      });\n    }\n    source[name] = wrapped;\n    return () => {\n      source[name] = original;\n    };\n  } catch {\n    return () => {\n    };\n  }\n}\nconst index = {\n  childNodes,\n  parentNode,\n  parentElement,\n  textContent,\n  contains,\n  getRootNode,\n  host,\n  styleSheets,\n  shadowRoot,\n  querySelector,\n  querySelectorAll,\n  mutationObserver: mutationObserverCtor,\n  patch\n};\nfunction on(type, fn, target = document) {\n  const options = { capture: true, passive: true };\n  target.addEventListener(type, fn, options);\n  return () => target.removeEventListener(type, fn, options);\n}\nconst DEPARTED_MIRROR_ACCESS_WARNING = \"Please stop import mirror directly. Instead of that,\\r\\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\\r\\nor you can use record.mirror to access the mirror instance during recording.\";\nlet _mirror = {\n  map: {},\n  getId() {\n    console.error(DEPARTED_MIRROR_ACCESS_WARNING);\n    return -1;\n  },\n  getNode() {\n    console.error(DEPARTED_MIRROR_ACCESS_WARNING);\n    return null;\n  },\n  removeNodeFromMap() {\n    console.error(DEPARTED_MIRROR_ACCESS_WARNING);\n  },\n  has() {\n    console.error(DEPARTED_MIRROR_ACCESS_WARNING);\n    return false;\n  },\n  reset() {\n    console.error(DEPARTED_MIRROR_ACCESS_WARNING);\n  }\n};\nif (typeof window !== \"undefined\" && window.Proxy && window.Reflect) {\n  _mirror = new Proxy(_mirror, {\n    get(target, prop, receiver) {\n      if (prop === \"map\") {\n        console.error(DEPARTED_MIRROR_ACCESS_WARNING);\n      }\n      return Reflect.get(target, prop, receiver);\n    }\n  });\n}\nfunction throttle(func, wait, options = {}) {\n  let timeout = null;\n  let previous = 0;\n  return function(...args) {\n    const now = Date.now();\n    if (!previous && options.leading === false) {\n      previous = now;\n    }\n    const remaining = wait - (now - previous);\n    const context = this;\n    if (remaining <= 0 || remaining > wait) {\n      if (timeout) {\n        clearTimeout(timeout);\n        timeout = null;\n      }\n      previous = now;\n      func.apply(context, args);\n    } else if (!timeout && options.trailing !== false) {\n      timeout = setTimeout(() => {\n        previous = options.leading === false ? 0 : Date.now();\n        timeout = null;\n        func.apply(context, args);\n      }, remaining);\n    }\n  };\n}\nfunction hookSetter(target, key, d, isRevoked, win = window) {\n  const original = win.Object.getOwnPropertyDescriptor(target, key);\n  win.Object.defineProperty(\n    target,\n    key,\n    isRevoked ? d : {\n      set(value) {\n        setTimeout(() => {\n          d.set.call(this, value);\n        }, 0);\n        if (original && original.set) {\n          original.set.call(this, value);\n        }\n      }\n    }\n  );\n  return () => hookSetter(target, key, original || {}, true);\n}\nlet nowTimestamp = Date.now;\nif (!/* @__PURE__ */ /[1-9][0-9]{12}/.test(Date.now().toString())) {\n  nowTimestamp = () => (/* @__PURE__ */ new Date()).getTime();\n}\nfunction getWindowScroll(win) {\n  var _a2, _b, _c, _d;\n  const doc = win.document;\n  return {\n    left: doc.scrollingElement ? doc.scrollingElement.scrollLeft : win.pageXOffset !== void 0 ? win.pageXOffset : doc.documentElement.scrollLeft || (doc == null ? void 0 : doc.body) && ((_a2 = index.parentElement(doc.body)) == null ? void 0 : _a2.scrollLeft) || ((_b = doc == null ? void 0 : doc.body) == null ? void 0 : _b.scrollLeft) || 0,\n    top: doc.scrollingElement ? doc.scrollingElement.scrollTop : win.pageYOffset !== void 0 ? win.pageYOffset : (doc == null ? void 0 : doc.documentElement.scrollTop) || (doc == null ? void 0 : doc.body) && ((_c = index.parentElement(doc.body)) == null ? void 0 : _c.scrollTop) || ((_d = doc == null ? void 0 : doc.body) == null ? void 0 : _d.scrollTop) || 0\n  };\n}\nfunction getWindowHeight() {\n  return window.innerHeight || document.documentElement && document.documentElement.clientHeight || document.body && document.body.clientHeight;\n}\nfunction getWindowWidth() {\n  return window.innerWidth || document.documentElement && document.documentElement.clientWidth || document.body && document.body.clientWidth;\n}\nfunction closestElementOfNode(node2) {\n  if (!node2) {\n    return null;\n  }\n  const el = node2.nodeType === node2.ELEMENT_NODE ? node2 : index.parentElement(node2);\n  return el;\n}\nfunction isBlocked(node2, blockClass, blockSelector, checkAncestors) {\n  if (!node2) {\n    return false;\n  }\n  const el = closestElementOfNode(node2);\n  if (!el) {\n    return false;\n  }\n  try {\n    if (typeof blockClass === \"string\") {\n      if (el.classList.contains(blockClass)) return true;\n      if (checkAncestors && el.closest(\".\" + blockClass) !== null) return true;\n    } else {\n      if (classMatchesRegex(el, blockClass, checkAncestors)) return true;\n    }\n  } catch (e2) {\n  }\n  if (blockSelector) {\n    if (el.matches(blockSelector)) return true;\n    if (checkAncestors && el.closest(blockSelector) !== null) return true;\n  }\n  return false;\n}\nfunction isSerialized(n2, mirror2) {\n  return mirror2.getId(n2) !== -1;\n}\nfunction isIgnored(n2, mirror2, slimDOMOptions) {\n  if (n2.tagName === \"TITLE\" && slimDOMOptions.headTitleMutations) {\n    return true;\n  }\n  return mirror2.getId(n2) === IGNORED_NODE;\n}\nfunction isAncestorRemoved(target, mirror2) {\n  if (isShadowRoot(target)) {\n    return false;\n  }\n  const id = mirror2.getId(target);\n  if (!mirror2.has(id)) {\n    return true;\n  }\n  const parent = index.parentNode(target);\n  if (parent && parent.nodeType === target.DOCUMENT_NODE) {\n    return false;\n  }\n  if (!parent) {\n    return true;\n  }\n  return isAncestorRemoved(parent, mirror2);\n}\nfunction legacy_isTouchEvent(event) {\n  return Boolean(event.changedTouches);\n}\nfunction polyfill$1(win = window) {\n  if (\"NodeList\" in win && !win.NodeList.prototype.forEach) {\n    win.NodeList.prototype.forEach = Array.prototype.forEach;\n  }\n  if (\"DOMTokenList\" in win && !win.DOMTokenList.prototype.forEach) {\n    win.DOMTokenList.prototype.forEach = Array.prototype.forEach;\n  }\n}\nfunction isSerializedIframe(n2, mirror2) {\n  return Boolean(n2.nodeName === \"IFRAME\" && mirror2.getMeta(n2));\n}\nfunction isSerializedStylesheet(n2, mirror2) {\n  return Boolean(\n    n2.nodeName === \"LINK\" && n2.nodeType === n2.ELEMENT_NODE && n2.getAttribute && n2.getAttribute(\"rel\") === \"stylesheet\" && mirror2.getMeta(n2)\n  );\n}\nfunction hasShadowRoot(n2) {\n  if (!n2) return false;\n  if (n2 instanceof BaseRRNode && \"shadowRoot\" in n2) {\n    return Boolean(n2.shadowRoot);\n  }\n  return Boolean(index.shadowRoot(n2));\n}\nclass StyleSheetMirror {\n  constructor() {\n    __publicField(this, \"id\", 1);\n    __publicField(this, \"styleIDMap\", /* @__PURE__ */ new WeakMap());\n    __publicField(this, \"idStyleMap\", /* @__PURE__ */ new Map());\n  }\n  getId(stylesheet) {\n    return this.styleIDMap.get(stylesheet) ?? -1;\n  }\n  has(stylesheet) {\n    return this.styleIDMap.has(stylesheet);\n  }\n  /**\n   * @returns If the stylesheet is in the mirror, returns the id of the stylesheet. If not, return the new assigned id.\n   */\n  add(stylesheet, id) {\n    if (this.has(stylesheet)) return this.getId(stylesheet);\n    let newId;\n    if (id === void 0) {\n      newId = this.id++;\n    } else newId = id;\n    this.styleIDMap.set(stylesheet, newId);\n    this.idStyleMap.set(newId, stylesheet);\n    return newId;\n  }\n  getStyle(id) {\n    return this.idStyleMap.get(id) || null;\n  }\n  reset() {\n    this.styleIDMap = /* @__PURE__ */ new WeakMap();\n    this.idStyleMap = /* @__PURE__ */ new Map();\n    this.id = 1;\n  }\n  generateId() {\n    return this.id++;\n  }\n}\nfunction getShadowHost(n2) {\n  var _a2;\n  let shadowHost = null;\n  if (\"getRootNode\" in n2 && ((_a2 = index.getRootNode(n2)) == null ? void 0 : _a2.nodeType) === Node.DOCUMENT_FRAGMENT_NODE && index.host(index.getRootNode(n2)))\n    shadowHost = index.host(index.getRootNode(n2));\n  return shadowHost;\n}\nfunction getRootShadowHost(n2) {\n  let rootShadowHost = n2;\n  let shadowHost;\n  while (shadowHost = getShadowHost(rootShadowHost))\n    rootShadowHost = shadowHost;\n  return rootShadowHost;\n}\nfunction shadowHostInDom(n2) {\n  const doc = n2.ownerDocument;\n  if (!doc) return false;\n  const shadowHost = getRootShadowHost(n2);\n  return index.contains(doc, shadowHost);\n}\nfunction inDom(n2) {\n  const doc = n2.ownerDocument;\n  if (!doc) return false;\n  return index.contains(doc, n2) || shadowHostInDom(n2);\n}\nvar EventType = /* @__PURE__ */ ((EventType2) => {\n  EventType2[EventType2[\"DomContentLoaded\"] = 0] = \"DomContentLoaded\";\n  EventType2[EventType2[\"Load\"] = 1] = \"Load\";\n  EventType2[EventType2[\"FullSnapshot\"] = 2] = \"FullSnapshot\";\n  EventType2[EventType2[\"IncrementalSnapshot\"] = 3] = \"IncrementalSnapshot\";\n  EventType2[EventType2[\"Meta\"] = 4] = \"Meta\";\n  EventType2[EventType2[\"Custom\"] = 5] = \"Custom\";\n  EventType2[EventType2[\"Plugin\"] = 6] = \"Plugin\";\n  return EventType2;\n})(EventType || {});\nvar IncrementalSource = /* @__PURE__ */ ((IncrementalSource2) => {\n  IncrementalSource2[IncrementalSource2[\"Mutation\"] = 0] = \"Mutation\";\n  IncrementalSource2[IncrementalSource2[\"MouseMove\"] = 1] = \"MouseMove\";\n  IncrementalSource2[IncrementalSource2[\"MouseInteraction\"] = 2] = \"MouseInteraction\";\n  IncrementalSource2[IncrementalSource2[\"Scroll\"] = 3] = \"Scroll\";\n  IncrementalSource2[IncrementalSource2[\"ViewportResize\"] = 4] = \"ViewportResize\";\n  IncrementalSource2[IncrementalSource2[\"Input\"] = 5] = \"Input\";\n  IncrementalSource2[IncrementalSource2[\"TouchMove\"] = 6] = \"TouchMove\";\n  IncrementalSource2[IncrementalSource2[\"MediaInteraction\"] = 7] = \"MediaInteraction\";\n  IncrementalSource2[IncrementalSource2[\"StyleSheetRule\"] = 8] = \"StyleSheetRule\";\n  IncrementalSource2[IncrementalSource2[\"CanvasMutation\"] = 9] = \"CanvasMutation\";\n  IncrementalSource2[IncrementalSource2[\"Font\"] = 10] = \"Font\";\n  IncrementalSource2[IncrementalSource2[\"Log\"] = 11] = \"Log\";\n  IncrementalSource2[IncrementalSource2[\"Drag\"] = 12] = \"Drag\";\n  IncrementalSource2[IncrementalSource2[\"StyleDeclaration\"] = 13] = \"StyleDeclaration\";\n  IncrementalSource2[IncrementalSource2[\"Selection\"] = 14] = \"Selection\";\n  IncrementalSource2[IncrementalSource2[\"AdoptedStyleSheet\"] = 15] = \"AdoptedStyleSheet\";\n  IncrementalSource2[IncrementalSource2[\"CustomElement\"] = 16] = \"CustomElement\";\n  return IncrementalSource2;\n})(IncrementalSource || {});\nvar MouseInteractions = /* @__PURE__ */ ((MouseInteractions2) => {\n  MouseInteractions2[MouseInteractions2[\"MouseUp\"] = 0] = \"MouseUp\";\n  MouseInteractions2[MouseInteractions2[\"MouseDown\"] = 1] = \"MouseDown\";\n  MouseInteractions2[MouseInteractions2[\"Click\"] = 2] = \"Click\";\n  MouseInteractions2[MouseInteractions2[\"ContextMenu\"] = 3] = \"ContextMenu\";\n  MouseInteractions2[MouseInteractions2[\"DblClick\"] = 4] = \"DblClick\";\n  MouseInteractions2[MouseInteractions2[\"Focus\"] = 5] = \"Focus\";\n  MouseInteractions2[MouseInteractions2[\"Blur\"] = 6] = \"Blur\";\n  MouseInteractions2[MouseInteractions2[\"TouchStart\"] = 7] = \"TouchStart\";\n  MouseInteractions2[MouseInteractions2[\"TouchMove_Departed\"] = 8] = \"TouchMove_Departed\";\n  MouseInteractions2[MouseInteractions2[\"TouchEnd\"] = 9] = \"TouchEnd\";\n  MouseInteractions2[MouseInteractions2[\"TouchCancel\"] = 10] = \"TouchCancel\";\n  return MouseInteractions2;\n})(MouseInteractions || {});\nvar PointerTypes = /* @__PURE__ */ ((PointerTypes2) => {\n  PointerTypes2[PointerTypes2[\"Mouse\"] = 0] = \"Mouse\";\n  PointerTypes2[PointerTypes2[\"Pen\"] = 1] = \"Pen\";\n  PointerTypes2[PointerTypes2[\"Touch\"] = 2] = \"Touch\";\n  return PointerTypes2;\n})(PointerTypes || {});\nvar CanvasContext = /* @__PURE__ */ ((CanvasContext2) => {\n  CanvasContext2[CanvasContext2[\"2D\"] = 0] = \"2D\";\n  CanvasContext2[CanvasContext2[\"WebGL\"] = 1] = \"WebGL\";\n  CanvasContext2[CanvasContext2[\"WebGL2\"] = 2] = \"WebGL2\";\n  return CanvasContext2;\n})(CanvasContext || {});\nvar MediaInteractions = /* @__PURE__ */ ((MediaInteractions2) => {\n  MediaInteractions2[MediaInteractions2[\"Play\"] = 0] = \"Play\";\n  MediaInteractions2[MediaInteractions2[\"Pause\"] = 1] = \"Pause\";\n  MediaInteractions2[MediaInteractions2[\"Seeked\"] = 2] = \"Seeked\";\n  MediaInteractions2[MediaInteractions2[\"VolumeChange\"] = 3] = \"VolumeChange\";\n  MediaInteractions2[MediaInteractions2[\"RateChange\"] = 4] = \"RateChange\";\n  return MediaInteractions2;\n})(MediaInteractions || {});\nvar NodeType = /* @__PURE__ */ ((NodeType2) => {\n  NodeType2[NodeType2[\"Document\"] = 0] = \"Document\";\n  NodeType2[NodeType2[\"DocumentType\"] = 1] = \"DocumentType\";\n  NodeType2[NodeType2[\"Element\"] = 2] = \"Element\";\n  NodeType2[NodeType2[\"Text\"] = 3] = \"Text\";\n  NodeType2[NodeType2[\"CDATA\"] = 4] = \"CDATA\";\n  NodeType2[NodeType2[\"Comment\"] = 5] = \"Comment\";\n  return NodeType2;\n})(NodeType || {});\nfunction isNodeInLinkedList(n2) {\n  return \"__ln\" in n2;\n}\nclass DoubleLinkedList {\n  constructor() {\n    __publicField(this, \"length\", 0);\n    __publicField(this, \"head\", null);\n    __publicField(this, \"tail\", null);\n  }\n  get(position) {\n    if (position >= this.length) {\n      throw new Error(\"Position outside of list range\");\n    }\n    let current = this.head;\n    for (let index2 = 0; index2 < position; index2++) {\n      current = (current == null ? void 0 : current.next) || null;\n    }\n    return current;\n  }\n  addNode(n2) {\n    const node2 = {\n      value: n2,\n      previous: null,\n      next: null\n    };\n    n2.__ln = node2;\n    if (n2.previousSibling && isNodeInLinkedList(n2.previousSibling)) {\n      const current = n2.previousSibling.__ln.next;\n      node2.next = current;\n      node2.previous = n2.previousSibling.__ln;\n      n2.previousSibling.__ln.next = node2;\n      if (current) {\n        current.previous = node2;\n      }\n    } else if (n2.nextSibling && isNodeInLinkedList(n2.nextSibling) && n2.nextSibling.__ln.previous) {\n      const current = n2.nextSibling.__ln.previous;\n      node2.previous = current;\n      node2.next = n2.nextSibling.__ln;\n      n2.nextSibling.__ln.previous = node2;\n      if (current) {\n        current.next = node2;\n      }\n    } else {\n      if (this.head) {\n        this.head.previous = node2;\n      }\n      node2.next = this.head;\n      this.head = node2;\n    }\n    if (node2.next === null) {\n      this.tail = node2;\n    }\n    this.length++;\n  }\n  removeNode(n2) {\n    const current = n2.__ln;\n    if (!this.head) {\n      return;\n    }\n    if (!current.previous) {\n      this.head = current.next;\n      if (this.head) {\n        this.head.previous = null;\n      } else {\n        this.tail = null;\n      }\n    } else {\n      current.previous.next = current.next;\n      if (current.next) {\n        current.next.previous = current.previous;\n      } else {\n        this.tail = current.previous;\n      }\n    }\n    if (n2.__ln) {\n      delete n2.__ln;\n    }\n    this.length--;\n  }\n}\nconst moveKey = (id, parentId) => `${id}@${parentId}`;\nclass MutationBuffer {\n  constructor() {\n    __publicField(this, \"frozen\", false);\n    __publicField(this, \"locked\", false);\n    __publicField(this, \"texts\", []);\n    __publicField(this, \"attributes\", []);\n    __publicField(this, \"attributeMap\", /* @__PURE__ */ new WeakMap());\n    __publicField(this, \"removes\", []);\n    __publicField(this, \"mapRemoves\", []);\n    __publicField(this, \"movedMap\", {});\n    __publicField(this, \"addedSet\", /* @__PURE__ */ new Set());\n    __publicField(this, \"movedSet\", /* @__PURE__ */ new Set());\n    __publicField(this, \"droppedSet\", /* @__PURE__ */ new Set());\n    __publicField(this, \"removesSubTreeCache\", /* @__PURE__ */ new Set());\n    __publicField(this, \"mutationCb\");\n    __publicField(this, \"blockClass\");\n    __publicField(this, \"blockSelector\");\n    __publicField(this, \"maskTextClass\");\n    __publicField(this, \"maskTextSelector\");\n    __publicField(this, \"inlineStylesheet\");\n    __publicField(this, \"maskInputOptions\");\n    __publicField(this, \"maskTextFn\");\n    __publicField(this, \"maskInputFn\");\n    __publicField(this, \"keepIframeSrcFn\");\n    __publicField(this, \"recordCanvas\");\n    __publicField(this, \"inlineImages\");\n    __publicField(this, \"slimDOMOptions\");\n    __publicField(this, \"dataURLOptions\");\n    __publicField(this, \"doc\");\n    __publicField(this, \"mirror\");\n    __publicField(this, \"iframeManager\");\n    __publicField(this, \"stylesheetManager\");\n    __publicField(this, \"shadowDomManager\");\n    __publicField(this, \"canvasManager\");\n    __publicField(this, \"processedNodeManager\");\n    __publicField(this, \"unattachedDoc\");\n    __publicField(this, \"processMutations\", (mutations) => {\n      mutations.forEach(this.processMutation);\n      this.emit();\n    });\n    __publicField(this, \"emit\", () => {\n      if (this.frozen || this.locked) {\n        return;\n      }\n      const adds = [];\n      const addedIds = /* @__PURE__ */ new Set();\n      const addList = new DoubleLinkedList();\n      const getNextId = (n2) => {\n        let ns = n2;\n        let nextId = IGNORED_NODE;\n        while (nextId === IGNORED_NODE) {\n          ns = ns && ns.nextSibling;\n          nextId = ns && this.mirror.getId(ns);\n        }\n        return nextId;\n      };\n      const pushAdd = (n2) => {\n        const parent = index.parentNode(n2);\n        if (!parent || !inDom(n2) || parent.tagName === \"TEXTAREA\") {\n          return;\n        }\n        const parentId = isShadowRoot(parent) ? this.mirror.getId(getShadowHost(n2)) : this.mirror.getId(parent);\n        const nextId = getNextId(n2);\n        if (parentId === -1 || nextId === -1) {\n          return addList.addNode(n2);\n        }\n        const sn = serializeNodeWithId(n2, {\n          doc: this.doc,\n          mirror: this.mirror,\n          blockClass: this.blockClass,\n          blockSelector: this.blockSelector,\n          maskTextClass: this.maskTextClass,\n          maskTextSelector: this.maskTextSelector,\n          skipChild: true,\n          newlyAddedElement: true,\n          inlineStylesheet: this.inlineStylesheet,\n          maskInputOptions: this.maskInputOptions,\n          maskTextFn: this.maskTextFn,\n          maskInputFn: this.maskInputFn,\n          slimDOMOptions: this.slimDOMOptions,\n          dataURLOptions: this.dataURLOptions,\n          recordCanvas: this.recordCanvas,\n          inlineImages: this.inlineImages,\n          onSerialize: (currentN) => {\n            if (isSerializedIframe(currentN, this.mirror)) {\n              this.iframeManager.addIframe(currentN);\n            }\n            if (isSerializedStylesheet(currentN, this.mirror)) {\n              this.stylesheetManager.trackLinkElement(\n                currentN\n              );\n            }\n            if (hasShadowRoot(n2)) {\n              this.shadowDomManager.addShadowRoot(index.shadowRoot(n2), this.doc);\n            }\n          },\n          onIframeLoad: (iframe, childSn) => {\n            this.iframeManager.attachIframe(iframe, childSn);\n            this.shadowDomManager.observeAttachShadow(iframe);\n          },\n          onStylesheetLoad: (link, childSn) => {\n            this.stylesheetManager.attachLinkElement(link, childSn);\n          }\n        });\n        if (sn) {\n          adds.push({\n            parentId,\n            nextId,\n            node: sn\n          });\n          addedIds.add(sn.id);\n        }\n      };\n      while (this.mapRemoves.length) {\n        this.mirror.removeNodeFromMap(this.mapRemoves.shift());\n      }\n      for (const n2 of this.movedSet) {\n        if (isParentRemoved(this.removesSubTreeCache, n2, this.mirror) && !this.movedSet.has(index.parentNode(n2))) {\n          continue;\n        }\n        pushAdd(n2);\n      }\n      for (const n2 of this.addedSet) {\n        if (!isAncestorInSet(this.droppedSet, n2) && !isParentRemoved(this.removesSubTreeCache, n2, this.mirror)) {\n          pushAdd(n2);\n        } else if (isAncestorInSet(this.movedSet, n2)) {\n          pushAdd(n2);\n        } else {\n          this.droppedSet.add(n2);\n        }\n      }\n      let candidate = null;\n      while (addList.length) {\n        let node2 = null;\n        if (candidate) {\n          const parentId = this.mirror.getId(index.parentNode(candidate.value));\n          const nextId = getNextId(candidate.value);\n          if (parentId !== -1 && nextId !== -1) {\n            node2 = candidate;\n          }\n        }\n        if (!node2) {\n          let tailNode = addList.tail;\n          while (tailNode) {\n            const _node = tailNode;\n            tailNode = tailNode.previous;\n            if (_node) {\n              const parentId = this.mirror.getId(index.parentNode(_node.value));\n              const nextId = getNextId(_node.value);\n              if (nextId === -1) continue;\n              else if (parentId !== -1) {\n                node2 = _node;\n                break;\n              } else {\n                const unhandledNode = _node.value;\n                const parent = index.parentNode(unhandledNode);\n                if (parent && parent.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n                  const shadowHost = index.host(parent);\n                  const parentId2 = this.mirror.getId(shadowHost);\n                  if (parentId2 !== -1) {\n                    node2 = _node;\n                    break;\n                  }\n                }\n              }\n            }\n          }\n        }\n        if (!node2) {\n          while (addList.head) {\n            addList.removeNode(addList.head.value);\n          }\n          break;\n        }\n        candidate = node2.previous;\n        addList.removeNode(node2.value);\n        pushAdd(node2.value);\n      }\n      const payload = {\n        texts: this.texts.map((text) => {\n          const n2 = text.node;\n          const parent = index.parentNode(n2);\n          if (parent && parent.tagName === \"TEXTAREA\") {\n            this.genTextAreaValueMutation(parent);\n          }\n          return {\n            id: this.mirror.getId(n2),\n            value: text.value\n          };\n        }).filter((text) => !addedIds.has(text.id)).filter((text) => this.mirror.has(text.id)),\n        attributes: this.attributes.map((attribute) => {\n          const { attributes } = attribute;\n          if (typeof attributes.style === \"string\") {\n            const diffAsStr = JSON.stringify(attribute.styleDiff);\n            const unchangedAsStr = JSON.stringify(attribute._unchangedStyles);\n            if (diffAsStr.length < attributes.style.length) {\n              if ((diffAsStr + unchangedAsStr).split(\"var(\").length === attributes.style.split(\"var(\").length) {\n                attributes.style = attribute.styleDiff;\n              }\n            }\n          }\n          return {\n            id: this.mirror.getId(attribute.node),\n            attributes\n          };\n        }).filter((attribute) => !addedIds.has(attribute.id)).filter((attribute) => this.mirror.has(attribute.id)),\n        removes: this.removes,\n        adds\n      };\n      if (!payload.texts.length && !payload.attributes.length && !payload.removes.length && !payload.adds.length) {\n        return;\n      }\n      this.texts = [];\n      this.attributes = [];\n      this.attributeMap = /* @__PURE__ */ new WeakMap();\n      this.removes = [];\n      this.addedSet = /* @__PURE__ */ new Set();\n      this.movedSet = /* @__PURE__ */ new Set();\n      this.droppedSet = /* @__PURE__ */ new Set();\n      this.removesSubTreeCache = /* @__PURE__ */ new Set();\n      this.movedMap = {};\n      this.mutationCb(payload);\n    });\n    __publicField(this, \"genTextAreaValueMutation\", (textarea) => {\n      let item = this.attributeMap.get(textarea);\n      if (!item) {\n        item = {\n          node: textarea,\n          attributes: {},\n          styleDiff: {},\n          _unchangedStyles: {}\n        };\n        this.attributes.push(item);\n        this.attributeMap.set(textarea, item);\n      }\n      item.attributes.value = Array.from(\n        index.childNodes(textarea),\n        (cn) => index.textContent(cn) || \"\"\n      ).join(\"\");\n    });\n    __publicField(this, \"processMutation\", (m) => {\n      if (isIgnored(m.target, this.mirror, this.slimDOMOptions)) {\n        return;\n      }\n      switch (m.type) {\n        case \"characterData\": {\n          const value = index.textContent(m.target);\n          if (!isBlocked(m.target, this.blockClass, this.blockSelector, false) && value !== m.oldValue) {\n            this.texts.push({\n              value: needMaskingText(\n                m.target,\n                this.maskTextClass,\n                this.maskTextSelector,\n                true\n                // checkAncestors\n              ) && value ? this.maskTextFn ? this.maskTextFn(value, closestElementOfNode(m.target)) : value.replace(/[\\S]/g, \"*\") : value,\n              node: m.target\n            });\n          }\n          break;\n        }\n        case \"attributes\": {\n          const target = m.target;\n          let attributeName = m.attributeName;\n          let value = m.target.getAttribute(attributeName);\n          if (attributeName === \"value\") {\n            const type = getInputType(target);\n            value = maskInputValue({\n              element: target,\n              maskInputOptions: this.maskInputOptions,\n              tagName: target.tagName,\n              type,\n              value,\n              maskInputFn: this.maskInputFn\n            });\n          }\n          if (isBlocked(m.target, this.blockClass, this.blockSelector, false) || value === m.oldValue) {\n            return;\n          }\n          let item = this.attributeMap.get(m.target);\n          if (target.tagName === \"IFRAME\" && attributeName === \"src\" && !this.keepIframeSrcFn(value)) {\n            if (!target.contentDocument) {\n              attributeName = \"rr_src\";\n            } else {\n              return;\n            }\n          }\n          if (!item) {\n            item = {\n              node: m.target,\n              attributes: {},\n              styleDiff: {},\n              _unchangedStyles: {}\n            };\n            this.attributes.push(item);\n            this.attributeMap.set(m.target, item);\n          }\n          if (attributeName === \"type\" && target.tagName === \"INPUT\" && (m.oldValue || \"\").toLowerCase() === \"password\") {\n            target.setAttribute(\"data-rr-is-password\", \"true\");\n          }\n          if (!ignoreAttribute(target.tagName, attributeName)) {\n            item.attributes[attributeName] = transformAttribute(\n              this.doc,\n              toLowerCase(target.tagName),\n              toLowerCase(attributeName),\n              value,\n              target,\n              this.dataURLOptions\n            );\n            if (attributeName === \"style\") {\n              if (!this.unattachedDoc) {\n                try {\n                  this.unattachedDoc = document.implementation.createHTMLDocument();\n                } catch (e2) {\n                  this.unattachedDoc = this.doc;\n                }\n              }\n              const old = this.unattachedDoc.createElement(\"span\");\n              if (m.oldValue) {\n                old.setAttribute(\"style\", m.oldValue);\n              }\n              for (const pname of Array.from(target.style)) {\n                const newValue = target.style.getPropertyValue(pname);\n                const newPriority = target.style.getPropertyPriority(pname);\n                if (newValue !== old.style.getPropertyValue(pname) || newPriority !== old.style.getPropertyPriority(pname)) {\n                  if (newPriority === \"\") {\n                    item.styleDiff[pname] = newValue;\n                  } else {\n                    item.styleDiff[pname] = [newValue, newPriority];\n                  }\n                } else {\n                  item._unchangedStyles[pname] = [newValue, newPriority];\n                }\n              }\n              for (const pname of Array.from(old.style)) {\n                if (target.style.getPropertyValue(pname) === \"\") {\n                  item.styleDiff[pname] = false;\n                }\n              }\n            } else if (attributeName === \"open\" && target.tagName === \"DIALOG\") {\n              if (target.matches(\"dialog:modal\")) {\n                item.attributes[\"rr_open_mode\"] = \"modal\";\n              } else {\n                item.attributes[\"rr_open_mode\"] = \"non-modal\";\n              }\n            }\n          }\n          break;\n        }\n        case \"childList\": {\n          if (isBlocked(m.target, this.blockClass, this.blockSelector, true))\n            return;\n          if (m.target.tagName === \"TEXTAREA\") {\n            this.genTextAreaValueMutation(m.target);\n            return;\n          }\n          m.addedNodes.forEach((n2) => this.genAdds(n2, m.target));\n          m.removedNodes.forEach((n2) => {\n            const nodeId = this.mirror.getId(n2);\n            const parentId = isShadowRoot(m.target) ? this.mirror.getId(index.host(m.target)) : this.mirror.getId(m.target);\n            if (isBlocked(m.target, this.blockClass, this.blockSelector, false) || isIgnored(n2, this.mirror, this.slimDOMOptions) || !isSerialized(n2, this.mirror)) {\n              return;\n            }\n            if (this.addedSet.has(n2)) {\n              deepDelete(this.addedSet, n2);\n              this.droppedSet.add(n2);\n            } else if (this.addedSet.has(m.target) && nodeId === -1) ;\n            else if (isAncestorRemoved(m.target, this.mirror)) ;\n            else if (this.movedSet.has(n2) && this.movedMap[moveKey(nodeId, parentId)]) {\n              deepDelete(this.movedSet, n2);\n            } else {\n              this.removes.push({\n                parentId,\n                id: nodeId,\n                isShadow: isShadowRoot(m.target) && isNativeShadowDom(m.target) ? true : void 0\n              });\n              processRemoves(n2, this.removesSubTreeCache);\n            }\n            this.mapRemoves.push(n2);\n          });\n          break;\n        }\n      }\n    });\n    __publicField(this, \"genAdds\", (n2, target) => {\n      if (this.processedNodeManager.inOtherBuffer(n2, this)) return;\n      if (this.addedSet.has(n2) || this.movedSet.has(n2)) return;\n      if (this.mirror.hasNode(n2)) {\n        if (isIgnored(n2, this.mirror, this.slimDOMOptions)) {\n          return;\n        }\n        this.movedSet.add(n2);\n        let targetId = null;\n        if (target && this.mirror.hasNode(target)) {\n          targetId = this.mirror.getId(target);\n        }\n        if (targetId && targetId !== -1) {\n          this.movedMap[moveKey(this.mirror.getId(n2), targetId)] = true;\n        }\n      } else {\n        this.addedSet.add(n2);\n        this.droppedSet.delete(n2);\n      }\n      if (!isBlocked(n2, this.blockClass, this.blockSelector, false)) {\n        index.childNodes(n2).forEach((childN) => this.genAdds(childN));\n        if (hasShadowRoot(n2)) {\n          index.childNodes(index.shadowRoot(n2)).forEach((childN) => {\n            this.processedNodeManager.add(childN, this);\n            this.genAdds(childN, n2);\n          });\n        }\n      }\n    });\n  }\n  init(options) {\n    [\n      \"mutationCb\",\n      \"blockClass\",\n      \"blockSelector\",\n      \"maskTextClass\",\n      \"maskTextSelector\",\n      \"inlineStylesheet\",\n      \"maskInputOptions\",\n      \"maskTextFn\",\n      \"maskInputFn\",\n      \"keepIframeSrcFn\",\n      \"recordCanvas\",\n      \"inlineImages\",\n      \"slimDOMOptions\",\n      \"dataURLOptions\",\n      \"doc\",\n      \"mirror\",\n      \"iframeManager\",\n      \"stylesheetManager\",\n      \"shadowDomManager\",\n      \"canvasManager\",\n      \"processedNodeManager\"\n    ].forEach((key) => {\n      this[key] = options[key];\n    });\n  }\n  freeze() {\n    this.frozen = true;\n    this.canvasManager.freeze();\n  }\n  unfreeze() {\n    this.frozen = false;\n    this.canvasManager.unfreeze();\n    this.emit();\n  }\n  isFrozen() {\n    return this.frozen;\n  }\n  lock() {\n    this.locked = true;\n    this.canvasManager.lock();\n  }\n  unlock() {\n    this.locked = false;\n    this.canvasManager.unlock();\n    this.emit();\n  }\n  reset() {\n    this.shadowDomManager.reset();\n    this.canvasManager.reset();\n  }\n  destroy() {\n    while (this.mapRemoves.length) {\n      this.mirror.removeNodeFromMap(this.mapRemoves.shift());\n    }\n  }\n}\nfunction deepDelete(addsSet, n2) {\n  addsSet.delete(n2);\n  index.childNodes(n2).forEach((childN) => deepDelete(addsSet, childN));\n}\nfunction processRemoves(n2, cache) {\n  const queue = [n2];\n  while (queue.length) {\n    const next = queue.pop();\n    if (cache.has(next)) continue;\n    cache.add(next);\n    index.childNodes(next).forEach((n22) => queue.push(n22));\n  }\n  return;\n}\nfunction isParentRemoved(removes, n2, mirror2) {\n  if (removes.size === 0) return false;\n  return _isParentRemoved(removes, n2);\n}\nfunction _isParentRemoved(removes, n2, _mirror2) {\n  const node2 = index.parentNode(n2);\n  if (!node2) return false;\n  return removes.has(node2);\n}\nfunction isAncestorInSet(set, n2) {\n  if (set.size === 0) return false;\n  return _isAncestorInSet(set, n2);\n}\nfunction _isAncestorInSet(set, n2) {\n  const parent = index.parentNode(n2);\n  if (!parent) {\n    return false;\n  }\n  if (set.has(parent)) {\n    return true;\n  }\n  return _isAncestorInSet(set, parent);\n}\nlet errorHandler;\nfunction registerErrorHandler(handler) {\n  errorHandler = handler;\n}\nfunction unregisterErrorHandler() {\n  errorHandler = void 0;\n}\nconst callbackWrapper = (cb) => {\n  if (!errorHandler) {\n    return cb;\n  }\n  const rrwebWrapped = ((...rest) => {\n    try {\n      return cb(...rest);\n    } catch (error) {\n      if (errorHandler && errorHandler(error) === true) {\n        return;\n      }\n      throw error;\n    }\n  });\n  return rrwebWrapped;\n};\nconst mutationBuffers = [];\nfunction getEventTarget(event) {\n  try {\n    if (\"composedPath\" in event) {\n      const path = event.composedPath();\n      if (path.length) {\n        return path[0];\n      }\n    } else if (\"path\" in event && event.path.length) {\n      return event.path[0];\n    }\n  } catch {\n  }\n  return event && event.target;\n}\nfunction initMutationObserver(options, rootEl) {\n  const mutationBuffer = new MutationBuffer();\n  mutationBuffers.push(mutationBuffer);\n  mutationBuffer.init(options);\n  const observer = new (mutationObserverCtor())(\n    callbackWrapper(mutationBuffer.processMutations.bind(mutationBuffer))\n  );\n  observer.observe(rootEl, {\n    attributes: true,\n    attributeOldValue: true,\n    characterData: true,\n    characterDataOldValue: true,\n    childList: true,\n    subtree: true\n  });\n  return observer;\n}\nfunction initMoveObserver({\n  mousemoveCb,\n  sampling,\n  doc,\n  mirror: mirror2\n}) {\n  if (sampling.mousemove === false) {\n    return () => {\n    };\n  }\n  const threshold = typeof sampling.mousemove === \"number\" ? sampling.mousemove : 50;\n  const callbackThreshold = typeof sampling.mousemoveCallback === \"number\" ? sampling.mousemoveCallback : 500;\n  let positions = [];\n  let timeBaseline;\n  const wrappedCb = throttle(\n    callbackWrapper(\n      (source) => {\n        const totalOffset = Date.now() - timeBaseline;\n        mousemoveCb(\n          positions.map((p) => {\n            p.timeOffset -= totalOffset;\n            return p;\n          }),\n          source\n        );\n        positions = [];\n        timeBaseline = null;\n      }\n    ),\n    callbackThreshold\n  );\n  const updatePosition = callbackWrapper(\n    throttle(\n      callbackWrapper((evt) => {\n        const target = getEventTarget(evt);\n        const { clientX, clientY } = legacy_isTouchEvent(evt) ? evt.changedTouches[0] : evt;\n        if (!timeBaseline) {\n          timeBaseline = nowTimestamp();\n        }\n        positions.push({\n          x: clientX,\n          y: clientY,\n          id: mirror2.getId(target),\n          timeOffset: nowTimestamp() - timeBaseline\n        });\n        wrappedCb(\n          typeof DragEvent !== \"undefined\" && evt instanceof DragEvent ? IncrementalSource.Drag : evt instanceof MouseEvent ? IncrementalSource.MouseMove : IncrementalSource.TouchMove\n        );\n      }),\n      threshold,\n      {\n        trailing: false\n      }\n    )\n  );\n  const handlers = [\n    on(\"mousemove\", updatePosition, doc),\n    on(\"touchmove\", updatePosition, doc),\n    on(\"drag\", updatePosition, doc)\n  ];\n  return callbackWrapper(() => {\n    handlers.forEach((h) => h());\n  });\n}\nfunction initMouseInteractionObserver({\n  mouseInteractionCb,\n  doc,\n  mirror: mirror2,\n  blockClass,\n  blockSelector,\n  sampling\n}) {\n  if (sampling.mouseInteraction === false) {\n    return () => {\n    };\n  }\n  const disableMap = sampling.mouseInteraction === true || sampling.mouseInteraction === void 0 ? {} : sampling.mouseInteraction;\n  const handlers = [];\n  let currentPointerType = null;\n  const getHandler = (eventKey) => {\n    return (event) => {\n      const target = getEventTarget(event);\n      if (isBlocked(target, blockClass, blockSelector, true)) {\n        return;\n      }\n      let pointerType = null;\n      let thisEventKey = eventKey;\n      if (\"pointerType\" in event) {\n        switch (event.pointerType) {\n          case \"mouse\":\n            pointerType = PointerTypes.Mouse;\n            break;\n          case \"touch\":\n            pointerType = PointerTypes.Touch;\n            break;\n          case \"pen\":\n            pointerType = PointerTypes.Pen;\n            break;\n        }\n        if (pointerType === PointerTypes.Touch) {\n          if (MouseInteractions[eventKey] === MouseInteractions.MouseDown) {\n            thisEventKey = \"TouchStart\";\n          } else if (MouseInteractions[eventKey] === MouseInteractions.MouseUp) {\n            thisEventKey = \"TouchEnd\";\n          }\n        } else if (pointerType === PointerTypes.Pen) ;\n      } else if (legacy_isTouchEvent(event)) {\n        pointerType = PointerTypes.Touch;\n      }\n      if (pointerType !== null) {\n        currentPointerType = pointerType;\n        if (thisEventKey.startsWith(\"Touch\") && pointerType === PointerTypes.Touch || thisEventKey.startsWith(\"Mouse\") && pointerType === PointerTypes.Mouse) {\n          pointerType = null;\n        }\n      } else if (MouseInteractions[eventKey] === MouseInteractions.Click) {\n        pointerType = currentPointerType;\n        currentPointerType = null;\n      }\n      const e2 = legacy_isTouchEvent(event) ? event.changedTouches[0] : event;\n      if (!e2) {\n        return;\n      }\n      const id = mirror2.getId(target);\n      const { clientX, clientY } = e2;\n      callbackWrapper(mouseInteractionCb)({\n        type: MouseInteractions[thisEventKey],\n        id,\n        x: clientX,\n        y: clientY,\n        ...pointerType !== null && { pointerType }\n      });\n    };\n  };\n  Object.keys(MouseInteractions).filter(\n    (key) => Number.isNaN(Number(key)) && !key.endsWith(\"_Departed\") && disableMap[key] !== false\n  ).forEach((eventKey) => {\n    let eventName = toLowerCase(eventKey);\n    const handler = getHandler(eventKey);\n    if (window.PointerEvent) {\n      switch (MouseInteractions[eventKey]) {\n        case MouseInteractions.MouseDown:\n        case MouseInteractions.MouseUp:\n          eventName = eventName.replace(\n            \"mouse\",\n            \"pointer\"\n          );\n          break;\n        case MouseInteractions.TouchStart:\n        case MouseInteractions.TouchEnd:\n          return;\n      }\n    }\n    handlers.push(on(eventName, handler, doc));\n  });\n  return callbackWrapper(() => {\n    handlers.forEach((h) => h());\n  });\n}\nfunction initScrollObserver({\n  scrollCb,\n  doc,\n  mirror: mirror2,\n  blockClass,\n  blockSelector,\n  sampling\n}) {\n  const updatePosition = callbackWrapper(\n    throttle(\n      callbackWrapper((evt) => {\n        const target = getEventTarget(evt);\n        if (!target || isBlocked(target, blockClass, blockSelector, true)) {\n          return;\n        }\n        const id = mirror2.getId(target);\n        if (target === doc && doc.defaultView) {\n          const scrollLeftTop = getWindowScroll(doc.defaultView);\n          scrollCb({\n            id,\n            x: scrollLeftTop.left,\n            y: scrollLeftTop.top\n          });\n        } else {\n          scrollCb({\n            id,\n            x: target.scrollLeft,\n            y: target.scrollTop\n          });\n        }\n      }),\n      sampling.scroll || 100\n    )\n  );\n  return on(\"scroll\", updatePosition, doc);\n}\nfunction initViewportResizeObserver({ viewportResizeCb }, { win }) {\n  let lastH = -1;\n  let lastW = -1;\n  const updateDimension = callbackWrapper(\n    throttle(\n      callbackWrapper(() => {\n        const height = getWindowHeight();\n        const width = getWindowWidth();\n        if (lastH !== height || lastW !== width) {\n          viewportResizeCb({\n            width: Number(width),\n            height: Number(height)\n          });\n          lastH = height;\n          lastW = width;\n        }\n      }),\n      200\n    )\n  );\n  return on(\"resize\", updateDimension, win);\n}\nconst INPUT_TAGS = [\"INPUT\", \"TEXTAREA\", \"SELECT\"];\nconst lastInputValueMap = /* @__PURE__ */ new WeakMap();\nfunction initInputObserver({\n  inputCb,\n  doc,\n  mirror: mirror2,\n  blockClass,\n  blockSelector,\n  ignoreClass,\n  ignoreSelector,\n  maskInputOptions,\n  maskInputFn,\n  sampling,\n  userTriggeredOnInput\n}) {\n  function eventHandler(event) {\n    let target = getEventTarget(event);\n    const userTriggered = event.isTrusted;\n    const tagName = target && target.tagName;\n    if (target && tagName === \"OPTION\") {\n      target = index.parentElement(target);\n    }\n    if (!target || !tagName || INPUT_TAGS.indexOf(tagName) < 0 || isBlocked(target, blockClass, blockSelector, true)) {\n      return;\n    }\n    if (target.classList.contains(ignoreClass) || ignoreSelector && target.matches(ignoreSelector)) {\n      return;\n    }\n    let text = target.value;\n    let isChecked = false;\n    const type = getInputType(target) || \"\";\n    if (type === \"radio\" || type === \"checkbox\") {\n      isChecked = target.checked;\n    } else if (maskInputOptions[tagName.toLowerCase()] || maskInputOptions[type]) {\n      text = maskInputValue({\n        element: target,\n        maskInputOptions,\n        tagName,\n        type,\n        value: text,\n        maskInputFn\n      });\n    }\n    cbWithDedup(\n      target,\n      userTriggeredOnInput ? { text, isChecked, userTriggered } : { text, isChecked }\n    );\n    const name = target.name;\n    if (type === \"radio\" && name && isChecked) {\n      doc.querySelectorAll(`input[type=\"radio\"][name=\"${name}\"]`).forEach((el) => {\n        if (el !== target) {\n          const text2 = el.value;\n          cbWithDedup(\n            el,\n            userTriggeredOnInput ? { text: text2, isChecked: !isChecked, userTriggered: false } : { text: text2, isChecked: !isChecked }\n          );\n        }\n      });\n    }\n  }\n  function cbWithDedup(target, v2) {\n    const lastInputValue = lastInputValueMap.get(target);\n    if (!lastInputValue || lastInputValue.text !== v2.text || lastInputValue.isChecked !== v2.isChecked) {\n      lastInputValueMap.set(target, v2);\n      const id = mirror2.getId(target);\n      callbackWrapper(inputCb)({\n        ...v2,\n        id\n      });\n    }\n  }\n  const events = sampling.input === \"last\" ? [\"change\"] : [\"input\", \"change\"];\n  const handlers = events.map(\n    (eventName) => on(eventName, callbackWrapper(eventHandler), doc)\n  );\n  const currentWindow = doc.defaultView;\n  if (!currentWindow) {\n    return () => {\n      handlers.forEach((h) => h());\n    };\n  }\n  const propertyDescriptor = currentWindow.Object.getOwnPropertyDescriptor(\n    currentWindow.HTMLInputElement.prototype,\n    \"value\"\n  );\n  const hookProperties = [\n    [currentWindow.HTMLInputElement.prototype, \"value\"],\n    [currentWindow.HTMLInputElement.prototype, \"checked\"],\n    [currentWindow.HTMLSelectElement.prototype, \"value\"],\n    [currentWindow.HTMLTextAreaElement.prototype, \"value\"],\n    // Some UI library use selectedIndex to set select value\n    [currentWindow.HTMLSelectElement.prototype, \"selectedIndex\"],\n    [currentWindow.HTMLOptionElement.prototype, \"selected\"]\n  ];\n  if (propertyDescriptor && propertyDescriptor.set) {\n    handlers.push(\n      ...hookProperties.map(\n        (p) => hookSetter(\n          p[0],\n          p[1],\n          {\n            set() {\n              callbackWrapper(eventHandler)({\n                target: this,\n                isTrusted: false\n                // userTriggered to false as this could well be programmatic\n              });\n            }\n          },\n          false,\n          currentWindow\n        )\n      )\n    );\n  }\n  return callbackWrapper(() => {\n    handlers.forEach((h) => h());\n  });\n}\nfunction getNestedCSSRulePositions(rule2) {\n  const positions = [];\n  function recurse(childRule, pos) {\n    if (hasNestedCSSRule(\"CSSGroupingRule\") && childRule.parentRule instanceof CSSGroupingRule || hasNestedCSSRule(\"CSSMediaRule\") && childRule.parentRule instanceof CSSMediaRule || hasNestedCSSRule(\"CSSSupportsRule\") && childRule.parentRule instanceof CSSSupportsRule || hasNestedCSSRule(\"CSSConditionRule\") && childRule.parentRule instanceof CSSConditionRule) {\n      const rules2 = Array.from(\n        childRule.parentRule.cssRules\n      );\n      const index2 = rules2.indexOf(childRule);\n      pos.unshift(index2);\n    } else if (childRule.parentStyleSheet) {\n      const rules2 = Array.from(childRule.parentStyleSheet.cssRules);\n      const index2 = rules2.indexOf(childRule);\n      pos.unshift(index2);\n    }\n    return pos;\n  }\n  return recurse(rule2, positions);\n}\nfunction getIdAndStyleId(sheet, mirror2, styleMirror) {\n  let id, styleId;\n  if (!sheet) return {};\n  if (sheet.ownerNode) id = mirror2.getId(sheet.ownerNode);\n  else styleId = styleMirror.getId(sheet);\n  return {\n    styleId,\n    id\n  };\n}\nfunction initStyleSheetObserver({ styleSheetRuleCb, mirror: mirror2, stylesheetManager }, { win }) {\n  if (!win.CSSStyleSheet || !win.CSSStyleSheet.prototype) {\n    return () => {\n    };\n  }\n  const insertRule = win.CSSStyleSheet.prototype.insertRule;\n  win.CSSStyleSheet.prototype.insertRule = new Proxy(insertRule, {\n    apply: callbackWrapper(\n      (target, thisArg, argumentsList) => {\n        const [rule2, index2] = argumentsList;\n        const { id, styleId } = getIdAndStyleId(\n          thisArg,\n          mirror2,\n          stylesheetManager.styleMirror\n        );\n        if (id && id !== -1 || styleId && styleId !== -1) {\n          styleSheetRuleCb({\n            id,\n            styleId,\n            adds: [{ rule: rule2, index: index2 }]\n          });\n        }\n        return target.apply(thisArg, argumentsList);\n      }\n    )\n  });\n  win.CSSStyleSheet.prototype.addRule = function(selector, styleBlock, index2 = this.cssRules.length) {\n    const rule2 = `${selector} { ${styleBlock} }`;\n    return win.CSSStyleSheet.prototype.insertRule.apply(this, [rule2, index2]);\n  };\n  const deleteRule = win.CSSStyleSheet.prototype.deleteRule;\n  win.CSSStyleSheet.prototype.deleteRule = new Proxy(deleteRule, {\n    apply: callbackWrapper(\n      (target, thisArg, argumentsList) => {\n        const [index2] = argumentsList;\n        const { id, styleId } = getIdAndStyleId(\n          thisArg,\n          mirror2,\n          stylesheetManager.styleMirror\n        );\n        if (id && id !== -1 || styleId && styleId !== -1) {\n          styleSheetRuleCb({\n            id,\n            styleId,\n            removes: [{ index: index2 }]\n          });\n        }\n        return target.apply(thisArg, argumentsList);\n      }\n    )\n  });\n  win.CSSStyleSheet.prototype.removeRule = function(index2) {\n    return win.CSSStyleSheet.prototype.deleteRule.apply(this, [index2]);\n  };\n  let replace;\n  if (win.CSSStyleSheet.prototype.replace) {\n    replace = win.CSSStyleSheet.prototype.replace;\n    win.CSSStyleSheet.prototype.replace = new Proxy(replace, {\n      apply: callbackWrapper(\n        (target, thisArg, argumentsList) => {\n          const [text] = argumentsList;\n          const { id, styleId } = getIdAndStyleId(\n            thisArg,\n            mirror2,\n            stylesheetManager.styleMirror\n          );\n          if (id && id !== -1 || styleId && styleId !== -1) {\n            styleSheetRuleCb({\n              id,\n              styleId,\n              replace: text\n            });\n          }\n          return target.apply(thisArg, argumentsList);\n        }\n      )\n    });\n  }\n  let replaceSync;\n  if (win.CSSStyleSheet.prototype.replaceSync) {\n    replaceSync = win.CSSStyleSheet.prototype.replaceSync;\n    win.CSSStyleSheet.prototype.replaceSync = new Proxy(replaceSync, {\n      apply: callbackWrapper(\n        (target, thisArg, argumentsList) => {\n          const [text] = argumentsList;\n          const { id, styleId } = getIdAndStyleId(\n            thisArg,\n            mirror2,\n            stylesheetManager.styleMirror\n          );\n          if (id && id !== -1 || styleId && styleId !== -1) {\n            styleSheetRuleCb({\n              id,\n              styleId,\n              replaceSync: text\n            });\n          }\n          return target.apply(thisArg, argumentsList);\n        }\n      )\n    });\n  }\n  const supportedNestedCSSRuleTypes = {};\n  if (canMonkeyPatchNestedCSSRule(\"CSSGroupingRule\")) {\n    supportedNestedCSSRuleTypes.CSSGroupingRule = win.CSSGroupingRule;\n  } else {\n    if (canMonkeyPatchNestedCSSRule(\"CSSMediaRule\")) {\n      supportedNestedCSSRuleTypes.CSSMediaRule = win.CSSMediaRule;\n    }\n    if (canMonkeyPatchNestedCSSRule(\"CSSConditionRule\")) {\n      supportedNestedCSSRuleTypes.CSSConditionRule = win.CSSConditionRule;\n    }\n    if (canMonkeyPatchNestedCSSRule(\"CSSSupportsRule\")) {\n      supportedNestedCSSRuleTypes.CSSSupportsRule = win.CSSSupportsRule;\n    }\n  }\n  const unmodifiedFunctions = {};\n  Object.entries(supportedNestedCSSRuleTypes).forEach(([typeKey, type]) => {\n    unmodifiedFunctions[typeKey] = {\n      // eslint-disable-next-line @typescript-eslint/unbound-method\n      insertRule: type.prototype.insertRule,\n      // eslint-disable-next-line @typescript-eslint/unbound-method\n      deleteRule: type.prototype.deleteRule\n    };\n    type.prototype.insertRule = new Proxy(\n      unmodifiedFunctions[typeKey].insertRule,\n      {\n        apply: callbackWrapper(\n          (target, thisArg, argumentsList) => {\n            const [rule2, index2] = argumentsList;\n            const { id, styleId } = getIdAndStyleId(\n              thisArg.parentStyleSheet,\n              mirror2,\n              stylesheetManager.styleMirror\n            );\n            if (id && id !== -1 || styleId && styleId !== -1) {\n              styleSheetRuleCb({\n                id,\n                styleId,\n                adds: [\n                  {\n                    rule: rule2,\n                    index: [\n                      ...getNestedCSSRulePositions(thisArg),\n                      index2 || 0\n                      // defaults to 0\n                    ]\n                  }\n                ]\n              });\n            }\n            return target.apply(thisArg, argumentsList);\n          }\n        )\n      }\n    );\n    type.prototype.deleteRule = new Proxy(\n      unmodifiedFunctions[typeKey].deleteRule,\n      {\n        apply: callbackWrapper(\n          (target, thisArg, argumentsList) => {\n            const [index2] = argumentsList;\n            const { id, styleId } = getIdAndStyleId(\n              thisArg.parentStyleSheet,\n              mirror2,\n              stylesheetManager.styleMirror\n            );\n            if (id && id !== -1 || styleId && styleId !== -1) {\n              styleSheetRuleCb({\n                id,\n                styleId,\n                removes: [\n                  { index: [...getNestedCSSRulePositions(thisArg), index2] }\n                ]\n              });\n            }\n            return target.apply(thisArg, argumentsList);\n          }\n        )\n      }\n    );\n  });\n  return callbackWrapper(() => {\n    win.CSSStyleSheet.prototype.insertRule = insertRule;\n    win.CSSStyleSheet.prototype.deleteRule = deleteRule;\n    replace && (win.CSSStyleSheet.prototype.replace = replace);\n    replaceSync && (win.CSSStyleSheet.prototype.replaceSync = replaceSync);\n    Object.entries(supportedNestedCSSRuleTypes).forEach(([typeKey, type]) => {\n      type.prototype.insertRule = unmodifiedFunctions[typeKey].insertRule;\n      type.prototype.deleteRule = unmodifiedFunctions[typeKey].deleteRule;\n    });\n  });\n}\nfunction initAdoptedStyleSheetObserver({\n  mirror: mirror2,\n  stylesheetManager\n}, host2) {\n  var _a2, _b, _c;\n  let hostId = null;\n  if (host2.nodeName === \"#document\") hostId = mirror2.getId(host2);\n  else hostId = mirror2.getId(index.host(host2));\n  const patchTarget = host2.nodeName === \"#document\" ? (_a2 = host2.defaultView) == null ? void 0 : _a2.Document : (_c = (_b = host2.ownerDocument) == null ? void 0 : _b.defaultView) == null ? void 0 : _c.ShadowRoot;\n  const originalPropertyDescriptor = (patchTarget == null ? void 0 : patchTarget.prototype) ? Object.getOwnPropertyDescriptor(\n    patchTarget == null ? void 0 : patchTarget.prototype,\n    \"adoptedStyleSheets\"\n  ) : void 0;\n  if (hostId === null || hostId === -1 || !patchTarget || !originalPropertyDescriptor)\n    return () => {\n    };\n  Object.defineProperty(host2, \"adoptedStyleSheets\", {\n    configurable: originalPropertyDescriptor.configurable,\n    enumerable: originalPropertyDescriptor.enumerable,\n    get() {\n      var _a3;\n      return (_a3 = originalPropertyDescriptor.get) == null ? void 0 : _a3.call(this);\n    },\n    set(sheets) {\n      var _a3;\n      const result2 = (_a3 = originalPropertyDescriptor.set) == null ? void 0 : _a3.call(this, sheets);\n      if (hostId !== null && hostId !== -1) {\n        try {\n          stylesheetManager.adoptStyleSheets(sheets, hostId);\n        } catch (e2) {\n        }\n      }\n      return result2;\n    }\n  });\n  return callbackWrapper(() => {\n    Object.defineProperty(host2, \"adoptedStyleSheets\", {\n      configurable: originalPropertyDescriptor.configurable,\n      enumerable: originalPropertyDescriptor.enumerable,\n      // eslint-disable-next-line @typescript-eslint/unbound-method\n      get: originalPropertyDescriptor.get,\n      // eslint-disable-next-line @typescript-eslint/unbound-method\n      set: originalPropertyDescriptor.set\n    });\n  });\n}\nfunction initStyleDeclarationObserver({\n  styleDeclarationCb,\n  mirror: mirror2,\n  ignoreCSSAttributes,\n  stylesheetManager\n}, { win }) {\n  const setProperty = win.CSSStyleDeclaration.prototype.setProperty;\n  win.CSSStyleDeclaration.prototype.setProperty = new Proxy(setProperty, {\n    apply: callbackWrapper(\n      (target, thisArg, argumentsList) => {\n        var _a2;\n        const [property, value, priority] = argumentsList;\n        if (ignoreCSSAttributes.has(property)) {\n          return setProperty.apply(thisArg, [property, value, priority]);\n        }\n        const { id, styleId } = getIdAndStyleId(\n          (_a2 = thisArg.parentRule) == null ? void 0 : _a2.parentStyleSheet,\n          mirror2,\n          stylesheetManager.styleMirror\n        );\n        if (id && id !== -1 || styleId && styleId !== -1) {\n          styleDeclarationCb({\n            id,\n            styleId,\n            set: {\n              property,\n              value,\n              priority\n            },\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            index: getNestedCSSRulePositions(thisArg.parentRule)\n          });\n        }\n        return target.apply(thisArg, argumentsList);\n      }\n    )\n  });\n  const removeProperty = win.CSSStyleDeclaration.prototype.removeProperty;\n  win.CSSStyleDeclaration.prototype.removeProperty = new Proxy(removeProperty, {\n    apply: callbackWrapper(\n      (target, thisArg, argumentsList) => {\n        var _a2;\n        const [property] = argumentsList;\n        if (ignoreCSSAttributes.has(property)) {\n          return removeProperty.apply(thisArg, [property]);\n        }\n        const { id, styleId } = getIdAndStyleId(\n          (_a2 = thisArg.parentRule) == null ? void 0 : _a2.parentStyleSheet,\n          mirror2,\n          stylesheetManager.styleMirror\n        );\n        if (id && id !== -1 || styleId && styleId !== -1) {\n          styleDeclarationCb({\n            id,\n            styleId,\n            remove: {\n              property\n            },\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            index: getNestedCSSRulePositions(thisArg.parentRule)\n          });\n        }\n        return target.apply(thisArg, argumentsList);\n      }\n    )\n  });\n  return callbackWrapper(() => {\n    win.CSSStyleDeclaration.prototype.setProperty = setProperty;\n    win.CSSStyleDeclaration.prototype.removeProperty = removeProperty;\n  });\n}\nfunction initMediaInteractionObserver({\n  mediaInteractionCb,\n  blockClass,\n  blockSelector,\n  mirror: mirror2,\n  sampling,\n  doc\n}) {\n  const handler = callbackWrapper(\n    (type) => throttle(\n      callbackWrapper((event) => {\n        const target = getEventTarget(event);\n        if (!target || isBlocked(target, blockClass, blockSelector, true)) {\n          return;\n        }\n        const { currentTime, volume, muted, playbackRate, loop } = target;\n        mediaInteractionCb({\n          type,\n          id: mirror2.getId(target),\n          currentTime,\n          volume,\n          muted,\n          playbackRate,\n          loop\n        });\n      }),\n      sampling.media || 500\n    )\n  );\n  const handlers = [\n    on(\"play\", handler(MediaInteractions.Play), doc),\n    on(\"pause\", handler(MediaInteractions.Pause), doc),\n    on(\"seeked\", handler(MediaInteractions.Seeked), doc),\n    on(\"volumechange\", handler(MediaInteractions.VolumeChange), doc),\n    on(\"ratechange\", handler(MediaInteractions.RateChange), doc)\n  ];\n  return callbackWrapper(() => {\n    handlers.forEach((h) => h());\n  });\n}\nfunction initFontObserver({ fontCb, doc }) {\n  const win = doc.defaultView;\n  if (!win) {\n    return () => {\n    };\n  }\n  const handlers = [];\n  const fontMap = /* @__PURE__ */ new WeakMap();\n  const originalFontFace = win.FontFace;\n  win.FontFace = function FontFace2(family, source, descriptors) {\n    const fontFace = new originalFontFace(\n      family,\n      source,\n      descriptors\n    );\n    fontMap.set(fontFace, {\n      family,\n      buffer: typeof source !== \"string\",\n      descriptors,\n      fontSource: typeof source === \"string\" ? source : JSON.stringify(Array.from(new Uint8Array(source)))\n    });\n    return fontFace;\n  };\n  const restoreHandler = patch(\n    doc.fonts,\n    \"add\",\n    function(original) {\n      return function(fontFace) {\n        setTimeout(\n          callbackWrapper(() => {\n            const p = fontMap.get(fontFace);\n            if (p) {\n              fontCb(p);\n              fontMap.delete(fontFace);\n            }\n          }),\n          0\n        );\n        return original.apply(this, [fontFace]);\n      };\n    }\n  );\n  handlers.push(() => {\n    win.FontFace = originalFontFace;\n  });\n  handlers.push(restoreHandler);\n  return callbackWrapper(() => {\n    handlers.forEach((h) => h());\n  });\n}\nfunction initSelectionObserver(param) {\n  const { doc, mirror: mirror2, blockClass, blockSelector, selectionCb } = param;\n  let collapsed = true;\n  const updateSelection = callbackWrapper(() => {\n    const selection = doc.getSelection();\n    if (!selection || collapsed && (selection == null ? void 0 : selection.isCollapsed)) return;\n    collapsed = selection.isCollapsed || false;\n    const ranges = [];\n    const count = selection.rangeCount || 0;\n    for (let i2 = 0; i2 < count; i2++) {\n      const range = selection.getRangeAt(i2);\n      const { startContainer, startOffset, endContainer, endOffset } = range;\n      const blocked = isBlocked(startContainer, blockClass, blockSelector, true) || isBlocked(endContainer, blockClass, blockSelector, true);\n      if (blocked) continue;\n      ranges.push({\n        start: mirror2.getId(startContainer),\n        startOffset,\n        end: mirror2.getId(endContainer),\n        endOffset\n      });\n    }\n    selectionCb({ ranges });\n  });\n  updateSelection();\n  return on(\"selectionchange\", updateSelection);\n}\nfunction initCustomElementObserver({\n  doc,\n  customElementCb\n}) {\n  const win = doc.defaultView;\n  if (!win || !win.customElements) return () => {\n  };\n  const restoreHandler = patch(\n    win.customElements,\n    \"define\",\n    function(original) {\n      return function(name, constructor, options) {\n        try {\n          customElementCb({\n            define: {\n              name\n            }\n          });\n        } catch (e2) {\n          console.warn(`Custom element callback failed for ${name}`);\n        }\n        return original.apply(this, [name, constructor, options]);\n      };\n    }\n  );\n  return restoreHandler;\n}\nfunction mergeHooks(o2, hooks) {\n  const {\n    mutationCb,\n    mousemoveCb,\n    mouseInteractionCb,\n    scrollCb,\n    viewportResizeCb,\n    inputCb,\n    mediaInteractionCb,\n    styleSheetRuleCb,\n    styleDeclarationCb,\n    canvasMutationCb,\n    fontCb,\n    selectionCb,\n    customElementCb\n  } = o2;\n  o2.mutationCb = (...p) => {\n    if (hooks.mutation) {\n      hooks.mutation(...p);\n    }\n    mutationCb(...p);\n  };\n  o2.mousemoveCb = (...p) => {\n    if (hooks.mousemove) {\n      hooks.mousemove(...p);\n    }\n    mousemoveCb(...p);\n  };\n  o2.mouseInteractionCb = (...p) => {\n    if (hooks.mouseInteraction) {\n      hooks.mouseInteraction(...p);\n    }\n    mouseInteractionCb(...p);\n  };\n  o2.scrollCb = (...p) => {\n    if (hooks.scroll) {\n      hooks.scroll(...p);\n    }\n    scrollCb(...p);\n  };\n  o2.viewportResizeCb = (...p) => {\n    if (hooks.viewportResize) {\n      hooks.viewportResize(...p);\n    }\n    viewportResizeCb(...p);\n  };\n  o2.inputCb = (...p) => {\n    if (hooks.input) {\n      hooks.input(...p);\n    }\n    inputCb(...p);\n  };\n  o2.mediaInteractionCb = (...p) => {\n    if (hooks.mediaInteaction) {\n      hooks.mediaInteaction(...p);\n    }\n    mediaInteractionCb(...p);\n  };\n  o2.styleSheetRuleCb = (...p) => {\n    if (hooks.styleSheetRule) {\n      hooks.styleSheetRule(...p);\n    }\n    styleSheetRuleCb(...p);\n  };\n  o2.styleDeclarationCb = (...p) => {\n    if (hooks.styleDeclaration) {\n      hooks.styleDeclaration(...p);\n    }\n    styleDeclarationCb(...p);\n  };\n  o2.canvasMutationCb = (...p) => {\n    if (hooks.canvasMutation) {\n      hooks.canvasMutation(...p);\n    }\n    canvasMutationCb(...p);\n  };\n  o2.fontCb = (...p) => {\n    if (hooks.font) {\n      hooks.font(...p);\n    }\n    fontCb(...p);\n  };\n  o2.selectionCb = (...p) => {\n    if (hooks.selection) {\n      hooks.selection(...p);\n    }\n    selectionCb(...p);\n  };\n  o2.customElementCb = (...c2) => {\n    if (hooks.customElement) {\n      hooks.customElement(...c2);\n    }\n    customElementCb(...c2);\n  };\n}\nfunction initObservers(o2, hooks = {}) {\n  const currentWindow = o2.doc.defaultView;\n  if (!currentWindow) {\n    return () => {\n    };\n  }\n  mergeHooks(o2, hooks);\n  let mutationObserver;\n  if (o2.recordDOM) {\n    mutationObserver = initMutationObserver(o2, o2.doc);\n  }\n  const mousemoveHandler = initMoveObserver(o2);\n  const mouseInteractionHandler = initMouseInteractionObserver(o2);\n  const scrollHandler = initScrollObserver(o2);\n  const viewportResizeHandler = initViewportResizeObserver(o2, {\n    win: currentWindow\n  });\n  const inputHandler = initInputObserver(o2);\n  const mediaInteractionHandler = initMediaInteractionObserver(o2);\n  let styleSheetObserver = () => {\n  };\n  let adoptedStyleSheetObserver = () => {\n  };\n  let styleDeclarationObserver = () => {\n  };\n  let fontObserver = () => {\n  };\n  if (o2.recordDOM) {\n    styleSheetObserver = initStyleSheetObserver(o2, { win: currentWindow });\n    adoptedStyleSheetObserver = initAdoptedStyleSheetObserver(o2, o2.doc);\n    styleDeclarationObserver = initStyleDeclarationObserver(o2, {\n      win: currentWindow\n    });\n    if (o2.collectFonts) {\n      fontObserver = initFontObserver(o2);\n    }\n  }\n  const selectionObserver = initSelectionObserver(o2);\n  const customElementObserver = initCustomElementObserver(o2);\n  const pluginHandlers = [];\n  for (const plugin of o2.plugins) {\n    pluginHandlers.push(\n      plugin.observer(plugin.callback, currentWindow, plugin.options)\n    );\n  }\n  return callbackWrapper(() => {\n    mutationBuffers.forEach((b) => b.destroy());\n    mutationBuffers.forEach((b) => b.reset());\n    mutationObserver == null ? void 0 : mutationObserver.disconnect();\n    mousemoveHandler();\n    mouseInteractionHandler();\n    scrollHandler();\n    viewportResizeHandler();\n    inputHandler();\n    mediaInteractionHandler();\n    styleSheetObserver();\n    adoptedStyleSheetObserver();\n    styleDeclarationObserver();\n    fontObserver();\n    selectionObserver();\n    customElementObserver();\n    pluginHandlers.forEach((h) => h());\n    mutationBuffers.length = 0;\n  });\n}\nfunction hasNestedCSSRule(prop) {\n  return typeof window[prop] !== \"undefined\";\n}\nfunction canMonkeyPatchNestedCSSRule(prop) {\n  return Boolean(\n    typeof window[prop] !== \"undefined\" && // Note: Generally, this check _shouldn't_ be necessary\n    // However, in some scenarios (e.g. jsdom) this can sometimes fail, so we check for it here\n    window[prop].prototype && \"insertRule\" in window[prop].prototype && \"deleteRule\" in window[prop].prototype\n  );\n}\nclass CrossOriginIframeMirror {\n  constructor(generateIdFn) {\n    __publicField(this, \"iframeIdToRemoteIdMap\", /* @__PURE__ */ new WeakMap());\n    __publicField(this, \"iframeRemoteIdToIdMap\", /* @__PURE__ */ new WeakMap());\n    this.generateIdFn = generateIdFn;\n  }\n  getId(iframe, remoteId, idToRemoteMap, remoteToIdMap) {\n    const idToRemoteIdMap = idToRemoteMap || this.getIdToRemoteIdMap(iframe);\n    const remoteIdToIdMap = remoteToIdMap || this.getRemoteIdToIdMap(iframe);\n    let id = idToRemoteIdMap.get(remoteId);\n    if (!id) {\n      id = this.generateIdFn();\n      idToRemoteIdMap.set(remoteId, id);\n      remoteIdToIdMap.set(id, remoteId);\n    }\n    return id;\n  }\n  getIds(iframe, remoteId) {\n    const idToRemoteIdMap = this.getIdToRemoteIdMap(iframe);\n    const remoteIdToIdMap = this.getRemoteIdToIdMap(iframe);\n    return remoteId.map(\n      (id) => this.getId(iframe, id, idToRemoteIdMap, remoteIdToIdMap)\n    );\n  }\n  getRemoteId(iframe, id, map) {\n    const remoteIdToIdMap = map || this.getRemoteIdToIdMap(iframe);\n    if (typeof id !== \"number\") return id;\n    const remoteId = remoteIdToIdMap.get(id);\n    if (!remoteId) return -1;\n    return remoteId;\n  }\n  getRemoteIds(iframe, ids) {\n    const remoteIdToIdMap = this.getRemoteIdToIdMap(iframe);\n    return ids.map((id) => this.getRemoteId(iframe, id, remoteIdToIdMap));\n  }\n  reset(iframe) {\n    if (!iframe) {\n      this.iframeIdToRemoteIdMap = /* @__PURE__ */ new WeakMap();\n      this.iframeRemoteIdToIdMap = /* @__PURE__ */ new WeakMap();\n      return;\n    }\n    this.iframeIdToRemoteIdMap.delete(iframe);\n    this.iframeRemoteIdToIdMap.delete(iframe);\n  }\n  getIdToRemoteIdMap(iframe) {\n    let idToRemoteIdMap = this.iframeIdToRemoteIdMap.get(iframe);\n    if (!idToRemoteIdMap) {\n      idToRemoteIdMap = /* @__PURE__ */ new Map();\n      this.iframeIdToRemoteIdMap.set(iframe, idToRemoteIdMap);\n    }\n    return idToRemoteIdMap;\n  }\n  getRemoteIdToIdMap(iframe) {\n    let remoteIdToIdMap = this.iframeRemoteIdToIdMap.get(iframe);\n    if (!remoteIdToIdMap) {\n      remoteIdToIdMap = /* @__PURE__ */ new Map();\n      this.iframeRemoteIdToIdMap.set(iframe, remoteIdToIdMap);\n    }\n    return remoteIdToIdMap;\n  }\n}\nclass IframeManager {\n  constructor(options) {\n    __publicField(this, \"iframes\", /* @__PURE__ */ new WeakMap());\n    __publicField(this, \"crossOriginIframeMap\", /* @__PURE__ */ new WeakMap());\n    __publicField(this, \"crossOriginIframeMirror\", new CrossOriginIframeMirror(genId));\n    __publicField(this, \"crossOriginIframeStyleMirror\");\n    __publicField(this, \"crossOriginIframeRootIdMap\", /* @__PURE__ */ new WeakMap());\n    __publicField(this, \"mirror\");\n    __publicField(this, \"mutationCb\");\n    __publicField(this, \"wrappedEmit\");\n    __publicField(this, \"loadListener\");\n    __publicField(this, \"stylesheetManager\");\n    __publicField(this, \"recordCrossOriginIframes\");\n    __publicField(this, \"messageHandler\");\n    __publicField(this, \"nestedIframeListeners\", /* @__PURE__ */ new Map());\n    __publicField(this, \"attachedIframes\", /* @__PURE__ */ new Map());\n    this.mutationCb = options.mutationCb;\n    this.wrappedEmit = options.wrappedEmit;\n    this.stylesheetManager = options.stylesheetManager;\n    this.recordCrossOriginIframes = options.recordCrossOriginIframes;\n    this.crossOriginIframeStyleMirror = new CrossOriginIframeMirror(\n      this.stylesheetManager.styleMirror.generateId.bind(\n        this.stylesheetManager.styleMirror\n      )\n    );\n    this.mirror = options.mirror;\n    this.messageHandler = this.handleMessage.bind(this);\n    if (this.recordCrossOriginIframes) {\n      window.addEventListener(\"message\", this.messageHandler);\n    }\n  }\n  addIframe(iframeEl) {\n    this.iframes.set(iframeEl, true);\n    if (iframeEl.contentWindow)\n      this.crossOriginIframeMap.set(iframeEl.contentWindow, iframeEl);\n  }\n  addLoadListener(cb) {\n    this.loadListener = cb;\n  }\n  removeLoadListener() {\n    this.loadListener = void 0;\n  }\n  trackIframeContent(iframeEl, content) {\n    const iframeId = this.mirror.getId(iframeEl);\n    this.attachedIframes.set(iframeId, { element: iframeEl, content });\n    return iframeId;\n  }\n  attachIframe(iframeEl, childSn) {\n    var _a2;\n    const iframeId = this.trackIframeContent(iframeEl, childSn);\n    this.mutationCb({\n      adds: [\n        {\n          parentId: iframeId,\n          nextId: null,\n          node: childSn\n        }\n      ],\n      removes: [],\n      texts: [],\n      attributes: [],\n      isAttachIframe: true\n    });\n    const win = iframeEl.contentWindow;\n    if (this.recordCrossOriginIframes && win && !this.nestedIframeListeners.has(win)) {\n      const nestedHandler = this.handleMessage.bind(this);\n      this.nestedIframeListeners.set(win, nestedHandler);\n      win.addEventListener(\"message\", nestedHandler);\n    }\n    (_a2 = this.loadListener) == null ? void 0 : _a2.call(this, iframeEl);\n    if (iframeEl.contentDocument && iframeEl.contentDocument.adoptedStyleSheets && iframeEl.contentDocument.adoptedStyleSheets.length > 0)\n      this.stylesheetManager.adoptStyleSheets(\n        iframeEl.contentDocument.adoptedStyleSheets,\n        this.mirror.getId(iframeEl.contentDocument)\n      );\n  }\n  handleMessage(message) {\n    const crossOriginMessageEvent = message;\n    if (crossOriginMessageEvent.data.type !== \"rrweb\" || // To filter out the rrweb messages which are forwarded by some sites.\n    crossOriginMessageEvent.origin !== crossOriginMessageEvent.data.origin)\n      return;\n    const iframeSourceWindow = message.source;\n    if (!iframeSourceWindow) return;\n    const iframeEl = this.crossOriginIframeMap.get(message.source);\n    if (!iframeEl) return;\n    const transformedEvent = this.transformCrossOriginEvent(\n      iframeEl,\n      crossOriginMessageEvent.data.event\n    );\n    if (transformedEvent)\n      this.wrappedEmit(\n        transformedEvent,\n        crossOriginMessageEvent.data.isCheckout\n      );\n  }\n  transformCrossOriginEvent(iframeEl, e2) {\n    var _a2;\n    switch (e2.type) {\n      case EventType.FullSnapshot: {\n        this.crossOriginIframeMirror.reset(iframeEl);\n        this.crossOriginIframeStyleMirror.reset(iframeEl);\n        this.replaceIdOnNode(e2.data.node, iframeEl);\n        const rootId = e2.data.node.id;\n        this.crossOriginIframeRootIdMap.set(iframeEl, rootId);\n        this.patchRootIdOnNode(e2.data.node, rootId);\n        this.trackIframeContent(iframeEl, e2.data.node);\n        return {\n          timestamp: e2.timestamp,\n          type: EventType.IncrementalSnapshot,\n          data: {\n            source: IncrementalSource.Mutation,\n            adds: [\n              {\n                parentId: this.mirror.getId(iframeEl),\n                nextId: null,\n                node: e2.data.node\n              }\n            ],\n            removes: [],\n            texts: [],\n            attributes: [],\n            isAttachIframe: true\n          }\n        };\n      }\n      case EventType.Meta:\n      case EventType.Load:\n      case EventType.DomContentLoaded: {\n        return false;\n      }\n      case EventType.Plugin: {\n        return e2;\n      }\n      case EventType.Custom: {\n        this.replaceIds(\n          e2.data.payload,\n          iframeEl,\n          [\"id\", \"parentId\", \"previousId\", \"nextId\"]\n        );\n        return e2;\n      }\n      case EventType.IncrementalSnapshot: {\n        switch (e2.data.source) {\n          case IncrementalSource.Mutation: {\n            e2.data.adds.forEach((n2) => {\n              this.replaceIds(n2, iframeEl, [\n                \"parentId\",\n                \"nextId\",\n                \"previousId\"\n              ]);\n              this.replaceIdOnNode(n2.node, iframeEl);\n              const rootId = this.crossOriginIframeRootIdMap.get(iframeEl);\n              rootId && this.patchRootIdOnNode(n2.node, rootId);\n            });\n            e2.data.removes.forEach((n2) => {\n              this.replaceIds(n2, iframeEl, [\"parentId\", \"id\"]);\n            });\n            e2.data.attributes.forEach((n2) => {\n              this.replaceIds(n2, iframeEl, [\"id\"]);\n            });\n            e2.data.texts.forEach((n2) => {\n              this.replaceIds(n2, iframeEl, [\"id\"]);\n            });\n            return e2;\n          }\n          case IncrementalSource.Drag:\n          case IncrementalSource.TouchMove:\n          case IncrementalSource.MouseMove: {\n            e2.data.positions.forEach((p) => {\n              this.replaceIds(p, iframeEl, [\"id\"]);\n            });\n            return e2;\n          }\n          case IncrementalSource.ViewportResize: {\n            return false;\n          }\n          case IncrementalSource.MediaInteraction:\n          case IncrementalSource.MouseInteraction:\n          case IncrementalSource.Scroll:\n          case IncrementalSource.CanvasMutation:\n          case IncrementalSource.Input: {\n            this.replaceIds(e2.data, iframeEl, [\"id\"]);\n            return e2;\n          }\n          case IncrementalSource.StyleSheetRule:\n          case IncrementalSource.StyleDeclaration: {\n            this.replaceIds(e2.data, iframeEl, [\"id\"]);\n            this.replaceStyleIds(e2.data, iframeEl, [\"styleId\"]);\n            return e2;\n          }\n          case IncrementalSource.Font: {\n            return e2;\n          }\n          case IncrementalSource.Selection: {\n            e2.data.ranges.forEach((range) => {\n              this.replaceIds(range, iframeEl, [\"start\", \"end\"]);\n            });\n            return e2;\n          }\n          case IncrementalSource.AdoptedStyleSheet: {\n            this.replaceIds(e2.data, iframeEl, [\"id\"]);\n            this.replaceStyleIds(e2.data, iframeEl, [\"styleIds\"]);\n            (_a2 = e2.data.styles) == null ? void 0 : _a2.forEach((style) => {\n              this.replaceStyleIds(style, iframeEl, [\"styleId\"]);\n            });\n            return e2;\n          }\n        }\n      }\n    }\n    return false;\n  }\n  replace(iframeMirror, obj, iframeEl, keys) {\n    for (const key of keys) {\n      if (!Array.isArray(obj[key]) && typeof obj[key] !== \"number\") continue;\n      if (Array.isArray(obj[key])) {\n        obj[key] = iframeMirror.getIds(\n          iframeEl,\n          obj[key]\n        );\n      } else {\n        obj[key] = iframeMirror.getId(iframeEl, obj[key]);\n      }\n    }\n    return obj;\n  }\n  replaceIds(obj, iframeEl, keys) {\n    return this.replace(this.crossOriginIframeMirror, obj, iframeEl, keys);\n  }\n  replaceStyleIds(obj, iframeEl, keys) {\n    return this.replace(this.crossOriginIframeStyleMirror, obj, iframeEl, keys);\n  }\n  replaceIdOnNode(node2, iframeEl) {\n    this.replaceIds(node2, iframeEl, [\"id\", \"rootId\"]);\n    if (\"childNodes\" in node2) {\n      node2.childNodes.forEach((child) => {\n        this.replaceIdOnNode(child, iframeEl);\n      });\n    }\n  }\n  patchRootIdOnNode(node2, rootId) {\n    if (node2.type !== NodeType.Document && !node2.rootId) node2.rootId = rootId;\n    if (\"childNodes\" in node2) {\n      node2.childNodes.forEach((child) => {\n        this.patchRootIdOnNode(child, rootId);\n      });\n    }\n  }\n  removeIframeById(iframeId) {\n    const entry = this.attachedIframes.get(iframeId);\n    const iframe = (entry == null ? void 0 : entry.element) || this.mirror.getNode(iframeId);\n    if (iframe) {\n      const win = iframe.contentWindow;\n      if (win && this.nestedIframeListeners.has(win)) {\n        const handler = this.nestedIframeListeners.get(win);\n        win.removeEventListener(\"message\", handler);\n        this.nestedIframeListeners.delete(win);\n      }\n      if (win) {\n        this.crossOriginIframeMap.delete(win);\n      }\n      this.iframes.delete(iframe);\n    }\n    if (entry) {\n      this.attachedIframes.delete(iframeId);\n    }\n  }\n  reattachIframes() {\n    this.attachedIframes.forEach(({ content }, iframeId) => {\n      if (!this.mirror.has(iframeId)) {\n        this.attachedIframes.delete(iframeId);\n        return;\n      }\n      this.mutationCb({\n        adds: [\n          {\n            parentId: iframeId,\n            nextId: null,\n            node: content\n          }\n        ],\n        removes: [],\n        texts: [],\n        attributes: [],\n        isAttachIframe: true\n      });\n    });\n  }\n  destroy() {\n    if (this.recordCrossOriginIframes) {\n      window.removeEventListener(\"message\", this.messageHandler);\n    }\n    this.nestedIframeListeners.forEach((handler, contentWindow) => {\n      contentWindow.removeEventListener(\"message\", handler);\n    });\n    this.nestedIframeListeners.clear();\n    this.crossOriginIframeMirror.reset();\n    this.crossOriginIframeStyleMirror.reset();\n    this.attachedIframes.clear();\n    this.crossOriginIframeMap = /* @__PURE__ */ new WeakMap();\n    this.iframes = /* @__PURE__ */ new WeakMap();\n    this.crossOriginIframeRootIdMap = /* @__PURE__ */ new WeakMap();\n  }\n}\nclass ShadowDomManager {\n  constructor(options) {\n    __publicField(this, \"shadowDoms\", /* @__PURE__ */ new WeakSet());\n    __publicField(this, \"mutationCb\");\n    __publicField(this, \"scrollCb\");\n    __publicField(this, \"bypassOptions\");\n    __publicField(this, \"mirror\");\n    __publicField(this, \"restoreHandlers\", []);\n    this.mutationCb = options.mutationCb;\n    this.scrollCb = options.scrollCb;\n    this.bypassOptions = options.bypassOptions;\n    this.mirror = options.mirror;\n    this.init();\n  }\n  init() {\n    this.reset();\n    this.patchAttachShadow(Element, document);\n  }\n  addShadowRoot(shadowRoot2, doc) {\n    if (!isNativeShadowDom(shadowRoot2)) return;\n    if (this.shadowDoms.has(shadowRoot2)) return;\n    this.shadowDoms.add(shadowRoot2);\n    const observer = initMutationObserver(\n      {\n        ...this.bypassOptions,\n        doc,\n        mutationCb: this.mutationCb,\n        mirror: this.mirror,\n        shadowDomManager: this\n      },\n      shadowRoot2\n    );\n    this.restoreHandlers.push(() => observer.disconnect());\n    this.restoreHandlers.push(\n      initScrollObserver({\n        ...this.bypassOptions,\n        scrollCb: this.scrollCb,\n        // https://gist.github.com/praveenpuglia/0832da687ed5a5d7a0907046c9ef1813\n        // scroll is not allowed to pass the boundary, so we need to listen the shadow document\n        doc: shadowRoot2,\n        mirror: this.mirror\n      })\n    );\n    setTimeout(() => {\n      if (shadowRoot2.adoptedStyleSheets && shadowRoot2.adoptedStyleSheets.length > 0)\n        this.bypassOptions.stylesheetManager.adoptStyleSheets(\n          shadowRoot2.adoptedStyleSheets,\n          this.mirror.getId(index.host(shadowRoot2))\n        );\n      this.restoreHandlers.push(\n        initAdoptedStyleSheetObserver(\n          {\n            mirror: this.mirror,\n            stylesheetManager: this.bypassOptions.stylesheetManager\n          },\n          shadowRoot2\n        )\n      );\n    }, 0);\n  }\n  /**\n   * Monkey patch 'attachShadow' of an IFrameElement to observe newly added shadow doms.\n   */\n  observeAttachShadow(iframeElement) {\n    if (!iframeElement.contentWindow || !iframeElement.contentDocument) return;\n    this.patchAttachShadow(\n      iframeElement.contentWindow.Element,\n      iframeElement.contentDocument\n    );\n  }\n  /**\n   * Patch 'attachShadow' to observe newly added shadow doms.\n   */\n  patchAttachShadow(element, doc) {\n    const manager = this;\n    this.restoreHandlers.push(\n      patch(\n        element.prototype,\n        \"attachShadow\",\n        function(original) {\n          return function(option) {\n            const sRoot = original.call(this, option);\n            const shadowRootEl = index.shadowRoot(this);\n            if (shadowRootEl && inDom(this))\n              manager.addShadowRoot(shadowRootEl, doc);\n            return sRoot;\n          };\n        }\n      )\n    );\n  }\n  reset() {\n    this.restoreHandlers.forEach((handler) => {\n      try {\n        handler();\n      } catch (e2) {\n      }\n    });\n    this.restoreHandlers = [];\n    this.shadowDoms = /* @__PURE__ */ new WeakSet();\n  }\n}\nvar chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\nvar lookup = typeof Uint8Array === \"undefined\" ? [] : new Uint8Array(256);\nfor (var i$1 = 0; i$1 < chars.length; i$1++) {\n  lookup[chars.charCodeAt(i$1)] = i$1;\n}\nvar encode = function(arraybuffer) {\n  var bytes = new Uint8Array(arraybuffer), i2, len = bytes.length, base64 = \"\";\n  for (i2 = 0; i2 < len; i2 += 3) {\n    base64 += chars[bytes[i2] >> 2];\n    base64 += chars[(bytes[i2] & 3) << 4 | bytes[i2 + 1] >> 4];\n    base64 += chars[(bytes[i2 + 1] & 15) << 2 | bytes[i2 + 2] >> 6];\n    base64 += chars[bytes[i2 + 2] & 63];\n  }\n  if (len % 3 === 2) {\n    base64 = base64.substring(0, base64.length - 1) + \"=\";\n  } else if (len % 3 === 1) {\n    base64 = base64.substring(0, base64.length - 2) + \"==\";\n  }\n  return base64;\n};\nconst canvasVarMap = /* @__PURE__ */ new Map();\nfunction variableListFor$1(ctx, ctor) {\n  let contextMap = canvasVarMap.get(ctx);\n  if (!contextMap) {\n    contextMap = /* @__PURE__ */ new Map();\n    canvasVarMap.set(ctx, contextMap);\n  }\n  if (!contextMap.has(ctor)) {\n    contextMap.set(ctor, []);\n  }\n  return contextMap.get(ctor);\n}\nconst saveWebGLVar = (value, win, ctx) => {\n  if (!value || !(isInstanceOfWebGLObject(value, win) || typeof value === \"object\"))\n    return;\n  const name = value.constructor.name;\n  const list = variableListFor$1(ctx, name);\n  let index2 = list.indexOf(value);\n  if (index2 === -1) {\n    index2 = list.length;\n    list.push(value);\n  }\n  return index2;\n};\nfunction serializeArg(value, win, ctx, dataURLOptions) {\n  if (value instanceof Array) {\n    return value.map((arg) => serializeArg(arg, win, ctx, dataURLOptions));\n  } else if (value === null) {\n    return value;\n  } else if (value instanceof Float32Array || value instanceof Float64Array || value instanceof Int32Array || value instanceof Uint32Array || value instanceof Uint8Array || value instanceof Uint16Array || value instanceof Int16Array || value instanceof Int8Array || value instanceof Uint8ClampedArray) {\n    const name = value.constructor.name;\n    return {\n      rr_type: name,\n      args: [Object.values(value)]\n    };\n  } else if (\n    // SharedArrayBuffer disabled on most browsers due to spectre.\n    // More info: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer/SharedArrayBuffer\n    // value instanceof SharedArrayBuffer ||\n    value instanceof ArrayBuffer\n  ) {\n    const name = value.constructor.name;\n    const base64 = encode(value);\n    return {\n      rr_type: name,\n      base64\n    };\n  } else if (value instanceof DataView) {\n    const name = value.constructor.name;\n    return {\n      rr_type: name,\n      args: [\n        serializeArg(value.buffer, win, ctx, dataURLOptions),\n        value.byteOffset,\n        value.byteLength\n      ]\n    };\n  } else if (value instanceof HTMLImageElement) {\n    const name = value.constructor.name;\n    const { src } = value;\n    return {\n      rr_type: name,\n      src\n    };\n  } else if (value instanceof HTMLCanvasElement) {\n    const name = \"HTMLImageElement\";\n    const src = value.toDataURL(dataURLOptions.type, dataURLOptions.quality);\n    return {\n      rr_type: name,\n      src\n    };\n  } else if (value instanceof ImageData) {\n    const name = value.constructor.name;\n    return {\n      rr_type: name,\n      args: [\n        serializeArg(value.data, win, ctx, dataURLOptions),\n        value.width,\n        value.height\n      ]\n    };\n  } else if (isInstanceOfWebGLObject(value, win) || typeof value === \"object\") {\n    const name = value.constructor.name;\n    const index2 = saveWebGLVar(value, win, ctx);\n    return {\n      rr_type: name,\n      index: index2\n    };\n  }\n  return value;\n}\nconst serializeArgs = (args, win, ctx, dataURLOptions) => {\n  return args.map((arg) => serializeArg(arg, win, ctx, dataURLOptions));\n};\nconst isInstanceOfWebGLObject = (value, win) => {\n  const webGLConstructorNames = [\n    \"WebGLActiveInfo\",\n    \"WebGLBuffer\",\n    \"WebGLFramebuffer\",\n    \"WebGLProgram\",\n    \"WebGLRenderbuffer\",\n    \"WebGLShader\",\n    \"WebGLShaderPrecisionFormat\",\n    \"WebGLTexture\",\n    \"WebGLUniformLocation\",\n    \"WebGLVertexArrayObject\",\n    // In old Chrome versions, value won't be an instanceof WebGLVertexArrayObject.\n    \"WebGLVertexArrayObjectOES\"\n  ];\n  const supportedWebGLConstructorNames = webGLConstructorNames.filter(\n    (name) => typeof win[name] === \"function\"\n  );\n  return Boolean(\n    supportedWebGLConstructorNames.find(\n      (name) => value instanceof win[name]\n    )\n  );\n};\nfunction initCanvas2DMutationObserver(cb, win, blockClass, blockSelector, dataURLOptions) {\n  const handlers = [];\n  const props2D = Object.getOwnPropertyNames(\n    win.CanvasRenderingContext2D.prototype\n  );\n  for (const prop of props2D) {\n    try {\n      if (typeof win.CanvasRenderingContext2D.prototype[prop] !== \"function\") {\n        continue;\n      }\n      const restoreHandler = patch(\n        win.CanvasRenderingContext2D.prototype,\n        prop,\n        function(original) {\n          return function(...args) {\n            if (!isBlocked(this.canvas, blockClass, blockSelector, true)) {\n              setTimeout(() => {\n                const recordArgs = serializeArgs(\n                  args,\n                  win,\n                  this,\n                  dataURLOptions\n                );\n                cb(this.canvas, {\n                  type: CanvasContext[\"2D\"],\n                  property: prop,\n                  args: recordArgs\n                });\n              }, 0);\n            }\n            return original.apply(this, args);\n          };\n        }\n      );\n      handlers.push(restoreHandler);\n    } catch {\n      const hookHandler = hookSetter(\n        win.CanvasRenderingContext2D.prototype,\n        prop,\n        {\n          set(v2) {\n            cb(this.canvas, {\n              type: CanvasContext[\"2D\"],\n              property: prop,\n              args: [v2],\n              setter: true\n            });\n          }\n        }\n      );\n      handlers.push(hookHandler);\n    }\n  }\n  return () => {\n    handlers.forEach((h) => h());\n  };\n}\nfunction getNormalizedContextName(contextType) {\n  return contextType === \"experimental-webgl\" ? \"webgl\" : contextType;\n}\nfunction initCanvasContextObserver(win, blockClass, blockSelector, setPreserveDrawingBufferToTrue) {\n  const handlers = [];\n  try {\n    const restoreHandler = patch(\n      win.HTMLCanvasElement.prototype,\n      \"getContext\",\n      function(original) {\n        return function(contextType, ...args) {\n          if (!isBlocked(this, blockClass, blockSelector, true)) {\n            const ctxName = getNormalizedContextName(contextType);\n            if (!(\"__context\" in this)) this.__context = ctxName;\n            if (setPreserveDrawingBufferToTrue && [\"webgl\", \"webgl2\"].includes(ctxName)) {\n              if (args[0] && typeof args[0] === \"object\") {\n                const contextAttributes = args[0];\n                if (!contextAttributes.preserveDrawingBuffer) {\n                  contextAttributes.preserveDrawingBuffer = true;\n                }\n              } else {\n                args.splice(0, 1, {\n                  preserveDrawingBuffer: true\n                });\n              }\n            }\n          }\n          return original.apply(this, [contextType, ...args]);\n        };\n      }\n    );\n    handlers.push(restoreHandler);\n  } catch {\n    console.error(\"failed to patch HTMLCanvasElement.prototype.getContext\");\n  }\n  return () => {\n    handlers.forEach((h) => h());\n  };\n}\nfunction patchGLPrototype(prototype, type, cb, blockClass, blockSelector, win, dataURLOptions) {\n  const handlers = [];\n  const props = Object.getOwnPropertyNames(prototype);\n  for (const prop of props) {\n    if (\n      //prop.startsWith('get') ||  // e.g. getProgramParameter, but too risky\n      [\n        \"isContextLost\",\n        \"canvas\",\n        \"drawingBufferWidth\",\n        \"drawingBufferHeight\"\n      ].includes(prop)\n    ) {\n      continue;\n    }\n    try {\n      if (typeof prototype[prop] !== \"function\") {\n        continue;\n      }\n      const restoreHandler = patch(\n        prototype,\n        prop,\n        function(original) {\n          return function(...args) {\n            const result2 = original.apply(this, args);\n            saveWebGLVar(result2, win, this);\n            if (\"tagName\" in this.canvas && !isBlocked(this.canvas, blockClass, blockSelector, true)) {\n              const recordArgs = serializeArgs(args, win, this, dataURLOptions);\n              const mutation = {\n                type,\n                property: prop,\n                args: recordArgs\n              };\n              cb(this.canvas, mutation);\n            }\n            return result2;\n          };\n        }\n      );\n      handlers.push(restoreHandler);\n    } catch {\n      const hookHandler = hookSetter(prototype, prop, {\n        set(v2) {\n          cb(this.canvas, {\n            type,\n            property: prop,\n            args: [v2],\n            setter: true\n          });\n        }\n      });\n      handlers.push(hookHandler);\n    }\n  }\n  return handlers;\n}\nfunction initCanvasWebGLMutationObserver(cb, win, blockClass, blockSelector, dataURLOptions) {\n  const handlers = [];\n  handlers.push(\n    ...patchGLPrototype(\n      win.WebGLRenderingContext.prototype,\n      CanvasContext.WebGL,\n      cb,\n      blockClass,\n      blockSelector,\n      win,\n      dataURLOptions\n    )\n  );\n  if (typeof win.WebGL2RenderingContext !== \"undefined\") {\n    handlers.push(\n      ...patchGLPrototype(\n        win.WebGL2RenderingContext.prototype,\n        CanvasContext.WebGL2,\n        cb,\n        blockClass,\n        blockSelector,\n        win,\n        dataURLOptions\n      )\n    );\n  }\n  return () => {\n    handlers.forEach((h) => h());\n  };\n}\nconst jsContent = '(function() {\\n  \"use strict\";\\n  var chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\\n  var lookup = typeof Uint8Array === \"undefined\" ? [] : new Uint8Array(256);\\n  for (var i = 0; i < chars.length; i++) {\\n    lookup[chars.charCodeAt(i)] = i;\\n  }\\n  var encode = function(arraybuffer) {\\n    var bytes = new Uint8Array(arraybuffer), i2, len = bytes.length, base64 = \"\";\\n    for (i2 = 0; i2 < len; i2 += 3) {\\n      base64 += chars[bytes[i2] >> 2];\\n      base64 += chars[(bytes[i2] & 3) << 4 | bytes[i2 + 1] >> 4];\\n      base64 += chars[(bytes[i2 + 1] & 15) << 2 | bytes[i2 + 2] >> 6];\\n      base64 += chars[bytes[i2 + 2] & 63];\\n    }\\n    if (len % 3 === 2) {\\n      base64 = base64.substring(0, base64.length - 1) + \"=\";\\n    } else if (len % 3 === 1) {\\n      base64 = base64.substring(0, base64.length - 2) + \"==\";\\n    }\\n    return base64;\\n  };\\n  const lastBlobMap = /* @__PURE__ */ new Map();\\n  const transparentBlobMap = /* @__PURE__ */ new Map();\\n  async function getTransparentBlobFor(width, height, dataURLOptions) {\\n    const id = `${width}-${height}`;\\n    if (\"OffscreenCanvas\" in globalThis) {\\n      if (transparentBlobMap.has(id)) return transparentBlobMap.get(id);\\n      const offscreen = new OffscreenCanvas(width, height);\\n      offscreen.getContext(\"2d\");\\n      const blob = await offscreen.convertToBlob(dataURLOptions);\\n      const arrayBuffer = await blob.arrayBuffer();\\n      const base64 = encode(arrayBuffer);\\n      transparentBlobMap.set(id, base64);\\n      return base64;\\n    } else {\\n      return \"\";\\n    }\\n  }\\n  const worker = self;\\n  worker.onmessage = async function(e) {\\n    if (\"OffscreenCanvas\" in globalThis) {\\n      const { id, bitmap, width, height, dataURLOptions } = e.data;\\n      const transparentBase64 = getTransparentBlobFor(\\n        width,\\n        height,\\n        dataURLOptions\\n      );\\n      const offscreen = new OffscreenCanvas(width, height);\\n      const ctx = offscreen.getContext(\"2d\");\\n      ctx.drawImage(bitmap, 0, 0);\\n      bitmap.close();\\n      const blob = await offscreen.convertToBlob(dataURLOptions);\\n      const type = blob.type;\\n      const arrayBuffer = await blob.arrayBuffer();\\n      const base64 = encode(arrayBuffer);\\n      if (!lastBlobMap.has(id) && await transparentBase64 === base64) {\\n        lastBlobMap.set(id, base64);\\n        return worker.postMessage({ id });\\n      }\\n      if (lastBlobMap.get(id) === base64) return worker.postMessage({ id });\\n      worker.postMessage({\\n        id,\\n        type,\\n        base64,\\n        width,\\n        height\\n      });\\n      lastBlobMap.set(id, base64);\\n    } else {\\n      return worker.postMessage({ id: e.data.id });\\n    }\\n  };\\n})();\\n//# sourceMappingURL=image-bitmap-data-url-worker-IJpC7g_b.js.map\\n';\nconst blob = typeof self !== \"undefined\" && self.Blob && new Blob([jsContent], { type: \"text/javascript;charset=utf-8\" });\nfunction WorkerWrapper(options) {\n  let objURL;\n  try {\n    objURL = blob && (self.URL || self.webkitURL).createObjectURL(blob);\n    if (!objURL) throw \"\";\n    const worker = new Worker(objURL, {\n      name: options == null ? void 0 : options.name\n    });\n    worker.addEventListener(\"error\", () => {\n      (self.URL || self.webkitURL).revokeObjectURL(objURL);\n    });\n    return worker;\n  } catch (e2) {\n    return new Worker(\n      \"data:text/javascript;charset=utf-8,\" + encodeURIComponent(jsContent),\n      {\n        name: options == null ? void 0 : options.name\n      }\n    );\n  } finally {\n    objURL && (self.URL || self.webkitURL).revokeObjectURL(objURL);\n  }\n}\nclass CanvasManager {\n  constructor(options) {\n    __publicField(this, \"pendingCanvasMutations\", /* @__PURE__ */ new Map());\n    __publicField(this, \"rafStamps\", { latestId: 0, invokeId: null });\n    __publicField(this, \"mirror\");\n    __publicField(this, \"mutationCb\");\n    __publicField(this, \"resetObservers\");\n    __publicField(this, \"frozen\", false);\n    __publicField(this, \"locked\", false);\n    __publicField(this, \"rafIdTimestamp\", null);\n    __publicField(this, \"rafIdFlush\", null);\n    __publicField(this, \"processMutation\", (target, mutation) => {\n      const newFrame = this.rafStamps.invokeId && this.rafStamps.latestId !== this.rafStamps.invokeId;\n      if (newFrame || !this.rafStamps.invokeId)\n        this.rafStamps.invokeId = this.rafStamps.latestId;\n      if (!this.pendingCanvasMutations.has(target)) {\n        this.pendingCanvasMutations.set(target, []);\n      }\n      this.pendingCanvasMutations.get(target).push(mutation);\n    });\n    const {\n      sampling = \"all\",\n      win,\n      blockClass,\n      blockSelector,\n      recordCanvas,\n      dataURLOptions\n    } = options;\n    this.mutationCb = options.mutationCb;\n    this.mirror = options.mirror;\n    if (recordCanvas && sampling === \"all\")\n      this.initCanvasMutationObserver(\n        win,\n        blockClass,\n        blockSelector,\n        dataURLOptions\n      );\n    if (recordCanvas && typeof sampling === \"number\")\n      this.initCanvasFPSObserver(sampling, win, blockClass, blockSelector, {\n        dataURLOptions\n      });\n  }\n  reset() {\n    this.pendingCanvasMutations.clear();\n    this.resetObservers && this.resetObservers();\n    if (this.rafIdTimestamp !== null) {\n      cancelAnimationFrame(this.rafIdTimestamp);\n      this.rafIdTimestamp = null;\n    }\n    if (this.rafIdFlush !== null) {\n      cancelAnimationFrame(this.rafIdFlush);\n      this.rafIdFlush = null;\n    }\n  }\n  freeze() {\n    this.frozen = true;\n  }\n  unfreeze() {\n    this.frozen = false;\n  }\n  lock() {\n    this.locked = true;\n  }\n  unlock() {\n    this.locked = false;\n  }\n  initCanvasFPSObserver(fps, win, blockClass, blockSelector, options) {\n    const canvasContextReset = initCanvasContextObserver(\n      win,\n      blockClass,\n      blockSelector,\n      true\n    );\n    const snapshotInProgressMap = /* @__PURE__ */ new Map();\n    const worker = new WorkerWrapper();\n    worker.onmessage = (e2) => {\n      const { id } = e2.data;\n      snapshotInProgressMap.set(id, false);\n      if (!(\"base64\" in e2.data)) return;\n      const { base64, type, width, height } = e2.data;\n      this.mutationCb({\n        id,\n        type: CanvasContext[\"2D\"],\n        commands: [\n          {\n            property: \"clearRect\",\n            // wipe canvas\n            args: [0, 0, width, height]\n          },\n          {\n            property: \"drawImage\",\n            // draws (semi-transparent) image\n            args: [\n              {\n                rr_type: \"ImageBitmap\",\n                args: [\n                  {\n                    rr_type: \"Blob\",\n                    data: [{ rr_type: \"ArrayBuffer\", base64 }],\n                    type\n                  }\n                ]\n              },\n              0,\n              0\n            ]\n          }\n        ]\n      });\n    };\n    const timeBetweenSnapshots = 1e3 / fps;\n    let lastSnapshotTime = 0;\n    let rafId;\n    const getCanvas = () => {\n      const matchedCanvas = [];\n      const searchCanvas = (haystack) => {\n        haystack.querySelectorAll(\"canvas\").forEach((canvas) => {\n          if (!isBlocked(canvas, blockClass, blockSelector, true)) {\n            matchedCanvas.push(canvas);\n          }\n        });\n        haystack.querySelectorAll(\"*\").forEach((elem) => {\n          if (elem.shadowRoot) {\n            searchCanvas(elem.shadowRoot);\n          }\n        });\n      };\n      searchCanvas(win.document);\n      return matchedCanvas;\n    };\n    const takeCanvasSnapshots = (timestamp) => {\n      if (lastSnapshotTime && timestamp - lastSnapshotTime < timeBetweenSnapshots) {\n        rafId = requestAnimationFrame(takeCanvasSnapshots);\n        return;\n      }\n      lastSnapshotTime = timestamp;\n      getCanvas().forEach(async (canvas) => {\n        var _a2;\n        const id = this.mirror.getId(canvas);\n        if (snapshotInProgressMap.get(id)) return;\n        if (canvas.width === 0 || canvas.height === 0) return;\n        snapshotInProgressMap.set(id, true);\n        if ([\"webgl\", \"webgl2\"].includes(canvas.__context)) {\n          const context = canvas.getContext(canvas.__context);\n          if (((_a2 = context == null ? void 0 : context.getContextAttributes()) == null ? void 0 : _a2.preserveDrawingBuffer) === false) {\n            context.clear(context.COLOR_BUFFER_BIT);\n          }\n        }\n        const width = canvas.clientWidth || canvas.width;\n        const height = canvas.clientHeight || canvas.height;\n        const bitmap = await createImageBitmap(canvas, {\n          resizeWidth: width,\n          resizeHeight: height\n        });\n        worker.postMessage(\n          {\n            id,\n            bitmap,\n            width,\n            height,\n            dataURLOptions: options.dataURLOptions\n          },\n          [bitmap]\n        );\n      });\n      rafId = requestAnimationFrame(takeCanvasSnapshots);\n    };\n    rafId = requestAnimationFrame(takeCanvasSnapshots);\n    this.resetObservers = () => {\n      canvasContextReset();\n      cancelAnimationFrame(rafId);\n    };\n  }\n  initCanvasMutationObserver(win, blockClass, blockSelector, dataURLOptions) {\n    this.startRAFTimestamping();\n    this.startPendingCanvasMutationFlusher();\n    const canvasContextReset = initCanvasContextObserver(\n      win,\n      blockClass,\n      blockSelector,\n      false\n    );\n    const canvas2DReset = initCanvas2DMutationObserver(\n      this.processMutation.bind(this),\n      win,\n      blockClass,\n      blockSelector,\n      dataURLOptions\n    );\n    const canvasWebGL1and2Reset = initCanvasWebGLMutationObserver(\n      this.processMutation.bind(this),\n      win,\n      blockClass,\n      blockSelector,\n      dataURLOptions\n    );\n    this.resetObservers = () => {\n      canvasContextReset();\n      canvas2DReset();\n      canvasWebGL1and2Reset();\n    };\n  }\n  startPendingCanvasMutationFlusher() {\n    this.rafIdFlush = requestAnimationFrame(\n      () => this.flushPendingCanvasMutations()\n    );\n  }\n  startRAFTimestamping() {\n    const setLatestRAFTimestamp = (timestamp) => {\n      this.rafStamps.latestId = timestamp;\n      this.rafIdTimestamp = requestAnimationFrame(setLatestRAFTimestamp);\n    };\n    this.rafIdTimestamp = requestAnimationFrame(setLatestRAFTimestamp);\n  }\n  flushPendingCanvasMutations() {\n    this.pendingCanvasMutations.forEach(\n      (_values, canvas) => {\n        const id = this.mirror.getId(canvas);\n        this.flushPendingCanvasMutationFor(canvas, id);\n      }\n    );\n    this.rafIdFlush = requestAnimationFrame(\n      () => this.flushPendingCanvasMutations()\n    );\n  }\n  flushPendingCanvasMutationFor(canvas, id) {\n    if (this.frozen || this.locked) {\n      return;\n    }\n    const valuesWithType = this.pendingCanvasMutations.get(canvas);\n    if (!valuesWithType || id === -1) return;\n    const values = valuesWithType.map((value) => {\n      const { type: type2, ...rest } = value;\n      return rest;\n    });\n    const { type } = valuesWithType[0];\n    this.mutationCb({ id, type, commands: values });\n    this.pendingCanvasMutations.delete(canvas);\n  }\n}\nclass StylesheetManager {\n  constructor(options) {\n    __publicField(this, \"trackedLinkElements\", /* @__PURE__ */ new WeakSet());\n    __publicField(this, \"mutationCb\");\n    __publicField(this, \"adoptedStyleSheetCb\");\n    __publicField(this, \"styleMirror\", new StyleSheetMirror());\n    this.mutationCb = options.mutationCb;\n    this.adoptedStyleSheetCb = options.adoptedStyleSheetCb;\n  }\n  attachLinkElement(linkEl, childSn) {\n    if (\"_cssText\" in childSn.attributes)\n      this.mutationCb({\n        adds: [],\n        removes: [],\n        texts: [],\n        attributes: [\n          {\n            id: childSn.id,\n            attributes: childSn.attributes\n          }\n        ]\n      });\n    this.trackLinkElement(linkEl);\n  }\n  trackLinkElement(linkEl) {\n    if (this.trackedLinkElements.has(linkEl)) return;\n    this.trackedLinkElements.add(linkEl);\n    this.trackStylesheetInLinkElement(linkEl);\n  }\n  adoptStyleSheets(sheets, hostId) {\n    if (sheets.length === 0) return;\n    const adoptedStyleSheetData = {\n      id: hostId,\n      styleIds: []\n    };\n    const styles = [];\n    for (const sheet of sheets) {\n      let styleId;\n      if (!this.styleMirror.has(sheet)) {\n        styleId = this.styleMirror.add(sheet);\n        styles.push({\n          styleId,\n          rules: Array.from(sheet.rules || CSSRule, (r2, index2) => ({\n            rule: stringifyRule(r2, sheet.href),\n            index: index2\n          }))\n        });\n      } else styleId = this.styleMirror.getId(sheet);\n      adoptedStyleSheetData.styleIds.push(styleId);\n    }\n    if (styles.length > 0) adoptedStyleSheetData.styles = styles;\n    this.adoptedStyleSheetCb(adoptedStyleSheetData);\n  }\n  reset() {\n    this.styleMirror.reset();\n    this.trackedLinkElements = /* @__PURE__ */ new WeakSet();\n  }\n  // TODO: take snapshot on stylesheet reload by applying event listener\n  trackStylesheetInLinkElement(_linkEl) {\n  }\n}\nclass ProcessedNodeManager {\n  constructor() {\n    __publicField(this, \"nodeMap\", /* @__PURE__ */ new WeakMap());\n    __publicField(this, \"active\", false);\n  }\n  inOtherBuffer(node2, thisBuffer) {\n    const buffers = this.nodeMap.get(node2);\n    return buffers && Array.from(buffers).some((buffer) => buffer !== thisBuffer);\n  }\n  add(node2, buffer) {\n    if (!this.active) {\n      this.active = true;\n      requestAnimationFrame(() => {\n        this.nodeMap = /* @__PURE__ */ new WeakMap();\n        this.active = false;\n      });\n    }\n    this.nodeMap.set(node2, (this.nodeMap.get(node2) || /* @__PURE__ */ new Set()).add(buffer));\n  }\n  destroy() {\n  }\n}\nlet wrappedEmit;\nlet takeFullSnapshot$1;\nlet canvasManager;\nlet recording = false;\ntry {\n  if (Array.from([1], (x) => x * 2)[0] !== 2) {\n    const cleanFrame = document.createElement(\"iframe\");\n    document.body.appendChild(cleanFrame);\n    Array.from = ((_a = cleanFrame.contentWindow) == null ? void 0 : _a.Array.from) || Array.from;\n    document.body.removeChild(cleanFrame);\n  }\n} catch (err) {\n  console.debug(\"Unable to override Array.from\", err);\n}\nconst mirror = createMirror$2();\nfunction record(options = {}) {\n  const {\n    emit,\n    checkoutEveryNms,\n    checkoutEveryNth,\n    blockClass = \"rr-block\",\n    blockSelector = null,\n    ignoreClass = \"rr-ignore\",\n    ignoreSelector = null,\n    maskTextClass = \"rr-mask\",\n    maskTextSelector = null,\n    inlineStylesheet = true,\n    maskAllInputs,\n    maskInputOptions: _maskInputOptions,\n    slimDOMOptions: _slimDOMOptions,\n    maskInputFn,\n    maskTextFn,\n    hooks,\n    packFn,\n    sampling = {},\n    dataURLOptions: _dataURLOptions = {},\n    mousemoveWait,\n    recordDOM = true,\n    recordCanvas = false,\n    recordCrossOriginIframes = false,\n    recordAfter = options.recordAfter === \"DOMContentLoaded\" ? options.recordAfter : \"load\",\n    userTriggeredOnInput = false,\n    collectFonts = false,\n    inlineImages = false,\n    plugins,\n    keepIframeSrcFn = () => false,\n    ignoreCSSAttributes = /* @__PURE__ */ new Set([]),\n    errorHandler: errorHandler2\n  } = options;\n  registerErrorHandler(errorHandler2);\n  const dataURLOptions = {\n    type: \"image/webp\",\n    quality: 0.4,\n    maxBase64ImageLength: 1048576,\n    ..._dataURLOptions\n  };\n  const inEmittingFrame = recordCrossOriginIframes ? window.parent === window : true;\n  let passEmitsToParent = false;\n  if (!inEmittingFrame) {\n    try {\n      if (window.parent.document) {\n        passEmitsToParent = false;\n      }\n    } catch (e2) {\n      passEmitsToParent = true;\n    }\n  }\n  if (inEmittingFrame && !emit) {\n    throw new Error(\"emit function is required\");\n  }\n  if (!inEmittingFrame && !passEmitsToParent) {\n    return () => {\n    };\n  }\n  if (mousemoveWait !== void 0 && sampling.mousemove === void 0) {\n    sampling.mousemove = mousemoveWait;\n  }\n  mirror.reset();\n  const maskInputOptions = maskAllInputs === true ? {\n    color: true,\n    date: true,\n    \"datetime-local\": true,\n    email: true,\n    month: true,\n    number: true,\n    range: true,\n    search: true,\n    tel: true,\n    text: true,\n    time: true,\n    url: true,\n    week: true,\n    textarea: true,\n    select: true,\n    password: true\n  } : _maskInputOptions !== void 0 ? _maskInputOptions : { password: true };\n  const slimDOMOptions = _slimDOMOptions === true || _slimDOMOptions === \"all\" ? {\n    script: true,\n    comment: true,\n    headFavicon: true,\n    headWhitespace: true,\n    headMetaSocial: true,\n    headMetaRobots: true,\n    headMetaHttpEquiv: true,\n    headMetaVerification: true,\n    // the following are off for slimDOMOptions === true,\n    // as they destroy some (hidden) info:\n    headMetaAuthorship: _slimDOMOptions === \"all\",\n    headMetaDescKeywords: _slimDOMOptions === \"all\",\n    headTitleMutations: _slimDOMOptions === \"all\"\n  } : _slimDOMOptions ? _slimDOMOptions : {};\n  polyfill$1();\n  let lastFullSnapshotEvent;\n  let incrementalSnapshotCount = 0;\n  const eventProcessor = (e2) => {\n    for (const plugin of plugins || []) {\n      if (plugin.eventProcessor) {\n        e2 = plugin.eventProcessor(e2);\n      }\n    }\n    if (packFn && // Disable packing events which will be emitted to parent frames.\n    !passEmitsToParent) {\n      e2 = packFn(e2);\n    }\n    return e2;\n  };\n  wrappedEmit = (r2, isCheckout) => {\n    var _a2;\n    const e2 = r2;\n    e2.timestamp = nowTimestamp();\n    if (((_a2 = mutationBuffers[0]) == null ? void 0 : _a2.isFrozen()) && e2.type !== EventType.FullSnapshot && !(e2.type === EventType.IncrementalSnapshot && e2.data.source === IncrementalSource.Mutation)) {\n      mutationBuffers.forEach((buf) => buf.unfreeze());\n    }\n    if (inEmittingFrame) {\n      emit == null ? void 0 : emit(eventProcessor(e2), isCheckout);\n    } else if (passEmitsToParent) {\n      const message = {\n        type: \"rrweb\",\n        event: eventProcessor(e2),\n        origin: window.location.origin,\n        isCheckout\n      };\n      window.parent.postMessage(message, \"*\");\n    }\n    if (e2.type === EventType.FullSnapshot) {\n      lastFullSnapshotEvent = e2;\n      incrementalSnapshotCount = 0;\n    } else if (e2.type === EventType.IncrementalSnapshot) {\n      if (e2.data.source === IncrementalSource.Mutation && e2.data.isAttachIframe) {\n        return;\n      }\n      incrementalSnapshotCount++;\n      const exceedCount = checkoutEveryNth && incrementalSnapshotCount >= checkoutEveryNth;\n      const exceedTime = checkoutEveryNms && e2.timestamp - lastFullSnapshotEvent.timestamp > checkoutEveryNms;\n      if (exceedCount || exceedTime) {\n        takeFullSnapshot$1(true);\n      }\n    }\n  };\n  const wrappedMutationEmit = (m) => {\n    if (recordCrossOriginIframes && m.removes && m.removes.length > 0) {\n      const addedIds = m.adds.length > 0 ? new Set(m.adds.map((add) => add.node.id)) : null;\n      m.removes.forEach(({ id }) => {\n        if (!addedIds || !addedIds.has(id)) {\n          iframeManager.removeIframeById(id);\n        }\n      });\n    }\n    wrappedEmit({\n      type: EventType.IncrementalSnapshot,\n      data: {\n        source: IncrementalSource.Mutation,\n        ...m\n      }\n    });\n  };\n  const wrappedScrollEmit = (p) => wrappedEmit({\n    type: EventType.IncrementalSnapshot,\n    data: {\n      source: IncrementalSource.Scroll,\n      ...p\n    }\n  });\n  const wrappedCanvasMutationEmit = (p) => wrappedEmit({\n    type: EventType.IncrementalSnapshot,\n    data: {\n      source: IncrementalSource.CanvasMutation,\n      ...p\n    }\n  });\n  const wrappedAdoptedStyleSheetEmit = (a2) => wrappedEmit({\n    type: EventType.IncrementalSnapshot,\n    data: {\n      source: IncrementalSource.AdoptedStyleSheet,\n      ...a2\n    }\n  });\n  const stylesheetManager = new StylesheetManager({\n    mutationCb: wrappedMutationEmit,\n    adoptedStyleSheetCb: wrappedAdoptedStyleSheetEmit\n  });\n  const iframeManager = new IframeManager({\n    mirror,\n    mutationCb: wrappedMutationEmit,\n    stylesheetManager,\n    recordCrossOriginIframes,\n    wrappedEmit\n  });\n  for (const plugin of plugins || []) {\n    if (plugin.getMirror)\n      plugin.getMirror({\n        nodeMirror: mirror,\n        crossOriginIframeMirror: iframeManager.crossOriginIframeMirror,\n        crossOriginIframeStyleMirror: iframeManager.crossOriginIframeStyleMirror\n      });\n  }\n  const processedNodeManager = new ProcessedNodeManager();\n  canvasManager = new CanvasManager({\n    recordCanvas,\n    mutationCb: wrappedCanvasMutationEmit,\n    win: window,\n    blockClass,\n    blockSelector,\n    mirror,\n    sampling: sampling.canvas,\n    dataURLOptions\n  });\n  const shadowDomManager = new ShadowDomManager({\n    mutationCb: wrappedMutationEmit,\n    scrollCb: wrappedScrollEmit,\n    bypassOptions: {\n      blockClass,\n      blockSelector,\n      maskTextClass,\n      maskTextSelector,\n      inlineStylesheet,\n      maskInputOptions,\n      dataURLOptions,\n      maskTextFn,\n      maskInputFn,\n      recordCanvas,\n      inlineImages,\n      sampling,\n      slimDOMOptions,\n      iframeManager,\n      stylesheetManager,\n      canvasManager,\n      keepIframeSrcFn,\n      processedNodeManager\n    },\n    mirror\n  });\n  takeFullSnapshot$1 = (isCheckout = false) => {\n    if (!recordDOM) {\n      return;\n    }\n    wrappedEmit(\n      {\n        type: EventType.Meta,\n        data: {\n          href: window.location.href,\n          width: getWindowWidth(),\n          height: getWindowHeight()\n        }\n      },\n      isCheckout\n    );\n    stylesheetManager.reset();\n    shadowDomManager.init();\n    mutationBuffers.forEach((buf) => buf.lock());\n    const node2 = snapshot(document, {\n      mirror,\n      blockClass,\n      blockSelector,\n      maskTextClass,\n      maskTextSelector,\n      inlineStylesheet,\n      maskAllInputs: maskInputOptions,\n      maskTextFn,\n      maskInputFn,\n      slimDOM: slimDOMOptions,\n      dataURLOptions,\n      recordCanvas,\n      inlineImages,\n      onSerialize: (n2) => {\n        if (isSerializedIframe(n2, mirror)) {\n          iframeManager.addIframe(n2);\n        }\n        if (isSerializedStylesheet(n2, mirror)) {\n          stylesheetManager.trackLinkElement(n2);\n        }\n        if (hasShadowRoot(n2)) {\n          shadowDomManager.addShadowRoot(index.shadowRoot(n2), document);\n        }\n      },\n      onIframeLoad: (iframe, childSn) => {\n        iframeManager.attachIframe(iframe, childSn);\n        shadowDomManager.observeAttachShadow(iframe);\n      },\n      onStylesheetLoad: (linkEl, childSn) => {\n        stylesheetManager.attachLinkElement(linkEl, childSn);\n      },\n      keepIframeSrcFn\n    });\n    if (!node2) {\n      return console.warn(\"Failed to snapshot the document\");\n    }\n    wrappedEmit(\n      {\n        type: EventType.FullSnapshot,\n        data: {\n          node: node2,\n          initialOffset: getWindowScroll(window)\n        }\n      },\n      isCheckout\n    );\n    mutationBuffers.forEach((buf) => buf.unlock());\n    if (recordCrossOriginIframes) {\n      iframeManager.reattachIframes();\n    }\n    if (document.adoptedStyleSheets && document.adoptedStyleSheets.length > 0)\n      stylesheetManager.adoptStyleSheets(\n        document.adoptedStyleSheets,\n        mirror.getId(document)\n      );\n  };\n  try {\n    const handlers = [];\n    const observe = (doc) => {\n      var _a2;\n      return callbackWrapper(initObservers)(\n        {\n          mutationCb: wrappedMutationEmit,\n          mousemoveCb: (positions, source) => wrappedEmit({\n            type: EventType.IncrementalSnapshot,\n            data: {\n              source,\n              positions\n            }\n          }),\n          mouseInteractionCb: (d) => wrappedEmit({\n            type: EventType.IncrementalSnapshot,\n            data: {\n              source: IncrementalSource.MouseInteraction,\n              ...d\n            }\n          }),\n          scrollCb: wrappedScrollEmit,\n          viewportResizeCb: (d) => wrappedEmit({\n            type: EventType.IncrementalSnapshot,\n            data: {\n              source: IncrementalSource.ViewportResize,\n              ...d\n            }\n          }),\n          inputCb: (v2) => wrappedEmit({\n            type: EventType.IncrementalSnapshot,\n            data: {\n              source: IncrementalSource.Input,\n              ...v2\n            }\n          }),\n          mediaInteractionCb: (p) => wrappedEmit({\n            type: EventType.IncrementalSnapshot,\n            data: {\n              source: IncrementalSource.MediaInteraction,\n              ...p\n            }\n          }),\n          styleSheetRuleCb: (r2) => wrappedEmit({\n            type: EventType.IncrementalSnapshot,\n            data: {\n              source: IncrementalSource.StyleSheetRule,\n              ...r2\n            }\n          }),\n          styleDeclarationCb: (r2) => wrappedEmit({\n            type: EventType.IncrementalSnapshot,\n            data: {\n              source: IncrementalSource.StyleDeclaration,\n              ...r2\n            }\n          }),\n          canvasMutationCb: wrappedCanvasMutationEmit,\n          fontCb: (p) => wrappedEmit({\n            type: EventType.IncrementalSnapshot,\n            data: {\n              source: IncrementalSource.Font,\n              ...p\n            }\n          }),\n          selectionCb: (p) => {\n            wrappedEmit({\n              type: EventType.IncrementalSnapshot,\n              data: {\n                source: IncrementalSource.Selection,\n                ...p\n              }\n            });\n          },\n          customElementCb: (c2) => {\n            wrappedEmit({\n              type: EventType.IncrementalSnapshot,\n              data: {\n                source: IncrementalSource.CustomElement,\n                ...c2\n              }\n            });\n          },\n          blockClass,\n          ignoreClass,\n          ignoreSelector,\n          maskTextClass,\n          maskTextSelector,\n          maskInputOptions,\n          inlineStylesheet,\n          sampling,\n          recordDOM,\n          recordCanvas,\n          inlineImages,\n          userTriggeredOnInput,\n          collectFonts,\n          doc,\n          maskInputFn,\n          maskTextFn,\n          keepIframeSrcFn,\n          blockSelector,\n          slimDOMOptions,\n          dataURLOptions,\n          mirror,\n          iframeManager,\n          stylesheetManager,\n          shadowDomManager,\n          processedNodeManager,\n          canvasManager,\n          ignoreCSSAttributes,\n          plugins: ((_a2 = plugins == null ? void 0 : plugins.filter((p) => p.observer)) == null ? void 0 : _a2.map((p) => ({\n            observer: p.observer,\n            options: p.options,\n            callback: (payload) => wrappedEmit({\n              type: EventType.Plugin,\n              data: {\n                plugin: p.name,\n                payload\n              }\n            })\n          }))) || []\n        },\n        hooks\n      );\n    };\n    const loadListener = (iframeEl) => {\n      try {\n        handlers.push(observe(iframeEl.contentDocument));\n      } catch (error) {\n        console.warn(error);\n      }\n    };\n    iframeManager.addLoadListener(loadListener);\n    const init = () => {\n      takeFullSnapshot$1();\n      handlers.push(observe(document));\n      recording = true;\n    };\n    if (document.readyState === \"interactive\" || document.readyState === \"complete\") {\n      init();\n    } else {\n      handlers.push(\n        on(\"DOMContentLoaded\", () => {\n          wrappedEmit({\n            type: EventType.DomContentLoaded,\n            data: {}\n          });\n          if (recordAfter === \"DOMContentLoaded\") init();\n        })\n      );\n      handlers.push(\n        on(\n          \"load\",\n          () => {\n            wrappedEmit({\n              type: EventType.Load,\n              data: {}\n            });\n            if (recordAfter === \"load\") init();\n          },\n          window\n        )\n      );\n    }\n    return () => {\n      handlers.forEach((h) => h());\n      processedNodeManager.destroy();\n      iframeManager.removeLoadListener();\n      iframeManager.destroy();\n      mirror.reset();\n      recording = false;\n      unregisterErrorHandler();\n    };\n  } catch (error) {\n    console.warn(error);\n  }\n}\nrecord.addCustomEvent = (tag, payload) => {\n  if (!recording) {\n    throw new Error(\"please add custom event after start recording\");\n  }\n  wrappedEmit({\n    type: EventType.Custom,\n    data: {\n      tag,\n      payload\n    }\n  });\n};\nrecord.freezePage = () => {\n  mutationBuffers.forEach((buf) => buf.freeze());\n};\nrecord.takeFullSnapshot = (isCheckout) => {\n  if (!recording) {\n    throw new Error(\"please take full snapshot after start recording\");\n  }\n  takeFullSnapshot$1(isCheckout);\n};\nrecord.mirror = mirror;\nvar n;\n!(function(t2) {\n  t2[t2.NotStarted = 0] = \"NotStarted\", t2[t2.Running = 1] = \"Running\", t2[t2.Stopped = 2] = \"Stopped\";\n})(n || (n = {}));\nconst { addCustomEvent } = record;\nconst { freezePage } = record;\nconst { takeFullSnapshot } = record;\nexport {\n  record,\n  resetMaxDepthState,\n  wasMaxDepthReached\n};\n//# sourceMappingURL=rrweb-record.js.map\n","var __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nfunction patch(source, name, replacement) {\n  try {\n    if (!(name in source)) {\n      return () => {\n      };\n    }\n    const original = source[name];\n    const wrapped = replacement(original);\n    if (typeof wrapped === \"function\") {\n      wrapped.prototype = wrapped.prototype || {};\n      Object.defineProperties(wrapped, {\n        __rrweb_original__: {\n          enumerable: false,\n          value: original\n        }\n      });\n    }\n    source[name] = wrapped;\n    return () => {\n      source[name] = original;\n    };\n  } catch {\n    return () => {\n    };\n  }\n}\nclass StackFrame {\n  constructor(obj) {\n    __publicField(this, \"fileName\");\n    __publicField(this, \"functionName\");\n    __publicField(this, \"lineNumber\");\n    __publicField(this, \"columnNumber\");\n    this.fileName = obj.fileName || \"\";\n    this.functionName = obj.functionName || \"\";\n    this.lineNumber = obj.lineNumber;\n    this.columnNumber = obj.columnNumber;\n  }\n  toString() {\n    const lineNumber = this.lineNumber || \"\";\n    const columnNumber = this.columnNumber || \"\";\n    if (this.functionName)\n      return `${this.functionName} (${this.fileName}:${lineNumber}:${columnNumber})`;\n    return `${this.fileName}:${lineNumber}:${columnNumber}`;\n  }\n}\nconst FIREFOX_SAFARI_STACK_REGEXP = /(^|@)\\S+:\\d+/;\nconst CHROME_IE_STACK_REGEXP = /^\\s*at .*(\\S+:\\d+|\\(native\\))/m;\nconst SAFARI_NATIVE_CODE_REGEXP = /^(eval@)?(\\[native code])?$/;\nconst ErrorStackParser = {\n  /**\n   * Given an Error object, extract the most information from it.\n   */\n  parse: function(error) {\n    if (!error) {\n      return [];\n    }\n    if (\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      typeof error.stacktrace !== \"undefined\" || // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      typeof error[\"opera#sourceloc\"] !== \"undefined\"\n    ) {\n      return this.parseOpera(\n        error\n      );\n    } else if (error.stack && error.stack.match(CHROME_IE_STACK_REGEXP)) {\n      return this.parseV8OrIE(error);\n    } else if (error.stack) {\n      return this.parseFFOrSafari(error);\n    } else {\n      return [];\n    }\n  },\n  // Separate line and column numbers from a string of the form: (URI:Line:Column)\n  extractLocation: function(urlLike) {\n    if (urlLike.indexOf(\":\") === -1) {\n      return [urlLike];\n    }\n    const regExp = /(.+?)(?::(\\d+))?(?::(\\d+))?$/;\n    const parts = regExp.exec(urlLike.replace(/[()]/g, \"\"));\n    if (!parts) throw new Error(`Cannot parse given url: ${urlLike}`);\n    return [parts[1], parts[2] || void 0, parts[3] || void 0];\n  },\n  parseV8OrIE: function(error) {\n    const filtered = error.stack.split(\"\\n\").filter(function(line) {\n      return !!line.match(CHROME_IE_STACK_REGEXP);\n    }, this);\n    return filtered.map(function(line) {\n      if (line.indexOf(\"(eval \") > -1) {\n        line = line.replace(/eval code/g, \"eval\").replace(/(\\(eval at [^()]*)|(\\),.*$)/g, \"\");\n      }\n      let sanitizedLine = line.replace(/^\\s+/, \"\").replace(/\\(eval code/g, \"(\");\n      const location = sanitizedLine.match(/ (\\((.+):(\\d+):(\\d+)\\)$)/);\n      sanitizedLine = location ? sanitizedLine.replace(location[0], \"\") : sanitizedLine;\n      const tokens = sanitizedLine.split(/\\s+/).slice(1);\n      const locationParts = this.extractLocation(\n        location ? location[1] : tokens.pop()\n      );\n      const functionName = tokens.join(\" \") || void 0;\n      const fileName = [\"eval\", \"<anonymous>\"].indexOf(locationParts[0]) > -1 ? void 0 : locationParts[0];\n      return new StackFrame({\n        functionName,\n        fileName,\n        lineNumber: locationParts[1],\n        columnNumber: locationParts[2]\n      });\n    }, this);\n  },\n  parseFFOrSafari: function(error) {\n    const filtered = error.stack.split(\"\\n\").filter(function(line) {\n      return !line.match(SAFARI_NATIVE_CODE_REGEXP);\n    }, this);\n    return filtered.map(function(line) {\n      if (line.indexOf(\" > eval\") > -1) {\n        line = line.replace(\n          / line (\\d+)(?: > eval line \\d+)* > eval:\\d+:\\d+/g,\n          \":$1\"\n        );\n      }\n      if (line.indexOf(\"@\") === -1 && line.indexOf(\":\") === -1) {\n        return new StackFrame({\n          functionName: line\n        });\n      } else {\n        const functionNameRegex = /((.*\".+\"[^@]*)?[^@]*)(?:@)/;\n        const matches = line.match(functionNameRegex);\n        const functionName = matches && matches[1] ? matches[1] : void 0;\n        const locationParts = this.extractLocation(\n          line.replace(functionNameRegex, \"\")\n        );\n        return new StackFrame({\n          functionName,\n          fileName: locationParts[0],\n          lineNumber: locationParts[1],\n          columnNumber: locationParts[2]\n        });\n      }\n    }, this);\n  },\n  parseOpera: function(e) {\n    if (!e.stacktrace || e.message.indexOf(\"\\n\") > -1 && e.message.split(\"\\n\").length > e.stacktrace.split(\"\\n\").length) {\n      return this.parseOpera9(e);\n    } else if (!e.stack) {\n      return this.parseOpera10(e);\n    } else {\n      return this.parseOpera11(e);\n    }\n  },\n  parseOpera9: function(e) {\n    const lineRE = /Line (\\d+).*script (?:in )?(\\S+)/i;\n    const lines = e.message.split(\"\\n\");\n    const result = [];\n    for (let i = 2, len = lines.length; i < len; i += 2) {\n      const match = lineRE.exec(lines[i]);\n      if (match) {\n        result.push(\n          new StackFrame({\n            fileName: match[2],\n            lineNumber: parseFloat(match[1])\n          })\n        );\n      }\n    }\n    return result;\n  },\n  parseOpera10: function(e) {\n    const lineRE = /Line (\\d+).*script (?:in )?(\\S+)(?:: In function (\\S+))?$/i;\n    const lines = e.stacktrace.split(\"\\n\");\n    const result = [];\n    for (let i = 0, len = lines.length; i < len; i += 2) {\n      const match = lineRE.exec(lines[i]);\n      if (match) {\n        result.push(\n          new StackFrame({\n            functionName: match[3] || void 0,\n            fileName: match[2],\n            lineNumber: parseFloat(match[1])\n          })\n        );\n      }\n    }\n    return result;\n  },\n  // Opera 10.65+ Error.stack very similar to FF/Safari\n  parseOpera11: function(error) {\n    const filtered = error.stack.split(\"\\n\").filter(function(line) {\n      return !!line.match(FIREFOX_SAFARI_STACK_REGEXP) && !line.match(/^Error created at/);\n    }, this);\n    return filtered.map(function(line) {\n      const tokens = line.split(\"@\");\n      const locationParts = this.extractLocation(tokens.pop());\n      const functionCall = tokens.shift() || \"\";\n      const functionName = functionCall.replace(/<anonymous function(: (\\w+))?>/, \"$2\").replace(/\\([^)]*\\)/g, \"\") || void 0;\n      return new StackFrame({\n        functionName,\n        fileName: locationParts[0],\n        lineNumber: locationParts[1],\n        columnNumber: locationParts[2]\n      });\n    }, this);\n  }\n};\nfunction pathToSelector(node) {\n  if (!node || !node.outerHTML) {\n    return \"\";\n  }\n  let path = \"\";\n  while (node.parentElement) {\n    let name = node.localName;\n    if (!name) {\n      break;\n    }\n    name = name.toLowerCase();\n    const parent = node.parentElement;\n    const domSiblings = [];\n    if (parent.children && parent.children.length > 0) {\n      for (let i = 0; i < parent.children.length; i++) {\n        const sibling = parent.children[i];\n        if (sibling.localName && sibling.localName.toLowerCase) {\n          if (sibling.localName.toLowerCase() === name) {\n            domSiblings.push(sibling);\n          }\n        }\n      }\n    }\n    if (domSiblings.length > 1) {\n      name += `:eq(${domSiblings.indexOf(node)})`;\n    }\n    path = name + (path ? \">\" + path : \"\");\n    node = parent;\n  }\n  return path;\n}\nfunction isArray(obj) {\n  return Array.isArray(obj);\n}\nfunction isObject(obj) {\n  return typeof obj === \"object\" && obj !== null && !isArray(obj);\n}\nfunction isObjTooDeep(obj, limit) {\n  if (limit === 0) {\n    return true;\n  }\n  const keys = Object.keys(obj);\n  for (const key of keys) {\n    if (isObject(obj[key]) && isObjTooDeep(obj[key], limit - 1)) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction stringify(obj, stringifyOptions) {\n  const options = {\n    numOfKeysLimit: 50,\n    depthOfLimit: 4\n  };\n  Object.assign(options, stringifyOptions);\n  const stack = [];\n  const keys = [];\n  return JSON.stringify(\n    obj,\n    function(key, value) {\n      if (stack.length > 0) {\n        const thisPos = stack.indexOf(this);\n        ~thisPos ? stack.splice(thisPos + 1) : stack.push(this);\n        ~thisPos ? keys.splice(thisPos, Infinity, key) : keys.push(key);\n        if (~stack.indexOf(value)) {\n          if (stack[0] === value) {\n            value = \"[Circular ~]\";\n          } else {\n            value = \"[Circular ~.\" + keys.slice(0, stack.indexOf(value)).join(\".\") + \"]\";\n          }\n        }\n      } else {\n        stack.push(value);\n      }\n      if (value === null) return value;\n      if (value === void 0) return \"undefined\";\n      if (shouldIgnore(value)) {\n        return toString(value);\n      }\n      if (typeof value === \"bigint\") {\n        return value.toString() + \"n\";\n      }\n      if (value instanceof Event) {\n        const eventResult = {};\n        for (const eventKey in value) {\n          const eventValue = value[eventKey];\n          if (isArray(eventValue)) {\n            eventResult[eventKey] = pathToSelector(\n              eventValue.length ? eventValue[0] : null\n            );\n          } else {\n            eventResult[eventKey] = eventValue;\n          }\n        }\n        return eventResult;\n      } else if (value instanceof Node) {\n        if (value instanceof HTMLElement) {\n          return value ? value.outerHTML : \"\";\n        }\n        return value.nodeName;\n      } else if (value instanceof Error) {\n        return value.stack ? value.stack + \"\\nEnd of stack for Error object\" : value.name + \": \" + value.message;\n      }\n      return value;\n    }\n  );\n  function shouldIgnore(_obj) {\n    if (isObject(_obj) && Object.keys(_obj).length > options.numOfKeysLimit) {\n      return true;\n    }\n    if (typeof _obj === \"function\") {\n      return true;\n    }\n    if (isObject(_obj) && isObjTooDeep(_obj, options.depthOfLimit)) {\n      return true;\n    }\n    return false;\n  }\n  function toString(_obj) {\n    let str = _obj.toString();\n    if (options.stringLengthLimit && str.length > options.stringLengthLimit) {\n      str = `${str.slice(0, options.stringLengthLimit)}...`;\n    }\n    return str;\n  }\n}\nconst defaultLogOptions = {\n  level: [\n    \"assert\",\n    \"clear\",\n    \"count\",\n    \"countReset\",\n    \"debug\",\n    \"dir\",\n    \"dirxml\",\n    \"error\",\n    \"group\",\n    \"groupCollapsed\",\n    \"groupEnd\",\n    \"info\",\n    \"log\",\n    \"table\",\n    \"time\",\n    \"timeEnd\",\n    \"timeLog\",\n    \"trace\",\n    \"warn\"\n  ],\n  lengthThreshold: 1e3,\n  logger: \"console\"\n};\nfunction initLogObserver(cb, win, options) {\n  const logOptions = options ? Object.assign({}, defaultLogOptions, options) : defaultLogOptions;\n  const loggerType = logOptions.logger;\n  if (!loggerType) {\n    return () => {\n    };\n  }\n  let logger;\n  if (typeof loggerType === \"string\") {\n    logger = win[loggerType];\n  } else {\n    logger = loggerType;\n  }\n  let logCount = 0;\n  let inStack = false;\n  const cancelHandlers = [];\n  if (logOptions.level.includes(\"error\")) {\n    const errorHandler = (event) => {\n      const message = event.message, error = event.error;\n      const trace = ErrorStackParser.parse(error).map(\n        (stackFrame) => stackFrame.toString()\n      );\n      const payload = [stringify(message, logOptions.stringifyOptions)];\n      cb({\n        level: \"error\",\n        trace,\n        payload\n      });\n    };\n    win.addEventListener(\"error\", errorHandler);\n    cancelHandlers.push(() => {\n      win.removeEventListener(\"error\", errorHandler);\n    });\n    const unhandledrejectionHandler = (event) => {\n      let error;\n      let payload;\n      if (event.reason instanceof Error) {\n        error = event.reason;\n        payload = [\n          stringify(\n            `Uncaught (in promise) ${error.name}: ${error.message}`,\n            logOptions.stringifyOptions\n          )\n        ];\n      } else {\n        error = new Error();\n        payload = [\n          stringify(\"Uncaught (in promise)\", logOptions.stringifyOptions),\n          stringify(event.reason, logOptions.stringifyOptions)\n        ];\n      }\n      const trace = ErrorStackParser.parse(error).map(\n        (stackFrame) => stackFrame.toString()\n      );\n      cb({\n        level: \"error\",\n        trace,\n        payload\n      });\n    };\n    win.addEventListener(\"unhandledrejection\", unhandledrejectionHandler);\n    cancelHandlers.push(() => {\n      win.removeEventListener(\"unhandledrejection\", unhandledrejectionHandler);\n    });\n  }\n  for (const levelType of logOptions.level) {\n    cancelHandlers.push(replace(logger, levelType));\n  }\n  return () => {\n    cancelHandlers.forEach((h) => h());\n  };\n  function replace(_logger, level) {\n    if (!_logger[level]) {\n      return () => {\n      };\n    }\n    return patch(\n      _logger,\n      level,\n      (original) => {\n        return (...args) => {\n          original.apply(this, args);\n          if (level === \"assert\" && !!args[0]) {\n            return;\n          }\n          if (inStack) {\n            return;\n          }\n          inStack = true;\n          try {\n            const trace = ErrorStackParser.parse(new Error()).map((stackFrame) => stackFrame.toString()).splice(1);\n            const argsForPayload = level === \"assert\" ? args.slice(1) : args;\n            const payload = argsForPayload.map(\n              (s) => stringify(s, logOptions.stringifyOptions)\n            );\n            logCount++;\n            if (logCount < logOptions.lengthThreshold) {\n              cb({\n                level,\n                trace,\n                payload\n              });\n            } else if (logCount === logOptions.lengthThreshold) {\n              cb({\n                level: \"warn\",\n                trace: [],\n                payload: [\n                  stringify(\"The number of log records reached the threshold.\")\n                ]\n              });\n            }\n          } catch (error) {\n            original(\"rrweb logger error:\", error, ...args);\n          } finally {\n            inStack = false;\n          }\n        };\n      }\n    );\n  }\n}\nconst PLUGIN_NAME = \"rrweb/console@1\";\nconst getRecordConsolePlugin = (options) => ({\n  name: PLUGIN_NAME,\n  observer: initLogObserver,\n  options\n});\nexport {\n  PLUGIN_NAME,\n  getRecordConsolePlugin\n};\n//# sourceMappingURL=rrweb-plugin-console-record.js.map\n","import type { PostHog } from '../posthog-core'\nimport { SessionIdManager } from '../sessionid'\nimport {\n    DeadClicksAutoCaptureConfig,\n    ExternalIntegrationKind,\n    Properties,\n    RemoteConfig,\n    SiteAppLoader,\n    SessionStartReason,\n} from '../types'\nimport type {\n    ConversationsRemoteConfig,\n    GetMessagesResponse,\n    GetTicketsOptions,\n    GetTicketsResponse,\n    MarkAsReadResponse,\n    RestoreFromTokenResponse,\n    RequestRestoreLinkResponse,\n    SendMessageResponse,\n    UserProvidedTraits,\n} from '../posthog-conversations-types'\n// only importing types here, so won't affect the bundle\n// eslint-disable-next-line posthog-js/no-external-replay-imports\nimport type { SessionRecordingStatus, TriggerType } from '../extensions/replay/external/triggerMatching'\nimport { eventWithTime } from '../extensions/replay/types/rrweb-types'\nimport { ErrorTracking } from '@posthog/core'\n\n/*\n * Global helpers to protect access to browser globals in a way that is safer for different targets\n * like DOM, SSR, Web workers etc.\n *\n * NOTE: Typically we want the \"window\" but globalThis works for both the typical browser context as\n * well as other contexts such as the web worker context. Window is still exported for any bits that explicitly require it.\n * If in doubt - export the global you need from this file and use that as an optional value. This way the code path is forced\n * to handle the case where the global is not available.\n */\n\n// eslint-disable-next-line no-restricted-globals\nconst win: (Window & typeof globalThis) | undefined = typeof window !== 'undefined' ? window : undefined\n\nexport type AssignableWindow = Window &\n    typeof globalThis & {\n        /*\n         * Main PostHog instance\n         */\n        posthog: any\n\n        /*\n         * This is our contract between (potentially) lazily loaded extensions and the SDK\n         */\n        __PosthogExtensions__?: PostHogExtensions\n\n        /**\n         * When loading remote config, we assign it to this global configuration\n         * for ease of sharing it with the rest of the SDK\n         */\n        _POSTHOG_REMOTE_CONFIG?: Record<\n            string,\n            {\n                config: RemoteConfig\n                siteApps: SiteAppLoader[]\n            }\n        >\n\n        /**\n         * If this is set on the window, our logger will log to the console\n         * for ease of debugging. Used for testing purposes only.\n         *\n         * @see {Config.DEBUG} from config.ts\n         */\n        POSTHOG_DEBUG: any\n\n        // Exposed by the browser\n        doNotTrack: any\n\n        // See entrypoints/customizations.full.ts\n        posthogCustomizations: any\n\n        /**\n         * This is a legacy way to expose these functions, but we still need to support it for backwards compatibility\n         * Can be removed once we drop support for 1.161.1\n         *\n         * See entrypoints/exception-autocapture.ts\n         *\n         * @deprecated use `__PosthogExtensions__.errorWrappingFunctions` instead\n         */\n        posthogErrorWrappingFunctions: any\n\n        /**\n         * This is a legacy way to expose these functions, but we still need to support it for backwards compatibility\n         * Can be removed once we drop support for 1.161.1\n         *\n         * See entrypoints/posthog-recorder.ts\n         *\n         * @deprecated use `__PosthogExtensions__.rrweb` instead\n         */\n        rrweb: any\n\n        /**\n         * This is a legacy way to expose these functions, but we still need to support it for backwards compatibility\n         * Can be removed once we drop support for 1.161.1\n         *\n         * See entrypoints/posthog-recorder.ts\n         *\n         * @deprecated use `__PosthogExtensions__.rrwebConsoleRecord` instead\n         */\n        rrwebConsoleRecord: any\n\n        /**\n         * This is a legacy way to expose these functions, but we still need to support it for backwards compatibility\n         * Can be removed once we drop support for 1.161.1\n         *\n         * See entrypoints/posthog-recorder.ts\n         *\n         * @deprecated use `__PosthogExtensions__.getRecordNetworkPlugin` instead\n         */\n        getRecordNetworkPlugin: any\n\n        /**\n         * This is a legacy way to expose these functions, but we still need to support it for backwards compatibility\n         * Can be removed once we drop support for 1.161.1\n         *\n         * See entrypoints/web-vitals.ts\n         *\n         * @deprecated use `__PosthogExtensions__.postHogWebVitalsCallbacks` instead\n         */\n        postHogWebVitalsCallbacks: any\n\n        /**\n         * This is a legacy way to expose these functions, but we still need to support it for backwards compatibility\n         * Can be removed once we drop support for 1.161.1\n         *\n         * See entrypoints/tracing-headers.ts\n         *\n         * @deprecated use `__PosthogExtensions__.postHogTracingHeadersPatchFns` instead\n         */\n        postHogTracingHeadersPatchFns: any\n\n        /**\n         * This is a legacy way to expose these functions, but we still need to support it for backwards compatibility\n         * Can be removed once we drop support for 1.161.1\n         *\n         * See entrypoints/surveys.ts\n         *\n         * @deprecated use `__PosthogExtensions__.generateSurveys` instead\n         */\n        extendPostHogWithSurveys: any\n\n        /*\n         * These are used to handle our toolbar state.\n         * @see {Toolbar} from extensions/toolbar.ts\n         */\n        ph_load_toolbar: any\n        ph_load_editor: any\n        ph_toolbar_state: any\n    } & Record<`__$$ph_site_app_${string}`, any>\n\n/**\n * This is our contract between (potentially) lazily loaded extensions and the SDK\n * changes to this interface can be breaking changes for users of the SDK\n */\n\nexport type ExternalExtensionKind = 'intercom-integration' | 'crisp-chat-integration'\n\nexport type PostHogExtensionKind =\n    | 'toolbar'\n    | 'exception-autocapture'\n    | 'web-vitals'\n    | 'web-vitals-with-attribution'\n    | 'recorder'\n    | 'lazy-recorder'\n    | 'tracing-headers'\n    | 'surveys'\n    | 'logs'\n    | 'conversations'\n    | 'product-tours'\n    | 'dead-clicks-autocapture'\n    | 'remote-config'\n    | ExternalExtensionKind\n\nexport interface LazyLoadedSessionRecordingInterface {\n    start: (startReason?: SessionStartReason) => void\n    stop: () => void\n    sessionId: string\n    status: SessionRecordingStatus\n    onRRwebEmit: (rawEvent: eventWithTime) => void\n    log: (message: string, level: 'log' | 'warn' | 'error') => void\n    sdkDebugProperties: Properties\n    overrideLinkedFlag: () => void\n    overrideSampling: () => void\n    overrideTrigger: (triggerType: TriggerType) => void\n    isStarted: boolean\n    tryAddCustomEvent(tag: string, payload: any): boolean\n}\n\nexport interface LazyLoadedDeadClicksAutocaptureInterface {\n    start: (observerTarget: Node) => void\n    stop: () => void\n}\n\nexport interface LazyLoadedConversationsInterface {\n    // Widget control\n    show: () => void\n    hide: () => void\n    isVisible: () => boolean\n\n    // Lifecycle\n    reset: () => void\n\n    // API methods\n    sendMessage: (message: string, userTraits?: UserProvidedTraits, newTicket?: boolean) => Promise<SendMessageResponse>\n    getMessages: (ticketId?: string, after?: string) => Promise<GetMessagesResponse>\n    markAsRead: (ticketId?: string) => Promise<MarkAsReadResponse>\n    getTickets: (options?: GetTicketsOptions) => Promise<GetTicketsResponse>\n    requestRestoreLink: (email: string) => Promise<RequestRestoreLinkResponse>\n    restoreFromToken: (restoreToken: string) => Promise<RestoreFromTokenResponse>\n    restoreFromUrlToken: () => Promise<RestoreFromTokenResponse | null>\n    getCurrentTicketId: () => string | null\n    getWidgetSessionId: () => string\n}\n\ninterface PostHogExtensions {\n    loadExternalDependency?: (\n        posthog: PostHog,\n        kind: PostHogExtensionKind,\n        callback: (error?: string | Event, event?: Event) => void\n    ) => void\n\n    loadSiteApp?: (posthog: PostHog, appUrl: string, callback: (error?: string | Event, event?: Event) => void) => void\n\n    errorWrappingFunctions?: {\n        wrapOnError: (captureFn: (props: ErrorTracking.ErrorProperties) => void) => () => void\n        wrapUnhandledRejection: (captureFn: (props: ErrorTracking.ErrorProperties) => void) => () => void\n        wrapConsoleError: (captureFn: (props: ErrorTracking.ErrorProperties) => void) => () => void\n    }\n    rrweb?: { record: any; version: string; wasMaxDepthReached?: () => boolean; resetMaxDepthState?: () => void }\n    rrwebPlugins?: { getRecordConsolePlugin: any; getRecordNetworkPlugin?: any }\n    generateSurveys?: (posthog: PostHog, isSurveysEnabled: boolean) => any | undefined\n    generateProductTours?: (posthog: PostHog, isEnabled: boolean) => any | undefined\n    logs?: {\n        initializeLogs?: (posthog: PostHog) => any | undefined\n    }\n    postHogWebVitalsCallbacks?: {\n        onLCP: (metric: any) => void\n        onCLS: (metric: any) => void\n        onFCP: (metric: any) => void\n        onINP: (metric: any) => void\n    }\n    /**\n     * @deprecated\n     *\n     * this was introduced briefly, it is now always a no-op and only kept for backwards compatibility\n     */\n    loadWebVitalsCallbacks?: (useAttribution?: boolean) => PostHogExtensions['postHogWebVitalsCallbacks']\n    tracingHeadersPatchFns?: {\n        _patchFetch: (hostnames: string[], distinctId: string, sessionManager?: SessionIdManager) => () => void\n        _patchXHR: (hostnames: string[], distinctId: string, sessionManager?: SessionIdManager) => () => void\n    }\n    initDeadClicksAutocapture?: (\n        ph: PostHog,\n        config: DeadClicksAutoCaptureConfig\n    ) => LazyLoadedDeadClicksAutocaptureInterface\n    integrations?: {\n        [K in ExternalIntegrationKind]?: { start: (posthog: PostHog) => void; stop: () => void }\n    }\n    initSessionRecording?: (ph: PostHog) => LazyLoadedSessionRecordingInterface\n    initConversations?: (config: ConversationsRemoteConfig, posthog: PostHog) => LazyLoadedConversationsInterface\n}\n\nconst global: typeof globalThis | undefined = typeof globalThis !== 'undefined' ? globalThis : win\n\n// React Native polyfills for posthog-js compatibility\nif (typeof self === 'undefined') {\n    ;(global as any).self = global\n}\nif (typeof File === 'undefined') {\n    ;(global as any).File = function () {}\n}\n\nexport const ArrayProto = Array.prototype\nexport const nativeForEach = ArrayProto.forEach\nexport const nativeIndexOf = ArrayProto.indexOf\n\nexport const navigator = global?.navigator\nexport const document = global?.document\nexport const location = global?.location\nexport const fetch = global?.fetch\nexport const XMLHttpRequest =\n    global?.XMLHttpRequest && 'withCredentials' in new global.XMLHttpRequest() ? global.XMLHttpRequest : undefined\nexport const AbortController = global?.AbortController\nexport const userAgent = navigator?.userAgent\nexport const assignableWindow: AssignableWindow = win ?? ({} as any)\n\nexport { win as window }\n","function includes(str, needle) {\n    return -1 !== str.indexOf(needle);\n}\nconst trim = function(str) {\n    return str.trim();\n};\nconst stripLeadingDollar = function(s) {\n    return s.replace(/^\\$/, '');\n};\nfunction isDistinctIdStringLike(value) {\n    return [\n        'distinct_id',\n        'distinctid'\n    ].includes(value.toLowerCase());\n}\nfunction deepSortKeys(value) {\n    if (null === value || 'object' != typeof value) return value;\n    if (Array.isArray(value)) return value.map(deepSortKeys);\n    return Object.keys(value).sort().reduce((acc, key)=>{\n        acc[key] = deepSortKeys(value[key]);\n        return acc;\n    }, {});\n}\nfunction getPersonPropertiesHash(distinct_id, userPropertiesToSet, userPropertiesToSetOnce) {\n    return JSON.stringify({\n        distinct_id,\n        userPropertiesToSet: userPropertiesToSet ? deepSortKeys(userPropertiesToSet) : void 0,\n        userPropertiesToSetOnce: userPropertiesToSetOnce ? deepSortKeys(userPropertiesToSetOnce) : void 0\n    });\n}\nexport { getPersonPropertiesHash, includes, isDistinctIdStringLike, stripLeadingDollar, trim };\n","import { knownUnsafeEditableEvent } from \"../types.mjs\";\nimport { includes } from \"./string-utils.mjs\";\nconst nativeIsArray = Array.isArray;\nconst ObjProto = Object.prototype;\nconst type_utils_hasOwnProperty = ObjProto.hasOwnProperty;\nconst type_utils_toString = ObjProto.toString;\nconst isArray = nativeIsArray || function(obj) {\n    return '[object Array]' === type_utils_toString.call(obj);\n};\nconst isFunction = (x)=>'function' == typeof x;\nconst isNativeFunction = (x)=>isFunction(x) && -1 !== x.toString().indexOf('[native code]');\nconst isObject = (x)=>x === Object(x) && !isArray(x);\nconst isEmptyObject = (x)=>{\n    if (isObject(x)) {\n        for(const key in x)if (type_utils_hasOwnProperty.call(x, key)) return false;\n        return true;\n    }\n    return false;\n};\nconst isUndefined = (x)=>void 0 === x;\nconst isString = (x)=>'[object String]' == type_utils_toString.call(x);\nconst isEmptyString = (x)=>isString(x) && 0 === x.trim().length;\nconst isNull = (x)=>null === x;\nconst isNullish = (x)=>isUndefined(x) || isNull(x);\nconst isNumber = (x)=>'[object Number]' == type_utils_toString.call(x) && x === x;\nconst isPositiveNumber = (value)=>isNumber(value) && value > 0;\nconst isBoolean = (x)=>'[object Boolean]' === type_utils_toString.call(x);\nconst isFormData = (x)=>x instanceof FormData;\nconst isFile = (x)=>x instanceof File;\nconst isPlainError = (x)=>x instanceof Error;\nconst isKnownUnsafeEditableEvent = (x)=>includes(knownUnsafeEditableEvent, x);\nfunction isPrimitive(value) {\n    return null === value || 'object' != typeof value;\n}\nfunction isBuiltin(candidate, className) {\n    return Object.prototype.toString.call(candidate) === `[object ${className}]`;\n}\nfunction isError(candidate) {\n    switch(Object.prototype.toString.call(candidate)){\n        case '[object Error]':\n        case '[object Exception]':\n        case '[object DOMException]':\n        case '[object DOMError]':\n        case '[object WebAssembly.Exception]':\n            return true;\n        default:\n            return isInstanceOf(candidate, Error);\n    }\n}\nfunction isErrorEvent(event) {\n    return isBuiltin(event, 'ErrorEvent');\n}\nfunction isEvent(candidate) {\n    return !isUndefined(Event) && isInstanceOf(candidate, Event);\n}\nfunction isPlainObject(candidate) {\n    return isBuiltin(candidate, 'Object');\n}\nfunction isInstanceOf(candidate, base) {\n    try {\n        return candidate instanceof base;\n    } catch  {\n        return false;\n    }\n}\nconst yesLikeValues = [\n    true,\n    'true',\n    1,\n    '1',\n    'yes'\n];\nconst isYesLike = (val)=>includes(yesLikeValues, val);\nconst noLikeValues = [\n    false,\n    'false',\n    0,\n    '0',\n    'no'\n];\nconst isNoLike = (val)=>includes(noLikeValues, val);\nexport { type_utils_hasOwnProperty as hasOwnProperty, isArray, isBoolean, isBuiltin, isEmptyObject, isEmptyString, isError, isErrorEvent, isEvent, isFile, isFormData, isFunction, isKnownUnsafeEditableEvent, isNativeFunction, isNoLike, isNull, isNullish, isNumber, isObject, isPlainError, isPlainObject, isPositiveNumber, isPrimitive, isString, isUndefined, isYesLike, noLikeValues, yesLikeValues };\n","import { isNumber } from \"./type-utils.mjs\";\nfunction clampToRange(value, min, max, logger, fallbackValue) {\n    if (min > max) {\n        logger.warn('min cannot be greater than max.');\n        min = max;\n    }\n    if (isNumber(value)) if (value > max) {\n        logger.warn(' cannot be  greater than max: ' + max + '. Using max value instead.');\n        return max;\n    } else {\n        if (!(value < min)) return value;\n        logger.warn(' cannot be less than min: ' + min + '. Using min value instead.');\n        return min;\n    }\n    logger.warn(' must be a number. using max or fallback. max: ' + max + ', fallback: ' + fallbackValue);\n    return clampToRange(fallbackValue || max, min, max, logger);\n}\nexport { clampToRange };\n","import { clampToRange } from \"./number-utils.mjs\";\nconst ONE_DAY_IN_MS = 86400000;\nclass BucketedRateLimiter {\n    constructor(options){\n        this._buckets = {};\n        this._onBucketRateLimited = options._onBucketRateLimited;\n        this._bucketSize = clampToRange(options.bucketSize, 0, 100, options._logger);\n        this._refillRate = clampToRange(options.refillRate, 0, this._bucketSize, options._logger);\n        this._refillInterval = clampToRange(options.refillInterval, 0, ONE_DAY_IN_MS, options._logger);\n    }\n    _applyRefill(bucket, now) {\n        const elapsedMs = now - bucket.lastAccess;\n        const refillIntervals = Math.floor(elapsedMs / this._refillInterval);\n        if (refillIntervals > 0) {\n            const tokensToAdd = refillIntervals * this._refillRate;\n            bucket.tokens = Math.min(bucket.tokens + tokensToAdd, this._bucketSize);\n            bucket.lastAccess = bucket.lastAccess + refillIntervals * this._refillInterval;\n        }\n    }\n    consumeRateLimit(key) {\n        const now = Date.now();\n        const keyStr = String(key);\n        let bucket = this._buckets[keyStr];\n        if (bucket) this._applyRefill(bucket, now);\n        else {\n            bucket = {\n                tokens: this._bucketSize,\n                lastAccess: now\n            };\n            this._buckets[keyStr] = bucket;\n        }\n        if (0 === bucket.tokens) return true;\n        bucket.tokens--;\n        if (0 === bucket.tokens) this._onBucketRateLimited?.(key);\n        return 0 === bucket.tokens;\n    }\n    stop() {\n        this._buckets = {};\n    }\n}\nexport { BucketedRateLimiter };\n","import { window } from './globals'\n\n// When angular patches functions they pass the above `isNativeFunction` check (at least the MutationObserver)\nexport const isAngularZonePresent = (): boolean => {\n    return !!(window as any).Zone\n}\n\nexport const isDocument = (x: unknown): x is Document => {\n    // eslint-disable-next-line posthog-js/no-direct-document-check\n    return x instanceof Document\n}\n","import packageInfo from '../package.json'\n\n// overridden in posthog-core,\n// e.g.     Config.DEBUG = Config.DEBUG || instance.config.debug\nconst Config = {\n    DEBUG: false,\n    LIB_VERSION: packageInfo.version,\n}\n\nexport default Config\n","import Config from '../config'\nimport { isUndefined } from '@posthog/core'\nimport { assignableWindow, window } from './globals'\nimport type { Logger } from '@posthog/core'\n\ntype CreateLoggerOptions = {\n    debugEnabled?: boolean\n}\n\ntype PosthogJsLogger = Omit<Logger, 'createLogger'> & {\n    _log: (level: 'log' | 'warn' | 'error', ...args: any[]) => void\n    uninitializedWarning: (methodName: string) => void\n    createLogger: (prefix: string, options?: CreateLoggerOptions) => PosthogJsLogger\n}\n\nconst _createLogger = (prefix: string, { debugEnabled }: CreateLoggerOptions = {}): PosthogJsLogger => {\n    const logger: PosthogJsLogger = {\n        _log: (level: 'log' | 'warn' | 'error', ...args: any[]) => {\n            if (\n                window &&\n                (Config.DEBUG || assignableWindow.POSTHOG_DEBUG || debugEnabled) &&\n                !isUndefined(window.console) &&\n                window.console\n            ) {\n                const consoleLog =\n                    '__rrweb_original__' in window.console[level]\n                        ? (window.console[level] as any)['__rrweb_original__']\n                        : window.console[level]\n\n                // eslint-disable-next-line no-console\n                consoleLog(prefix, ...args)\n            }\n        },\n\n        info: (...args: any[]) => {\n            logger._log('log', ...args)\n        },\n\n        warn: (...args: any[]) => {\n            logger._log('warn', ...args)\n        },\n\n        error: (...args: any[]) => {\n            logger._log('error', ...args)\n        },\n\n        critical: (...args: any[]) => {\n            // Critical errors are always logged to the console\n            // eslint-disable-next-line no-console\n            console.error(prefix, ...args)\n        },\n\n        uninitializedWarning: (methodName: string) => {\n            logger.error(`You must initialize PostHog before calling ${methodName}`)\n        },\n\n        createLogger: (additionalPrefix: string, options?: CreateLoggerOptions) =>\n            _createLogger(`${prefix} ${additionalPrefix}`, options),\n    }\n    return logger\n}\n\nexport const logger = _createLogger('[PostHog.js]')\n\nexport const createLogger = logger.createLogger\n","import { Breaker, Properties } from '../types'\nimport { nativeForEach, nativeIndexOf } from './globals'\nimport { logger } from './logger'\nimport { isFormData, isNull, isNullish, isNumber, isString, hasOwnProperty, isArray } from '@posthog/core'\n\nconst breaker: Breaker = {}\n\nexport function eachArray<E = any>(\n    obj: E[] | null | undefined,\n    iterator: (value: E, key: number) => void | Breaker,\n    thisArg?: any\n): void {\n    if (isArray(obj)) {\n        if (nativeForEach && obj.forEach === nativeForEach) {\n            obj.forEach(iterator, thisArg)\n        } else if ('length' in obj && obj.length === +obj.length) {\n            for (let i = 0, l = obj.length; i < l; i++) {\n                if (i in obj && iterator.call(thisArg, obj[i], i) === breaker) {\n                    return\n                }\n            }\n        }\n    }\n}\n\n/**\n * @param {*=} obj\n * @param {function(...*)=} iterator\n * @param {Object=} thisArg\n */\nexport function each(obj: any, iterator: (value: any, key: any) => void | Breaker, thisArg?: any): void {\n    if (isNullish(obj)) {\n        return\n    }\n    if (isArray(obj)) {\n        return eachArray(obj, iterator, thisArg)\n    }\n    if (isFormData(obj)) {\n        for (const pair of obj.entries()) {\n            if (iterator.call(thisArg, pair[1], pair[0]) === breaker) {\n                return\n            }\n        }\n        return\n    }\n    for (const key in obj) {\n        if (hasOwnProperty.call(obj, key)) {\n            if (iterator.call(thisArg, obj[key], key) === breaker) {\n                return\n            }\n        }\n    }\n}\n\nexport const extend = function (obj: Record<string, any>, ...args: Record<string, any>[]): Record<string, any> {\n    eachArray(args, function (source) {\n        for (const prop in source) {\n            if (source[prop] !== void 0) {\n                obj[prop] = source[prop]\n            }\n        }\n    })\n    return obj\n}\n\nexport const extendArray = function <T>(obj: T[], ...args: T[][]): T[] {\n    eachArray(args, function (source) {\n        eachArray(source, function (item) {\n            obj.push(item)\n        })\n    })\n    return obj\n}\n\nexport const include = function (\n    obj: null | string | Array<any> | Record<string, any>,\n    target: any\n): boolean | Breaker {\n    let found = false\n    if (isNull(obj)) {\n        return found\n    }\n    if (nativeIndexOf && obj.indexOf === nativeIndexOf) {\n        return obj.indexOf(target) != -1\n    }\n    each(obj, function (value) {\n        if (found || (found = value === target)) {\n            return breaker\n        }\n        return\n    })\n    return found\n}\n\n/**\n * Object.entries() polyfill\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/entries\n */\nexport function entries<T = any>(obj: Record<string, T>): [string, T][] {\n    const ownProps = Object.keys(obj)\n    let i = ownProps.length\n    const resArray = new Array(i) // preallocate the Array\n\n    while (i--) {\n        resArray[i] = [ownProps[i], obj[ownProps[i]]]\n    }\n    return resArray\n}\n\nexport const trySafe = function <T>(fn: () => T): T | undefined {\n    try {\n        return fn()\n    } catch {\n        return undefined\n    }\n}\n\nexport const safewrap = function <F extends (...args: any[]) => any = (...args: any[]) => any>(f: F): F {\n    return function (...args) {\n        try {\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-ignore\n            return f.apply(this, args)\n        } catch (e) {\n            logger.critical(\n                'Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A.'\n            )\n            logger.critical(e)\n        }\n    } as F\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unsafe-function-type\nexport const safewrapClass = function (klass: Function, functions: string[]): void {\n    for (let i = 0; i < functions.length; i++) {\n        klass.prototype[functions[i]] = safewrap(klass.prototype[functions[i]])\n    }\n}\n\nexport const stripEmptyProperties = function (p: Properties): Properties {\n    const ret: Properties = {}\n    each(p, function (v, k) {\n        if ((isString(v) && v.length > 0) || isNumber(v)) {\n            ret[k] = v\n        }\n    })\n    return ret\n}\n\n/**\n * Deep copies an object.\n * It handles cycles by replacing all references to them with `undefined`\n * Also supports customizing native values\n *\n * @param value\n * @param customizer\n * @returns {{}|undefined|*}\n */\nfunction deepCircularCopy<T extends Record<string, any> = Record<string, any>>(\n    value: T,\n    customizer?: <K extends keyof T = keyof T>(value: T[K], key?: K) => T[K]\n): T | undefined {\n    const COPY_IN_PROGRESS_SET = new Set()\n\n    function internalDeepCircularCopy(value: T, key?: string): T | undefined {\n        if (value !== Object(value)) return customizer ? customizer(value as any, key) : value // primitive value\n\n        if (COPY_IN_PROGRESS_SET.has(value)) return undefined\n        COPY_IN_PROGRESS_SET.add(value)\n        let result: T\n\n        if (isArray(value)) {\n            result = [] as any as T\n            eachArray(value, (it) => {\n                result.push(internalDeepCircularCopy(it))\n            })\n        } else {\n            result = {} as T\n            each(value, (val, key) => {\n                if (!COPY_IN_PROGRESS_SET.has(val)) {\n                    ;(result as any)[key] = internalDeepCircularCopy(val, key)\n                }\n            })\n        }\n        return result\n    }\n    return internalDeepCircularCopy(value)\n}\n\nexport function _copyAndTruncateStrings<T extends Record<string, any> = Record<string, any>>(\n    object: T,\n    maxStringLength: number | null\n): T {\n    return deepCircularCopy(object, (value: any) => {\n        if (isString(value) && !isNull(maxStringLength)) {\n            return (value as string).slice(0, maxStringLength)\n        }\n        return value\n    }) as T\n}\n\n// NOTE: Update PostHogConfig docs if you change this list\n// We will not try to catch all bullets here, but we should make an effort to catch the most common ones\n// You should be highly against adding more to this list, because ultimately customers can configure\n// their `cross_subdomain_cookie` setting to anything they want.\nconst EXCLUDED_FROM_CROSS_SUBDOMAIN_COOKIE = ['herokuapp.com', 'vercel.app', 'netlify.app']\nexport function isCrossDomainCookie(documentLocation: Location | undefined) {\n    const hostname = documentLocation?.hostname\n\n    if (!isString(hostname)) {\n        return false\n    }\n    // split and slice isn't a great way to match arbitrary domains,\n    // but it's good enough for ensuring we only match herokuapp.com when it is the TLD\n    // for the hostname\n    const lastTwoParts = hostname.split('.').slice(-2).join('.')\n\n    for (const excluded of EXCLUDED_FROM_CROSS_SUBDOMAIN_COOKIE) {\n        if (lastTwoParts === excluded) {\n            return false\n        }\n    }\n\n    return true\n}\n\nexport function find<T>(value: T[], predicate: (value: T) => boolean): T | undefined {\n    for (let i = 0; i < value.length; i++) {\n        if (predicate(value[i])) {\n            return value[i]\n        }\n    }\n    return undefined\n}\n\n// Use this instead of element.addEventListener to avoid eslint errors\n// this properly implements the default options for passive event listeners\nexport function addEventListener(\n    element: Window | Document | Element | undefined,\n    event: string,\n    callback: EventListener,\n    options?: AddEventListenerOptions\n): void {\n    const { capture = false, passive = true } = options ?? {}\n\n    // This is the only place where we are allowed to call this function\n    // because the whole idea is that we should be calling this instead of the built-in one\n    // eslint-disable-next-line posthog-js/no-add-event-listener\n    element?.addEventListener(event, callback, { capture, passive })\n}\n\n/**\n * Helper to migrate deprecated config fields to new field names with appropriate warnings\n * @param config - The config object to check\n * @param newField - The new field name to use\n * @param oldField - The deprecated field name to check for\n * @param defaultValue - The default value if neither field is set\n * @param loggerInstance - Optional logger instance for deprecation warnings\n * @returns The value to use (new field takes precedence over old field)\n */\nexport function migrateConfigField<T>(\n    config: Record<string, any>,\n    newField: string,\n    oldField: string,\n    defaultValue: T,\n    loggerInstance?: { warn: (message: string) => void }\n): T {\n    const hasNewField = newField in config && !isNullish(config[newField])\n    const hasOldField = oldField in config && !isNullish(config[oldField])\n\n    if (hasNewField) {\n        return config[newField]\n    }\n\n    if (hasOldField) {\n        if (loggerInstance) {\n            loggerInstance.warn(\n                `Config field '${oldField}' is deprecated. Please use '${newField}' instead. ` +\n                    `The old field will be removed in a future major version.`\n            )\n        }\n        return config[oldField]\n    }\n\n    return defaultValue\n}\n","import { each } from './'\n\nimport { isArray, isFile, isUndefined } from '@posthog/core'\nimport { logger } from './logger'\nimport { document } from './globals'\n\nconst localDomains = ['localhost', '127.0.0.1']\n\n/**\n * IE11 doesn't support `new URL`\n * so we can create an anchor element and use that to parse the URL\n * there's a lot of overlap between HTMLHyperlinkElementUtils and URL\n * meaning useful properties like `pathname` are available on both\n */\nexport const convertToURL = (url: string): HTMLAnchorElement | null => {\n    const location = document?.createElement('a')\n    if (isUndefined(location)) {\n        return null\n    }\n\n    location.href = url\n    return location\n}\n\nexport const formDataToQuery = function (formdata: Record<string, any> | FormData, arg_separator = '&'): string {\n    let use_val: string\n    let use_key: string\n    const tph_arr: string[] = []\n\n    each(formdata, function (val: File | string | undefined, key: string | undefined) {\n        // the key might be literally the string undefined for e.g. if {undefined: 'something'}\n        if (isUndefined(val) || isUndefined(key) || key === 'undefined') {\n            return\n        }\n\n        use_val = encodeURIComponent(isFile(val) ? val.name : val.toString())\n        use_key = encodeURIComponent(key)\n        tph_arr[tph_arr.length] = use_key + '=' + use_val\n    })\n\n    return tph_arr.join(arg_separator)\n}\n\n// NOTE: Once we get rid of IE11/op_mini we can start using URLSearchParams\nexport const getQueryParam = function (url: string, param: string): string {\n    const withoutHash: string = url.split('#')[0] || ''\n\n    // Split only on the first ? to sort problem out for those with multiple ?s\n    // and then remove them\n    const queryParams: string = withoutHash.split(/\\?(.*)/)[1] || ''\n    const cleanedQueryParams = queryParams.replace(/^\\?+/g, '')\n\n    const queryParts = cleanedQueryParams.split('&')\n    let keyValuePair\n\n    for (let i = 0; i < queryParts.length; i++) {\n        const parts = queryParts[i].split('=')\n        if (parts[0] === param) {\n            keyValuePair = parts\n            break\n        }\n    }\n\n    if (!isArray(keyValuePair) || keyValuePair.length < 2) {\n        return ''\n    } else {\n        let result = keyValuePair[1]\n        try {\n            result = decodeURIComponent(result)\n        } catch {\n            logger.error('Skipping decoding for malformed query param: ' + result)\n        }\n        return result.replace(/\\+/g, ' ')\n    }\n}\n\n// replace any query params in the url with the provided mask value. Tries to keep the URL as instant as possible,\n// including preserving malformed text in most cases\nexport const maskQueryParams = function <T extends string | undefined>(\n    url: T,\n    maskedParams: string[] | undefined,\n    mask: string\n): T extends string ? string : undefined {\n    if (!url || !maskedParams || !maskedParams.length) {\n        return url as any\n    }\n\n    const splitHash = url.split('#')\n    const withoutHash: string = splitHash[0] || ''\n    const hash = splitHash[1]\n\n    const splitQuery: string[] = withoutHash.split('?')\n    const queryString: string = splitQuery[1]\n    const urlWithoutQueryAndHash: string = splitQuery[0]\n    const queryParts = (queryString || '').split('&')\n\n    // use an array of strings rather than an object to preserve ordering and duplicates\n    const paramStrings: string[] = []\n\n    for (let i = 0; i < queryParts.length; i++) {\n        const keyValuePair = queryParts[i].split('=')\n        if (!isArray(keyValuePair)) {\n            continue\n        } else if (maskedParams.includes(keyValuePair[0])) {\n            paramStrings.push(keyValuePair[0] + '=' + mask)\n        } else {\n            paramStrings.push(queryParts[i])\n        }\n    }\n\n    let result = urlWithoutQueryAndHash\n    if (queryString != null) {\n        result += '?' + paramStrings.join('&')\n    }\n    if (hash != null) {\n        result += '#' + hash\n    }\n\n    return result as any\n}\n\nexport const _getHashParam = function (hash: string, param: string): string | null {\n    const matches = hash.match(new RegExp(param + '=([^&]*)'))\n    return matches ? matches[1] : null\n}\n\nexport const isLocalhost = (): boolean => {\n    return localDomains.includes(location.hostname)\n}\n","// import { patch } from 'rrweb/typings/utils'\n// copied from https://github.com/rrweb-io/rrweb/blob/8aea5b00a4dfe5a6f59bd2ae72bb624f45e51e81/packages/rrweb/src/utils.ts#L129\n// which was copied from https://github.com/getsentry/sentry-javascript/blob/b2109071975af8bf0316d3b5b38f519bdaf5dc15/packages/utils/src/object.ts\nimport { isFunction } from '@posthog/core'\n\nexport function patch(\n    source: { [key: string]: any },\n    name: string,\n    replacement: (...args: unknown[]) => unknown\n): () => void {\n    try {\n        if (!(name in source)) {\n            return () => {\n                //\n            }\n        }\n\n        const original = source[name] as () => unknown\n        const wrapped = replacement(original)\n\n        // Make sure it's a function first, as we need to attach an empty prototype for `defineProperties` to work\n        // otherwise it'll throw \"TypeError: Object.defineProperties called on non-object\"\n        if (isFunction(wrapped)) {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n            wrapped.prototype = wrapped.prototype || {}\n            Object.defineProperties(wrapped, {\n                __posthog_wrapped__: {\n                    enumerable: false,\n                    value: true,\n                },\n            })\n        }\n\n        source[name] = wrapped\n\n        return () => {\n            source[name] = original\n        }\n    } catch {\n        return () => {\n            //\n        }\n        // This can throw if multiple fill happens on a global object like XMLHttpRequest\n        // Fixes https://github.com/getsentry/sentry-javascript/issues/2043\n    }\n}\n","import { NetworkRecordOptions } from '../../../types'\n\nfunction hostnameFromURL(url: string | URL | RequestInfo): string | null {\n    try {\n        if (typeof url === 'string') {\n            return new URL(url).hostname\n        }\n        if ('url' in url) {\n            return new URL(url.url).hostname\n        }\n        return url.hostname\n    } catch {\n        return null\n    }\n}\n\nexport function isHostOnDenyList(url: string | URL | Request, options: NetworkRecordOptions) {\n    const hostname = hostnameFromURL(url)\n    const defaultNotDenied = { hostname, isHostDenied: false }\n\n    if (!options.payloadHostDenyList?.length || !hostname?.trim().length) {\n        return defaultNotDenied\n    }\n\n    for (const deny of options.payloadHostDenyList) {\n        if (hostname.endsWith(deny)) {\n            return { hostname, isHostDenied: true }\n        }\n    }\n\n    return defaultNotDenied\n}\n","/*\n * Constants\n */\n\n/* PROPERTY KEYS */\n\n// This key is deprecated, but we want to check for it to see whether aliasing is allowed.\nexport const PEOPLE_DISTINCT_ID_KEY = '$people_distinct_id'\nexport const DISTINCT_ID = 'distinct_id'\nexport const DEVICE_ID = '$device_id'\nexport const ALIAS_ID_KEY = '__alias'\nexport const CAMPAIGN_IDS_KEY = '__cmpns'\nexport const EVENT_TIMERS_KEY = '__timers'\nexport const AUTOCAPTURE_DISABLED_SERVER_SIDE = '$autocapture_disabled_server_side'\nexport const HEATMAPS_ENABLED_SERVER_SIDE = '$heatmaps_enabled_server_side'\nexport const EXCEPTION_CAPTURE_ENABLED_SERVER_SIDE = '$exception_capture_enabled_server_side'\nexport const ERROR_TRACKING_SUPPRESSION_RULES = '$error_tracking_suppression_rules'\nexport const ERROR_TRACKING_CAPTURE_EXTENSION_EXCEPTIONS = '$error_tracking_capture_extension_exceptions'\nexport const WEB_VITALS_ENABLED_SERVER_SIDE = '$web_vitals_enabled_server_side'\nexport const DEAD_CLICKS_ENABLED_SERVER_SIDE = '$dead_clicks_enabled_server_side'\nexport const PRODUCT_TOURS_ENABLED_SERVER_SIDE = '$product_tours_enabled_server_side'\nexport const WEB_VITALS_ALLOWED_METRICS = '$web_vitals_allowed_metrics'\nexport const SESSION_RECORDING_REMOTE_CONFIG = '$session_recording_remote_config'\n// @deprecated can be removed along with eager loaded replay\nexport const SESSION_RECORDING_ENABLED_SERVER_SIDE = '$session_recording_enabled_server_side'\n// @deprecated can be removed along with eager loaded replay\nexport const CONSOLE_LOG_RECORDING_ENABLED_SERVER_SIDE = '$console_log_recording_enabled_server_side'\n// @deprecated can be removed along with eager loaded replay\nexport const SESSION_RECORDING_NETWORK_PAYLOAD_CAPTURE = '$session_recording_network_payload_capture'\n// @deprecated can be removed along with eager loaded replay\nexport const SESSION_RECORDING_MASKING = '$session_recording_masking'\n// @deprecated can be removed along with eager loaded replay\nexport const SESSION_RECORDING_CANVAS_RECORDING = '$session_recording_canvas_recording'\n// @deprecated can be removed along with eager loaded replay\nexport const SESSION_RECORDING_SAMPLE_RATE = '$replay_sample_rate'\n// @deprecated can be removed along with eager loaded replay\nexport const SESSION_RECORDING_MINIMUM_DURATION = '$replay_minimum_duration'\n// @deprecated can be removed along with eager loaded replay\nexport const SESSION_RECORDING_SCRIPT_CONFIG = '$replay_script_config'\nexport const SESSION_RECORDING_OVERRIDE_SAMPLING = '$replay_override_sampling'\nexport const SESSION_RECORDING_OVERRIDE_LINKED_FLAG = '$replay_override_linked_flag'\nexport const SESSION_RECORDING_OVERRIDE_URL_TRIGGER = '$replay_override_url_trigger'\nexport const SESSION_RECORDING_OVERRIDE_EVENT_TRIGGER = '$replay_override_event_trigger'\nexport const SESSION_ID = '$sesid'\nexport const SESSION_RECORDING_IS_SAMPLED = '$session_is_sampled'\nexport const SESSION_RECORDING_PAST_MINIMUM_DURATION = '$session_past_minimum_duration'\nexport const SESSION_RECORDING_URL_TRIGGER_ACTIVATED_SESSION = '$session_recording_url_trigger_activated_session'\nexport const SESSION_RECORDING_EVENT_TRIGGER_ACTIVATED_SESSION = '$session_recording_event_trigger_activated_session'\nexport const SESSION_RECORDING_FIRST_FULL_SNAPSHOT_TIMESTAMP = '$debug_first_full_snapshot_timestamp'\nexport const ENABLED_FEATURE_FLAGS = '$enabled_feature_flags'\nexport const PERSISTENCE_EARLY_ACCESS_FEATURES = '$early_access_features'\nexport const PERSISTENCE_FEATURE_FLAG_DETAILS = '$feature_flag_details'\nexport const STORED_PERSON_PROPERTIES_KEY = '$stored_person_properties'\nexport const STORED_GROUP_PROPERTIES_KEY = '$stored_group_properties'\nexport const SURVEYS = '$surveys'\nexport const SURVEYS_ACTIVATED = '$surveys_activated'\nexport const PRODUCT_TOURS_ACTIVATED = '$product_tours_activated'\nexport const CONVERSATIONS = '$conversations'\nexport const FLAG_CALL_REPORTED = '$flag_call_reported'\nexport const PERSISTENCE_FEATURE_FLAG_ERRORS = '$feature_flag_errors'\nexport const USER_STATE = '$user_state'\nexport const CLIENT_SESSION_PROPS = '$client_session_props'\nexport const CAPTURE_RATE_LIMIT = '$capture_rate_limit'\n\n/** @deprecated Delete this when INITIAL_PERSON_INFO has been around for long enough to ignore backwards compat */\nexport const INITIAL_CAMPAIGN_PARAMS = '$initial_campaign_params'\n/** @deprecated Delete this when INITIAL_PERSON_INFO has been around for long enough to ignore backwards compat */\nexport const INITIAL_REFERRER_INFO = '$initial_referrer_info'\nexport const INITIAL_PERSON_INFO = '$initial_person_info'\nexport const ENABLE_PERSON_PROCESSING = '$epp'\nexport const TOOLBAR_ID = '__POSTHOG_TOOLBAR__'\nexport const TOOLBAR_CONTAINER_CLASS = 'toolbar-global-fade-container'\n\n/**\n * PREVIEW - MAY CHANGE WITHOUT WARNING - DO NOT USE IN PRODUCTION\n * Sentinel value for distinct id, device id, session id. Signals that the server should generate the value\n * */\nexport const COOKIELESS_SENTINEL_VALUE = '$posthog_cookieless'\nexport const COOKIELESS_MODE_FLAG_PROPERTY = '$cookieless_mode'\n\nexport const WEB_EXPERIMENTS = '$web_experiments'\n\n// These are properties that are reserved and will not be automatically included in events\nexport const PERSISTENCE_RESERVED_PROPERTIES = [\n    PEOPLE_DISTINCT_ID_KEY,\n    ALIAS_ID_KEY,\n    CAMPAIGN_IDS_KEY,\n    EVENT_TIMERS_KEY,\n    SESSION_RECORDING_ENABLED_SERVER_SIDE,\n    HEATMAPS_ENABLED_SERVER_SIDE,\n    SESSION_ID,\n    ENABLED_FEATURE_FLAGS,\n    ERROR_TRACKING_SUPPRESSION_RULES,\n    USER_STATE,\n    PERSISTENCE_EARLY_ACCESS_FEATURES,\n    PERSISTENCE_FEATURE_FLAG_DETAILS,\n    STORED_GROUP_PROPERTIES_KEY,\n    STORED_PERSON_PROPERTIES_KEY,\n    SURVEYS,\n    FLAG_CALL_REPORTED,\n    PERSISTENCE_FEATURE_FLAG_ERRORS,\n    CLIENT_SESSION_PROPS,\n    CAPTURE_RATE_LIMIT,\n    INITIAL_CAMPAIGN_PARAMS,\n    INITIAL_REFERRER_INFO,\n    ENABLE_PERSON_PROCESSING,\n    INITIAL_PERSON_INFO,\n]\n\nexport const SURVEYS_REQUEST_TIMEOUT_MS = 10000\n\n/* Z-INDEX HIERARCHY: tours > surveys > support */\nexport const Z_INDEX_TOURS = 2147483646\nexport const Z_INDEX_SURVEYS = 2147483645\nexport const Z_INDEX_CONVERSATIONS = 2147483644\n","import { AutocaptureConfig, PostHogConfig, Properties } from './types'\nimport { each, entries } from './utils'\n\nimport { isNullish, isString, isUndefined, isArray, isBoolean } from '@posthog/core'\nimport { logger } from './utils/logger'\nimport { window } from './utils/globals'\nimport { isDocumentFragment, isElementNode, isTag, isTextNode } from './utils/element-utils'\nimport { includes, trim } from '@posthog/core'\n\nexport function splitClassString(s: string): string[] {\n    return s ? trim(s).split(/\\s+/) : []\n}\n\nfunction checkForURLMatches(urlsList: (string | RegExp)[]): boolean {\n    const url = window?.location.href\n    return !!(url && urlsList && urlsList.some((regex) => url.match(regex)))\n}\n\n/*\n * Get the className of an element, accounting for edge cases where element.className is an object\n *\n * Because this is a string it can contain unexpected characters\n * So, this method safely splits the className and returns that array.\n */\nexport function getClassNames(el: Element): string[] {\n    let className = ''\n    switch (typeof el.className) {\n        case 'string':\n            className = el.className\n            break\n        // TODO: when is this ever used?\n        case 'object': // handle cases where className might be SVGAnimatedString or some other type\n            className =\n                (el.className && 'baseVal' in el.className ? (el.className as any).baseVal : null) ||\n                el.getAttribute('class') ||\n                ''\n            break\n        default:\n            className = ''\n    }\n\n    return splitClassString(className)\n}\n\nexport function makeSafeText(s: string | null | undefined): string | null {\n    if (isNullish(s)) {\n        return null\n    }\n\n    return (\n        trim(s)\n            // scrub potentially sensitive values\n            .split(/(\\s+)/)\n            .filter((s) => shouldCaptureValue(s))\n            .join('')\n            // normalize whitespace\n            .replace(/[\\r\\n]/g, ' ')\n            .replace(/[ ]+/g, ' ')\n            // truncate\n            .substring(0, 255)\n    )\n}\n\n/*\n * Get the direct text content of an element, protecting against sensitive data collection.\n * Concats textContent of each of the element's text node children; this avoids potential\n * collection of sensitive data that could happen if we used element.textContent and the\n * element had sensitive child elements, since element.textContent includes child content.\n * Scrubs values that look like they could be sensitive (i.e. cc or ssn number).\n * @param {Element} el - element to get the text of\n * @returns {string} the element's direct text content\n */\nexport function getSafeText(el: Element): string {\n    let elText = ''\n\n    if (shouldCaptureElement(el) && !isSensitiveElement(el) && el.childNodes && el.childNodes.length) {\n        each(el.childNodes, function (child) {\n            if (isTextNode(child) && child.textContent) {\n                elText += makeSafeText(child.textContent) ?? ''\n            }\n        })\n    }\n\n    return trim(elText)\n}\n\nexport function getEventTarget(e: Event): Element | null {\n    // https://developer.mozilla.org/en-US/docs/Web/API/Event/target#Compatibility_notes\n    if (isUndefined(e.target)) {\n        return (e.srcElement as Element) || null\n    } else {\n        if ((e.target as HTMLElement)?.shadowRoot) {\n            return (e.composedPath()[0] as Element) || null\n        }\n        return (e.target as Element) || null\n    }\n}\n\nexport const autocaptureCompatibleElements = ['a', 'button', 'form', 'input', 'select', 'textarea', 'label']\n\n/*\n if there is no config, then all elements are allowed\n if there is a config, and there is an allow list, then only elements in the allow list are allowed\n assumes that some other code is checking this element's parents\n */\nfunction checkIfElementTreePassesElementAllowList(\n    elements: Element[],\n    autocaptureConfig: AutocaptureConfig | undefined\n): boolean {\n    const allowlist = autocaptureConfig?.element_allowlist\n    if (isUndefined(allowlist)) {\n        // everything is allowed, when there is no allow list\n        return true\n    }\n\n    // check each element in the tree\n    // if any of the elements are in the allow list, then the tree is allowed\n    for (const el of elements) {\n        if (allowlist.some((elementType) => el.tagName.toLowerCase() === elementType)) {\n            return true\n        }\n    }\n\n    // otherwise there is an allow list and this element tree didn't match it\n    return false\n}\n\n/*\n if there is no selector list (i.e. it is undefined), then any elements matches\n if there is an empty list, then no elements match\n if there is a selector list, then check it against each element provided\n */\nfunction checkIfElementsMatchCSSSelector(elements: Element[], selectorList: string[] | undefined): boolean {\n    if (isUndefined(selectorList)) {\n        // everything is allowed, when there is no selector list\n        return true\n    }\n\n    for (const el of elements) {\n        if (selectorList.some((selector) => el.matches(selector))) {\n            return true\n        }\n    }\n\n    return false\n}\n\nexport function getParentElement(curEl: Element): Element | false {\n    const parentNode = curEl.parentNode\n    if (!parentNode || !isElementNode(parentNode)) return false\n    return parentNode\n}\n\nconst DEFAULT_CONTENT_IGNORELIST = ['next', 'previous', 'prev', '>', '<']\nconst MAX_CONTENT_IGNORELIST_ENTRIES = 10\n\ninterface ElementWithText {\n    safeText: string\n    ariaLabel: string\n}\n\nfunction shouldIgnoreByContent(\n    contentIgnorelist: boolean | string[] | undefined,\n    elementsWithText: ElementWithText[]\n): boolean {\n    if (contentIgnorelist === false || isUndefined(contentIgnorelist)) {\n        return false\n    }\n\n    let keywords: string[]\n    if (contentIgnorelist === true) {\n        keywords = DEFAULT_CONTENT_IGNORELIST\n    } else if (isArray(contentIgnorelist)) {\n        if (contentIgnorelist.length > MAX_CONTENT_IGNORELIST_ENTRIES) {\n            logger.error(\n                `[PostHog] content_ignorelist array cannot exceed ${MAX_CONTENT_IGNORELIST_ENTRIES} items. Use css_selector_ignorelist for more complex matching.`\n            )\n            return false\n        }\n        keywords = contentIgnorelist.map((k) => k.toLowerCase())\n    } else {\n        return false\n    }\n\n    return elementsWithText.some(({ safeText, ariaLabel }) => {\n        return keywords.some((keyword) => safeText.includes(keyword) || ariaLabel.includes(keyword))\n    })\n}\n\n// autocapture check will already filter for ph-no-capture,\n// but we include it here to protect against future changes accidentally removing that check\nconst DEFAULT_RAGE_CLICK_IGNORE_LIST = ['.ph-no-rageclick', '.ph-no-capture']\nexport function shouldCaptureRageclick(el: Element | null, _config: PostHogConfig['rageclick']) {\n    if (!window || cannotCheckForAutocapture(el)) {\n        return false\n    }\n\n    let selectorIgnoreList: string[] | boolean\n    let contentIgnorelist: boolean | string[] | undefined\n    if (isBoolean(_config)) {\n        selectorIgnoreList = _config ? DEFAULT_RAGE_CLICK_IGNORE_LIST : false\n        // For backward compatibility, don't enable content filtering for rageclick: true\n        contentIgnorelist = undefined\n    } else {\n        selectorIgnoreList = _config?.css_selector_ignorelist ?? DEFAULT_RAGE_CLICK_IGNORE_LIST\n        contentIgnorelist = _config?.content_ignorelist\n    }\n\n    if (selectorIgnoreList === false) {\n        return false\n    }\n\n    // Traverse DOM once and cache element data to avoid redundant calls to getSafeText\n    const { targetElementList } = getElementAndParentsForElement(el, false)\n    const elementsWithText: ElementWithText[] = targetElementList.map((element) => ({\n        safeText: getSafeText(element).toLowerCase(),\n        ariaLabel: element.getAttribute('aria-label')?.toLowerCase().trim() || '',\n    }))\n\n    if (shouldIgnoreByContent(contentIgnorelist, elementsWithText)) {\n        return false\n    }\n\n    // we don't capture if we match the ignore list\n    return !checkIfElementsMatchCSSSelector(targetElementList, selectorIgnoreList)\n}\n\nconst cannotCheckForAutocapture = (el: Element | null) => {\n    return !el || isTag(el, 'html') || !isElementNode(el)\n}\n\nconst getElementAndParentsForElement = (el: Element, captureOnAnyElement: false | true | undefined) => {\n    if (!window || cannotCheckForAutocapture(el)) {\n        return { parentIsUsefulElement: false, targetElementList: [] }\n    }\n\n    let parentIsUsefulElement = false\n    const targetElementList: Element[] = [el]\n    let curEl: Element = el\n    while (curEl.parentNode && !isTag(curEl, 'body')) {\n        // If element is a shadow root, we skip it\n        if (isDocumentFragment(curEl.parentNode)) {\n            targetElementList.push((curEl.parentNode as any).host)\n            curEl = (curEl.parentNode as any).host\n            continue\n        }\n        const parentNode = getParentElement(curEl)\n        if (!parentNode) break\n        if (captureOnAnyElement || autocaptureCompatibleElements.indexOf(parentNode.tagName.toLowerCase()) > -1) {\n            parentIsUsefulElement = true\n        } else {\n            const compStyles = window.getComputedStyle(parentNode)\n            if (compStyles && compStyles.getPropertyValue('cursor') === 'pointer') {\n                parentIsUsefulElement = true\n            }\n        }\n\n        targetElementList.push(parentNode)\n        curEl = parentNode\n    }\n    return { parentIsUsefulElement, targetElementList }\n}\n\n/*\n * Check whether a DOM event should be \"captured\" or if it may contain sensitive data\n * using a variety of heuristics.\n * @param {Element} el - element to check\n * @param {Event} event - event to check\n * @param {Object} autocaptureConfig - autocapture config\n * @param {boolean} captureOnAnyElement - whether to capture on any element, clipboard autocapture doesn't restrict to \"clickable\" elements\n * @param {string[]} allowedEventTypes - event types to capture, normally just 'click', but some autocapture types react to different events, some elements have fixed events (e.g., form has \"submit\")\n * @returns {boolean} whether the event should be captured\n */\nexport function shouldCaptureDomEvent(\n    el: Element,\n    event: Event,\n    autocaptureConfig: AutocaptureConfig | undefined = undefined,\n    captureOnAnyElement?: boolean,\n    allowedEventTypes?: string[]\n): boolean {\n    if (!window || cannotCheckForAutocapture(el)) {\n        return false\n    }\n\n    if (autocaptureConfig?.url_allowlist) {\n        // if the current URL is not in the allow list, don't capture\n        if (!checkForURLMatches(autocaptureConfig.url_allowlist)) {\n            return false\n        }\n    }\n\n    if (autocaptureConfig?.url_ignorelist) {\n        // if the current URL is in the ignore list, don't capture\n        if (checkForURLMatches(autocaptureConfig.url_ignorelist)) {\n            return false\n        }\n    }\n\n    if (autocaptureConfig?.dom_event_allowlist) {\n        const allowlist = autocaptureConfig.dom_event_allowlist\n        if (allowlist && !allowlist.some((eventType) => event.type === eventType)) {\n            return false\n        }\n    }\n\n    const { parentIsUsefulElement, targetElementList } = getElementAndParentsForElement(el, captureOnAnyElement)\n\n    if (!checkIfElementTreePassesElementAllowList(targetElementList, autocaptureConfig)) {\n        return false\n    }\n\n    if (!checkIfElementsMatchCSSSelector(targetElementList, autocaptureConfig?.css_selector_allowlist)) {\n        return false\n    }\n\n    const compStyles = window.getComputedStyle(el)\n    if (compStyles && compStyles.getPropertyValue('cursor') === 'pointer' && event.type === 'click') {\n        return true\n    }\n\n    const tag = el.tagName.toLowerCase()\n    switch (tag) {\n        case 'html':\n            return false\n        case 'form':\n            return (allowedEventTypes || ['submit']).indexOf(event.type) >= 0\n        case 'input':\n        case 'select':\n        case 'textarea':\n            return (allowedEventTypes || ['change', 'click']).indexOf(event.type) >= 0\n        default:\n            if (parentIsUsefulElement) return (allowedEventTypes || ['click']).indexOf(event.type) >= 0\n            return (\n                (allowedEventTypes || ['click']).indexOf(event.type) >= 0 &&\n                (autocaptureCompatibleElements.indexOf(tag) > -1 || el.getAttribute('contenteditable') === 'true')\n            )\n    }\n}\n\n/*\n * Check whether a DOM element should be \"captured\" or if it may contain sensitive data\n * using a variety of heuristics.\n * @param {Element} el - element to check\n * @returns {boolean} whether the element should be captured\n */\nexport function shouldCaptureElement(el: Element): boolean {\n    for (let curEl = el; curEl.parentNode && !isTag(curEl, 'body'); curEl = curEl.parentNode as Element) {\n        const classes = getClassNames(curEl)\n        if (includes(classes, 'ph-sensitive') || includes(classes, 'ph-no-capture')) {\n            return false\n        }\n    }\n\n    if (includes(getClassNames(el), 'ph-include')) {\n        return true\n    }\n\n    // don't include hidden or password fields\n    const type = (el as HTMLInputElement).type || ''\n    if (isString(type)) {\n        // it's possible for el.type to be a DOM element if el is a form with a child input[name=\"type\"]\n        switch (type.toLowerCase()) {\n            case 'hidden':\n                return false\n            case 'password':\n                return false\n        }\n    }\n\n    // filter out data from fields that look like sensitive fields\n    const name = (el as HTMLInputElement).name || el.id || ''\n    // See https://github.com/posthog/posthog-js/issues/165\n    // Under specific circumstances a bug caused .replace to be called on a DOM element\n    // instead of a string, removing the element from the page. Ensure this issue is mitigated.\n    if (isString(name)) {\n        // it's possible for el.name or el.id to be a DOM element if el is a form with a child input[name=\"name\"]\n        const sensitiveNameRegex =\n            /^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i\n        if (sensitiveNameRegex.test(name.replace(/[^a-zA-Z0-9]/g, ''))) {\n            return false\n        }\n    }\n\n    return true\n}\n\n/*\n * Check whether a DOM element is 'sensitive' and we should only capture limited data\n * @param {Element} el - element to check\n * @returns {boolean} whether the element should be captured\n */\nexport function isSensitiveElement(el: Element): boolean {\n    // don't send data from inputs or similar elements since there will always be\n    // a risk of clientside javascript placing sensitive data in attributes\n    const allowedInputTypes = ['button', 'checkbox', 'submit', 'reset']\n    if (\n        (isTag(el, 'input') && !allowedInputTypes.includes((el as HTMLInputElement).type)) ||\n        isTag(el, 'select') ||\n        isTag(el, 'textarea') ||\n        el.getAttribute('contenteditable') === 'true'\n    ) {\n        return true\n    }\n    return false\n}\n\n// Define the core pattern for matching credit card numbers\nconst coreCCPattern = `(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})`\n// Create the Anchored version of the regex by adding '^' at the start and '$' at the end\nconst anchoredCCRegex = new RegExp(`^(?:${coreCCPattern})$`)\n// The Unanchored version is essentially the core pattern, usable as is for partial matches\nconst unanchoredCCRegex = new RegExp(coreCCPattern)\n\n// Define the core pattern for matching SSNs with optional dashes\nconst coreSSNPattern = `\\\\d{3}-?\\\\d{2}-?\\\\d{4}`\n// Create the Anchored version of the regex by adding '^' at the start and '$' at the end\nconst anchoredSSNRegex = new RegExp(`^(${coreSSNPattern})$`)\n// The Unanchored version is essentially the core pattern itself, usable for partial matches\nconst unanchoredSSNRegex = new RegExp(`(${coreSSNPattern})`)\n\n/*\n * Check whether a string value should be \"captured\" or if it may contain sensitive data\n * using a variety of heuristics.\n * @param {string} value - string value to check\n * @param {boolean} anchorRegexes - whether to anchor the regexes to the start and end of the string\n * @returns {boolean} whether the element should be captured\n */\nexport function shouldCaptureValue(value: string, anchorRegexes = true): boolean {\n    if (isNullish(value)) {\n        return false\n    }\n\n    if (isString(value)) {\n        value = trim(value)\n\n        // check to see if input value looks like a credit card number\n        // see: https://www.safaribooksonline.com/library/view/regular-expressions-cookbook/9781449327453/ch04s20.html\n        const ccRegex = anchorRegexes ? anchoredCCRegex : unanchoredCCRegex\n        if (ccRegex.test((value || '').replace(/[- ]/g, ''))) {\n            return false\n        }\n\n        // check to see if input value looks like a social security number\n        const ssnRegex = anchorRegexes ? anchoredSSNRegex : unanchoredSSNRegex\n        if (ssnRegex.test(value)) {\n            return false\n        }\n    }\n\n    return true\n}\n\n/*\n * Check whether an attribute name is an Angular style attr (either _ngcontent or _nghost)\n * These update on each build and lead to noise in the element chain\n * More details on the attributes here: https://angular.io/guide/view-encapsulation\n * @param {string} attributeName - string value to check\n * @returns {boolean} whether the element is an angular tag\n */\nexport function isAngularStyleAttr(attributeName: string): boolean {\n    if (isString(attributeName)) {\n        return attributeName.substring(0, 10) === '_ngcontent' || attributeName.substring(0, 7) === '_nghost'\n    }\n    return false\n}\n\n/*\n * Iterate through children of a target element looking for span tags\n * and return the text content of the span tags, separated by spaces,\n * along with the direct text content of the target element\n * @param {Element} target - element to check\n * @returns {string} text content of the target element and its child span tags\n */\nexport function getDirectAndNestedSpanText(target: Element): string {\n    let text = getSafeText(target)\n    text = `${text} ${getNestedSpanText(target)}`.trim()\n    return shouldCaptureValue(text) ? text : ''\n}\n\n/*\n * Iterate through children of a target element looking for span tags\n * and return the text content of the span tags, separated by spaces\n * @param {Element} target - element to check\n * @returns {string} text content of span tags\n */\nexport function getNestedSpanText(target: Element): string {\n    let text = ''\n    if (target && target.childNodes && target.childNodes.length) {\n        each(target.childNodes, function (child) {\n            if (child && child.tagName?.toLowerCase() === 'span') {\n                try {\n                    const spanText = getSafeText(child)\n                    text = `${text} ${spanText}`.trim()\n\n                    if (child.childNodes && child.childNodes.length) {\n                        text = `${text} ${getNestedSpanText(child)}`.trim()\n                    }\n                } catch (e) {\n                    logger.error('[AutoCapture]', e)\n                }\n            }\n        })\n    }\n    return text\n}\n\n/*\nBack in the day storing events in Postgres we use Elements for autocapture events.\nNow we're using elements_chain. We used to do this parsing/processing during ingestion.\nThis code is just copied over from ingestion, but we should optimize it\nto create elements_chain string directly.\n*/\nexport function getElementsChainString(elements: Properties[]): string {\n    return elementsToString(extractElements(elements))\n}\n\n// This interface is called 'Element' in plugin-scaffold https://github.com/PostHog/plugin-scaffold/blob/b07d3b879796ecc7e22deb71bf627694ba05386b/src/types.ts#L200\n// However 'Element' is a DOM Element when run in the browser, so we have to rename it\ninterface PHElement {\n    text?: string\n    tag_name?: string\n    href?: string\n    attr_id?: string\n    attr_class?: string[]\n    nth_child?: number\n    nth_of_type?: number\n    attributes?: Record<string, any>\n    event_id?: number\n    order?: number\n    group_id?: number\n}\n\nfunction escapeQuotes(input: string): string {\n    return input.replace(/\"|\\\\\"/g, '\\\\\"')\n}\n\nfunction elementsToString(elements: PHElement[]): string {\n    const ret = elements.map((element) => {\n        let el_string = ''\n        if (element.tag_name) {\n            el_string += element.tag_name\n        }\n        if (element.attr_class) {\n            element.attr_class.sort()\n            for (const single_class of element.attr_class) {\n                el_string += `.${single_class.replace(/\"/g, '')}`\n            }\n        }\n        const attributes: Record<string, any> = {\n            ...(element.text ? { text: element.text } : {}),\n            'nth-child': element.nth_child ?? 0,\n            'nth-of-type': element.nth_of_type ?? 0,\n            ...(element.href ? { href: element.href } : {}),\n            ...(element.attr_id ? { attr_id: element.attr_id } : {}),\n            ...element.attributes,\n        }\n        const sortedAttributes: Record<string, any> = {}\n        entries(attributes)\n            .sort(([a], [b]) => a.localeCompare(b))\n            .forEach(\n                ([key, value]) => (sortedAttributes[escapeQuotes(key.toString())] = escapeQuotes(value.toString()))\n            )\n        el_string += ':'\n        el_string += entries(sortedAttributes)\n            .map(([key, value]) => `${key}=\"${value}\"`)\n            .join('')\n        return el_string\n    })\n    return ret.join(';')\n}\n\nfunction extractElements(elements: Properties[]): PHElement[] {\n    return elements.map((el) => {\n        const response = {\n            text: el['$el_text']?.slice(0, 400),\n            tag_name: el['tag_name'],\n            href: el['attr__href']?.slice(0, 2048),\n            attr_class: extractAttrClass(el),\n            attr_id: el['attr__id'],\n            nth_child: el['nth_child'],\n            nth_of_type: el['nth_of_type'],\n            attributes: {} as { [id: string]: any },\n        }\n\n        entries(el)\n            .filter(([key]) => key.indexOf('attr__') === 0)\n            .forEach(([key, value]) => (response.attributes[key] = value))\n        return response\n    })\n}\n\nfunction extractAttrClass(el: Properties): PHElement['attr_class'] {\n    const attr_class = el['attr__class']\n    if (!attr_class) {\n        return undefined\n    } else if (isArray(attr_class)) {\n        return attr_class\n    } else {\n        return splitClassString(attr_class)\n    }\n}\n","import { CapturedNetworkRequest, NetworkRecordOptions, PostHogConfig } from '../../../types'\nimport { isFunction, isNullish, isString, isUndefined } from '@posthog/core'\nimport { convertToURL } from '../../../utils/request-utils'\nimport { logger } from '../../../utils/logger'\nimport { shouldCaptureValue } from '../../../autocapture-utils'\nimport { each } from '../../../utils'\n\nconst LOGGER_PREFIX = '[SessionRecording]'\n\nconst REDACTED = 'redacted'\n\nexport const defaultNetworkOptions: Required<NetworkRecordOptions> = {\n    initiatorTypes: [\n        'audio',\n        'beacon',\n        'body',\n        'css',\n        'early-hint',\n        'embed',\n        'fetch',\n        'frame',\n        'iframe',\n        'icon',\n        'image',\n        'img',\n        'input',\n        'link',\n        'navigation',\n        'object',\n        'ping',\n        'script',\n        'track',\n        'video',\n        'xmlhttprequest',\n    ],\n    maskRequestFn: (data: CapturedNetworkRequest) => data,\n    recordHeaders: false,\n    recordBody: false,\n    recordInitialRequests: false,\n    recordPerformance: false,\n    performanceEntryTypeToObserve: [\n        // 'event', // This is too noisy as it covers all browser events\n        'first-input',\n        // 'mark', // Mark is used too liberally. We would need to filter for specific marks\n        // 'measure', // Measure is used too liberally. We would need to filter for specific measures\n        'navigation',\n        'paint',\n        'resource',\n    ],\n    payloadSizeLimitBytes: 1000000,\n    payloadHostDenyList: [\n        '.lr-ingest.io',\n        '.ingest.sentry.io',\n        '.clarity.ms',\n        // NB no leading dot here\n        'analytics.google.com',\n        'bam.nr-data.net',\n    ],\n}\n\nconst HEADER_DENY_LIST = [\n    'authorization',\n    'x-forwarded-for',\n    'authorization',\n    'cookie',\n    'set-cookie',\n    'x-api-key',\n    'x-real-ip',\n    'remote-addr',\n    'forwarded',\n    'proxy-authorization',\n    'x-csrf-token',\n    'x-csrftoken',\n    'x-xsrf-token',\n]\n\nconst PAYLOAD_CONTENT_DENY_LIST = [\n    'password',\n    'secret',\n    'passwd',\n    'api_key',\n    'apikey',\n    'auth',\n    'credentials',\n    'mysql_pwd',\n    'privatekey',\n    'private_key',\n    'token',\n]\n\n// we always remove headers on the deny list because we never want to capture this sensitive data\nconst removeAuthorizationHeader = (data: CapturedNetworkRequest): CapturedNetworkRequest => {\n    const headers = data.requestHeaders\n    if (!isNullish(headers)) {\n        each(Object.keys(headers ?? {}), (header) => {\n            if (HEADER_DENY_LIST.includes(header.toLowerCase())) {\n                headers[header] = REDACTED\n            }\n        })\n    }\n    return data\n}\n\nconst POSTHOG_PATHS_TO_IGNORE = ['/s/', '/e/', '/i/']\n// want to ignore posthog paths when capturing requests, or we can get trapped in a loop\n// because calls to PostHog would be reported using a call to PostHog which would be reported....\nconst ignorePostHogPaths = (\n    data: CapturedNetworkRequest,\n    apiHostConfig: PostHogConfig['api_host']\n): CapturedNetworkRequest | undefined => {\n    const url = convertToURL(data.name)\n\n    // we need to account for api host config as e.g. pathname could be /ingest/s/ and we want to ignore that\n    let replaceValue = apiHostConfig.indexOf('http') === 0 ? convertToURL(apiHostConfig)?.pathname : apiHostConfig\n    if (replaceValue === '/') {\n        replaceValue = ''\n    }\n    const pathname = url?.pathname.replace(replaceValue || '', '')\n\n    if (url && pathname && POSTHOG_PATHS_TO_IGNORE.some((path) => pathname.indexOf(path) === 0)) {\n        return undefined\n    }\n    return data\n}\n\nfunction estimateBytes(payload: string): number {\n    return new Blob([payload]).size\n}\n\nfunction enforcePayloadSizeLimit(\n    payload: string | null | undefined,\n    headers: Record<string, any> | undefined,\n    limit: number,\n    description: string\n): string | null | undefined {\n    if (isNullish(payload)) {\n        return payload\n    }\n\n    let requestContentLength: string | number = headers?.['content-length'] || estimateBytes(payload)\n    if (isString(requestContentLength)) {\n        requestContentLength = parseInt(requestContentLength)\n    }\n\n    if (requestContentLength > limit) {\n        return LOGGER_PREFIX + ` ${description} body too large to record (${requestContentLength} bytes)`\n    }\n\n    return payload\n}\n\n// people can have arbitrarily large payloads on their site, but we don't want to ingest them\nconst limitPayloadSize = (\n    options: NetworkRecordOptions\n): ((data: CapturedNetworkRequest | undefined) => CapturedNetworkRequest | undefined) => {\n    // the smallest of 1MB or the specified limit if there is one\n    const limit = Math.min(1000000, options.payloadSizeLimitBytes ?? 1000000)\n\n    return (data) => {\n        if (data?.requestBody) {\n            data.requestBody = enforcePayloadSizeLimit(data.requestBody, data.requestHeaders, limit, 'Request')\n        }\n\n        if (data?.responseBody) {\n            data.responseBody = enforcePayloadSizeLimit(data.responseBody, data.responseHeaders, limit, 'Response')\n        }\n\n        return data\n    }\n}\n\nfunction scrubPayload(payload: string | null | undefined, label: 'Request' | 'Response'): string | null | undefined {\n    if (isNullish(payload)) {\n        return payload\n    }\n    let scrubbed = payload\n\n    if (!shouldCaptureValue(scrubbed, false)) {\n        scrubbed = LOGGER_PREFIX + ' ' + label + ' body ' + REDACTED\n    }\n    each(PAYLOAD_CONTENT_DENY_LIST, (text) => {\n        if (scrubbed?.length && scrubbed?.indexOf(text) !== -1) {\n            scrubbed = LOGGER_PREFIX + ' ' + label + ' body ' + REDACTED + ' as might contain: ' + text\n        }\n    })\n\n    return scrubbed\n}\n\nfunction scrubPayloads(capturedRequest: CapturedNetworkRequest | undefined): CapturedNetworkRequest | undefined {\n    if (isUndefined(capturedRequest)) {\n        return undefined\n    }\n\n    capturedRequest.requestBody = scrubPayload(capturedRequest.requestBody, 'Request')\n    capturedRequest.responseBody = scrubPayload(capturedRequest.responseBody, 'Response')\n\n    return capturedRequest\n}\n\n/**\n *  whether a maskRequestFn is provided or not,\n *  we ensure that we remove the denied header from requests\n *  we _never_ want to record that header by accident\n *  if someone complains then we'll add an opt-in to let them override it\n */\nexport const buildNetworkRequestOptions = (\n    instanceConfig: PostHogConfig,\n    remoteNetworkOptions: Pick<\n        NetworkRecordOptions,\n        'recordHeaders' | 'recordBody' | 'recordPerformance' | 'payloadHostDenyList'\n    >\n): NetworkRecordOptions => {\n    const config: NetworkRecordOptions = {\n        payloadSizeLimitBytes: defaultNetworkOptions.payloadSizeLimitBytes,\n        performanceEntryTypeToObserve: [...defaultNetworkOptions.performanceEntryTypeToObserve],\n        payloadHostDenyList: [\n            ...(remoteNetworkOptions.payloadHostDenyList || []),\n            ...defaultNetworkOptions.payloadHostDenyList,\n        ],\n    }\n    // client can always disable despite remote options\n    const canRecordHeaders =\n        instanceConfig.session_recording.recordHeaders === false ? false : remoteNetworkOptions.recordHeaders\n    const canRecordBody =\n        instanceConfig.session_recording.recordBody === false ? false : remoteNetworkOptions.recordBody\n    const canRecordPerformance =\n        instanceConfig.capture_performance === false ? false : remoteNetworkOptions.recordPerformance\n\n    const payloadLimiter = limitPayloadSize(config)\n\n    const enforcedCleaningFn: NetworkRecordOptions['maskRequestFn'] = (d: CapturedNetworkRequest) =>\n        payloadLimiter(ignorePostHogPaths(removeAuthorizationHeader(d), instanceConfig.api_host))\n\n    const hasDeprecatedMaskFunction = isFunction(instanceConfig.session_recording.maskNetworkRequestFn)\n\n    if (hasDeprecatedMaskFunction && isFunction(instanceConfig.session_recording.maskCapturedNetworkRequestFn)) {\n        logger.warn(\n            'Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored.'\n        )\n    }\n\n    if (hasDeprecatedMaskFunction) {\n        instanceConfig.session_recording.maskCapturedNetworkRequestFn = (data: CapturedNetworkRequest) => {\n            const cleanedURL = instanceConfig.session_recording.maskNetworkRequestFn!({ url: data.name })\n            return {\n                ...data,\n                name: cleanedURL?.url,\n            } as CapturedNetworkRequest\n        }\n    }\n\n    config.maskRequestFn = isFunction(instanceConfig.session_recording.maskCapturedNetworkRequestFn)\n        ? (data) => {\n              const cleanedRequest = enforcedCleaningFn(data)\n              return cleanedRequest\n                  ? (instanceConfig.session_recording.maskCapturedNetworkRequestFn?.(cleanedRequest) ?? undefined)\n                  : undefined\n          }\n        : (data) => scrubPayloads(enforcedCleaningFn(data))\n\n    return {\n        ...defaultNetworkOptions,\n        ...config,\n        recordHeaders: canRecordHeaders,\n        recordBody: canRecordBody,\n        recordPerformance: canRecordPerformance,\n        recordInitialRequests: canRecordPerformance,\n    }\n}\n","/// <reference lib=\"dom\" />\n\n// rrweb/network@1 code starts\n// most of what is below here will be removed when rrweb release their code for this\n// see https://github.com/rrweb-io/rrweb/pull/1105\n\n// NB adopted from https://github.com/rrweb-io/rrweb/pull/1105 which looks like it will be accepted into rrweb\n// however, in the PR, it throws when the performance observer data is not available\n// and assumes it is running in a browser with the Request API (i.e. not IE11)\n// copying here so that we can use it before rrweb adopt it\n\nimport type { IWindow, listenerHandler, RecordPlugin } from '../types/rrweb-types'\nimport { CapturedNetworkRequest, Headers, InitiatorType, NetworkRecordOptions } from '../../../types'\nimport { isArray, isBoolean, isFormData, isNull, isNullish, isString, isUndefined, isObject } from '@posthog/core'\nimport { isDocument } from '../../../utils/type-utils'\nimport { createLogger } from '../../../utils/logger'\nimport { formDataToQuery } from '../../../utils/request-utils'\nimport { patch } from '../rrweb-plugins/patch'\nimport { isHostOnDenyList } from '../../../extensions/replay/external/denylist'\nimport { defaultNetworkOptions } from './config'\n\nconst logger = createLogger('[Recorder]')\n\nexport type NetworkData = {\n    requests: CapturedNetworkRequest[]\n    isInitial?: boolean\n}\n\ntype networkCallback = (data: NetworkData) => void\n\nconst isNavigationTiming = (entry: PerformanceEntry): entry is PerformanceNavigationTiming =>\n    entry.entryType === 'navigation'\nconst isResourceTiming = (entry: PerformanceEntry): entry is PerformanceResourceTiming => entry.entryType === 'resource'\n\ntype ObservedPerformanceEntry = (PerformanceNavigationTiming | PerformanceResourceTiming) & {\n    responseStatus?: number\n}\n\nexport function findLast<T>(array: Array<T>, predicate: (value: T) => boolean): T | undefined {\n    const length = array.length\n    for (let i = length - 1; i >= 0; i -= 1) {\n        if (predicate(array[i])) {\n            return array[i]\n        }\n    }\n    return undefined\n}\n\nfunction initPerformanceObserver(cb: networkCallback, win: IWindow, options: Required<NetworkRecordOptions>) {\n    // if we are only observing timings then we could have a single observer for all types, with buffer true,\n    // but we are going to filter by initiatorType _if we are wrapping fetch and xhr as the wrapped functions\n    // will deal with those.\n    // so we have a block which captures requests from before fetch/xhr is wrapped\n    // these are marked `isInitial` so playback can display them differently if needed\n    // they will never have method/status/headers/body because they are pre-wrapping that provides that\n    if (options.recordInitialRequests) {\n        const initialPerformanceEntries = win.performance\n            .getEntries()\n            .filter(\n                (entry): entry is ObservedPerformanceEntry =>\n                    isNavigationTiming(entry) ||\n                    (isResourceTiming(entry) && options.initiatorTypes.includes(entry.initiatorType as InitiatorType))\n            )\n        cb({\n            requests: initialPerformanceEntries.flatMap((entry) =>\n                prepareRequest({ entry, method: undefined, status: undefined, networkRequest: {}, isInitial: true })\n            ),\n            isInitial: true,\n        })\n    }\n    const observer = new win.PerformanceObserver((entries) => {\n        // if recordBody or recordHeaders is true then we don't want to record fetch or xhr here\n        // as the wrapped functions will do that. Otherwise, this filter becomes a noop\n        // because we do want to record them here\n        const wrappedInitiatorFilter = (entry: ObservedPerformanceEntry) =>\n            options.recordBody || options.recordHeaders\n                ? entry.initiatorType !== 'xmlhttprequest' && entry.initiatorType !== 'fetch'\n                : true\n\n        const performanceEntries = entries.getEntries().filter(\n            (entry): entry is ObservedPerformanceEntry =>\n                isNavigationTiming(entry) ||\n                (isResourceTiming(entry) &&\n                    options.initiatorTypes.includes(entry.initiatorType as InitiatorType) &&\n                    // TODO if we are _only_ capturing timing we don't want to filter initiator here\n                    wrappedInitiatorFilter(entry))\n        )\n\n        cb({\n            requests: performanceEntries.flatMap((entry) =>\n                prepareRequest({ entry, method: undefined, status: undefined, networkRequest: {} })\n            ),\n        })\n    })\n    // compat checked earlier\n    // eslint-disable-next-line compat/compat\n    const entryTypes = PerformanceObserver.supportedEntryTypes.filter((x) =>\n        options.performanceEntryTypeToObserve.includes(x)\n    )\n    // initial records are gathered above, so we don't need to observe and buffer each type separately\n    observer.observe({ entryTypes })\n    return () => {\n        observer.disconnect()\n    }\n}\n\nfunction shouldRecordHeaders(type: 'request' | 'response', recordHeaders: NetworkRecordOptions['recordHeaders']) {\n    return !!recordHeaders && (isBoolean(recordHeaders) || recordHeaders[type])\n}\n\nexport function shouldRecordBody({\n    type,\n    recordBody,\n    headers,\n    url,\n}: {\n    type: 'request' | 'response'\n    headers: Headers\n    url: string | URL | RequestInfo\n    recordBody: NetworkRecordOptions['recordBody']\n}) {\n    function matchesContentType(contentTypes: string[]) {\n        const contentTypeHeader = Object.keys(headers).find((key) => key.toLowerCase() === 'content-type')\n        const contentType = contentTypeHeader && headers[contentTypeHeader]\n        return contentTypes.some((ct) => contentType?.includes(ct))\n    }\n\n    /**\n     * particularly in canvas applications we see many requests to blob URLs\n     * e.g. blob:https://video_url\n     * these blob/object URLs are local to the browser, we can never capture that body\n     * so we can just return false here\n     */\n    function isBlobURL(url: string | URL | RequestInfo) {\n        try {\n            if (typeof url === 'string') {\n                return url.startsWith('blob:')\n            }\n            if (url instanceof URL) {\n                return url.protocol === 'blob:'\n            }\n            if (url instanceof Request) {\n                return isBlobURL(url.url)\n            }\n            return false\n        } catch {\n            return false\n        }\n    }\n    if (!recordBody) return false\n    if (isBlobURL(url)) return false\n    if (isBoolean(recordBody)) return true\n    if (isArray(recordBody)) return matchesContentType(recordBody)\n    const recordBodyType = recordBody[type]\n    if (isBoolean(recordBodyType)) return recordBodyType\n    return matchesContentType(recordBodyType)\n}\n\nasync function getRequestPerformanceEntry(\n    win: IWindow,\n    initiatorType: string,\n    url: string,\n    start?: number,\n    end?: number,\n    attempt = 0\n): Promise<PerformanceResourceTiming | null> {\n    if (attempt > 10) {\n        logger.warn('Failed to get performance entry for request', { url, initiatorType })\n        return null\n    }\n    const urlPerformanceEntries = win.performance.getEntriesByName(url) as PerformanceResourceTiming[]\n    const performanceEntry = findLast(\n        urlPerformanceEntries,\n        (entry) =>\n            isResourceTiming(entry) &&\n            entry.initiatorType === initiatorType &&\n            (isUndefined(start) || entry.startTime >= start) &&\n            (isUndefined(end) || entry.startTime <= end)\n    )\n    if (!performanceEntry) {\n        await new Promise((resolve) => setTimeout(resolve, 50 * attempt))\n        return getRequestPerformanceEntry(win, initiatorType, url, start, end, attempt + 1)\n    }\n    return performanceEntry\n}\n\n/**\n * According to MDN https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/response\n * xhr response is typed as any but can be an ArrayBuffer, a Blob, a Document, a JavaScript object,\n * or a string, depending on the value of XMLHttpRequest.responseType, that contains the response entity body.\n *\n * XHR request body is Document | XMLHttpRequestBodyInit | null | undefined\n */\nfunction _tryReadXHRBody({\n    body,\n    options,\n    url,\n}: {\n    body: Document | XMLHttpRequestBodyInit | any | null | undefined\n    options: NetworkRecordOptions\n    url: string | URL | RequestInfo\n}): string | null {\n    if (isNullish(body)) {\n        return null\n    }\n\n    const { hostname, isHostDenied } = isHostOnDenyList(url, options)\n    if (isHostDenied) {\n        return hostname + ' is in deny list'\n    }\n\n    if (isString(body)) {\n        return body\n    }\n\n    if (isDocument(body)) {\n        return body.textContent\n    }\n\n    if (isFormData(body)) {\n        return formDataToQuery(body)\n    }\n\n    if (isObject(body)) {\n        try {\n            return JSON.stringify(body)\n        } catch {\n            return '[SessionReplay] Failed to stringify response object'\n        }\n    }\n\n    return '[SessionReplay] Cannot read body of type ' + toString.call(body)\n}\n\nfunction initXhrObserver(cb: networkCallback, win: IWindow, options: Required<NetworkRecordOptions>): listenerHandler {\n    if (!options.initiatorTypes.includes('xmlhttprequest')) {\n        return () => {\n            //\n        }\n    }\n    const recordRequestHeaders = shouldRecordHeaders('request', options.recordHeaders)\n    const recordResponseHeaders = shouldRecordHeaders('response', options.recordHeaders)\n\n    const restorePatch = patch(\n        win.XMLHttpRequest.prototype,\n        'open',\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        (originalOpen: typeof XMLHttpRequest.prototype.open) => {\n            return function (\n                method: string,\n                url: string | URL,\n                async = true,\n                username?: string | null,\n                password?: string | null\n            ) {\n                // because this function is returned in its actual context `this` _is_ an XMLHttpRequest\n                // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                // @ts-ignore\n                const xhr = this as XMLHttpRequest\n\n                // check IE earlier than this, we only initialize if Request is present\n                // eslint-disable-next-line compat/compat\n                const req = new Request(url)\n                const networkRequest: Partial<CapturedNetworkRequest> = {}\n                let start: number | undefined\n                let end: number | undefined\n\n                const requestHeaders: Headers = {}\n                const originalSetRequestHeader = xhr.setRequestHeader.bind(xhr)\n                xhr.setRequestHeader = (header: string, value: string) => {\n                    requestHeaders[header] = value\n                    return originalSetRequestHeader(header, value)\n                }\n                if (recordRequestHeaders) {\n                    networkRequest.requestHeaders = requestHeaders\n                }\n\n                const originalSend = xhr.send.bind(xhr)\n                xhr.send = (body) => {\n                    if (\n                        shouldRecordBody({\n                            type: 'request',\n                            headers: requestHeaders,\n                            url,\n                            recordBody: options.recordBody,\n                        })\n                    ) {\n                        networkRequest.requestBody = _tryReadXHRBody({ body, options, url })\n                    }\n                    start = win.performance.now()\n                    return originalSend(body)\n                }\n\n                // Cleanup function to remove all event listeners and prevent memory leaks\n                const cleanup = () => {\n                    xhr.removeEventListener('readystatechange', readyStateListener)\n                    xhr.removeEventListener('error', cleanup)\n                    xhr.removeEventListener('abort', cleanup)\n                    xhr.removeEventListener('timeout', cleanup)\n                }\n\n                const readyStateListener = () => {\n                    if (xhr.readyState !== xhr.DONE) {\n                        return\n                    }\n\n                    // Clean up all listeners immediately when done to prevent memory leaks\n                    cleanup()\n\n                    end = win.performance.now()\n                    const responseHeaders: Headers = {}\n                    const rawHeaders = xhr.getAllResponseHeaders()\n                    const headers = rawHeaders.trim().split(/[\\r\\n]+/)\n                    headers.forEach((line) => {\n                        const parts = line.split(': ')\n                        const header = parts.shift()\n                        const value = parts.join(': ')\n                        if (header) {\n                            responseHeaders[header] = value\n                        }\n                    })\n                    if (recordResponseHeaders) {\n                        networkRequest.responseHeaders = responseHeaders\n                    }\n                    if (\n                        shouldRecordBody({\n                            type: 'response',\n                            headers: responseHeaders,\n                            url,\n                            recordBody: options.recordBody,\n                        })\n                    ) {\n                        networkRequest.responseBody = _tryReadXHRBody({ body: xhr.response, options, url })\n                    }\n                    getRequestPerformanceEntry(win, 'xmlhttprequest', req.url, start, end)\n                        .then((entry) => {\n                            const requests = prepareRequest({\n                                entry,\n                                method: method,\n                                status: xhr?.status,\n                                networkRequest,\n                                start,\n                                end,\n                                url: url.toString(),\n                                initiatorType: 'xmlhttprequest',\n                            })\n                            cb({ requests })\n                        })\n                        .catch(() => {\n                            //\n                        })\n                }\n\n                // This is very tricky code, and making it passive won't bring many performance benefits,\n                // so let's ignore the rule here.\n                // eslint-disable-next-line posthog-js/no-add-event-listener\n                xhr.addEventListener('readystatechange', readyStateListener)\n                // Also clean up on error, abort, and timeout to prevent memory leaks\n                // eslint-disable-next-line posthog-js/no-add-event-listener\n                xhr.addEventListener('error', cleanup)\n                // eslint-disable-next-line posthog-js/no-add-event-listener\n                xhr.addEventListener('abort', cleanup)\n                // eslint-disable-next-line posthog-js/no-add-event-listener\n                xhr.addEventListener('timeout', cleanup)\n\n                originalOpen.call(xhr, method, url.toString(), async, username, password)\n            }\n        }\n    )\n    return () => {\n        restorePatch()\n    }\n}\n\n/**\n *  Check if this PerformanceEntry is either a PerformanceResourceTiming or a PerformanceNavigationTiming\n *  NB PerformanceNavigationTiming extends PerformanceResourceTiming\n *  Here we don't care which interface it implements as both expose `serverTimings`\n */\nconst exposesServerTiming = (event: PerformanceEntry | null): event is PerformanceResourceTiming =>\n    !isNull(event) && (event.entryType === 'navigation' || event.entryType === 'resource')\n\nfunction prepareRequest({\n    entry,\n    method,\n    status,\n    networkRequest,\n    isInitial,\n    start,\n    end,\n    url,\n    initiatorType,\n}: {\n    entry: PerformanceResourceTiming | null\n    method: string | undefined\n    status: number | undefined\n    networkRequest: Partial<CapturedNetworkRequest>\n    isInitial?: boolean\n    start?: number\n    end?: number\n    // if there is no performance observer entry, we still need to know the url\n    url?: string\n    // if there is no performance observer entry, we can provide the initiatorType\n    initiatorType?: string\n}): CapturedNetworkRequest[] {\n    start = entry ? entry.startTime : start\n    end = entry ? entry.responseEnd : end\n\n    // kudos to sentry javascript sdk for excellent background on why to use Date.now() here\n    // https://github.com/getsentry/sentry-javascript/blob/e856e40b6e71a73252e788cd42b5260f81c9c88e/packages/utils/src/time.ts#L70\n    // can't start observer if performance.now() is not available\n    // eslint-disable-next-line compat/compat\n    const timeOrigin = Math.floor(Date.now() - performance.now())\n    // clickhouse can't ingest timestamps that are floats\n    // (in this case representing fractions of a millisecond we don't care about anyway)\n    // use timeOrigin if we really can't gather a start time\n    const timestamp = Math.floor(timeOrigin + (start || 0))\n\n    const entryJSON = entry ? entry.toJSON() : { name: url }\n\n    const requests: CapturedNetworkRequest[] = [\n        {\n            ...entryJSON,\n            startTime: isUndefined(start) ? undefined : Math.round(start),\n            endTime: isUndefined(end) ? undefined : Math.round(end),\n            timeOrigin,\n            timestamp,\n            method: method,\n            initiatorType: initiatorType ? initiatorType : entry ? (entry.initiatorType as InitiatorType) : undefined,\n            status,\n            requestHeaders: networkRequest.requestHeaders,\n            requestBody: networkRequest.requestBody,\n            responseHeaders: networkRequest.responseHeaders,\n            responseBody: networkRequest.responseBody,\n            isInitial,\n        },\n    ]\n\n    if (exposesServerTiming(entry)) {\n        for (const timing of entry.serverTiming || []) {\n            requests.push({\n                timeOrigin,\n                timestamp,\n                startTime: Math.round(entry.startTime),\n                name: timing.name,\n                duration: timing.duration,\n                // the spec has a closed list of possible types\n                // https://developer.mozilla.org/en-US/docs/Web/API/PerformanceEntry/entryType\n                // but, we need to know this was a server timing so that we know to\n                // match it to the appropriate navigation or resource timing\n                // that matching will have to be on timestamp and $current_url\n                entryType: 'serverTiming',\n            })\n        }\n    }\n\n    return requests\n}\n\nconst contentTypePrefixDenyList = ['video/', 'audio/']\n\nfunction _checkForCannotReadResponseBody({\n    r,\n    options,\n    url,\n}: {\n    r: Response\n    options: NetworkRecordOptions\n    url: string | URL | RequestInfo\n}): string | null {\n    if (r.headers.get('Transfer-Encoding') === 'chunked') {\n        return 'Chunked Transfer-Encoding is not supported'\n    }\n\n    // `get` and `has` are case-insensitive\n    // but return the header value with the casing that was supplied\n    const contentType = r.headers.get('Content-Type')?.toLowerCase()\n    const contentTypeIsDenied = contentTypePrefixDenyList.some((prefix) => contentType?.startsWith(prefix))\n    if (contentType && contentTypeIsDenied) {\n        return `Content-Type ${contentType} is not supported`\n    }\n\n    const { hostname, isHostDenied } = isHostOnDenyList(url, options)\n    if (isHostDenied) {\n        return hostname + ' is in deny list'\n    }\n\n    return null\n}\n\nfunction _tryReadBody(r: Request | Response): Promise<string> {\n    // there are now already multiple places where we're using Promise...\n    // eslint-disable-next-line compat/compat\n    return new Promise((resolve, reject) => {\n        const timeout = setTimeout(() => resolve('[SessionReplay] Timeout while trying to read body'), 500)\n        try {\n            r.clone()\n                .text()\n                .then(\n                    (txt) => resolve(txt),\n                    (reason) => reject(reason)\n                )\n                .finally(() => clearTimeout(timeout))\n        } catch {\n            clearTimeout(timeout)\n            resolve('[SessionReplay] Failed to read body')\n        }\n    })\n}\n\nasync function _tryReadRequestBody({\n    r,\n    options,\n    url,\n}: {\n    r: Request\n    options: NetworkRecordOptions\n    url: string | URL | RequestInfo\n}): Promise<string> {\n    const { hostname, isHostDenied } = isHostOnDenyList(url, options)\n    if (isHostDenied) {\n        return Promise.resolve(hostname + ' is in deny list')\n    }\n\n    return _tryReadBody(r)\n}\n\nasync function _tryReadResponseBody({\n    r,\n    options,\n    url,\n}: {\n    r: Response\n    options: NetworkRecordOptions\n    url: string | URL | RequestInfo\n}): Promise<string> {\n    const cannotReadBodyReason: string | null = _checkForCannotReadResponseBody({ r, options, url })\n    if (!isNull(cannotReadBodyReason)) {\n        return Promise.resolve(cannotReadBodyReason)\n    }\n\n    return _tryReadBody(r)\n}\n\nfunction initFetchObserver(\n    cb: networkCallback,\n    win: IWindow,\n    options: Required<NetworkRecordOptions>\n): listenerHandler {\n    if (!options.initiatorTypes.includes('fetch')) {\n        return () => {\n            //\n        }\n    }\n    const recordRequestHeaders = shouldRecordHeaders('request', options.recordHeaders)\n    const recordResponseHeaders = shouldRecordHeaders('response', options.recordHeaders)\n\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    const restorePatch = patch(win, 'fetch', (originalFetch: typeof fetch) => {\n        return async function (url: URL | RequestInfo, init?: RequestInit | undefined) {\n            // check IE earlier than this, we only initialize if Request is present\n            // eslint-disable-next-line compat/compat\n            const req = new Request(url, init)\n            let res: Response | undefined\n            const networkRequest: Partial<CapturedNetworkRequest> = {}\n            let start: number | undefined\n            let end: number | undefined\n\n            try {\n                const requestHeaders: Headers = {}\n                req.headers.forEach((value: string, header: string | number) => {\n                    requestHeaders[header] = value\n                })\n                if (recordRequestHeaders) {\n                    networkRequest.requestHeaders = requestHeaders\n                }\n                if (\n                    shouldRecordBody({\n                        type: 'request',\n                        headers: requestHeaders,\n                        url,\n                        recordBody: options.recordBody,\n                    })\n                ) {\n                    networkRequest.requestBody = await _tryReadRequestBody({ r: req, options, url })\n                }\n\n                start = win.performance.now()\n                res = await originalFetch(req)\n                end = win.performance.now()\n\n                const responseHeaders: Headers = {}\n                res.headers.forEach((value: string, header: string | number) => {\n                    responseHeaders[header] = value\n                })\n                if (recordResponseHeaders) {\n                    networkRequest.responseHeaders = responseHeaders\n                }\n                if (\n                    shouldRecordBody({\n                        type: 'response',\n                        headers: responseHeaders,\n                        url,\n                        recordBody: options.recordBody,\n                    })\n                ) {\n                    networkRequest.responseBody = await _tryReadResponseBody({ r: res, options, url })\n                }\n\n                return res\n            } finally {\n                getRequestPerformanceEntry(win, 'fetch', req.url, start, end)\n                    .then((entry) => {\n                        const requests = prepareRequest({\n                            entry,\n                            method: req.method,\n                            status: res?.status,\n                            networkRequest,\n                            start,\n                            end,\n                            url: req.url,\n                            initiatorType: 'fetch',\n                        })\n                        cb({ requests })\n                    })\n                    .catch(() => {\n                        //\n                    })\n            }\n        }\n    })\n    return () => {\n        restorePatch()\n    }\n}\n\nlet initialisedHandler: listenerHandler | null = null\n\nfunction initNetworkObserver(\n    callback: networkCallback,\n    win: IWindow, // top window or in an iframe\n    options: NetworkRecordOptions\n): listenerHandler {\n    if (!('performance' in win)) {\n        return () => {\n            //\n        }\n    }\n\n    if (initialisedHandler) {\n        logger.warn('Network observer already initialised, doing nothing')\n        return () => {\n            // the first caller should already have this handler and will be responsible for teardown\n        }\n    }\n\n    const networkOptions = (\n        options ? Object.assign({}, defaultNetworkOptions, options) : defaultNetworkOptions\n    ) as Required<NetworkRecordOptions>\n\n    const cb: networkCallback = (data) => {\n        const requests: CapturedNetworkRequest[] = []\n        data.requests.forEach((request) => {\n            const maskedRequest = networkOptions.maskRequestFn(request)\n            if (maskedRequest) {\n                requests.push(maskedRequest)\n            }\n        })\n\n        if (requests.length > 0) {\n            callback({ ...data, requests })\n        }\n    }\n    const performanceObserver = initPerformanceObserver(cb, win, networkOptions)\n\n    // only wrap fetch and xhr if headers or body are being recorded\n    let xhrObserver: listenerHandler = () => {}\n    let fetchObserver: listenerHandler = () => {}\n    if (networkOptions.recordHeaders || networkOptions.recordBody) {\n        xhrObserver = initXhrObserver(cb, win, networkOptions)\n        fetchObserver = initFetchObserver(cb, win, networkOptions)\n    }\n\n    initialisedHandler = () => {\n        performanceObserver()\n        xhrObserver()\n        fetchObserver()\n        initialisedHandler = null\n    }\n    return initialisedHandler\n}\n\n// use the plugin name so that when this functionality is adopted into rrweb\n// we can remove this plugin and use the core functionality with the same data\nexport const NETWORK_PLUGIN_NAME = 'rrweb/network@1'\n\n// TODO how should this be typed?\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nexport const getRecordNetworkPlugin: (options?: NetworkRecordOptions) => RecordPlugin = (options) => {\n    return {\n        name: NETWORK_PLUGIN_NAME,\n        observer: initNetworkObserver,\n        options: options,\n    }\n}\n\n// rrweb/networ@1 ends\n","// Type definitions copied from @rrweb/types@2.0.0-alpha.17 and rrweb-snapshot@2.0.0-alpha.17\n// Both packages are MIT licensed: https://github.com/rrweb-io/rrweb\n//\n// These types are copied here to avoid requiring users to install peer dependencies\n// solely for TypeScript type information.\n//\n// Original sources:\n// - @rrweb/types: https://github.com/rrweb-io/rrweb/tree/main/packages/@rrweb/types\n// - rrweb-snapshot: https://github.com/rrweb-io/rrweb/tree/main/packages/rrweb-snapshot\n\n// ===== Types from rrweb-snapshot =====\n// These are needed by @rrweb/types\n\nexport type DataURLOptions = Partial<{\n    type: string\n    quality: number\n}>\n\nexport interface INode extends Node {\n    __sn: serializedNodeWithId\n}\n\nexport interface IMirror<TNode> {\n    getId(n: TNode | undefined | null): number\n    getNode(id: number): TNode | null\n    getIds(): number[]\n    getMeta(n: TNode): serializedNodeWithId | null\n    removeNodeFromMap(n: TNode): void\n    has(id: number): boolean\n    hasNode(node: TNode): boolean\n    add(n: TNode, meta: serializedNodeWithId): void\n    replace(id: number, n: TNode): void\n    reset(): void\n}\n\nexport declare class Mirror implements IMirror<Node> {\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    private idNodeMap\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    private nodeMetaMap\n    getId(n: Node | undefined | null): number\n    getNode(id: number): Node | null\n    getIds(): number[]\n    getMeta(n: Node): serializedNodeWithId | null\n    removeNodeFromMap(n: Node): void\n    has(id: number): boolean\n    hasNode(node: Node): boolean\n    add(n: Node, meta: serializedNodeWithId): void\n    replace(id: number, n: Node): void\n    reset(): void\n}\n\nexport type attributes = {\n    [key: string]: string | number | true | null\n}\n\nexport enum NodeType {\n    Document = 0,\n    DocumentType = 1,\n    Element = 2,\n    Text = 3,\n    CDATA = 4,\n    Comment = 5,\n}\n\nexport type documentNode = {\n    type: NodeType.Document\n    childNodes: serializedNodeWithId[]\n    compatMode?: string\n}\n\nexport type documentTypeNode = {\n    type: NodeType.DocumentType\n    name: string\n    publicId: string\n    systemId: string\n}\n\nexport type elementNode = {\n    type: NodeType.Element\n    tagName: string\n    attributes: attributes\n    childNodes: serializedNodeWithId[]\n    isSVG?: true\n    needBlock?: boolean\n    isCustom?: true\n}\n\nexport type textNode = {\n    type: NodeType.Text\n    textContent: string\n    isStyle?: true\n}\n\nexport type cdataNode = {\n    type: NodeType.CDATA\n    textContent: ''\n}\n\nexport type commentNode = {\n    type: NodeType.Comment\n    textContent: string\n}\n\nexport type serializedNode = (documentNode | documentTypeNode | elementNode | textNode | cdataNode | commentNode) & {\n    rootId?: number\n    isShadowHost?: boolean\n    isShadow?: boolean\n}\n\nexport type serializedNodeWithId = serializedNode & {\n    id: number\n}\n\n// ===== Types from @rrweb/types =====\n\nexport type blockClass = string | RegExp\n\nexport type maskTextClass = string | RegExp\n\nexport type IWindow = Window & typeof globalThis\n\nexport type listenerHandler = () => void\n\nexport type KeepIframeSrcFn = (src: string) => boolean\n\nexport type PackFn = (event: eventWithTime) => string\n\nexport enum EventType {\n    DomContentLoaded = 0,\n    Load = 1,\n    FullSnapshot = 2,\n    IncrementalSnapshot = 3,\n    Meta = 4,\n    Custom = 5,\n    Plugin = 6,\n}\n\nexport enum IncrementalSource {\n    Mutation = 0,\n    MouseMove = 1,\n    MouseInteraction = 2,\n    Scroll = 3,\n    ViewportResize = 4,\n    Input = 5,\n    TouchMove = 6,\n    MediaInteraction = 7,\n    StyleSheetRule = 8,\n    CanvasMutation = 9,\n    Font = 10,\n    Log = 11,\n    Drag = 12,\n    StyleDeclaration = 13,\n    Selection = 14,\n    AdoptedStyleSheet = 15,\n    CustomElement = 16,\n}\n\nexport type domContentLoadedEvent = {\n    type: EventType.DomContentLoaded\n    data: unknown\n}\n\nexport type loadedEvent = {\n    type: EventType.Load\n    data: unknown\n}\n\nexport type fullSnapshotEvent = {\n    type: EventType.FullSnapshot\n    data: {\n        node: serializedNodeWithId\n        initialOffset: {\n            top: number\n            left: number\n        }\n    }\n}\n\nexport type metaEvent = {\n    type: EventType.Meta\n    data: {\n        href: string\n        width: number\n        height: number\n    }\n}\n\nexport type customEvent<T = unknown> = {\n    type: EventType.Custom\n    data: {\n        tag: string\n        payload: T\n    }\n}\n\nexport type pluginEvent<T = unknown> = {\n    type: EventType.Plugin\n    data: {\n        plugin: string\n        payload: T\n    }\n}\n\nexport type styleOMValue = {\n    [key: string]: styleValueWithPriority | string | false\n}\n\nexport type styleValueWithPriority = [string, string]\n\nexport type textMutation = {\n    id: number\n    value: string | null\n}\n\nexport type attributeMutation = {\n    id: number\n    attributes: {\n        [key: string]: string | styleOMValue | null\n    }\n}\n\nexport type removedNodeMutation = {\n    parentId: number\n    id: number\n    isShadow?: boolean\n}\n\nexport type addedNodeMutation = {\n    parentId: number\n    previousId?: number | null\n    nextId: number | null\n    node: serializedNodeWithId\n}\n\nexport type mutationCallbackParam = {\n    texts: textMutation[]\n    attributes: attributeMutation[]\n    removes: removedNodeMutation[]\n    adds: addedNodeMutation[]\n    isAttachIframe?: true\n}\n\nexport type mutationData = {\n    source: IncrementalSource.Mutation\n} & mutationCallbackParam\n\nexport type mousePosition = {\n    x: number\n    y: number\n    id: number\n    timeOffset: number\n}\n\nexport enum MouseInteractions {\n    MouseUp = 0,\n    MouseDown = 1,\n    Click = 2,\n    ContextMenu = 3,\n    DblClick = 4,\n    Focus = 5,\n    Blur = 6,\n    TouchStart = 7,\n    TouchMove_Departed = 8,\n    TouchEnd = 9,\n    TouchCancel = 10,\n}\n\nexport enum PointerTypes {\n    Mouse = 0,\n    Pen = 1,\n    Touch = 2,\n}\n\ntype mouseInteractionParam = {\n    type: MouseInteractions\n    id: number\n    x?: number\n    y?: number\n    pointerType?: PointerTypes\n}\n\nexport type mouseInteractionData = {\n    source: IncrementalSource.MouseInteraction\n} & mouseInteractionParam\n\nexport type mousemoveData = {\n    source: IncrementalSource.MouseMove | IncrementalSource.TouchMove | IncrementalSource.Drag\n    positions: mousePosition[]\n}\n\nexport type scrollPosition = {\n    id: number\n    x: number\n    y: number\n}\n\nexport type scrollData = {\n    source: IncrementalSource.Scroll\n} & scrollPosition\n\nexport type viewportResizeDimension = {\n    width: number\n    height: number\n}\n\nexport type viewportResizeData = {\n    source: IncrementalSource.ViewportResize\n} & viewportResizeDimension\n\nexport type inputValue = {\n    text: string\n    isChecked: boolean\n    userTriggered?: boolean\n}\n\nexport type inputData = {\n    source: IncrementalSource.Input\n    id: number\n} & inputValue\n\nexport enum MediaInteractions {\n    Play = 0,\n    Pause = 1,\n    Seeked = 2,\n    VolumeChange = 3,\n    RateChange = 4,\n}\n\nexport type mediaInteractionParam = {\n    type: MediaInteractions\n    id: number\n    currentTime?: number\n    volume?: number\n    muted?: boolean\n    loop?: boolean\n    playbackRate?: number\n}\n\nexport type mediaInteractionData = {\n    source: IncrementalSource.MediaInteraction\n} & mediaInteractionParam\n\nexport type styleSheetAddRule = {\n    rule: string\n    index?: number | number[]\n}\n\nexport type styleSheetDeleteRule = {\n    index: number | number[]\n}\n\nexport type styleSheetRuleParam = {\n    id?: number\n    styleId?: number\n    removes?: styleSheetDeleteRule[]\n    adds?: styleSheetAddRule[]\n    replace?: string\n    replaceSync?: string\n}\n\nexport type styleSheetRuleData = {\n    source: IncrementalSource.StyleSheetRule\n} & styleSheetRuleParam\n\nexport enum CanvasContext {\n    '2D' = 0,\n    WebGL = 1,\n    WebGL2 = 2,\n}\n\nexport type canvasMutationCommand = {\n    property: string\n    args: Array<unknown>\n    setter?: true\n}\n\nexport type canvasMutationParam =\n    | {\n          id: number\n          type: CanvasContext\n          commands: canvasMutationCommand[]\n      }\n    | ({\n          id: number\n          type: CanvasContext\n      } & canvasMutationCommand)\n\nexport type canvasMutationData = {\n    source: IncrementalSource.CanvasMutation\n} & canvasMutationParam\n\nexport type fontParam = {\n    family: string\n    fontSource: string\n    buffer: boolean\n    descriptors?: FontFaceDescriptors\n}\n\nexport type fontData = {\n    source: IncrementalSource.Font\n} & fontParam\n\nexport type SelectionRange = {\n    start: number\n    startOffset: number\n    end: number\n    endOffset: number\n}\n\nexport type selectionParam = {\n    ranges: Array<SelectionRange>\n}\n\nexport type selectionData = {\n    source: IncrementalSource.Selection\n} & selectionParam\n\nexport type styleDeclarationParam = {\n    id?: number\n    styleId?: number\n    index: number[]\n    set?: {\n        property: string\n        value: string | null\n        priority: string | undefined\n    }\n    remove?: {\n        property: string\n    }\n}\n\nexport type styleDeclarationData = {\n    source: IncrementalSource.StyleDeclaration\n} & styleDeclarationParam\n\nexport type adoptedStyleSheetParam = {\n    id: number\n    styles?: {\n        styleId: number\n        rules: styleSheetAddRule[]\n    }[]\n    styleIds: number[]\n}\n\nexport type adoptedStyleSheetData = {\n    source: IncrementalSource.AdoptedStyleSheet\n} & adoptedStyleSheetParam\n\nexport type customElementParam = {\n    define?: {\n        name: string\n    }\n}\n\nexport type customElementData = {\n    source: IncrementalSource.CustomElement\n} & customElementParam\n\nexport type incrementalData =\n    | mutationData\n    | mousemoveData\n    | mouseInteractionData\n    | scrollData\n    | viewportResizeData\n    | inputData\n    | mediaInteractionData\n    | styleSheetRuleData\n    | canvasMutationData\n    | fontData\n    | selectionData\n    | styleDeclarationData\n    | adoptedStyleSheetData\n    | customElementData\n\nexport type incrementalSnapshotEvent = {\n    type: EventType.IncrementalSnapshot\n    data: incrementalData\n}\n\nexport type eventWithoutTime =\n    | domContentLoadedEvent\n    | loadedEvent\n    | fullSnapshotEvent\n    | incrementalSnapshotEvent\n    | metaEvent\n    | customEvent\n    | pluginEvent\n\nexport type eventWithTime = eventWithoutTime & {\n    timestamp: number\n    delay?: number\n}\n\nexport type mutationCallBack = (m: mutationCallbackParam) => void\n\nexport type mousemoveCallBack = (\n    p: mousePosition[],\n    source: IncrementalSource.MouseMove | IncrementalSource.TouchMove | IncrementalSource.Drag\n) => void\n\nexport type mouseInteractionCallBack = (d: mouseInteractionParam) => void\n\nexport type scrollCallback = (p: scrollPosition) => void\n\nexport type viewportResizeCallback = (d: viewportResizeDimension) => void\n\nexport type inputCallback = (v: inputValue & { id: number }) => void\n\nexport type mediaInteractionCallback = (p: mediaInteractionParam) => void\n\nexport type styleSheetRuleCallback = (s: styleSheetRuleParam) => void\n\nexport type styleDeclarationCallback = (s: styleDeclarationParam) => void\n\nexport type canvasMutationCallback = (p: canvasMutationParam) => void\n\nexport type fontCallback = (p: fontParam) => void\n\nexport type selectionCallback = (p: selectionParam) => void\n\nexport type customElementCallback = (c: customElementParam) => void\n\nexport type adoptedStyleSheetCallback = (a: adoptedStyleSheetParam) => void\n\nexport type hooksParam = {\n    mutation?: mutationCallBack\n    mousemove?: mousemoveCallBack\n    mouseInteraction?: mouseInteractionCallBack\n    scroll?: scrollCallback\n    viewportResize?: viewportResizeCallback\n    input?: inputCallback\n    mediaInteaction?: mediaInteractionCallback\n    styleSheetRule?: styleSheetRuleCallback\n    styleDeclaration?: styleDeclarationCallback\n    canvasMutation?: canvasMutationCallback\n    font?: fontCallback\n    selection?: selectionCallback\n    customElement?: customElementCallback\n}\n\nexport type SamplingStrategy = Partial<{\n    mousemove: boolean | number\n    mousemoveCallback: number\n    mouseInteraction: boolean | Record<string, boolean | undefined>\n    scroll: number\n    media: number\n    input: 'all' | 'last'\n    canvas: 'all' | number\n}>\n\nexport interface ICrossOriginIframeMirror {\n    getId(\n        iframe: HTMLIFrameElement,\n        remoteId: number,\n        parentToRemoteMap?: Map<number, number>,\n        remoteToParentMap?: Map<number, number>\n    ): number\n    getIds(iframe: HTMLIFrameElement, remoteId: number[]): number[]\n    getRemoteId(iframe: HTMLIFrameElement, parentId: number, map?: Map<number, number>): number\n    getRemoteIds(iframe: HTMLIFrameElement, parentId: number[]): number[]\n    reset(iframe?: HTMLIFrameElement): void\n}\n\nexport type RecordPlugin<TOptions = unknown> = {\n    name: string\n    observer?: (cb: (...args: Array<unknown>) => void, win: IWindow, options: TOptions) => listenerHandler\n    eventProcessor?: <TExtend>(event: eventWithTime) => eventWithTime & TExtend\n    getMirror?: (mirrors: {\n        nodeMirror: Mirror\n        crossOriginIframeMirror: ICrossOriginIframeMirror\n        crossOriginIframeStyleMirror: ICrossOriginIframeMirror\n    }) => void\n    options: TOptions\n}\n","import {\n    SESSION_RECORDING_EVENT_TRIGGER_ACTIVATED_SESSION,\n    SESSION_RECORDING_URL_TRIGGER_ACTIVATED_SESSION,\n} from '../../../constants'\nimport { PostHog } from '../../../posthog-core'\nimport { FlagVariant, RemoteConfig, SessionRecordingPersistedConfig, SessionRecordingUrlTrigger } from '../../../types'\nimport { isNullish, isBoolean, isString, isObject } from '@posthog/core'\nimport { window } from '../../../utils/globals'\nimport { logger } from '../../../utils/logger'\n\nexport const DISABLED = 'disabled'\nexport const SAMPLED = 'sampled'\nexport const ACTIVE = 'active'\nexport const BUFFERING = 'buffering'\nexport const PAUSED = 'paused'\nexport const LAZY_LOADING = 'lazy_loading'\n\nconst TRIGGER = 'trigger'\nexport const TRIGGER_ACTIVATED = TRIGGER + '_activated'\nexport const TRIGGER_PENDING = TRIGGER + '_pending'\nexport const TRIGGER_DISABLED = TRIGGER + '_' + DISABLED\n\nexport interface RecordingTriggersStatus {\n    get receivedFlags(): boolean\n    get isRecordingEnabled(): false | true | undefined\n    get isSampled(): false | true | null\n    get urlTriggerMatching(): URLTriggerMatching\n    get eventTriggerMatching(): EventTriggerMatching\n    get linkedFlagMatching(): LinkedFlagMatching\n    get sessionId(): string\n}\n\nexport type TriggerType = 'url' | 'event'\n/* \ntriggers can have one of three statuses:\n * - trigger_activated: the trigger met conditions to start recording\n * - trigger_pending: the trigger is present, but the conditions are not yet met\n * - trigger_disabled: the trigger is not present\n */\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst triggerStatuses = [TRIGGER_ACTIVATED, TRIGGER_PENDING, TRIGGER_DISABLED] as const\nexport type TriggerStatus = (typeof triggerStatuses)[number]\n\n/**\n * Session recording starts in buffering mode while waiting for \"flags response\".\n * Once the response is received, it might be disabled, active or sampled.\n * When \"sampled\" that means a sample rate is set, and the last time the session ID rotated\n * the sample rate determined this session should be sent to the server.\n */\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst sessionRecordingStatuses = [DISABLED, SAMPLED, ACTIVE, BUFFERING, PAUSED, LAZY_LOADING] as const\nexport type SessionRecordingStatus = (typeof sessionRecordingStatuses)[number]\n\n// while we have both lazy and eager loaded replay we might get either type of config\ntype ReplayConfigType = RemoteConfig | SessionRecordingPersistedConfig\n\nfunction sessionRecordingUrlTriggerMatches(\n    url: string,\n    triggers: SessionRecordingUrlTrigger[],\n    compiledRegexCache?: Map<string, RegExp>\n) {\n    return triggers.some((trigger) => {\n        switch (trigger.matching) {\n            case 'regex': {\n                const regex = compiledRegexCache?.get(trigger.url) ?? new RegExp(trigger.url)\n                return regex.test(url)\n            }\n            default:\n                return false\n        }\n    })\n}\n\nexport interface TriggerStatusMatching {\n    triggerStatus(sessionId: string): TriggerStatus\n    stop(): void\n}\nexport class OrTriggerMatching implements TriggerStatusMatching {\n    constructor(private readonly _matchers: TriggerStatusMatching[]) {}\n\n    triggerStatus(sessionId: string): TriggerStatus {\n        const statuses = this._matchers.map((m) => m.triggerStatus(sessionId))\n        if (statuses.includes(TRIGGER_ACTIVATED)) {\n            return TRIGGER_ACTIVATED\n        }\n        if (statuses.includes(TRIGGER_PENDING)) {\n            return TRIGGER_PENDING\n        }\n        return TRIGGER_DISABLED\n    }\n\n    stop(): void {\n        this._matchers.forEach((m) => m.stop())\n    }\n}\n\nexport class AndTriggerMatching implements TriggerStatusMatching {\n    constructor(private readonly _matchers: TriggerStatusMatching[]) {}\n\n    triggerStatus(sessionId: string): TriggerStatus {\n        const statuses = new Set<TriggerStatus>()\n        for (const matcher of this._matchers) {\n            statuses.add(matcher.triggerStatus(sessionId))\n        }\n\n        // trigger_disabled means no config\n        statuses.delete(TRIGGER_DISABLED)\n        switch (statuses.size) {\n            case 0:\n                return TRIGGER_DISABLED\n            case 1:\n                return Array.from(statuses)[0]\n            default:\n                return TRIGGER_PENDING\n        }\n    }\n\n    stop(): void {\n        this._matchers.forEach((m) => m.stop())\n    }\n}\n\nexport class PendingTriggerMatching implements TriggerStatusMatching {\n    triggerStatus(): TriggerStatus {\n        return TRIGGER_PENDING\n    }\n\n    stop(): void {\n        // no-op\n    }\n}\n\nconst isEagerLoadedConfig = (x: ReplayConfigType): x is RemoteConfig => {\n    return 'sessionRecording' in x\n}\n\nexport class URLTriggerMatching implements TriggerStatusMatching {\n    _urlTriggers: SessionRecordingUrlTrigger[] = []\n    _urlBlocklist: SessionRecordingUrlTrigger[] = []\n\n    private _compiledTriggerRegexes: Map<string, RegExp> = new Map()\n    private _compiledBlocklistRegexes: Map<string, RegExp> = new Map()\n\n    private _lastCheckedUrl: string = ''\n\n    urlBlocked: boolean = false\n\n    constructor(private readonly _instance: PostHog) {}\n\n    onConfig(config: ReplayConfigType) {\n        this._urlTriggers =\n            (isEagerLoadedConfig(config)\n                ? isObject(config.sessionRecording)\n                    ? config.sessionRecording?.urlTriggers\n                    : []\n                : config?.urlTriggers) || []\n        this._urlBlocklist =\n            (isEagerLoadedConfig(config)\n                ? isObject(config.sessionRecording)\n                    ? config.sessionRecording?.urlBlocklist\n                    : []\n                : config?.urlBlocklist) || []\n\n        this._compileRegexCache()\n    }\n\n    /**\n     * Compiles and caches RegExp objects from URL triggers and blocklist.\n     * This prevents recreating RegExp objects on every rrweb event\n     */\n    private _compileRegexCache(): void {\n        this._compiledTriggerRegexes.clear()\n        this._compiledBlocklistRegexes.clear()\n\n        for (const trigger of this._urlTriggers) {\n            if (trigger.matching === 'regex' && !this._compiledTriggerRegexes.has(trigger.url)) {\n                try {\n                    this._compiledTriggerRegexes.set(trigger.url, new RegExp(trigger.url))\n                } catch (e) {\n                    logger.error('Invalid URL trigger regex pattern:', trigger.url, e)\n                }\n            }\n        }\n\n        for (const trigger of this._urlBlocklist) {\n            if (trigger.matching === 'regex' && !this._compiledBlocklistRegexes.has(trigger.url)) {\n                try {\n                    this._compiledBlocklistRegexes.set(trigger.url, new RegExp(trigger.url))\n                } catch (e) {\n                    logger.error('Invalid URL blocklist regex pattern:', trigger.url, e)\n                }\n            }\n        }\n    }\n\n    /**\n     * @deprecated Use onConfig instead\n     */\n    onRemoteConfig(response: RemoteConfig) {\n        this.onConfig(response)\n    }\n\n    private _urlTriggerStatus(sessionId: string): TriggerStatus {\n        if (this._urlTriggers.length === 0) {\n            return TRIGGER_DISABLED\n        }\n\n        const currentTriggerSession = this._instance?.get_property(SESSION_RECORDING_URL_TRIGGER_ACTIVATED_SESSION)\n        return currentTriggerSession === sessionId ? TRIGGER_ACTIVATED : TRIGGER_PENDING\n    }\n\n    triggerStatus(sessionId: string): TriggerStatus {\n        const urlTriggerStatus = this._urlTriggerStatus(sessionId)\n        const eitherIsActivated = urlTriggerStatus === TRIGGER_ACTIVATED\n        const eitherIsPending = urlTriggerStatus === TRIGGER_PENDING\n\n        const result = eitherIsActivated ? TRIGGER_ACTIVATED : eitherIsPending ? TRIGGER_PENDING : TRIGGER_DISABLED\n        this._instance.register_for_session({\n            $sdk_debug_replay_url_trigger_status: result,\n        })\n        return result\n    }\n\n    checkUrlTriggerConditions(\n        onPause: () => void,\n        onResume: () => void,\n        onActivate: (triggerType: TriggerType) => void,\n        sessionId: string\n    ) {\n        if (typeof window === 'undefined' || !window.location.href) {\n            return\n        }\n\n        const url = window.location.href\n        if (url === this._lastCheckedUrl) {\n            return\n        }\n        this._lastCheckedUrl = url\n\n        const wasBlocked = this.urlBlocked\n        const isNowBlocked = sessionRecordingUrlTriggerMatches(url, this._urlBlocklist, this._compiledBlocklistRegexes)\n\n        if (wasBlocked && isNowBlocked) {\n            return\n        }\n\n        if (isNowBlocked && !wasBlocked) {\n            onPause()\n        } else if (!isNowBlocked && wasBlocked) {\n            onResume()\n        }\n\n        const isActivated = this._urlTriggerStatus(sessionId) === TRIGGER_ACTIVATED\n        const urlMatches = sessionRecordingUrlTriggerMatches(url, this._urlTriggers, this._compiledTriggerRegexes)\n\n        if (!isActivated && urlMatches) {\n            onActivate('url')\n        }\n    }\n\n    stop(): void {\n        this._lastCheckedUrl = ''\n    }\n}\n\nexport class LinkedFlagMatching implements TriggerStatusMatching {\n    linkedFlag: string | FlagVariant | null = null\n    linkedFlagSeen: boolean = false\n    private _flagListenerCleanup: () => void = () => {}\n    constructor(private readonly _instance: PostHog) {}\n\n    triggerStatus(): TriggerStatus {\n        let result = TRIGGER_PENDING\n        if (isNullish(this.linkedFlag)) {\n            result = TRIGGER_DISABLED\n        }\n        if (this.linkedFlagSeen) {\n            result = TRIGGER_ACTIVATED\n        }\n        this._instance.register_for_session({\n            $sdk_debug_replay_linked_flag_trigger_status: result,\n        })\n        return result\n    }\n\n    onConfig(config: ReplayConfigType, onStarted: (flag: string, variant: string | null) => void) {\n        this.linkedFlag =\n            (isEagerLoadedConfig(config)\n                ? isObject(config.sessionRecording)\n                    ? config.sessionRecording?.linkedFlag\n                    : null\n                : config?.linkedFlag) || null\n\n        if (!isNullish(this.linkedFlag) && !this.linkedFlagSeen) {\n            const linkedFlag = isString(this.linkedFlag) ? this.linkedFlag : this.linkedFlag.flag\n            const linkedVariant = isString(this.linkedFlag) ? null : this.linkedFlag.variant\n            this._flagListenerCleanup = this._instance.onFeatureFlags((_flags, variants) => {\n                const flagIsPresent = isObject(variants) && linkedFlag in variants\n                let linkedFlagMatches = false\n                if (flagIsPresent) {\n                    const variantForFlagKey = variants[linkedFlag]\n                    if (isBoolean(variantForFlagKey)) {\n                        linkedFlagMatches = variantForFlagKey === true\n                    } else if (linkedVariant) {\n                        linkedFlagMatches = variantForFlagKey === linkedVariant\n                    } else {\n                        // then this is a variant flag and we want to match any string\n                        linkedFlagMatches = !!variantForFlagKey\n                    }\n                }\n                this.linkedFlagSeen = linkedFlagMatches\n                if (linkedFlagMatches) {\n                    onStarted(linkedFlag, linkedVariant)\n                }\n            })\n        }\n    }\n\n    /**\n     * @deprecated Use onConfig instead\n     */\n    onRemoteConfig(response: RemoteConfig, onStarted: (flag: string, variant: string | null) => void) {\n        this.onConfig(response, onStarted)\n    }\n\n    stop(): void {\n        this._flagListenerCleanup()\n    }\n}\n\nexport class EventTriggerMatching implements TriggerStatusMatching {\n    _eventTriggers: string[] = []\n\n    constructor(private readonly _instance: PostHog) {}\n\n    onConfig(config: ReplayConfigType) {\n        this._eventTriggers =\n            (isEagerLoadedConfig(config)\n                ? isObject(config.sessionRecording)\n                    ? config.sessionRecording?.eventTriggers\n                    : []\n                : config?.eventTriggers) || []\n    }\n\n    /**\n     * @deprecated Use onConfig instead\n     */\n    onRemoteConfig(response: RemoteConfig) {\n        this.onConfig(response)\n    }\n\n    private _eventTriggerStatus(sessionId: string): TriggerStatus {\n        if (this._eventTriggers.length === 0) {\n            return TRIGGER_DISABLED\n        }\n\n        const currentTriggerSession = this._instance?.get_property(SESSION_RECORDING_EVENT_TRIGGER_ACTIVATED_SESSION)\n        return currentTriggerSession === sessionId ? TRIGGER_ACTIVATED : TRIGGER_PENDING\n    }\n\n    triggerStatus(sessionId: string): TriggerStatus {\n        const eventTriggerStatus = this._eventTriggerStatus(sessionId)\n        const result =\n            eventTriggerStatus === TRIGGER_ACTIVATED\n                ? TRIGGER_ACTIVATED\n                : eventTriggerStatus === TRIGGER_PENDING\n                  ? TRIGGER_PENDING\n                  : TRIGGER_DISABLED\n        this._instance.register_for_session({\n            $sdk_debug_replay_event_trigger_status: result,\n        })\n        return result\n    }\n\n    stop(): void {\n        // no-op\n    }\n}\n\n// we need a no-op matcher before we can lazy-load the other matches, since all matchers wait on remote config anyway\nexport function nullMatchSessionRecordingStatus(triggersStatus: RecordingTriggersStatus): SessionRecordingStatus {\n    if (!triggersStatus.isRecordingEnabled) {\n        return DISABLED\n    }\n\n    return BUFFERING\n}\n\nexport function anyMatchSessionRecordingStatus(triggersStatus: RecordingTriggersStatus): SessionRecordingStatus {\n    if (!triggersStatus.receivedFlags) {\n        return BUFFERING\n    }\n\n    if (!triggersStatus.isRecordingEnabled) {\n        return DISABLED\n    }\n\n    if (triggersStatus.urlTriggerMatching.urlBlocked) {\n        return PAUSED\n    }\n\n    const sampledActive = triggersStatus.isSampled === true\n    const triggerMatches = new OrTriggerMatching([\n        triggersStatus.eventTriggerMatching,\n        triggersStatus.urlTriggerMatching,\n        triggersStatus.linkedFlagMatching,\n    ]).triggerStatus(triggersStatus.sessionId)\n\n    if (sampledActive) {\n        return SAMPLED\n    }\n\n    if (triggerMatches === TRIGGER_ACTIVATED) {\n        return ACTIVE\n    }\n\n    if (triggerMatches === TRIGGER_PENDING) {\n        // even if sampled active is false, we should still be buffering\n        // since a pending trigger could override it\n        return BUFFERING\n    }\n\n    // if sampling is set and the session is already decided to not be sampled\n    // then we should never be active\n    if (triggersStatus.isSampled === false) {\n        return DISABLED\n    }\n\n    return ACTIVE\n}\n\nexport function allMatchSessionRecordingStatus(triggersStatus: RecordingTriggersStatus): SessionRecordingStatus {\n    if (!triggersStatus.receivedFlags) {\n        return BUFFERING\n    }\n\n    if (!triggersStatus.isRecordingEnabled) {\n        return DISABLED\n    }\n\n    if (triggersStatus.urlTriggerMatching.urlBlocked) {\n        return PAUSED\n    }\n\n    const andTriggerMatch = new AndTriggerMatching([\n        triggersStatus.eventTriggerMatching,\n        triggersStatus.urlTriggerMatching,\n        triggersStatus.linkedFlagMatching,\n    ])\n    const currentTriggerStatus = andTriggerMatch.triggerStatus(triggersStatus.sessionId)\n    const hasTriggersConfigured = currentTriggerStatus !== TRIGGER_DISABLED\n\n    const hasSamplingConfigured = isBoolean(triggersStatus.isSampled)\n\n    if (hasTriggersConfigured && currentTriggerStatus === TRIGGER_PENDING) {\n        return BUFFERING\n    }\n\n    if (hasTriggersConfigured && currentTriggerStatus === TRIGGER_DISABLED) {\n        return DISABLED\n    }\n\n    // sampling can't ever cause buffering, it's always determined right away or not configured\n    if (hasSamplingConfigured && !triggersStatus.isSampled) {\n        return DISABLED\n    }\n\n    // If sampling is configured and set to true, return sampled\n    if (triggersStatus.isSampled === true) {\n        return SAMPLED\n    }\n\n    return ACTIVE\n}\n","import type { eventWithTime, pluginEvent } from '../types/rrweb-types'\n\nimport { isObject } from '@posthog/core'\nimport { SnapshotBuffer } from './lazy-loaded-session-recorder'\n\n// taken from https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Cyclic_object_value#circular_references\nexport function circularReferenceReplacer() {\n    const ancestors: any[] = []\n    return function (this: any, _key: string, value: any) {\n        if (isObject(value)) {\n            // `this` is the object that value is contained in,\n            // i.e., its direct parent.\n            while (ancestors.length > 0 && ancestors[ancestors.length - 1] !== this) {\n                ancestors.pop()\n            }\n            if (ancestors.includes(value)) {\n                return '[Circular]'\n            }\n            ancestors.push(value)\n            return value\n        } else {\n            return value\n        }\n    }\n}\n\nexport function estimateSize(sizeable: unknown): number {\n    return JSON.stringify(sizeable, circularReferenceReplacer())?.length || 0\n}\n\nexport const replacementImageURI =\n    'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2IiBmaWxsPSJibGFjayIvPgo8cGF0aCBkPSJNOCAwSDE2TDAgMTZWOEw4IDBaIiBmaWxsPSIjMkQyRDJEIi8+CjxwYXRoIGQ9Ik0xNiA4VjE2SDhMMTYgOFoiIGZpbGw9IiMyRDJEMkQiLz4KPC9zdmc+Cg=='\n\nexport const FULL_SNAPSHOT_EVENT_TYPE = 2\nexport const META_EVENT_TYPE = 4\nexport const INCREMENTAL_SNAPSHOT_EVENT_TYPE = 3\nexport const PLUGIN_EVENT_TYPE = 6\nexport const MUTATION_SOURCE_TYPE = 0\n\nexport const MAX_MESSAGE_SIZE = 5000000 // ~5mb\n\n/*\n * Check whether a data payload is nearing 5mb. If it is, it checks the data for\n * data URIs (the likely culprit for large payloads). If it finds data URIs, it either replaces\n * it with a generic image (if it's an image) or removes it.\n * @data {object} the rr-web data object\n * @returns {object} the rr-web data object with data uris filtered out\n */\nexport function ensureMaxMessageSize(data: eventWithTime): { event: eventWithTime; size: number } {\n    let stringifiedData = JSON.stringify(data)\n    // Note: with compression, this limit may be able to be increased\n    // but we're assuming most of the size is from a data uri which\n    // is unlikely to be compressed further\n\n    if (stringifiedData.length > MAX_MESSAGE_SIZE) {\n        // Regex that matches the pattern for a dataURI with the shape 'data:{mime type};{encoding},{data}'. It:\n        // 1) Checks if the pattern starts with 'data:' (potentially, not at the start of the string)\n        // 2) Extracts the mime type of the data uri in the first group\n        // 3) Determines when the data URI ends.Depending on if it's used in the src tag or css, it can end with a ) or \"\n        const dataURIRegex = /data:([\\w/\\-.]+);(\\w+),([^)\"]*)/gim\n        const matches = stringifiedData.matchAll(dataURIRegex)\n        for (const match of matches) {\n            if (match[1].toLocaleLowerCase().slice(0, 6) === 'image/') {\n                stringifiedData = stringifiedData.replace(match[0], replacementImageURI)\n            } else {\n                stringifiedData = stringifiedData.replace(match[0], '')\n            }\n        }\n    }\n    return { event: JSON.parse(stringifiedData), size: stringifiedData.length }\n}\n\nexport const CONSOLE_LOG_PLUGIN_NAME = 'rrweb/console@1' // The name of the rr-web plugin that emits console logs\n\n// Console logs can be really large. This function truncates large logs\n// It's a simple function that just truncates long strings.\n// TODO: Ideally this function would have better handling of objects + lists,\n// so they could still be rendered in a pretty way after truncation.\nexport function truncateLargeConsoleLogs(_event: eventWithTime) {\n    const event = _event as pluginEvent<{ payload: string[] }>\n\n    const MAX_STRING_SIZE = 2000 // Maximum number of characters allowed in a string\n    const MAX_STRINGS_PER_LOG = 10 // A log can consist of multiple strings (e.g. consol.log('string1', 'string2'))\n\n    if (\n        event &&\n        isObject(event) &&\n        event.type === PLUGIN_EVENT_TYPE &&\n        isObject(event.data) &&\n        event.data.plugin === CONSOLE_LOG_PLUGIN_NAME\n    ) {\n        // Note: event.data.payload.payload comes from rr-web, and is an array of strings\n        if (event.data.payload.payload.length > MAX_STRINGS_PER_LOG) {\n            event.data.payload.payload = event.data.payload.payload.slice(0, MAX_STRINGS_PER_LOG)\n            event.data.payload.payload.push('...[truncated]')\n        }\n        const updatedPayload = []\n        for (let i = 0; i < event.data.payload.payload.length; i++) {\n            if (\n                event.data.payload.payload[i] && // Value can be null\n                event.data.payload.payload[i].length > MAX_STRING_SIZE\n            ) {\n                updatedPayload.push(event.data.payload.payload[i].slice(0, MAX_STRING_SIZE) + '...[truncated]')\n            } else {\n                updatedPayload.push(event.data.payload.payload[i])\n            }\n        }\n        event.data.payload.payload = updatedPayload\n        // Return original type\n        return _event\n    }\n    return _event\n}\n\nexport const SEVEN_MEGABYTES = 1024 * 1024 * 7 * 0.9 // ~7mb (with some wiggle room)\n\n// recursively splits large buffers into smaller ones\n// uses a pretty high size limit to avoid splitting too much\nexport function splitBuffer(buffer: SnapshotBuffer, sizeLimit: number = SEVEN_MEGABYTES): SnapshotBuffer[] {\n    if (buffer.size >= sizeLimit && buffer.data.length > 1) {\n        const half = Math.floor(buffer.data.length / 2)\n        const firstHalf = buffer.data.slice(0, half)\n        const secondHalf = buffer.data.slice(half)\n        return [\n            splitBuffer({\n                size: estimateSize(firstHalf),\n                data: firstHalf,\n                sessionId: buffer.sessionId,\n                windowId: buffer.windowId,\n            }),\n            splitBuffer({\n                size: estimateSize(secondHalf),\n                data: secondHalf,\n                sessionId: buffer.sessionId,\n                windowId: buffer.windowId,\n            }),\n        ].flatMap((x) => x)\n    } else {\n        return [buffer]\n    }\n}\n","// DEFLATE is a complex format; to read this code, you should probably check the RFC first:\n// https://tools.ietf.org/html/rfc1951\n// You may also wish to take a look at the guide I made about this program:\n// https://gist.github.com/101arrowz/253f31eb5abc3d9275ab943003ffecad\n// Much of the following code is similar to that of UZIP.js:\n// https://github.com/photopea/UZIP.js\n// Many optimizations have been made, so the bundle size is ultimately smaller but performance is similar.\n// Sometimes 0 will appear where -1 would be more appropriate. This is because using a uint\n// is better for memory in most engines (I *think*).\nvar ch2 = {};\nvar wk = (function (c, id, msg, transfer, cb) {\n    var u = ch2[id] || (ch2[id] = URL.createObjectURL(new Blob([c], { type: 'text/javascript' })));\n    var w = new Worker(u);\n    w.onerror = function (e) { return cb(e.error, null); };\n    w.onmessage = function (e) { return cb(null, e.data); };\n    w.postMessage(msg, transfer);\n    return w;\n});\n\n// aliases for shorter compressed code (most minifers don't do this)\nvar u8 = Uint8Array, u16 = Uint16Array, u32 = Uint32Array;\n// fixed length extra bits\nvar fleb = new u8([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, /* unused */ 0, 0, /* impossible */ 0]);\n// fixed distance extra bits\n// see fleb note\nvar fdeb = new u8([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, /* unused */ 0, 0]);\n// code length index map\nvar clim = new u8([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);\n// get base, reverse index map from extra bits\nvar freb = function (eb, start) {\n    var b = new u16(31);\n    for (var i = 0; i < 31; ++i) {\n        b[i] = start += 1 << eb[i - 1];\n    }\n    // numbers here are at max 18 bits\n    var r = new u32(b[30]);\n    for (var i = 1; i < 30; ++i) {\n        for (var j = b[i]; j < b[i + 1]; ++j) {\n            r[j] = ((j - b[i]) << 5) | i;\n        }\n    }\n    return [b, r];\n};\nvar _a = freb(fleb, 2), fl = _a[0], revfl = _a[1];\n// we can ignore the fact that the other numbers are wrong; they never happen anyway\nfl[28] = 258, revfl[258] = 28;\nvar _b = freb(fdeb, 0), fd = _b[0], revfd = _b[1];\n// map of value to reverse (assuming 16 bits)\nvar rev = new u16(32768);\nfor (var i = 0; i < 32768; ++i) {\n    // reverse table algorithm from SO\n    var x = ((i & 0xAAAA) >>> 1) | ((i & 0x5555) << 1);\n    x = ((x & 0xCCCC) >>> 2) | ((x & 0x3333) << 2);\n    x = ((x & 0xF0F0) >>> 4) | ((x & 0x0F0F) << 4);\n    rev[i] = (((x & 0xFF00) >>> 8) | ((x & 0x00FF) << 8)) >>> 1;\n}\n// create huffman tree from u8 \"map\": index -> code length for code index\n// mb (max bits) must be at most 15\n// TODO: optimize/split up?\nvar hMap = (function (cd, mb, r) {\n    var s = cd.length;\n    // index\n    var i = 0;\n    // u16 \"map\": index -> # of codes with bit length = index\n    var l = new u16(mb);\n    // length of cd must be 288 (total # of codes)\n    for (; i < s; ++i)\n        ++l[cd[i] - 1];\n    // u16 \"map\": index -> minimum code for bit length = index\n    var le = new u16(mb);\n    for (i = 0; i < mb; ++i) {\n        le[i] = (le[i - 1] + l[i - 1]) << 1;\n    }\n    var co;\n    if (r) {\n        // u16 \"map\": index -> number of actual bits, symbol for code\n        co = new u16(1 << mb);\n        // bits to remove for reverser\n        var rvb = 15 - mb;\n        for (i = 0; i < s; ++i) {\n            // ignore 0 lengths\n            if (cd[i]) {\n                // num encoding both symbol and bits read\n                var sv = (i << 4) | cd[i];\n                // free bits\n                var r_1 = mb - cd[i];\n                // start value\n                var v = le[cd[i] - 1]++ << r_1;\n                // m is end value\n                for (var m = v | ((1 << r_1) - 1); v <= m; ++v) {\n                    // every 16 bit value starting with the code yields the same result\n                    co[rev[v] >>> rvb] = sv;\n                }\n            }\n        }\n    }\n    else {\n        co = new u16(s);\n        for (i = 0; i < s; ++i)\n            co[i] = rev[le[cd[i] - 1]++] >>> (15 - cd[i]);\n    }\n    return co;\n});\n// fixed length tree\nvar flt = new u8(288);\nfor (var i = 0; i < 144; ++i)\n    flt[i] = 8;\nfor (var i = 144; i < 256; ++i)\n    flt[i] = 9;\nfor (var i = 256; i < 280; ++i)\n    flt[i] = 7;\nfor (var i = 280; i < 288; ++i)\n    flt[i] = 8;\n// fixed distance tree\nvar fdt = new u8(32);\nfor (var i = 0; i < 32; ++i)\n    fdt[i] = 5;\n// fixed length map\nvar flm = /*#__PURE__*/ hMap(flt, 9, 0), flrm = /*#__PURE__*/ hMap(flt, 9, 1);\n// fixed distance map\nvar fdm = /*#__PURE__*/ hMap(fdt, 5, 0), fdrm = /*#__PURE__*/ hMap(fdt, 5, 1);\n// find max of array\nvar max = function (a) {\n    var m = a[0];\n    for (var i = 1; i < a.length; ++i) {\n        if (a[i] > m)\n            m = a[i];\n    }\n    return m;\n};\n// read d, starting at bit p and mask with m\nvar bits = function (d, p, m) {\n    var o = (p / 8) >> 0;\n    return ((d[o] | (d[o + 1] << 8)) >>> (p & 7)) & m;\n};\n// read d, starting at bit p continuing for at least 16 bits\nvar bits16 = function (d, p) {\n    var o = (p / 8) >> 0;\n    return ((d[o] | (d[o + 1] << 8) | (d[o + 2] << 16)) >>> (p & 7));\n};\n// get end of byte\nvar shft = function (p) { return ((p / 8) >> 0) + (p & 7 && 1); };\n// typed array slice - allows garbage collector to free original reference,\n// while being more compatible than .slice\nvar slc = function (v, s, e) {\n    if (s == null || s < 0)\n        s = 0;\n    if (e == null || e > v.length)\n        e = v.length;\n    // can't use .constructor in case user-supplied\n    var n = new (v instanceof u16 ? u16 : v instanceof u32 ? u32 : u8)(e - s);\n    n.set(v.subarray(s, e));\n    return n;\n};\n// expands raw DEFLATE data\nvar inflt = function (dat, buf, st) {\n    // source length\n    var sl = dat.length;\n    // have to estimate size\n    var noBuf = !buf || st;\n    // no state\n    var noSt = !st || st.i;\n    if (!st)\n        st = {};\n    // Assumes roughly 33% compression ratio average\n    if (!buf)\n        buf = new u8(sl * 3);\n    // ensure buffer can fit at least l elements\n    var cbuf = function (l) {\n        var bl = buf.length;\n        // need to increase size to fit\n        if (l > bl) {\n            // Double or set to necessary, whichever is greater\n            var nbuf = new u8(Math.max(bl * 2, l));\n            nbuf.set(buf);\n            buf = nbuf;\n        }\n    };\n    //  last chunk         bitpos           bytes\n    var final = st.f || 0, pos = st.p || 0, bt = st.b || 0, lm = st.l, dm = st.d, lbt = st.m, dbt = st.n;\n    // total bits\n    var tbts = sl * 8;\n    do {\n        if (!lm) {\n            // BFINAL - this is only 1 when last chunk is next\n            st.f = final = bits(dat, pos, 1);\n            // type: 0 = no compression, 1 = fixed huffman, 2 = dynamic huffman\n            var type = bits(dat, pos + 1, 3);\n            pos += 3;\n            if (!type) {\n                // go to end of byte boundary\n                var s = shft(pos) + 4, l = dat[s - 4] | (dat[s - 3] << 8), t = s + l;\n                if (t > sl) {\n                    if (noSt)\n                        throw 'unexpected EOF';\n                    break;\n                }\n                // ensure size\n                if (noBuf)\n                    cbuf(bt + l);\n                // Copy over uncompressed data\n                buf.set(dat.subarray(s, t), bt);\n                // Get new bitpos, update byte count\n                st.b = bt += l, st.p = pos = t * 8;\n                continue;\n            }\n            else if (type == 1)\n                lm = flrm, dm = fdrm, lbt = 9, dbt = 5;\n            else if (type == 2) {\n                //  literal                            lengths\n                var hLit = bits(dat, pos, 31) + 257, hcLen = bits(dat, pos + 10, 15) + 4;\n                var tl = hLit + bits(dat, pos + 5, 31) + 1;\n                pos += 14;\n                // length+distance tree\n                var ldt = new u8(tl);\n                // code length tree\n                var clt = new u8(19);\n                for (var i = 0; i < hcLen; ++i) {\n                    // use index map to get real code\n                    clt[clim[i]] = bits(dat, pos + i * 3, 7);\n                }\n                pos += hcLen * 3;\n                // code lengths bits\n                var clb = max(clt), clbmsk = (1 << clb) - 1;\n                if (!noSt && pos + tl * (clb + 7) > tbts)\n                    break;\n                // code lengths map\n                var clm = hMap(clt, clb, 1);\n                for (var i = 0; i < tl;) {\n                    var r = clm[bits(dat, pos, clbmsk)];\n                    // bits read\n                    pos += r & 15;\n                    // symbol\n                    var s = r >>> 4;\n                    // code length to copy\n                    if (s < 16) {\n                        ldt[i++] = s;\n                    }\n                    else {\n                        //  copy   count\n                        var c = 0, n = 0;\n                        if (s == 16)\n                            n = 3 + bits(dat, pos, 3), pos += 2, c = ldt[i - 1];\n                        else if (s == 17)\n                            n = 3 + bits(dat, pos, 7), pos += 3;\n                        else if (s == 18)\n                            n = 11 + bits(dat, pos, 127), pos += 7;\n                        while (n--)\n                            ldt[i++] = c;\n                    }\n                }\n                //    length tree                 distance tree\n                var lt = ldt.subarray(0, hLit), dt = ldt.subarray(hLit);\n                // max length bits\n                lbt = max(lt);\n                // max dist bits\n                dbt = max(dt);\n                lm = hMap(lt, lbt, 1);\n                dm = hMap(dt, dbt, 1);\n            }\n            else\n                throw 'invalid block type';\n            if (pos > tbts)\n                throw 'unexpected EOF';\n        }\n        // Make sure the buffer can hold this + the largest possible addition\n        // Maximum chunk size (practically, theoretically infinite) is 2^17;\n        if (noBuf)\n            cbuf(bt + 131072);\n        var lms = (1 << lbt) - 1, dms = (1 << dbt) - 1;\n        var mxa = lbt + dbt + 18;\n        while (noSt || pos + mxa < tbts) {\n            // bits read, code\n            var c = lm[bits16(dat, pos) & lms], sym = c >>> 4;\n            pos += c & 15;\n            if (pos > tbts)\n                throw 'unexpected EOF';\n            if (!c)\n                throw 'invalid length/literal';\n            if (sym < 256)\n                buf[bt++] = sym;\n            else if (sym == 256) {\n                lm = null;\n                break;\n            }\n            else {\n                var add = sym - 254;\n                // no extra bits needed if less\n                if (sym > 264) {\n                    // index\n                    var i = sym - 257, b = fleb[i];\n                    add = bits(dat, pos, (1 << b) - 1) + fl[i];\n                    pos += b;\n                }\n                // dist\n                var d = dm[bits16(dat, pos) & dms], dsym = d >>> 4;\n                if (!d)\n                    throw 'invalid distance';\n                pos += d & 15;\n                var dt = fd[dsym];\n                if (dsym > 3) {\n                    var b = fdeb[dsym];\n                    dt += bits16(dat, pos) & ((1 << b) - 1), pos += b;\n                }\n                if (pos > tbts)\n                    throw 'unexpected EOF';\n                if (noBuf)\n                    cbuf(bt + 131072);\n                var end = bt + add;\n                for (; bt < end; bt += 4) {\n                    buf[bt] = buf[bt - dt];\n                    buf[bt + 1] = buf[bt + 1 - dt];\n                    buf[bt + 2] = buf[bt + 2 - dt];\n                    buf[bt + 3] = buf[bt + 3 - dt];\n                }\n                bt = end;\n            }\n        }\n        st.l = lm, st.p = pos, st.b = bt;\n        if (lm)\n            final = 1, st.m = lbt, st.d = dm, st.n = dbt;\n    } while (!final);\n    return bt == buf.length ? buf : slc(buf, 0, bt);\n};\n// starting at p, write the minimum number of bits that can hold v to d\nvar wbits = function (d, p, v) {\n    v <<= p & 7;\n    var o = (p / 8) >> 0;\n    d[o] |= v;\n    d[o + 1] |= v >>> 8;\n};\n// starting at p, write the minimum number of bits (>8) that can hold v to d\nvar wbits16 = function (d, p, v) {\n    v <<= p & 7;\n    var o = (p / 8) >> 0;\n    d[o] |= v;\n    d[o + 1] |= v >>> 8;\n    d[o + 2] |= v >>> 16;\n};\n// creates code lengths from a frequency table\nvar hTree = function (d, mb) {\n    // Need extra info to make a tree\n    var t = [];\n    for (var i = 0; i < d.length; ++i) {\n        if (d[i])\n            t.push({ s: i, f: d[i] });\n    }\n    var s = t.length;\n    var t2 = t.slice();\n    if (!s)\n        return [new u8(0), 0];\n    if (s == 1) {\n        var v = new u8(t[0].s + 1);\n        v[t[0].s] = 1;\n        return [v, 1];\n    }\n    t.sort(function (a, b) { return a.f - b.f; });\n    // after i2 reaches last ind, will be stopped\n    // freq must be greater than largest possible number of symbols\n    t.push({ s: -1, f: 25001 });\n    var l = t[0], r = t[1], i0 = 0, i1 = 1, i2 = 2;\n    t[0] = { s: -1, f: l.f + r.f, l: l, r: r };\n    // efficient algorithm from UZIP.js\n    // i0 is lookbehind, i2 is lookahead - after processing two low-freq\n    // symbols that combined have high freq, will start processing i2 (high-freq,\n    // non-composite) symbols instead\n    // see https://reddit.com/r/photopea/comments/ikekht/uzipjs_questions/\n    while (i1 != s - 1) {\n        l = t[t[i0].f < t[i2].f ? i0++ : i2++];\n        r = t[i0 != i1 && t[i0].f < t[i2].f ? i0++ : i2++];\n        t[i1++] = { s: -1, f: l.f + r.f, l: l, r: r };\n    }\n    var maxSym = t2[0].s;\n    for (var i = 1; i < s; ++i) {\n        if (t2[i].s > maxSym)\n            maxSym = t2[i].s;\n    }\n    // code lengths\n    var tr = new u16(maxSym + 1);\n    // max bits in tree\n    var mbt = ln(t[i1 - 1], tr, 0);\n    if (mbt > mb) {\n        // more algorithms from UZIP.js\n        // TODO: find out how this code works (debt)\n        //  ind    debt\n        var i = 0, dt = 0;\n        //    left            cost\n        var lft = mbt - mb, cst = 1 << lft;\n        t2.sort(function (a, b) { return tr[b.s] - tr[a.s] || a.f - b.f; });\n        for (; i < s; ++i) {\n            var i2_1 = t2[i].s;\n            if (tr[i2_1] > mb) {\n                dt += cst - (1 << (mbt - tr[i2_1]));\n                tr[i2_1] = mb;\n            }\n            else\n                break;\n        }\n        dt >>>= lft;\n        while (dt > 0) {\n            var i2_2 = t2[i].s;\n            if (tr[i2_2] < mb)\n                dt -= 1 << (mb - tr[i2_2]++ - 1);\n            else\n                ++i;\n        }\n        for (; i >= 0 && dt; --i) {\n            var i2_3 = t2[i].s;\n            if (tr[i2_3] == mb) {\n                --tr[i2_3];\n                ++dt;\n            }\n        }\n        mbt = mb;\n    }\n    return [new u8(tr), mbt];\n};\n// get the max length and assign length codes\nvar ln = function (n, l, d) {\n    return n.s == -1\n        ? Math.max(ln(n.l, l, d + 1), ln(n.r, l, d + 1))\n        : (l[n.s] = d);\n};\n// length codes generation\nvar lc = function (c) {\n    var s = c.length;\n    // Note that the semicolon was intentional\n    while (s && !c[--s])\n        ;\n    var cl = new u16(++s);\n    //  ind      num         streak\n    var cli = 0, cln = c[0], cls = 1;\n    var w = function (v) { cl[cli++] = v; };\n    for (var i = 1; i <= s; ++i) {\n        if (c[i] == cln && i != s)\n            ++cls;\n        else {\n            if (!cln && cls > 2) {\n                for (; cls > 138; cls -= 138)\n                    w(32754);\n                if (cls > 2) {\n                    w(cls > 10 ? ((cls - 11) << 5) | 28690 : ((cls - 3) << 5) | 12305);\n                    cls = 0;\n                }\n            }\n            else if (cls > 3) {\n                w(cln), --cls;\n                for (; cls > 6; cls -= 6)\n                    w(8304);\n                if (cls > 2)\n                    w(((cls - 3) << 5) | 8208), cls = 0;\n            }\n            while (cls--)\n                w(cln);\n            cls = 1;\n            cln = c[i];\n        }\n    }\n    return [cl.subarray(0, cli), s];\n};\n// calculate the length of output from tree, code lengths\nvar clen = function (cf, cl) {\n    var l = 0;\n    for (var i = 0; i < cl.length; ++i)\n        l += cf[i] * cl[i];\n    return l;\n};\n// writes a fixed block\n// returns the new bit pos\nvar wfblk = function (out, pos, dat) {\n    // no need to write 00 as type: TypedArray defaults to 0\n    var s = dat.length;\n    var o = shft(pos + 2);\n    out[o] = s & 255;\n    out[o + 1] = s >>> 8;\n    out[o + 2] = out[o] ^ 255;\n    out[o + 3] = out[o + 1] ^ 255;\n    for (var i = 0; i < s; ++i)\n        out[o + i + 4] = dat[i];\n    return (o + 4 + s) * 8;\n};\n// writes a block\nvar wblk = function (dat, out, final, syms, lf, df, eb, li, bs, bl, p) {\n    wbits(out, p++, final);\n    ++lf[256];\n    var _a = hTree(lf, 15), dlt = _a[0], mlb = _a[1];\n    var _b = hTree(df, 15), ddt = _b[0], mdb = _b[1];\n    var _c = lc(dlt), lclt = _c[0], nlc = _c[1];\n    var _d = lc(ddt), lcdt = _d[0], ndc = _d[1];\n    var lcfreq = new u16(19);\n    for (var i = 0; i < lclt.length; ++i)\n        lcfreq[lclt[i] & 31]++;\n    for (var i = 0; i < lcdt.length; ++i)\n        lcfreq[lcdt[i] & 31]++;\n    var _e = hTree(lcfreq, 7), lct = _e[0], mlcb = _e[1];\n    var nlcc = 19;\n    for (; nlcc > 4 && !lct[clim[nlcc - 1]]; --nlcc)\n        ;\n    var flen = (bl + 5) << 3;\n    var ftlen = clen(lf, flt) + clen(df, fdt) + eb;\n    var dtlen = clen(lf, dlt) + clen(df, ddt) + eb + 14 + 3 * nlcc + clen(lcfreq, lct) + (2 * lcfreq[16] + 3 * lcfreq[17] + 7 * lcfreq[18]);\n    if (flen <= ftlen && flen <= dtlen)\n        return wfblk(out, p, dat.subarray(bs, bs + bl));\n    var lm, ll, dm, dl;\n    wbits(out, p, 1 + (dtlen < ftlen)), p += 2;\n    if (dtlen < ftlen) {\n        lm = hMap(dlt, mlb, 0), ll = dlt, dm = hMap(ddt, mdb, 0), dl = ddt;\n        var llm = hMap(lct, mlcb, 0);\n        wbits(out, p, nlc - 257);\n        wbits(out, p + 5, ndc - 1);\n        wbits(out, p + 10, nlcc - 4);\n        p += 14;\n        for (var i = 0; i < nlcc; ++i)\n            wbits(out, p + 3 * i, lct[clim[i]]);\n        p += 3 * nlcc;\n        var lcts = [lclt, lcdt];\n        for (var it = 0; it < 2; ++it) {\n            var clct = lcts[it];\n            for (var i = 0; i < clct.length; ++i) {\n                var len = clct[i] & 31;\n                wbits(out, p, llm[len]), p += lct[len];\n                if (len > 15)\n                    wbits(out, p, (clct[i] >>> 5) & 127), p += clct[i] >>> 12;\n            }\n        }\n    }\n    else {\n        lm = flm, ll = flt, dm = fdm, dl = fdt;\n    }\n    for (var i = 0; i < li; ++i) {\n        if (syms[i] > 255) {\n            var len = (syms[i] >>> 18) & 31;\n            wbits16(out, p, lm[len + 257]), p += ll[len + 257];\n            if (len > 7)\n                wbits(out, p, (syms[i] >>> 23) & 31), p += fleb[len];\n            var dst = syms[i] & 31;\n            wbits16(out, p, dm[dst]), p += dl[dst];\n            if (dst > 3)\n                wbits16(out, p, (syms[i] >>> 5) & 8191), p += fdeb[dst];\n        }\n        else {\n            wbits16(out, p, lm[syms[i]]), p += ll[syms[i]];\n        }\n    }\n    wbits16(out, p, lm[256]);\n    return p + ll[256];\n};\n// deflate options (nice << 13) | chain\nvar deo = /*#__PURE__*/ new u32([65540, 131080, 131088, 131104, 262176, 1048704, 1048832, 2114560, 2117632]);\n// empty\nvar et = /*#__PURE__*/ new u8(0);\n// compresses data into a raw DEFLATE buffer\nvar dflt = function (dat, lvl, plvl, pre, post, lst) {\n    var s = dat.length;\n    var o = new u8(pre + s + 5 * (1 + Math.floor(s / 7000)) + post);\n    // writing to this writes to the output buffer\n    var w = o.subarray(pre, o.length - post);\n    var pos = 0;\n    if (!lvl || s < 8) {\n        for (var i = 0; i <= s; i += 65535) {\n            // end\n            var e = i + 65535;\n            if (e < s) {\n                // write full block\n                pos = wfblk(w, pos, dat.subarray(i, e));\n            }\n            else {\n                // write final block\n                w[i] = lst;\n                pos = wfblk(w, pos, dat.subarray(i, s));\n            }\n        }\n    }\n    else {\n        var opt = deo[lvl - 1];\n        var n = opt >>> 13, c = opt & 8191;\n        var msk_1 = (1 << plvl) - 1;\n        //    prev 2-byte val map    curr 2-byte val map\n        var prev = new u16(32768), head = new u16(msk_1 + 1);\n        var bs1_1 = Math.ceil(plvl / 3), bs2_1 = 2 * bs1_1;\n        var hsh = function (i) { return (dat[i] ^ (dat[i + 1] << bs1_1) ^ (dat[i + 2] << bs2_1)) & msk_1; };\n        // 24576 is an arbitrary number of maximum symbols per block\n        // 424 buffer for last block\n        var syms = new u32(25000);\n        // length/literal freq   distance freq\n        var lf = new u16(288), df = new u16(32);\n        //  l/lcnt  exbits  index  l/lind  waitdx  bitpos\n        var lc_1 = 0, eb = 0, i = 0, li = 0, wi = 0, bs = 0;\n        for (; i < s; ++i) {\n            // hash value\n            var hv = hsh(i);\n            // index mod 32768\n            var imod = i & 32767;\n            // previous index with this value\n            var pimod = head[hv];\n            prev[imod] = pimod;\n            head[hv] = imod;\n            // We always should modify head and prev, but only add symbols if\n            // this data is not yet processed (\"wait\" for wait index)\n            if (wi <= i) {\n                // bytes remaining\n                var rem = s - i;\n                if ((lc_1 > 7000 || li > 24576) && rem > 423) {\n                    pos = wblk(dat, w, 0, syms, lf, df, eb, li, bs, i - bs, pos);\n                    li = lc_1 = eb = 0, bs = i;\n                    for (var j = 0; j < 286; ++j)\n                        lf[j] = 0;\n                    for (var j = 0; j < 30; ++j)\n                        df[j] = 0;\n                }\n                //  len    dist   chain\n                var l = 2, d = 0, ch_1 = c, dif = (imod - pimod) & 32767;\n                if (rem > 2 && hv == hsh(i - dif)) {\n                    var maxn = Math.min(n, rem) - 1;\n                    var maxd = Math.min(32767, i);\n                    // max possible length\n                    // not capped at dif because decompressors implement \"rolling\" index population\n                    var ml = Math.min(258, rem);\n                    while (dif <= maxd && --ch_1 && imod != pimod) {\n                        if (dat[i + l] == dat[i + l - dif]) {\n                            var nl = 0;\n                            for (; nl < ml && dat[i + nl] == dat[i + nl - dif]; ++nl)\n                                ;\n                            if (nl > l) {\n                                l = nl, d = dif;\n                                // break out early when we reach \"nice\" (we are satisfied enough)\n                                if (nl > maxn)\n                                    break;\n                                // now, find the rarest 2-byte sequence within this\n                                // length of literals and search for that instead.\n                                // Much faster than just using the start\n                                var mmd = Math.min(dif, nl - 2);\n                                var md = 0;\n                                for (var j = 0; j < mmd; ++j) {\n                                    var ti = (i - dif + j + 32768) & 32767;\n                                    var pti = prev[ti];\n                                    var cd = (ti - pti + 32768) & 32767;\n                                    if (cd > md)\n                                        md = cd, pimod = ti;\n                                }\n                            }\n                        }\n                        // check the previous match\n                        imod = pimod, pimod = prev[imod];\n                        dif += (imod - pimod + 32768) & 32767;\n                    }\n                }\n                // d will be nonzero only when a match was found\n                if (d) {\n                    // store both dist and len data in one Uint32\n                    // Make sure this is recognized as a len/dist with 28th bit (2^28)\n                    syms[li++] = 268435456 | (revfl[l] << 18) | revfd[d];\n                    var lin = revfl[l] & 31, din = revfd[d] & 31;\n                    eb += fleb[lin] + fdeb[din];\n                    ++lf[257 + lin];\n                    ++df[din];\n                    wi = i + l;\n                    ++lc_1;\n                }\n                else {\n                    syms[li++] = dat[i];\n                    ++lf[dat[i]];\n                }\n            }\n        }\n        pos = wblk(dat, w, lst, syms, lf, df, eb, li, bs, i - bs, pos);\n        // this is the easiest way to avoid needing to maintain state\n        if (!lst)\n            pos = wfblk(w, pos, et);\n    }\n    return slc(o, 0, pre + shft(pos) + post);\n};\n// CRC32 table\nvar crct = /*#__PURE__*/ (function () {\n    var t = new u32(256);\n    for (var i = 0; i < 256; ++i) {\n        var c = i, k = 9;\n        while (--k)\n            c = ((c & 1) && 0xEDB88320) ^ (c >>> 1);\n        t[i] = c;\n    }\n    return t;\n})();\n// CRC32\nvar crc = function () {\n    var c = 0xFFFFFFFF;\n    return {\n        p: function (d) {\n            // closures have awful performance\n            var cr = c;\n            for (var i = 0; i < d.length; ++i)\n                cr = crct[(cr & 255) ^ d[i]] ^ (cr >>> 8);\n            c = cr;\n        },\n        d: function () { return c ^ 0xFFFFFFFF; }\n    };\n};\n// Alder32\nvar adler = function () {\n    var a = 1, b = 0;\n    return {\n        p: function (d) {\n            // closures have awful performance\n            var n = a, m = b;\n            var l = d.length;\n            for (var i = 0; i != l;) {\n                var e = Math.min(i + 5552, l);\n                for (; i < e; ++i)\n                    n += d[i], m += n;\n                n %= 65521, m %= 65521;\n            }\n            a = n, b = m;\n        },\n        d: function () { return ((a >>> 8) << 16 | (b & 255) << 8 | (b >>> 8)) + ((a & 255) << 23) * 2; }\n    };\n};\n;\n// deflate with opts\nvar dopt = function (dat, opt, pre, post, st) {\n    return dflt(dat, opt.level == null ? 6 : opt.level, opt.mem == null ? Math.ceil(Math.max(8, Math.min(13, Math.log(dat.length))) * 1.5) : (12 + opt.mem), pre, post, !st);\n};\n// Walmart object spread\nvar mrg = function (a, b) {\n    var o = {};\n    for (var k in a)\n        o[k] = a[k];\n    for (var k in b)\n        o[k] = b[k];\n    return o;\n};\n// worker clone\n// This is possibly the craziest part of the entire codebase, despite how simple it may seem.\n// The only parameter to this function is a closure that returns an array of variables outside of the function scope.\n// We're going to try to figure out the variable names used in the closure as strings because that is crucial for workerization.\n// We will return an object mapping of true variable name to value (basically, the current scope as a JS object).\n// The reason we can't just use the original variable names is minifiers mangling the toplevel scope.\n// This took me three weeks to figure out how to do.\nvar wcln = function (fn, fnStr, td) {\n    var dt = fn();\n    var st = fn.toString();\n    var ks = st.slice(st.indexOf('[') + 1, st.lastIndexOf(']')).replace(/ /g, '').split(',');\n    for (var i = 0; i < dt.length; ++i) {\n        var v = dt[i], k = ks[i];\n        if (typeof v == 'function') {\n            fnStr += ';' + k + '=';\n            var st_1 = v.toString();\n            if (v.prototype) {\n                // for global objects\n                if (st_1.indexOf('[native code]') != -1) {\n                    var spInd = st_1.indexOf(' ', 8) + 1;\n                    fnStr += st_1.slice(spInd, st_1.indexOf('(', spInd));\n                }\n                else {\n                    fnStr += st_1;\n                    for (var t in v.prototype)\n                        fnStr += ';' + k + '.prototype.' + t + '=' + v.prototype[t].toString();\n                }\n            }\n            else\n                fnStr += st_1;\n        }\n        else\n            td[k] = v;\n    }\n    return [fnStr, td];\n};\nvar ch = [];\n// clone bufs\nvar cbfs = function (v) {\n    var tl = [];\n    for (var k in v) {\n        if (v[k] instanceof u8 || v[k] instanceof u16 || v[k] instanceof u32)\n            tl.push((v[k] = new v[k].constructor(v[k])).buffer);\n    }\n    return tl;\n};\n// use a worker to execute code\nvar wrkr = function (fns, init, id, cb) {\n    var _a;\n    if (!ch[id]) {\n        var fnStr = '', td_1 = {}, m = fns.length - 1;\n        for (var i = 0; i < m; ++i)\n            _a = wcln(fns[i], fnStr, td_1), fnStr = _a[0], td_1 = _a[1];\n        ch[id] = wcln(fns[m], fnStr, td_1);\n    }\n    var td = mrg({}, ch[id][1]);\n    return wk(ch[id][0] + ';onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage=' + init.toString() + '}', id, td, cbfs(td), cb);\n};\n// base async inflate fn\nvar bInflt = function () { return [u8, u16, u32, fleb, fdeb, clim, fl, fd, flrm, fdrm, rev, hMap, max, bits, bits16, shft, slc, inflt, inflateSync, pbf, gu8]; };\nvar bDflt = function () { return [u8, u16, u32, fleb, fdeb, clim, revfl, revfd, flm, flt, fdm, fdt, rev, deo, et, hMap, wbits, wbits16, hTree, ln, lc, clen, wfblk, wblk, shft, slc, dflt, dopt, deflateSync, pbf]; };\n// gzip extra\nvar gze = function () { return [gzh, gzhl, wbytes, crc, crct]; };\n// gunzip extra\nvar guze = function () { return [gzs, gzl]; };\n// zlib extra\nvar zle = function () { return [zlh, wbytes, adler]; };\n// unzlib extra\nvar zule = function () { return [zlv]; };\n// post buf\nvar pbf = function (msg) { return postMessage(msg, [msg.buffer]); };\n// get u8\nvar gu8 = function (o) { return o && o.size && new u8(o.size); };\n// async helper\nvar cbify = function (dat, opts, fns, init, id, cb) {\n    var w = wrkr(fns, init, id, function (err, dat) {\n        w.terminate();\n        cb(err, dat);\n    });\n    if (!opts.consume)\n        dat = new u8(dat);\n    w.postMessage([dat, opts], [dat.buffer]);\n    return function () { w.terminate(); };\n};\n// auto stream\nvar astrm = function (strm) {\n    strm.ondata = function (dat, final) { return postMessage([dat, final], [dat.buffer]); };\n    return function (ev) { return strm.push(ev.data[0], ev.data[1]); };\n};\n// async stream attach\nvar astrmify = function (fns, strm, opts, init, id) {\n    var t;\n    var w = wrkr(fns, init, id, function (err, dat) {\n        if (err)\n            w.terminate(), strm.ondata.call(strm, err);\n        else {\n            if (dat[1])\n                w.terminate();\n            strm.ondata.call(strm, err, dat[0], dat[1]);\n        }\n    });\n    w.postMessage(opts);\n    strm.push = function (d, f) {\n        if (t)\n            throw 'stream finished';\n        if (!strm.ondata)\n            throw 'no stream handler';\n        w.postMessage([d, t = f], [d.buffer]);\n    };\n    strm.terminate = function () { w.terminate(); };\n};\n// read 2 bytes\nvar b2 = function (d, b) { return d[b] | (d[b + 1] << 8); };\n// read 4 bytes\nvar b4 = function (d, b) { return (d[b] | (d[b + 1] << 8) | (d[b + 2] << 16)) + (d[b + 3] << 23) * 2; };\n// write bytes\nvar wbytes = function (d, b, v) {\n    for (; v; ++b)\n        d[b] = v, v >>>= 8;\n};\n// gzip header\nvar gzh = function (c, o) {\n    var fn = o.filename;\n    c[0] = 31, c[1] = 139, c[2] = 8, c[8] = o.level < 2 ? 4 : o.level == 9 ? 2 : 0, c[9] = 3; // assume Unix\n    if (o.mtime != 0)\n        wbytes(c, 4, Math.floor(new Date(o.mtime || Date.now()) / 1000));\n    if (fn) {\n        c[3] = 8;\n        for (var i = 0; i <= fn.length; ++i)\n            c[i + 10] = fn.charCodeAt(i);\n    }\n};\n// gzip footer: -8 to -4 = CRC, -4 to -0 is length\n// gzip start\nvar gzs = function (d) {\n    if (d[0] != 31 || d[1] != 139 || d[2] != 8)\n        throw 'invalid gzip data';\n    var flg = d[3];\n    var st = 10;\n    if (flg & 4)\n        st += d[10] | (d[11] << 8) + 2;\n    for (var zs = (flg >> 3 & 1) + (flg >> 4 & 1); zs > 0; zs -= !d[st++])\n        ;\n    return st + (flg & 2);\n};\n// gzip length\nvar gzl = function (d) {\n    var l = d.length;\n    return (d[l - 4] | d[l - 3] << 8 | d[l - 2] << 16) + (2 * (d[l - 1] << 23));\n};\n// gzip header length\nvar gzhl = function (o) { return 10 + ((o.filename && (o.filename.length + 1)) || 0); };\n// zlib header\nvar zlh = function (c, o) {\n    var lv = o.level, fl = lv == 0 ? 0 : lv < 6 ? 1 : lv == 9 ? 3 : 2;\n    c[0] = 120, c[1] = (fl << 6) | (fl ? (32 - 2 * fl) : 1);\n};\n// zlib valid\nvar zlv = function (d) {\n    if ((d[0] & 15) != 8 || (d[0] >>> 4) > 7 || ((d[0] << 8 | d[1]) % 31))\n        throw 'invalid zlib data';\n    if (d[1] & 32)\n        throw 'invalid zlib data: preset dictionaries not supported';\n};\nfunction AsyncCmpStrm(opts, cb) {\n    if (!cb && typeof opts == 'function')\n        cb = opts, opts = {};\n    this.ondata = cb;\n    return opts;\n}\n// zlib footer: -4 to -0 is Adler32\n/**\n * Streaming DEFLATE compression\n */\nvar Deflate = /*#__PURE__*/ (function () {\n    function Deflate(opts, cb) {\n        if (!cb && typeof opts == 'function')\n            cb = opts, opts = {};\n        this.ondata = cb;\n        this.o = opts || {};\n    }\n    Deflate.prototype.p = function (c, f) {\n        this.ondata(dopt(c, this.o, 0, 0, !f), f);\n    };\n    /**\n     * Pushes a chunk to be deflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Deflate.prototype.push = function (chunk, final) {\n        if (this.d)\n            throw 'stream finished';\n        if (!this.ondata)\n            throw 'no stream handler';\n        this.d = final;\n        this.p(chunk, final || false);\n    };\n    return Deflate;\n}());\nexport { Deflate };\n/**\n * Asynchronous streaming DEFLATE compression\n */\nvar AsyncDeflate = /*#__PURE__*/ (function () {\n    function AsyncDeflate(opts, cb) {\n        astrmify([\n            bDflt,\n            function () { return [astrm, Deflate]; }\n        ], this, AsyncCmpStrm.call(this, opts, cb), function (ev) {\n            var strm = new Deflate(ev.data);\n            onmessage = astrm(strm);\n        }, 6);\n    }\n    return AsyncDeflate;\n}());\nexport { AsyncDeflate };\nexport function deflate(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bDflt,\n    ], function (ev) { return pbf(deflateSync(ev.data[0], ev.data[1])); }, 0, cb);\n}\n/**\n * Compresses data with DEFLATE without any wrapper\n * @param data The data to compress\n * @param opts The compression options\n * @returns The deflated version of the data\n */\nexport function deflateSync(data, opts) {\n    if (opts === void 0) { opts = {}; }\n    return dopt(data, opts, 0, 0);\n}\n/**\n * Streaming DEFLATE decompression\n */\nvar Inflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates an inflation stream\n     * @param cb The callback to call whenever data is inflated\n     */\n    function Inflate(cb) {\n        this.s = {};\n        this.p = new u8(0);\n        this.ondata = cb;\n    }\n    Inflate.prototype.e = function (c) {\n        if (this.d)\n            throw 'stream finished';\n        if (!this.ondata)\n            throw 'no stream handler';\n        var l = this.p.length;\n        var n = new u8(l + c.length);\n        n.set(this.p), n.set(c, l), this.p = n;\n    };\n    Inflate.prototype.c = function (final) {\n        this.d = this.s.i = final || false;\n        var bts = this.s.b;\n        var dt = inflt(this.p, this.o, this.s);\n        this.ondata(slc(dt, bts, this.s.b), this.d);\n        this.o = slc(dt, this.s.b - 32768), this.s.b = this.o.length;\n        this.p = slc(this.p, (this.s.p / 8) >> 0), this.s.p &= 7;\n    };\n    /**\n     * Pushes a chunk to be inflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the final chunk\n     */\n    Inflate.prototype.push = function (chunk, final) {\n        this.e(chunk), this.c(final);\n    };\n    return Inflate;\n}());\nexport { Inflate };\n/**\n * Asynchronous streaming DEFLATE decompression\n */\nvar AsyncInflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates an asynchronous inflation stream\n     * @param cb The callback to call whenever data is deflated\n     */\n    function AsyncInflate(cb) {\n        this.ondata = cb;\n        astrmify([\n            bInflt,\n            function () { return [astrm, Inflate]; }\n        ], this, 0, function () {\n            var strm = new Inflate();\n            onmessage = astrm(strm);\n        }, 7);\n    }\n    return AsyncInflate;\n}());\nexport { AsyncInflate };\nexport function inflate(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bInflt\n    ], function (ev) { return pbf(inflateSync(ev.data[0], gu8(ev.data[1]))); }, 1, cb);\n}\n/**\n * Expands DEFLATE data with no wrapper\n * @param data The data to decompress\n * @param out Where to write the data. Saves memory if you know the decompressed size and provide an output buffer of that length.\n * @returns The decompressed version of the data\n */\nexport function inflateSync(data, out) {\n    return inflt(data, out);\n}\n// before you yell at me for not just using extends, my reason is that TS inheritance is hard to workerize.\n/**\n * Streaming GZIP compression\n */\nvar Gzip = /*#__PURE__*/ (function () {\n    function Gzip(opts, cb) {\n        this.c = crc();\n        this.l = 0;\n        this.v = 1;\n        Deflate.call(this, opts, cb);\n    }\n    /**\n     * Pushes a chunk to be GZIPped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Gzip.prototype.push = function (chunk, final) {\n        Deflate.prototype.push.call(this, chunk, final);\n    };\n    Gzip.prototype.p = function (c, f) {\n        this.c.p(c);\n        this.l += c.length;\n        var raw = dopt(c, this.o, this.v && gzhl(this.o), f && 8, !f);\n        if (this.v)\n            gzh(raw, this.o), this.v = 0;\n        if (f)\n            wbytes(raw, raw.length - 8, this.c.d()), wbytes(raw, raw.length - 4, this.l);\n        this.ondata(raw, f);\n    };\n    return Gzip;\n}());\nexport { Gzip };\n/**\n * Asynchronous streaming GZIP compression\n */\nvar AsyncGzip = /*#__PURE__*/ (function () {\n    function AsyncGzip(opts, cb) {\n        astrmify([\n            bDflt,\n            gze,\n            function () { return [astrm, Deflate, Gzip]; }\n        ], this, AsyncCmpStrm.call(this, opts, cb), function (ev) {\n            var strm = new Gzip(ev.data);\n            onmessage = astrm(strm);\n        }, 8);\n    }\n    return AsyncGzip;\n}());\nexport { AsyncGzip };\nexport function gzip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bDflt,\n        gze,\n        function () { return [gzipSync]; }\n    ], function (ev) { return pbf(gzipSync(ev.data[0], ev.data[1])); }, 2, cb);\n}\n/**\n * Compresses data with GZIP\n * @param data The data to compress\n * @param opts The compression options\n * @returns The gzipped version of the data\n */\nexport function gzipSync(data, opts) {\n    if (opts === void 0) { opts = {}; }\n    var c = crc(), l = data.length;\n    c.p(data);\n    var d = dopt(data, opts, gzhl(opts), 8), s = d.length;\n    return gzh(d, opts), wbytes(d, s - 8, c.d()), wbytes(d, s - 4, l), d;\n}\n/**\n * Streaming GZIP decompression\n */\nvar Gunzip = /*#__PURE__*/ (function () {\n    /**\n     * Creates a GUNZIP stream\n     * @param cb The callback to call whenever data is inflated\n     */\n    function Gunzip(cb) {\n        this.v = 1;\n        Inflate.call(this, cb);\n    }\n    /**\n     * Pushes a chunk to be GUNZIPped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Gunzip.prototype.push = function (chunk, final) {\n        Inflate.prototype.e.call(this, chunk);\n        if (this.v) {\n            var s = gzs(this.p);\n            if (s >= this.p.length && !final)\n                return;\n            this.p = this.p.subarray(s), this.v = 0;\n        }\n        if (final) {\n            if (this.p.length < 8)\n                throw 'invalid gzip stream';\n            this.p = this.p.subarray(0, -8);\n        }\n        // necessary to prevent TS from using the closure value\n        // This allows for workerization to function correctly\n        Inflate.prototype.c.call(this, final);\n    };\n    return Gunzip;\n}());\nexport { Gunzip };\n/**\n * Asynchronous streaming GZIP decompression\n */\nvar AsyncGunzip = /*#__PURE__*/ (function () {\n    /**\n     * Creates an asynchronous GUNZIP stream\n     * @param cb The callback to call whenever data is deflated\n     */\n    function AsyncGunzip(cb) {\n        this.ondata = cb;\n        astrmify([\n            bInflt,\n            guze,\n            function () { return [astrm, Inflate, Gunzip]; }\n        ], this, 0, function () {\n            var strm = new Gunzip();\n            onmessage = astrm(strm);\n        }, 9);\n    }\n    return AsyncGunzip;\n}());\nexport { AsyncGunzip };\nexport function gunzip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bInflt,\n        guze,\n        function () { return [gunzipSync]; }\n    ], function (ev) { return pbf(gunzipSync(ev.data[0])); }, 3, cb);\n}\n/**\n * Expands GZIP data\n * @param data The data to decompress\n * @param out Where to write the data. GZIP already encodes the output size, so providing this doesn't save memory.\n * @returns The decompressed version of the data\n */\nexport function gunzipSync(data, out) {\n    return inflt(data.subarray(gzs(data), -8), out || new u8(gzl(data)));\n}\n/**\n * Streaming Zlib compression\n */\nvar Zlib = /*#__PURE__*/ (function () {\n    function Zlib(opts, cb) {\n        this.c = adler();\n        this.v = 1;\n        Deflate.call(this, opts, cb);\n    }\n    /**\n     * Pushes a chunk to be zlibbed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Zlib.prototype.push = function (chunk, final) {\n        Deflate.prototype.push.call(this, chunk, final);\n    };\n    Zlib.prototype.p = function (c, f) {\n        this.c.p(c);\n        var raw = dopt(c, this.o, this.v && 2, f && 4, !f);\n        if (this.v)\n            zlh(raw, this.o), this.v = 0;\n        if (f)\n            wbytes(raw, raw.length - 4, this.c.d());\n        this.ondata(raw, f);\n    };\n    return Zlib;\n}());\nexport { Zlib };\n/**\n * Asynchronous streaming Zlib compression\n */\nvar AsyncZlib = /*#__PURE__*/ (function () {\n    function AsyncZlib(opts, cb) {\n        astrmify([\n            bDflt,\n            zle,\n            function () { return [astrm, Deflate, Zlib]; }\n        ], this, AsyncCmpStrm.call(this, opts, cb), function (ev) {\n            var strm = new Zlib(ev.data);\n            onmessage = astrm(strm);\n        }, 10);\n    }\n    return AsyncZlib;\n}());\nexport { AsyncZlib };\nexport function zlib(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bDflt,\n        zle,\n        function () { return [zlibSync]; }\n    ], function (ev) { return pbf(zlibSync(ev.data[0], ev.data[1])); }, 4, cb);\n}\n/**\n * Compress data with Zlib\n * @param data The data to compress\n * @param opts The compression options\n * @returns The zlib-compressed version of the data\n */\nexport function zlibSync(data, opts) {\n    if (opts === void 0) { opts = {}; }\n    var a = adler();\n    a.p(data);\n    var d = dopt(data, opts, 2, 4);\n    return zlh(d, opts), wbytes(d, d.length - 4, a.d()), d;\n}\n/**\n * Streaming Zlib decompression\n */\nvar Unzlib = /*#__PURE__*/ (function () {\n    /**\n     * Creates a Zlib decompression stream\n     * @param cb The callback to call whenever data is inflated\n     */\n    function Unzlib(cb) {\n        this.v = 1;\n        Inflate.call(this, cb);\n    }\n    /**\n     * Pushes a chunk to be unzlibbed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Unzlib.prototype.push = function (chunk, final) {\n        Inflate.prototype.e.call(this, chunk);\n        if (this.v) {\n            if (this.p.length < 2 && !final)\n                return;\n            this.p = this.p.subarray(2), this.v = 0;\n        }\n        if (final) {\n            if (this.p.length < 4)\n                throw 'invalid zlib stream';\n            this.p = this.p.subarray(0, -4);\n        }\n        // necessary to prevent TS from using the closure value\n        // This allows for workerization to function correctly\n        Inflate.prototype.c.call(this, final);\n    };\n    return Unzlib;\n}());\nexport { Unzlib };\n/**\n * Asynchronous streaming Zlib decompression\n */\nvar AsyncUnzlib = /*#__PURE__*/ (function () {\n    /**\n     * Creates an asynchronous Zlib decompression stream\n     * @param cb The callback to call whenever data is deflated\n     */\n    function AsyncUnzlib(cb) {\n        this.ondata = cb;\n        astrmify([\n            bInflt,\n            zule,\n            function () { return [astrm, Inflate, Unzlib]; }\n        ], this, 0, function () {\n            var strm = new Unzlib();\n            onmessage = astrm(strm);\n        }, 11);\n    }\n    return AsyncUnzlib;\n}());\nexport { AsyncUnzlib };\nexport function unzlib(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bInflt,\n        zule,\n        function () { return [unzlibSync]; }\n    ], function (ev) { return pbf(unzlibSync(ev.data[0], gu8(ev.data[1]))); }, 5, cb);\n}\n/**\n * Expands Zlib data\n * @param data The data to decompress\n * @param out Where to write the data. Saves memory if you know the decompressed size and provide an output buffer of that length.\n * @returns The decompressed version of the data\n */\nexport function unzlibSync(data, out) {\n    return inflt((zlv(data), data.subarray(2, -4)), out);\n}\n// Default algorithm for compression (used because having a known output size allows faster decompression)\nexport { gzip as compress, AsyncGzip as AsyncCompress };\n// Default algorithm for compression (used because having a known output size allows faster decompression)\nexport { gzipSync as compressSync, Gzip as Compress };\n/**\n * Streaming GZIP, Zlib, or raw DEFLATE decompression\n */\nvar Decompress = /*#__PURE__*/ (function () {\n    /**\n     * Creates a decompression stream\n     * @param cb The callback to call whenever data is decompressed\n     */\n    function Decompress(cb) {\n        this.G = Gunzip;\n        this.I = Inflate;\n        this.Z = Unzlib;\n        this.ondata = cb;\n    }\n    /**\n     * Pushes a chunk to be decompressed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Decompress.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            throw 'no stream handler';\n        if (!this.s) {\n            if (this.p && this.p.length) {\n                var n = new u8(this.p.length + chunk.length);\n                n.set(this.p), n.set(chunk, this.p.length);\n            }\n            else\n                this.p = chunk;\n            if (this.p.length > 2) {\n                var _this_1 = this;\n                var cb = function () { _this_1.ondata.apply(_this_1, arguments); };\n                this.s = (this.p[0] == 31 && this.p[1] == 139 && this.p[2] == 8)\n                    ? new this.G(cb)\n                    : ((this.p[0] & 15) != 8 || (this.p[0] >> 4) > 7 || ((this.p[0] << 8 | this.p[1]) % 31))\n                        ? new this.I(cb)\n                        : new this.Z(cb);\n                this.s.push(this.p, final);\n                this.p = null;\n            }\n        }\n        else\n            this.s.push(chunk, final);\n    };\n    return Decompress;\n}());\nexport { Decompress };\n/**\n * Asynchronous streaming GZIP, Zlib, or raw DEFLATE decompression\n */\nvar AsyncDecompress = /*#__PURE__*/ (function () {\n    /**\n   * Creates an asynchronous decompression stream\n   * @param cb The callback to call whenever data is decompressed\n   */\n    function AsyncDecompress(cb) {\n        this.G = AsyncGunzip;\n        this.I = AsyncInflate;\n        this.Z = AsyncUnzlib;\n        this.ondata = cb;\n    }\n    /**\n     * Pushes a chunk to be decompressed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    AsyncDecompress.prototype.push = function (chunk, final) {\n        Decompress.prototype.push.call(this, chunk, final);\n    };\n    return AsyncDecompress;\n}());\nexport { AsyncDecompress };\nexport function decompress(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return (data[0] == 31 && data[1] == 139 && data[2] == 8)\n        ? gunzip(data, opts, cb)\n        : ((data[0] & 15) != 8 || (data[0] >> 4) > 7 || ((data[0] << 8 | data[1]) % 31))\n            ? inflate(data, opts, cb)\n            : unzlib(data, opts, cb);\n}\n/**\n * Expands compressed GZIP, Zlib, or raw DEFLATE data, automatically detecting the format\n * @param data The data to decompress\n * @param out Where to write the data. Saves memory if you know the decompressed size and provide an output buffer of that length.\n * @returns The decompressed version of the data\n */\nexport function decompressSync(data, out) {\n    return (data[0] == 31 && data[1] == 139 && data[2] == 8)\n        ? gunzipSync(data, out)\n        : ((data[0] & 15) != 8 || (data[0] >> 4) > 7 || ((data[0] << 8 | data[1]) % 31))\n            ? inflateSync(data, out)\n            : unzlibSync(data, out);\n}\n// flatten a directory structure\nvar fltn = function (d, p, t, o) {\n    for (var k in d) {\n        var val = d[k], n = p + k;\n        if (val instanceof u8)\n            t[n] = [val, o];\n        else if (Array.isArray(val))\n            t[n] = [val[0], mrg(o, val[1])];\n        else\n            fltn(val, n + '/', t, o);\n    }\n};\n/**\n * Converts a string into a Uint8Array for use with compression/decompression methods\n * @param str The string to encode\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless decoding a binary string.\n * @returns The string encoded in UTF-8/Latin-1 binary\n */\nexport function strToU8(str, latin1) {\n    var l = str.length;\n    if (!latin1 && typeof TextEncoder != 'undefined')\n        return new TextEncoder().encode(str);\n    var ar = new u8(str.length + (str.length >>> 1));\n    var ai = 0;\n    var w = function (v) { ar[ai++] = v; };\n    for (var i = 0; i < l; ++i) {\n        if (ai + 5 > ar.length) {\n            var n = new u8(ai + 8 + ((l - i) << 1));\n            n.set(ar);\n            ar = n;\n        }\n        var c = str.charCodeAt(i);\n        if (c < 128 || latin1)\n            w(c);\n        else if (c < 2048)\n            w(192 | (c >>> 6)), w(128 | (c & 63));\n        else if (c > 55295 && c < 57344)\n            c = 65536 + (c & 1023 << 10) | (str.charCodeAt(++i) & 1023),\n                w(240 | (c >>> 18)), w(128 | ((c >>> 12) & 63)), w(128 | ((c >>> 6) & 63)), w(128 | (c & 63));\n        else\n            w(224 | (c >>> 12)), w(128 | ((c >>> 6) & 63)), w(128 | (c & 63));\n    }\n    return slc(ar, 0, ai);\n}\n/**\n * Converts a Uint8Array to a string\n * @param dat The data to decode to string\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless encoding to binary string.\n * @returns The original UTF-8/Latin-1 string\n */\nexport function strFromU8(dat, latin1) {\n    var r = '';\n    if (!latin1 && typeof TextDecoder != 'undefined')\n        return new TextDecoder().decode(dat);\n    for (var i = 0; i < dat.length;) {\n        var c = dat[i++];\n        if (c < 128 || latin1)\n            r += String.fromCharCode(c);\n        else if (c < 224)\n            r += String.fromCharCode((c & 31) << 6 | (dat[i++] & 63));\n        else if (c < 240)\n            r += String.fromCharCode((c & 15) << 12 | (dat[i++] & 63) << 6 | (dat[i++] & 63));\n        else\n            c = ((c & 15) << 18 | (dat[i++] & 63) << 12 | (dat[i++] & 63) << 6 | (dat[i++] & 63)) - 65536,\n                r += String.fromCharCode(55296 | (c >> 10), 56320 | (c & 1023));\n    }\n    return r;\n}\n;\n// skip local zip header\nvar slzh = function (d, b) { return b + 30 + b2(d, b + 26) + b2(d, b + 28); };\n// read zip header\nvar zh = function (d, b, z) {\n    var fnl = b2(d, b + 28), fn = strFromU8(d.subarray(b + 46, b + 46 + fnl), !(b2(d, b + 8) & 2048)), es = b + 46 + fnl;\n    var _a = z ? z64e(d, es) : [b4(d, b + 20), b4(d, b + 24), b4(d, b + 42)], sc = _a[0], su = _a[1], off = _a[2];\n    return [b2(d, b + 10), sc, su, fn, es + b2(d, b + 30) + b2(d, b + 32), off];\n};\n// read zip64 extra field\nvar z64e = function (d, b) {\n    for (; b2(d, b) != 1; b += 4 + b2(d, b + 2))\n        ;\n    return [b4(d, b + 12), b4(d, b + 4), b4(d, b + 20)];\n};\n// write zip header\nvar wzh = function (d, b, c, cmp, su, fn, u, o, ce, t) {\n    var fl = fn.length, l = cmp.length;\n    wbytes(d, b, ce != null ? 0x2014B50 : 0x4034B50), b += 4;\n    if (ce != null)\n        d[b] = 20, b += 2;\n    d[b] = 20, b += 2; // spec compliance? what's that?\n    d[b++] = (t == 8 && (o.level == 1 ? 6 : o.level < 6 ? 4 : o.level == 9 ? 2 : 0)), d[b++] = u && 8;\n    d[b] = t, b += 2;\n    var dt = new Date(o.mtime || Date.now()), y = dt.getFullYear() - 1980;\n    if (y < 0 || y > 119)\n        throw 'date not in range 1980-2099';\n    wbytes(d, b, ((y << 24) * 2) | ((dt.getMonth() + 1) << 21) | (dt.getDate() << 16) | (dt.getHours() << 11) | (dt.getMinutes() << 5) | (dt.getSeconds() >>> 1));\n    b += 4;\n    wbytes(d, b, c);\n    wbytes(d, b + 4, l);\n    wbytes(d, b + 8, su);\n    wbytes(d, b + 12, fl), b += 16; // skip extra field, comment\n    if (ce != null)\n        wbytes(d, b += 10, ce), b += 4;\n    d.set(fn, b);\n    b += fl;\n    if (ce == null)\n        d.set(cmp, b);\n};\n// write zip footer (end of central directory)\nvar wzf = function (o, b, c, d, e) {\n    wbytes(o, b, 0x6054B50); // skip disk\n    wbytes(o, b + 8, c);\n    wbytes(o, b + 10, c);\n    wbytes(o, b + 12, d);\n    wbytes(o, b + 16, e);\n};\nexport function zip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    var r = {};\n    fltn(data, '', r, opts);\n    var k = Object.keys(r);\n    var lft = k.length, o = 0, tot = 0;\n    var slft = lft, files = new Array(lft);\n    var term = [];\n    var tAll = function () {\n        for (var i = 0; i < term.length; ++i)\n            term[i]();\n    };\n    var cbf = function () {\n        var out = new u8(tot + 22), oe = o, cdl = tot - o;\n        tot = 0;\n        for (var i = 0; i < slft; ++i) {\n            var f = files[i];\n            try {\n                wzh(out, tot, f.c, f.d, f.m, f.n, f.u, f.p, null, f.t);\n                wzh(out, o, f.c, f.d, f.m, f.n, f.u, f.p, tot, f.t), o += 46 + f.n.length, tot += 30 + f.n.length + f.d.length;\n            }\n            catch (e) {\n                return cb(e, null);\n            }\n        }\n        wzf(out, o, files.length, cdl, oe);\n        cb(null, out);\n    };\n    if (!lft)\n        cbf();\n    var _loop_1 = function (i) {\n        var fn = k[i];\n        var _a = r[fn], file = _a[0], p = _a[1];\n        var c = crc(), m = file.length;\n        c.p(file);\n        var n = strToU8(fn), s = n.length;\n        var t = p.level == 0 ? 0 : 8;\n        var cbl = function (e, d) {\n            if (e) {\n                tAll();\n                cb(e, null);\n            }\n            else {\n                var l = d.length;\n                files[i] = {\n                    t: t,\n                    d: d,\n                    m: m,\n                    c: c.d(),\n                    u: fn.length != l,\n                    n: n,\n                    p: p\n                };\n                o += 30 + s + l;\n                tot += 76 + 2 * s + l;\n                if (!--lft)\n                    cbf();\n            }\n        };\n        if (n.length > 65535)\n            cbl('filename too long', null);\n        if (!t)\n            cbl(null, file);\n        else if (m < 160000) {\n            try {\n                cbl(null, deflateSync(file, p));\n            }\n            catch (e) {\n                cbl(e, null);\n            }\n        }\n        else\n            term.push(deflate(file, p, cbl));\n    };\n    // Cannot use lft because it can decrease\n    for (var i = 0; i < slft; ++i) {\n        _loop_1(i);\n    }\n    return tAll;\n}\n/**\n * Synchronously creates a ZIP file. Prefer using `zip` for better performance\n * with more than one file.\n * @param data The directory structure for the ZIP archive\n * @param opts The main options, merged with per-file options\n * @returns The generated ZIP archive\n */\nexport function zipSync(data, opts) {\n    if (opts === void 0) { opts = {}; }\n    var r = {};\n    var files = [];\n    fltn(data, '', r, opts);\n    var o = 0;\n    var tot = 0;\n    for (var fn in r) {\n        var _a = r[fn], file = _a[0], p = _a[1];\n        var t = p.level == 0 ? 0 : 8;\n        var n = strToU8(fn), s = n.length;\n        if (n.length > 65535)\n            throw 'filename too long';\n        var d = t ? deflateSync(file, p) : file, l = d.length;\n        var c = crc();\n        c.p(file);\n        files.push({\n            t: t,\n            d: d,\n            m: file.length,\n            c: c.d(),\n            u: fn.length != s,\n            n: n,\n            o: o,\n            p: p\n        });\n        o += 30 + s + l;\n        tot += 76 + 2 * s + l;\n    }\n    var out = new u8(tot + 22), oe = o, cdl = tot - o;\n    for (var i = 0; i < files.length; ++i) {\n        var f = files[i];\n        wzh(out, f.o, f.c, f.d, f.m, f.n, f.u, f.p, null, f.t);\n        wzh(out, o, f.c, f.d, f.m, f.n, f.u, f.p, f.o, f.t), o += 46 + f.n.length;\n    }\n    wzf(out, o, files.length, cdl, oe);\n    return out;\n}\n/**\n * Asynchronously decompresses a ZIP archive\n * @param data The raw compressed ZIP file\n * @param cb The callback to call with the decompressed files\n * @returns A function that can be used to immediately terminate the unzipping\n */\nexport function unzip(data, cb) {\n    if (typeof cb != 'function')\n        throw 'no callback';\n    var term = [];\n    var tAll = function () {\n        for (var i = 0; i < term.length; ++i)\n            term[i]();\n    };\n    var files = {};\n    var e = data.length - 22;\n    for (; b4(data, e) != 0x6054B50; --e) {\n        if (!e || data.length - e > 65558) {\n            cb('invalid zip file', null);\n            return;\n        }\n    }\n    ;\n    var lft = b2(data, e + 8);\n    if (!lft)\n        cb(null, {});\n    var c = lft;\n    var o = b4(data, e + 16);\n    var z = o == 4294967295;\n    if (z) {\n        e = b4(data, e - 12);\n        if (b4(data, e) != 0x6064B50)\n            throw 'invalid zip file';\n        c = lft = b4(data, e + 32);\n        o = b4(data, e + 48);\n    }\n    var _loop_2 = function (i) {\n        var _a = zh(data, o, z), c_1 = _a[0], sc = _a[1], su = _a[2], fn = _a[3], no = _a[4], off = _a[5], b = slzh(data, off);\n        o = no;\n        var cbl = function (e, d) {\n            if (e) {\n                tAll();\n                cb(e, null);\n            }\n            else {\n                files[fn] = d;\n                if (!--lft)\n                    cb(null, files);\n            }\n        };\n        if (!c_1)\n            cbl(null, slc(data, b, b + sc));\n        else if (c_1 == 8) {\n            var infl = data.subarray(b, b + sc);\n            if (sc < 320000) {\n                try {\n                    cbl(null, inflateSync(infl, new u8(su)));\n                }\n                catch (e) {\n                    cbl(e, null);\n                }\n            }\n            else\n                term.push(inflate(infl, { size: su }, cbl));\n        }\n        else\n            cbl('unknown compression type ' + c_1, null);\n    };\n    for (var i = 0; i < c; ++i) {\n        _loop_2(i);\n    }\n    return tAll;\n}\n/**\n * Synchronously decompresses a ZIP archive. Prefer using `unzip` for better\n * performance with more than one file.\n * @param data The raw compressed ZIP file\n * @returns The decompressed files\n */\nexport function unzipSync(data) {\n    var files = {};\n    var e = data.length - 22;\n    for (; b4(data, e) != 0x6054B50; --e) {\n        if (!e || data.length - e > 65558)\n            throw 'invalid zip file';\n    }\n    ;\n    var c = b2(data, e + 8);\n    if (!c)\n        return {};\n    var o = b4(data, e + 16);\n    var z = o == 4294967295;\n    if (z) {\n        e = b4(data, e - 12);\n        if (b4(data, e) != 0x6064B50)\n            throw 'invalid zip file';\n        c = b4(data, e + 32);\n        o = b4(data, e + 48);\n    }\n    for (var i = 0; i < c; ++i) {\n        var _a = zh(data, o, z), c_2 = _a[0], sc = _a[1], su = _a[2], fn = _a[3], no = _a[4], off = _a[5], b = slzh(data, off);\n        o = no;\n        if (!c_2)\n            files[fn] = slc(data, b, b + sc);\n        else if (c_2 == 8)\n            files[fn] = inflateSync(data.subarray(b, b + sc), new u8(su));\n        else\n            throw 'unknown compression type ' + c_2;\n    }\n    return files;\n}\n","import type { eventWithTime, mutationCallbackParam } from '../types/rrweb-types'\nimport { INCREMENTAL_SNAPSHOT_EVENT_TYPE, MUTATION_SOURCE_TYPE } from './sessionrecording-utils'\nimport type { rrwebRecord } from '../types/rrweb'\nimport { BucketedRateLimiter } from '@posthog/core'\nimport { logger } from '../../../utils/logger'\n\nexport class MutationThrottler {\n    private _loggedTracker: Record<string, boolean> = {}\n    private _rateLimiter: BucketedRateLimiter<number>\n\n    constructor(\n        private readonly _rrweb: rrwebRecord,\n        private readonly _options: {\n            bucketSize?: number\n            refillRate?: number\n            onBlockedNode?: (id: number, node: Node | null) => void\n        } = {}\n    ) {\n        this._rateLimiter = new BucketedRateLimiter({\n            bucketSize: this._options.bucketSize ?? 100,\n            refillRate: this._options.refillRate ?? 10,\n            refillInterval: 1000, // one second\n            _onBucketRateLimited: this._onNodeRateLimited,\n            _logger: logger,\n        })\n    }\n\n    private _onNodeRateLimited = (key: number) => {\n        if (!this._loggedTracker[key]) {\n            this._loggedTracker[key] = true\n            const node = this._getNode(key)\n            this._options.onBlockedNode?.(key, node)\n        }\n    }\n\n    private _getNodeOrRelevantParent = (id: number): [number, Node | null] => {\n        // For some nodes we know they are part of a larger tree such as an SVG.\n        // For those we want to block the entire node, not just the specific attribute\n\n        const node = this._getNode(id)\n\n        // Check if the node is an Element and then find the closest parent that is an SVG\n        if (node?.nodeName !== 'svg' && node instanceof Element) {\n            const closestSVG = node.closest('svg')\n\n            if (closestSVG) {\n                return [this._rrweb.mirror.getId(closestSVG), closestSVG]\n            }\n        }\n\n        return [id, node]\n    }\n\n    private _getNode = (id: number) => this._rrweb.mirror.getNode(id)\n\n    private _numberOfChanges = (data: Partial<mutationCallbackParam>) => {\n        return (\n            (data.removes?.length ?? 0) +\n            (data.attributes?.length ?? 0) +\n            (data.texts?.length ?? 0) +\n            (data.adds?.length ?? 0)\n        )\n    }\n\n    public throttleMutations = (event: eventWithTime) => {\n        if (event.type !== INCREMENTAL_SNAPSHOT_EVENT_TYPE || event.data.source !== MUTATION_SOURCE_TYPE) {\n            return event\n        }\n\n        const data = event.data as Partial<mutationCallbackParam>\n        const initialMutationCount = this._numberOfChanges(data)\n\n        if (data.attributes) {\n            // Most problematic mutations come from attrs where the style or minor properties are changed rapidly\n            data.attributes = data.attributes.filter((attr) => {\n                const [nodeId] = this._getNodeOrRelevantParent(attr.id)\n\n                const isRateLimited = this._rateLimiter.consumeRateLimit(nodeId)\n\n                if (isRateLimited) {\n                    return false\n                }\n\n                return attr\n            })\n        }\n\n        // Check if every part of the mutation is empty in which case there is nothing to do\n        const mutationCount = this._numberOfChanges(data)\n\n        if (mutationCount === 0 && initialMutationCount !== mutationCount) {\n            // If we have modified the mutation count and the remaining count is 0, then we don't need the event.\n            return\n        }\n        return event\n    }\n\n    public reset() {\n        this._loggedTracker = {}\n    }\n\n    public stop() {\n        this._rateLimiter.stop()\n        this.reset()\n    }\n}\n","import { isArray, isUndefined, clampToRange } from '@posthog/core'\nimport { logger } from '../utils/logger'\n\nexport function appendArray(currentValue: string[] | undefined, sampleType: string | string[]): string[] {\n    return [...(currentValue ? currentValue : []), ...(isArray(sampleType) ? sampleType : [sampleType])]\n}\n\nexport function updateThreshold(currentValue: number | undefined, percent: number): number {\n    return (isUndefined(currentValue) ? 1 : currentValue) * percent\n}\n\nexport function simpleHash(str: string) {\n    let hash = 0\n    for (let i = 0; i < str.length; i++) {\n        hash = (hash << 5) - hash + str.charCodeAt(i) // (hash * 31) + char code\n        hash |= 0 // Convert to 32bit integer\n    }\n    return Math.abs(hash)\n}\n\n/*\n * receives percent as a number between 0 and 1\n */\nexport function sampleOnProperty(prop: string, percent: number): boolean {\n    return simpleHash(prop) % 100 < clampToRange(percent * 100, 0, 100, logger)\n}\n","import { PostHog } from '../../../posthog-core'\nimport { Property } from '../../../types'\n\nconst SESSION_RECORDING_FLUSHED_SIZE = '$sess_rec_flush_size'\n\nexport class FlushedSizeTracker {\n    private readonly _getProperty: (property_name: string) => Property | undefined\n    private readonly _setProperty: (prop: string, to: any) => void\n\n    constructor(posthog: PostHog) {\n        if (!posthog.persistence) {\n            throw new Error('it is not valid to not have persistence and be this far into setting up the application')\n        }\n\n        this._getProperty = posthog.get_property.bind(posthog)\n        this._setProperty = posthog.persistence.set_property.bind(posthog.persistence)\n    }\n\n    trackSize(size: number) {\n        const currentFlushed = Number(this._getProperty(SESSION_RECORDING_FLUSHED_SIZE)) || 0\n        const newValue = currentFlushed + size\n        this._setProperty(SESSION_RECORDING_FLUSHED_SIZE, newValue)\n    }\n\n    reset() {\n        return this._setProperty(SESSION_RECORDING_FLUSHED_SIZE, 0)\n    }\n\n    get currentTrackedSize(): number {\n        return Number(this._getProperty(SESSION_RECORDING_FLUSHED_SIZE)) || 0\n    }\n}\n","import type { recordOptions, rrwebRecord as rrwebRecordType } from '../types/rrweb'\nimport {\n    type customEvent,\n    EventType,\n    eventWithTime,\n    IncrementalSource,\n    type listenerHandler,\n    RecordPlugin,\n} from '../types/rrweb-types'\nimport { buildNetworkRequestOptions } from './config'\nimport {\n    ACTIVE,\n    allMatchSessionRecordingStatus,\n    AndTriggerMatching,\n    anyMatchSessionRecordingStatus,\n    BUFFERING,\n    DISABLED,\n    EventTriggerMatching,\n    LinkedFlagMatching,\n    nullMatchSessionRecordingStatus,\n    OrTriggerMatching,\n    PAUSED,\n    PendingTriggerMatching,\n    RecordingTriggersStatus,\n    SAMPLED,\n    SessionRecordingStatus,\n    TRIGGER_PENDING,\n    TriggerStatusMatching,\n    TriggerType,\n    URLTriggerMatching,\n} from './triggerMatching'\nimport { estimateSize, INCREMENTAL_SNAPSHOT_EVENT_TYPE, truncateLargeConsoleLogs } from './sessionrecording-utils'\nimport { gzipSync, strFromU8, strToU8 } from 'fflate'\nimport { assignableWindow, LazyLoadedSessionRecordingInterface, window, document } from '../../../utils/globals'\nimport { addEventListener } from '../../../utils'\nimport { MutationThrottler } from './mutation-throttler'\nimport { createLogger } from '../../../utils/logger'\nimport {\n    clampToRange,\n    includes,\n    isBoolean,\n    isFunction,\n    isNull,\n    isNullish,\n    isNumber,\n    isObject,\n    isString,\n    isUndefined,\n} from '@posthog/core'\nimport {\n    SESSION_RECORDING_EVENT_TRIGGER_ACTIVATED_SESSION,\n    SESSION_RECORDING_FIRST_FULL_SNAPSHOT_TIMESTAMP,\n    SESSION_RECORDING_IS_SAMPLED,\n    SESSION_RECORDING_OVERRIDE_SAMPLING,\n    SESSION_RECORDING_OVERRIDE_LINKED_FLAG,\n    SESSION_RECORDING_OVERRIDE_EVENT_TRIGGER,\n    SESSION_RECORDING_OVERRIDE_URL_TRIGGER,\n    SESSION_RECORDING_PAST_MINIMUM_DURATION,\n    SESSION_RECORDING_REMOTE_CONFIG,\n    SESSION_RECORDING_URL_TRIGGER_ACTIVATED_SESSION,\n} from '../../../constants'\nimport { PostHog } from '../../../posthog-core'\nimport {\n    CaptureResult,\n    NetworkRecordOptions,\n    PerformanceCaptureConfig,\n    Properties,\n    SessionIdChangedCallback,\n    SessionRecordingOptions,\n    SessionRecordingPersistedConfig,\n    SessionStartReason,\n} from '../../../types'\nimport { isLocalhost } from '../../../utils/request-utils'\nimport Config from '../../../config'\nimport { sampleOnProperty } from '../../sampling'\nimport { FlushedSizeTracker } from './flushed-size-tracker'\n\nconst BASE_ENDPOINT = '/s/'\nconst DEFAULT_CANVAS_QUALITY = 0.4\nconst DEFAULT_CANVAS_FPS = 4\nconst MAX_CANVAS_FPS = 12\nconst MAX_CANVAS_QUALITY = 1\nconst TWO_SECONDS = 2000\nconst ONE_KB = 1024\n\nconst ONE_MINUTE = 1000 * 60\nconst FIVE_MINUTES = ONE_MINUTE * 5\n\n/**\n * Extracts the network_timing value from a capturePerformance config.\n * Returns `true`/`false` if explicitly set, or `undefined` if not specified.\n */\nfunction networkTimingFromConfig(config: boolean | PerformanceCaptureConfig | undefined): boolean | undefined {\n    return isObject(config) ? config.network_timing : config\n}\n\nexport const RECORDING_IDLE_THRESHOLD_MS = FIVE_MINUTES\nexport const RECORDING_REMOTE_CONFIG_TTL_MS = FIVE_MINUTES\nexport const RECORDING_MAX_EVENT_SIZE = ONE_KB * ONE_KB * 0.9 // ~1mb (with some wiggle room)\nexport const RECORDING_BUFFER_TIMEOUT = 2000 // 2 seconds\nexport const SESSION_RECORDING_BATCH_KEY = 'recordings'\n\nconst LOGGER_PREFIX = '[SessionRecording]'\nconst logger = createLogger(LOGGER_PREFIX)\n\ninterface QueuedRRWebEvent {\n    rrwebMethod: () => void\n    attempt: number\n    // the timestamp this was first put into this queue\n    enqueuedAt: number\n}\n\ninterface SessionIdlePayload {\n    eventTimestamp: number\n    lastActivityTimestamp: number\n    threshold: number\n    bufferLength: number\n    bufferSize: number\n}\n\nexport interface SnapshotBuffer {\n    size: number\n    data: any[]\n    sessionId: string\n    windowId: string\n}\n\nconst ACTIVE_SOURCES = [\n    IncrementalSource.MouseMove,\n    IncrementalSource.MouseInteraction,\n    IncrementalSource.Scroll,\n    IncrementalSource.ViewportResize,\n    IncrementalSource.Input,\n    IncrementalSource.TouchMove,\n    IncrementalSource.MediaInteraction,\n    IncrementalSource.Drag,\n]\n\nconst newQueuedEvent = (rrwebMethod: () => void): QueuedRRWebEvent => ({\n    rrwebMethod,\n    enqueuedAt: Date.now(),\n    attempt: 1,\n})\n\nfunction getRRWeb() {\n    return assignableWindow?.__PosthogExtensions__?.rrweb\n}\n\nfunction getRRWebRecord(): rrwebRecordType | undefined {\n    return getRRWeb()?.record\n}\n\nexport type compressedFullSnapshotEvent = {\n    type: EventType.FullSnapshot\n    data: string\n}\n\nexport type compressedIncrementalSnapshotEvent = {\n    type: EventType.IncrementalSnapshot\n    data: {\n        source: IncrementalSource\n        texts: string\n        attributes: string\n        removes: string\n        adds: string\n    }\n}\n\nexport type compressedIncrementalStyleSnapshotEvent = {\n    type: EventType.IncrementalSnapshot\n    data: {\n        source: IncrementalSource.StyleSheetRule\n        id?: number\n        styleId?: number\n        replace?: string\n        replaceSync?: string\n        adds?: string\n        removes?: string\n    }\n}\n\nexport type compressedEvent =\n    | compressedIncrementalStyleSnapshotEvent\n    | compressedFullSnapshotEvent\n    | compressedIncrementalSnapshotEvent\nexport type compressedEventWithTime = compressedEvent & {\n    timestamp: number\n    delay?: number\n    // marker for compression version\n    cv: '2024-10'\n}\n\nfunction gzipToString(data: unknown): string {\n    return strFromU8(gzipSync(strToU8(JSON.stringify(data))), true)\n}\n\n/**\n * rrweb's packer takes an event and returns a string or the reverse on `unpack`.\n * but we want to be able to inspect metadata during ingestion.\n * and don't want to compress the entire event,\n * so we have a custom packer that only compresses part of some events\n */\nfunction compressEvent(event: eventWithTime): eventWithTime | compressedEventWithTime {\n    try {\n        if (event.type === EventType.FullSnapshot) {\n            return {\n                ...event,\n                data: gzipToString(event.data),\n                cv: '2024-10',\n            }\n        }\n        if (event.type === EventType.IncrementalSnapshot && event.data.source === IncrementalSource.Mutation) {\n            return {\n                ...event,\n                cv: '2024-10',\n                data: {\n                    ...event.data,\n                    texts: gzipToString(event.data.texts),\n                    attributes: gzipToString(event.data.attributes),\n                    removes: gzipToString(event.data.removes),\n                    adds: gzipToString(event.data.adds),\n                },\n            }\n        }\n        if (event.type === EventType.IncrementalSnapshot && event.data.source === IncrementalSource.StyleSheetRule) {\n            return {\n                ...event,\n                cv: '2024-10',\n                data: {\n                    ...event.data,\n                    adds: event.data.adds ? gzipToString(event.data.adds) : undefined,\n                    removes: event.data.removes ? gzipToString(event.data.removes) : undefined,\n                },\n            }\n        }\n    } catch (e) {\n        logger.error('could not compress event - will use uncompressed event', e)\n    }\n    return event\n}\n\nfunction isCustomEvent(e: eventWithTime, tag: string): e is eventWithTime & customEvent {\n    return e.type === EventType.Custom && e.data.tag === tag\n}\n\nfunction isSessionIdleEvent(e: eventWithTime): e is eventWithTime & customEvent {\n    return isCustomEvent(e, 'sessionIdle')\n}\n\ntype SessionEndingPayload = {\n    lastActivityTimestamp?: number\n    currentSessionId?: string\n    currentWindowId?: string\n}\n\nfunction isSessionEndingEvent(e: eventWithTime): e is eventWithTime & customEvent {\n    return isCustomEvent(e, '$session_ending')\n}\n\nfunction getSessionEndingPayload(e: eventWithTime): SessionEndingPayload | null {\n    return isSessionEndingEvent(e) ? (e.data.payload as SessionEndingPayload) : null\n}\n\ntype SessionStartingPayload = {\n    lastActivityTimestamp?: number\n    nextSessionId?: string\n    nextWindowId?: string\n}\n\nfunction isSessionStartingEvent(e: eventWithTime): e is eventWithTime & customEvent {\n    return isCustomEvent(e, '$session_starting')\n}\n\nfunction getSessionStartingPayload(e: eventWithTime): SessionStartingPayload | null {\n    return isSessionStartingEvent(e) ? (e.data.payload as SessionStartingPayload) : null\n}\n\nfunction isAllowedWhenIdle(e: eventWithTime): boolean {\n    return isSessionIdleEvent(e) || isSessionEndingEvent(e) || isSessionStartingEvent(e)\n}\n\n/** When we put the recording into a paused state, we add a custom event.\n *  However, in the paused state, events are dropped and never make it to the buffer,\n *  so we need to manually let this one through */\nfunction isRecordingPausedEvent(e: eventWithTime) {\n    return e.type === EventType.Custom && e.data.tag === 'recording paused'\n}\n\nexport const SEVEN_MEGABYTES = 1024 * 1024 * 7 * 0.9 // ~7mb (with some wiggle room)\n\n// recursively splits large buffers into smaller ones\n// uses a pretty high size limit to avoid splitting too much\nexport function splitBuffer(buffer: SnapshotBuffer, sizeLimit: number = SEVEN_MEGABYTES): SnapshotBuffer[] {\n    if (buffer.size >= sizeLimit && buffer.data.length > 1) {\n        const half = Math.floor(buffer.data.length / 2)\n        const firstHalf = buffer.data.slice(0, half)\n        const secondHalf = buffer.data.slice(half)\n        return [\n            splitBuffer({\n                size: estimateSize(firstHalf),\n                data: firstHalf,\n                sessionId: buffer.sessionId,\n                windowId: buffer.windowId,\n            }),\n            splitBuffer({\n                size: estimateSize(secondHalf),\n                data: secondHalf,\n                sessionId: buffer.sessionId,\n                windowId: buffer.windowId,\n            }),\n        ].flatMap((x) => x)\n    } else {\n        return [buffer]\n    }\n}\n\nexport class LazyLoadedSessionRecording implements LazyLoadedSessionRecordingInterface {\n    private _endpoint: string = BASE_ENDPOINT\n    private _mutationThrottler?: MutationThrottler\n    /**\n     * Util to help developers working on this feature manually override\n     */\n    private _forceAllowLocalhostNetworkCapture = false\n    private _stopRrweb: listenerHandler | undefined = undefined\n    private _lastActivityTimestamp: number = Date.now()\n    /**\n     * if pageview capture is disabled,\n     * then we can manually track href changes\n     */\n    private _lastHref?: string\n    /**\n     * and a queue - that contains rrweb events that we want to send to rrweb, but rrweb wasn't able to accept them yet\n     */\n    private _queuedRRWebEvents: QueuedRRWebEvent[] = []\n    private _isIdle: boolean | 'unknown' = 'unknown'\n    private _maxDepthExceeded = false\n\n    private _linkedFlagMatching: LinkedFlagMatching\n    private _urlTriggerMatching: URLTriggerMatching\n    private _eventTriggerMatching: EventTriggerMatching\n    // we need to be able to check the state of the event and url triggers separately\n    // as we make some decisions based on them without referencing LinkedFlag etc\n    private _triggerMatching: TriggerStatusMatching = new PendingTriggerMatching()\n    private _fullSnapshotTimer?: ReturnType<typeof setInterval>\n    private _fullSnapshotTimestamps: Array<[string, number]> = []\n\n    private _windowId: string\n    private _sessionId: string\n    get sessionId(): string {\n        return this._sessionId\n    }\n\n    private _flushBufferTimer?: any\n    // we have a buffer - that contains PostHog snapshot events ready to be sent to the server\n    private _buffer: SnapshotBuffer\n\n    private _removePageViewCaptureHook: (() => void) | undefined = undefined\n\n    private _removeEventTriggerCaptureHook: (() => void) | undefined = undefined\n\n    private _flushedSizeTracker: FlushedSizeTracker\n\n    private get _sessionManager() {\n        if (!this._instance.sessionManager) {\n            throw new Error(LOGGER_PREFIX + ' must be started with a valid sessionManager.')\n        }\n\n        return this._instance.sessionManager\n    }\n\n    private get _sessionIdleThresholdMilliseconds(): number {\n        return this._instance.config.session_recording.session_idle_threshold_ms || RECORDING_IDLE_THRESHOLD_MS\n    }\n\n    private get _isSampled(): boolean | null {\n        const currentValue = this._instance.get_property(SESSION_RECORDING_IS_SAMPLED)\n        // we store the session id when sampled so that we can detect session id changes\n        // and `false` when not sampled\n        // legacy SDKs stored `true` when sampled, but that is not tied to a session id\n        // so we treat it as null (unknown) and will make a fresh decision\n        if (currentValue === true) {\n            return null\n        }\n        return currentValue === false ? false : isString(currentValue) ? currentValue === this.sessionId : null\n    }\n\n    private get _sampleRate(): number | null {\n        const rate = this._remoteConfig?.sampleRate\n        return isNumber(rate) ? rate : null\n    }\n\n    private get _minimumDuration(): number | null {\n        const duration = this._remoteConfig?.minimumDurationMilliseconds\n        return isNumber(duration) ? duration : null\n    }\n\n    private _statusMatcher: (triggersStatus: RecordingTriggersStatus) => SessionRecordingStatus =\n        nullMatchSessionRecordingStatus\n\n    private _onSessionIdListener: (() => void) | undefined = undefined\n    private _onSessionIdleResetForcedListener: (() => void) | undefined = undefined\n    private _samplingSessionListener: (() => void) | undefined = undefined\n    private _forceIdleSessionIdListener: (() => void) | undefined = undefined\n\n    constructor(private readonly _instance: PostHog) {\n        // we know there's a sessionManager, so don't need to start without a session id\n        const { sessionId, windowId } = this._sessionManager.checkAndGetSessionAndWindowId()\n        this._sessionId = sessionId\n        this._windowId = windowId\n\n        this._linkedFlagMatching = new LinkedFlagMatching(this._instance)\n        this._urlTriggerMatching = new URLTriggerMatching(this._instance)\n        this._eventTriggerMatching = new EventTriggerMatching(this._instance)\n\n        this._buffer = this._clearBuffer()\n\n        if (this._sessionIdleThresholdMilliseconds >= this._sessionManager.sessionTimeoutMs) {\n            logger.warn(\n                `session_idle_threshold_ms (${this._sessionIdleThresholdMilliseconds}) is greater than the session timeout (${this._sessionManager.sessionTimeoutMs}). Session will never be detected as idle`\n            )\n        }\n\n        this._flushedSizeTracker = new FlushedSizeTracker(this._instance)\n    }\n\n    private get _masking():\n        | Pick<SessionRecordingOptions, 'maskAllInputs' | 'maskTextSelector' | 'blockSelector'>\n        | undefined {\n        const masking_server_side = this._remoteConfig?.masking\n        const masking_client_side = {\n            maskAllInputs: this._instance.config.session_recording?.maskAllInputs,\n            maskTextSelector: this._instance.config.session_recording?.maskTextSelector,\n            blockSelector: this._instance.config.session_recording?.blockSelector,\n        }\n\n        const maskAllInputs = masking_client_side?.maskAllInputs ?? masking_server_side?.maskAllInputs\n        const maskTextSelector = masking_client_side?.maskTextSelector ?? masking_server_side?.maskTextSelector\n        const blockSelector = masking_client_side?.blockSelector ?? masking_server_side?.blockSelector\n\n        return !isUndefined(maskAllInputs) || !isUndefined(maskTextSelector) || !isUndefined(blockSelector)\n            ? {\n                  maskAllInputs: maskAllInputs ?? true,\n                  maskTextSelector,\n                  blockSelector,\n              }\n            : undefined\n    }\n\n    private get _canvasRecording(): { enabled: boolean; fps: number; quality: number } {\n        const canvasRecording_client_side = this._instance.config.session_recording.captureCanvas\n        const canvasRecording_server_side = this._remoteConfig?.canvasRecording\n\n        const enabled: boolean =\n            canvasRecording_client_side?.recordCanvas ?? canvasRecording_server_side?.enabled ?? false\n        const fps: number =\n            canvasRecording_client_side?.canvasFps ?? canvasRecording_server_side?.fps ?? DEFAULT_CANVAS_FPS\n        let quality: string | number =\n            canvasRecording_client_side?.canvasQuality ?? canvasRecording_server_side?.quality ?? DEFAULT_CANVAS_QUALITY\n        if (typeof quality === 'string') {\n            const parsed = parseFloat(quality)\n            quality = isNaN(parsed) ? 0.4 : parsed\n        }\n\n        return {\n            enabled,\n            fps: clampToRange(fps, 0, MAX_CANVAS_FPS, createLogger('canvas recording fps'), DEFAULT_CANVAS_FPS),\n            quality: clampToRange(\n                quality,\n                0,\n                MAX_CANVAS_QUALITY,\n                createLogger('canvas recording quality'),\n                DEFAULT_CANVAS_QUALITY\n            ),\n        }\n    }\n\n    private get _isConsoleLogCaptureEnabled() {\n        const enabled_server_side = !!this._remoteConfig?.consoleLogRecordingEnabled\n        const enabled_client_side = this._instance.config.enable_recording_console_log\n        return enabled_client_side ?? enabled_server_side\n    }\n\n    // network payload capture config has three parts\n    // each can be configured server side or client side\n    private get _networkPayloadCapture():\n        | Pick<NetworkRecordOptions, 'recordHeaders' | 'recordBody' | 'recordPerformance'>\n        | undefined {\n        const networkPayloadCapture_server_side = this._remoteConfig?.networkPayloadCapture\n        const networkPayloadCapture_client_side = {\n            recordHeaders: this._instance.config.session_recording?.recordHeaders,\n            recordBody: this._instance.config.session_recording?.recordBody,\n        }\n        const headersEnabled =\n            networkPayloadCapture_client_side?.recordHeaders || networkPayloadCapture_server_side?.recordHeaders\n        const bodyEnabled =\n            networkPayloadCapture_client_side?.recordBody || networkPayloadCapture_server_side?.recordBody\n        const clientNetworkTiming = networkTimingFromConfig(this._instance.config.capture_performance)\n        const serverNetworkTiming = networkTimingFromConfig(networkPayloadCapture_server_side?.capturePerformance)\n        const networkTimingEnabled = !!(isBoolean(clientNetworkTiming) ? clientNetworkTiming : serverNetworkTiming)\n\n        return headersEnabled || bodyEnabled || networkTimingEnabled\n            ? { recordHeaders: headersEnabled, recordBody: bodyEnabled, recordPerformance: networkTimingEnabled }\n            : undefined\n    }\n\n    private _gatherRRWebPlugins() {\n        const plugins: RecordPlugin[] = []\n\n        const recordConsolePlugin = assignableWindow.__PosthogExtensions__?.rrwebPlugins?.getRecordConsolePlugin\n        if (recordConsolePlugin && this._isConsoleLogCaptureEnabled) {\n            plugins.push(recordConsolePlugin())\n        }\n\n        const networkPlugin = assignableWindow.__PosthogExtensions__?.rrwebPlugins?.getRecordNetworkPlugin\n        if (!!this._networkPayloadCapture && isFunction(networkPlugin)) {\n            const canRecordNetwork = !isLocalhost() || this._forceAllowLocalhostNetworkCapture\n\n            if (canRecordNetwork) {\n                plugins.push(\n                    networkPlugin(buildNetworkRequestOptions(this._instance.config, this._networkPayloadCapture))\n                )\n            } else {\n                logger.info('NetworkCapture not started because we are on localhost.')\n            }\n        }\n\n        return plugins\n    }\n\n    private _maskUrl(url: string): string | undefined {\n        const userSessionRecordingOptions = this._instance.config.session_recording\n\n        // userSessionRecordingOptions.maskNetworkRequestFn is deprecated, fallback to it\n        if (userSessionRecordingOptions.maskCapturedNetworkRequestFn) {\n            const result = userSessionRecordingOptions.maskCapturedNetworkRequestFn({\n                name: url,\n            } as any)\n            // CapturedNetworkRequest uses 'name' for URL, but also check 'url' for compatibility\n            return result?.name ?? (result as any)?.url\n        }\n\n        if (userSessionRecordingOptions.maskNetworkRequestFn) {\n            const result = userSessionRecordingOptions.maskNetworkRequestFn({\n                url,\n            })\n            return result?.url\n        }\n\n        return url\n    }\n\n    private _tryRRWebMethod(queuedRRWebEvent: QueuedRRWebEvent): boolean {\n        try {\n            queuedRRWebEvent.rrwebMethod()\n            return true\n        } catch (e) {\n            // Sometimes a race can occur where the recorder is not fully started yet\n            if (this._queuedRRWebEvents.length < 10) {\n                this._queuedRRWebEvents.push({\n                    enqueuedAt: queuedRRWebEvent.enqueuedAt || Date.now(),\n                    attempt: queuedRRWebEvent.attempt + 1,\n                    rrwebMethod: queuedRRWebEvent.rrwebMethod,\n                })\n            } else {\n                logger.warn('could not emit queued rrweb event.', e, queuedRRWebEvent)\n            }\n\n            return false\n        }\n    }\n\n    private _tryAddCustomEvent(tag: string, payload: any): boolean {\n        return this._tryRRWebMethod(newQueuedEvent(() => getRRWebRecord()!.addCustomEvent(tag, payload)))\n    }\n\n    private _pageViewFallBack() {\n        try {\n            if (this._instance.config.capture_pageview || !window) {\n                return\n            }\n            // Strip hash parameters from URL since they often aren't helpful\n            // Use URL constructor for proper parsing to handle edge cases\n            // recording doesn't run in IE11, so we don't need compat here\n            // eslint-disable-next-line compat/compat\n            const url = new URL(window.location.href)\n            const hrefWithoutHash = url.origin + url.pathname + url.search\n            const currentUrl = this._maskUrl(hrefWithoutHash)\n            if (this._lastHref !== currentUrl) {\n                this._lastHref = currentUrl\n                this._tryAddCustomEvent('$url_changed', { href: currentUrl })\n            }\n        } catch {\n            // If URL processing fails, don't capture anything\n        }\n    }\n\n    private _processQueuedEvents() {\n        if (this._queuedRRWebEvents.length) {\n            // if rrweb isn't ready to accept events earlier, then we queued them up.\n            // now that `emit` has been called rrweb should be ready to accept them.\n            // so, before we process this event, we try our queued events _once_ each\n            // we don't want to risk queuing more things and never exiting this loop!\n            // if they fail here, they'll be pushed into a new queue\n            // and tried on the next loop.\n            // there is a risk of this queue growing in an uncontrolled manner.\n            // so its length is limited elsewhere\n            // for now this is to help us ensure we can capture events that happen\n            // and try to identify more about when it is failing\n            const itemsToProcess = [...this._queuedRRWebEvents]\n            this._queuedRRWebEvents = []\n            itemsToProcess.forEach((queuedRRWebEvent) => {\n                if (Date.now() - queuedRRWebEvent.enqueuedAt <= TWO_SECONDS) {\n                    this._tryRRWebMethod(queuedRRWebEvent)\n                }\n            })\n        }\n    }\n\n    private _tryTakeFullSnapshot(): boolean {\n        return this._tryRRWebMethod(newQueuedEvent(() => getRRWebRecord()!.takeFullSnapshot()))\n    }\n\n    private get _fullSnapshotIntervalMillis(): number {\n        if (\n            this._triggerMatching.triggerStatus(this.sessionId) === TRIGGER_PENDING &&\n            !['sampled', 'active'].includes(this.status)\n        ) {\n            return ONE_MINUTE\n        }\n\n        return this._instance.config.session_recording?.full_snapshot_interval_millis ?? FIVE_MINUTES\n    }\n\n    private _scheduleFullSnapshot(): void {\n        if (this._fullSnapshotTimer) {\n            clearInterval(this._fullSnapshotTimer)\n        }\n        // we don't schedule snapshots while idle\n        if (this._isIdle === true) {\n            return\n        }\n\n        const interval = this._fullSnapshotIntervalMillis\n        if (!interval) {\n            return\n        }\n\n        this._fullSnapshotTimer = setInterval(() => {\n            this._tryTakeFullSnapshot()\n        }, interval)\n    }\n\n    private _pauseRecording() {\n        // we check _urlBlocked not status, since more than one thing can affect status\n        if (this._urlTriggerMatching.urlBlocked) {\n            return\n        }\n\n        // we can't flush the buffer here since someone might be starting on a blocked page.\n        // and we need to be sure that we don't record that page,\n        // so we might not get the below custom event, but events will report the paused status.\n        // which will allow debugging of sessions that start on blocked pages\n        this._urlTriggerMatching.urlBlocked = true\n\n        // Clear the snapshot timer since we don't want new snapshots while paused\n        clearInterval(this._fullSnapshotTimer)\n\n        logger.info('recording paused due to URL blocker')\n        this._tryAddCustomEvent('recording paused', { reason: 'url blocker' })\n    }\n\n    private _resumeRecording() {\n        // we check _urlBlocked not status, since more than one thing can affect status\n        if (!this._urlTriggerMatching.urlBlocked) {\n            return\n        }\n\n        this._urlTriggerMatching.urlBlocked = false\n\n        this._tryTakeFullSnapshot()\n        this._scheduleFullSnapshot()\n\n        this._tryAddCustomEvent('recording resumed', { reason: 'left blocked url' })\n        logger.info('recording resumed')\n    }\n\n    private _activateTrigger(triggerType: TriggerType) {\n        if (this._triggerMatching.triggerStatus(this.sessionId) === TRIGGER_PENDING) {\n            // status is stored separately for URL and event triggers\n            this._instance?.persistence?.register({\n                [triggerType === 'url'\n                    ? SESSION_RECORDING_URL_TRIGGER_ACTIVATED_SESSION\n                    : SESSION_RECORDING_EVENT_TRIGGER_ACTIVATED_SESSION]: this._sessionId,\n            })\n\n            this._flushBuffer()\n            this._reportStarted((triggerType + '_trigger_matched') as SessionStartReason)\n        }\n    }\n\n    get isStarted(): boolean {\n        return !!this._stopRrweb\n    }\n\n    get _remoteConfig(): SessionRecordingPersistedConfig | undefined {\n        const persistedConfig: any = this._instance.get_property(SESSION_RECORDING_REMOTE_CONFIG)\n        if (!persistedConfig) {\n            return undefined\n        }\n        const parsedConfig = isObject(persistedConfig) ? persistedConfig : JSON.parse(persistedConfig)\n\n        // Only check TTL if recording hasn't started yet\n        // Once started, trust the config until a hard page load\n        if (!this.isStarted) {\n            // default to now so that older persisted configs without a cache_timestamp\n            // are treated as fresh instead of being cleared on every read\n            // they come from versions of the code that will never set a cache_timestamp\n            const cacheTimestamp = parsedConfig.cache_timestamp ?? Date.now()\n            if (Date.now() - cacheTimestamp > RECORDING_REMOTE_CONFIG_TTL_MS) {\n                logger.info('persisted remote config for session recording is stale and will be ignored', {\n                    cacheTimestamp,\n                    persistedConfig,\n                })\n                this._instance.persistence?.unregister(SESSION_RECORDING_REMOTE_CONFIG)\n                return undefined\n            }\n        }\n\n        return parsedConfig as SessionRecordingPersistedConfig\n    }\n\n    private _checkOverride(key: string, overrideFunction: () => void): void {\n        const overrideFlag: boolean = this._instance.get_property(key) as boolean\n        if (overrideFlag) {\n            overrideFunction()\n\n            // Clean up the override flag after applying it\n            this._instance.persistence?.unregister(key)\n        }\n    }\n\n    start(startReason?: SessionStartReason) {\n        const config = this._remoteConfig\n        if (!config) {\n            logger.info('remote config must be stored in persistence before recording can start')\n            return\n        }\n\n        // We want to ensure the sessionManager is reset if necessary on loading the recorder\n        const { sessionId, windowId } = this._sessionManager.checkAndGetSessionAndWindowId()\n        this._sessionId = sessionId\n        this._windowId = windowId\n\n        // Reset first full snapshot tracking for the new session\n        this._instance.persistence?.unregister(SESSION_RECORDING_FIRST_FULL_SNAPSHOT_TIMESTAMP)\n\n        if (config?.endpoint) {\n            this._endpoint = config?.endpoint\n        }\n\n        if (config?.triggerMatchType === 'any') {\n            this._statusMatcher = anyMatchSessionRecordingStatus\n            this._triggerMatching = new OrTriggerMatching([this._eventTriggerMatching, this._urlTriggerMatching])\n        } else {\n            // either the setting is \"ALL\"\n            // or we default to the most restrictive\n            this._statusMatcher = allMatchSessionRecordingStatus\n            this._triggerMatching = new AndTriggerMatching([this._eventTriggerMatching, this._urlTriggerMatching])\n        }\n        this._instance.register_for_session({\n            $sdk_debug_replay_remote_trigger_matching_config: config?.triggerMatchType,\n        })\n\n        this._urlTriggerMatching.onConfig(config)\n\n        this._eventTriggerMatching.onConfig(config)\n        this._removeEventTriggerCaptureHook?.()\n        this._addEventTriggerListener()\n\n        this._linkedFlagMatching.onConfig(config, (flag, variant) => {\n            this._reportStarted('linked_flag_matched', {\n                flag,\n                variant,\n            })\n        })\n\n        this._checkOverride(SESSION_RECORDING_OVERRIDE_SAMPLING, () => {\n            this.overrideSampling()\n        })\n        this._checkOverride(SESSION_RECORDING_OVERRIDE_LINKED_FLAG, () => {\n            this.overrideLinkedFlag()\n        })\n        this._checkOverride(SESSION_RECORDING_OVERRIDE_EVENT_TRIGGER, () => {\n            this.overrideTrigger('event')\n        })\n        this._checkOverride(SESSION_RECORDING_OVERRIDE_URL_TRIGGER, () => {\n            this.overrideTrigger('url')\n        })\n\n        this._makeSamplingDecision(this.sessionId)\n        this._startRecorder()\n\n        // calling addEventListener multiple times is safe and will not add duplicates\n        addEventListener(window, 'beforeunload', this._onBeforeUnload)\n        addEventListener(window, 'offline', this._onOffline)\n        addEventListener(window, 'online', this._onOnline)\n        addEventListener(window, 'visibilitychange', this._onVisibilityChange)\n\n        if (!this._onSessionIdListener) {\n            this._onSessionIdListener = this._sessionManager.onSessionId(this._onSessionIdCallback)\n        }\n\n        if (!this._onSessionIdleResetForcedListener) {\n            this._onSessionIdleResetForcedListener = this._sessionManager.on('forcedIdleReset', () => {\n                // a session was forced to reset due to idle timeout and lack of activity\n                this._clearConditionalRecordingPersistence()\n                this._isIdle = 'unknown'\n                this.stop()\n                // then we want a session id listener to restart the recording when a new session starts\n                this._forceIdleSessionIdListener = this._sessionManager.onSessionId(\n                    (sessionId, windowId, changeReason) => {\n                        // this should first unregister itself\n                        this._forceIdleSessionIdListener?.()\n                        this._forceIdleSessionIdListener = undefined\n                        this._onSessionIdCallback(sessionId, windowId, changeReason)\n                    }\n                )\n            })\n        }\n\n        if (isNullish(this._removePageViewCaptureHook)) {\n            // :TRICKY: rrweb does not capture navigation within SPA-s, so hook into our $pageview events to get access to all events.\n            //   Dropping the initial event is fine (it's always captured by rrweb).\n            this._removePageViewCaptureHook = this._instance.on('eventCaptured', (event) => {\n                // If anything could go wrong here,\n                // it has the potential to block the main loop,\n                // so we catch all errors.\n                try {\n                    if (event.event === '$pageview') {\n                        const href = event?.properties.$current_url ? this._maskUrl(event?.properties.$current_url) : ''\n                        if (!href) {\n                            return\n                        }\n                        this._tryAddCustomEvent('$pageview', { href })\n                    }\n                } catch (e) {\n                    logger.error('Could not add $pageview to rrweb session', e)\n                }\n            })\n        }\n\n        if (this.status === ACTIVE) {\n            this._reportStarted(startReason || 'recording_initialized')\n        }\n    }\n\n    private _onSessionIdCallback: SessionIdChangedCallback = (sessionId, windowId, changeReason) => {\n        if (!changeReason) return\n\n        // Skip if session hasn't actually changed (callback might fire multiple times)\n        if (sessionId === this._sessionId && windowId === this._windowId) {\n            return\n        }\n\n        const wasLikelyReset = changeReason.noSessionId\n        const shouldLinkSessions =\n            !wasLikelyReset && (changeReason.activityTimeout || changeReason.sessionPastMaximumLength)\n\n        // Capture old IDs before start() updates them\n        const oldSessionId = this._sessionId\n        const oldWindowId = this._windowId\n\n        if (shouldLinkSessions) {\n            this._tryAddCustomEvent('$session_ending', {\n                currentSessionId: oldSessionId,\n                currentWindowId: oldWindowId,\n                nextSessionId: sessionId,\n                nextWindowId: windowId,\n                changeReason,\n                // we'll need to correct the time of this if it's captured when idle\n                // so we don't extend reported session time with a debug event\n                lastActivityTimestamp: this._lastActivityTimestamp,\n                flushed_size: this._flushedSizeTracker?.currentTrackedSize,\n            })\n        }\n\n        // reset flushed size tracker after capturing the ending event\n        if (this._flushedSizeTracker) {\n            this._flushedSizeTracker.reset()\n        }\n\n        // Reset first full snapshot timestamp for the new session\n        this._instance.persistence?.unregister(SESSION_RECORDING_FIRST_FULL_SNAPSHOT_TIMESTAMP)\n\n        this._maxDepthExceeded = false\n        getRRWeb()?.resetMaxDepthState?.()\n\n        this._tryAddCustomEvent('$session_id_change', { sessionId, windowId, changeReason })\n\n        this._clearConditionalRecordingPersistence()\n\n        // Note: We don't call stop()/start() here because _updateWindowAndSessionIds\n        // already handles the restart. This callback fires synchronously during\n        // checkAndGetSessionAndWindowId(), so _updateWindowAndSessionIds will detect\n        // the session change and handle the restart after this callback returns.\n\n        if (shouldLinkSessions) {\n            this._tryAddCustomEvent('$session_starting', {\n                previousSessionId: oldSessionId,\n                previousWindowId: oldWindowId,\n                nextSessionId: sessionId,\n                nextWindowId: windowId,\n                changeReason,\n                // we'll need to correct the time of this if it's captured when idle\n                // so we don't extend reported session time with a debug event\n                lastActivityTimestamp: this._lastActivityTimestamp,\n            })\n        }\n\n        if (isNumber(this._sampleRate) && isNullish(this._samplingSessionListener)) {\n            this._makeSamplingDecision(sessionId)\n        }\n    }\n\n    stop() {\n        window?.removeEventListener('beforeunload', this._onBeforeUnload)\n        window?.removeEventListener('offline', this._onOffline)\n        window?.removeEventListener('online', this._onOnline)\n        window?.removeEventListener('visibilitychange', this._onVisibilityChange)\n\n        this._flushBuffer()\n        this._clearBuffer()\n        clearInterval(this._fullSnapshotTimer)\n        this._clearFlushBufferTimer()\n\n        this._removePageViewCaptureHook?.()\n        this._removePageViewCaptureHook = undefined\n        this._removeEventTriggerCaptureHook?.()\n        this._removeEventTriggerCaptureHook = undefined\n        this._onSessionIdListener?.()\n        this._onSessionIdListener = undefined\n        this._onSessionIdleResetForcedListener?.()\n        this._onSessionIdleResetForcedListener = undefined\n        this._samplingSessionListener?.()\n        this._samplingSessionListener = undefined\n        this._forceIdleSessionIdListener?.()\n        this._forceIdleSessionIdListener = undefined\n\n        this._eventTriggerMatching.stop()\n        this._urlTriggerMatching.stop()\n        this._linkedFlagMatching.stop()\n\n        this._mutationThrottler?.stop()\n\n        // Clear any queued rrweb events to prevent memory leaks from closures\n        this._queuedRRWebEvents = []\n\n        this._stopRrweb?.()\n        this._stopRrweb = undefined\n\n        logger.info('stopped')\n    }\n\n    onRRwebEmit(rawEvent: eventWithTime) {\n        this._processQueuedEvents()\n\n        if (!rawEvent || !isObject(rawEvent)) {\n            return\n        }\n\n        if (rawEvent.type === EventType.Meta) {\n            const href = this._maskUrl(rawEvent.data.href)\n            this._lastHref = href\n            if (!href) {\n                return\n            }\n            rawEvent.data.href = href\n        } else {\n            this._pageViewFallBack()\n        }\n\n        // Check if the URL matches any trigger patterns\n        this._urlTriggerMatching.checkUrlTriggerConditions(\n            () => this._pauseRecording(),\n            () => this._resumeRecording(),\n            (triggerType) => this._activateTrigger(triggerType),\n            this.sessionId\n        )\n        // always have to check if the URL is blocked really early,\n        // or you risk getting stuck in a loop\n        if (this._urlTriggerMatching.urlBlocked && !isRecordingPausedEvent(rawEvent)) {\n            return\n        }\n\n        // we're processing a full snapshot, so we should reset the timer\n        if (rawEvent.type === EventType.FullSnapshot) {\n            this._scheduleFullSnapshot()\n            // Full snapshots reset rrweb's node IDs, so clear any logged node tracking\n            this._mutationThrottler?.reset()\n\n            // Track the timestamp of the first full snapshot for this session\n            // This helps us detect session rotation issues where incremental snapshots\n            // are sent before the full snapshot\n            this._instance.persistence?.register_once(\n                {\n                    [SESSION_RECORDING_FIRST_FULL_SNAPSHOT_TIMESTAMP]: rawEvent.timestamp,\n                },\n                undefined\n            )\n        }\n\n        // Clear the buffer if waiting for a trigger and only keep data from after the current full snapshot\n        // we always start trigger pending so need to wait for flags before we know if we're really pending\n        if (\n            rawEvent.type === EventType.FullSnapshot &&\n            this._triggerMatching.triggerStatus(this.sessionId) === TRIGGER_PENDING\n        ) {\n            this._clearBufferBeforeMostRecentMeta()\n        }\n\n        const throttledEvent = this._mutationThrottler ? this._mutationThrottler.throttleMutations(rawEvent) : rawEvent\n\n        if (!throttledEvent) {\n            return\n        }\n\n        // TODO: Re-add ensureMaxMessageSize once we are confident in it\n        const event = truncateLargeConsoleLogs(throttledEvent)\n\n        // Session lifecycle events ($session_ending, $session_starting) carry their target session ID\n        // in the payload. We must extract this BEFORE _updateWindowAndSessionIds runs, because that\n        // method triggers checkAndGetSessionAndWindowId() which would update this._sessionId.\n        // This is critical for $session_ending which must go to the OLD session, not the new one,\n        // and for $session_starting which must go to the NEW session.\n        const sessionEndingPayload = getSessionEndingPayload(event)\n        const sessionStartingPayload = getSessionStartingPayload(event)\n\n        if (sessionEndingPayload || sessionStartingPayload) {\n            // Adjust timestamp from payload to avoid artificially extending session duration\n            const payload = (sessionEndingPayload ?? sessionStartingPayload) as {\n                lastActivityTimestamp?: number\n            }\n            if (payload?.lastActivityTimestamp) {\n                event.timestamp = payload.lastActivityTimestamp\n            }\n        } else {\n            this._updateWindowAndSessionIds(event)\n        }\n\n        if (rawEvent.type === EventType.FullSnapshot) {\n            this._fullSnapshotTimestamps.push([this._sessionId, rawEvent.timestamp])\n            if (this._fullSnapshotTimestamps.length > 6) {\n                this._fullSnapshotTimestamps = this._fullSnapshotTimestamps.slice(-6)\n            }\n        }\n\n        // Route lifecycle events using their payload IDs:\n        // - $session_ending uses currentSessionId (the old session it's ending)\n        // - $session_starting uses nextSessionId (the new session it's starting)\n        // - All other events use the current session ID\n        const targetSessionId =\n            sessionEndingPayload?.currentSessionId ?? sessionStartingPayload?.nextSessionId ?? this._sessionId\n        const targetWindowId =\n            sessionEndingPayload?.currentWindowId ?? sessionStartingPayload?.nextWindowId ?? this._windowId\n\n        // When in an idle state we keep recording but don't capture the events,\n        // we don't want to return early if idle is 'unknown'\n        if (this._isIdle === true && !isAllowedWhenIdle(event)) {\n            return\n        }\n\n        if (isSessionIdleEvent(event)) {\n            // session idle events have a timestamp when rrweb sees them\n            // which can artificially lengthen a session\n            // we know when we detected it based on the payload and can correct the timestamp\n            const payload = event.data.payload as SessionIdlePayload\n            if (payload) {\n                const lastActivity = payload.lastActivityTimestamp\n                const threshold = payload.threshold\n                event.timestamp = lastActivity + threshold\n            }\n        }\n\n        const eventToSend =\n            (this._instance.config.session_recording.compress_events ?? true) ? compressEvent(event) : event\n        const size = estimateSize(eventToSend)\n\n        const properties = {\n            $snapshot_bytes: size,\n            $snapshot_data: eventToSend,\n            $session_id: targetSessionId,\n            $window_id: targetWindowId,\n        }\n\n        if (event.type === EventType.FullSnapshot && getRRWeb()?.wasMaxDepthReached?.()) {\n            this._maxDepthExceeded = true\n        }\n\n        if (this.status === DISABLED) {\n            this._clearBuffer()\n            return\n        }\n\n        this._captureSnapshotBuffered(properties)\n    }\n\n    get status(): SessionRecordingStatus {\n        return this._statusMatcher({\n            // can't get here without recording being enabled...\n            receivedFlags: true,\n            isRecordingEnabled: true,\n            // things that do still vary\n            isSampled: this._isSampled,\n            urlTriggerMatching: this._urlTriggerMatching,\n            eventTriggerMatching: this._eventTriggerMatching,\n            linkedFlagMatching: this._linkedFlagMatching,\n            sessionId: this.sessionId,\n        })\n    }\n\n    log(message: string, level: 'log' | 'warn' | 'error' = 'log') {\n        this._instance.sessionRecording?.onRRwebEmit({\n            type: 6,\n            data: {\n                plugin: 'rrweb/console@1',\n                payload: {\n                    level,\n                    trace: [],\n                    // Even though it is a string, we stringify it as that's what rrweb expects\n                    payload: [JSON.stringify(message)],\n                },\n            },\n            timestamp: Date.now(),\n        })\n    }\n\n    public overrideLinkedFlag() {\n        this._linkedFlagMatching.linkedFlagSeen = true\n        this._tryTakeFullSnapshot()\n        this._reportStarted('linked_flag_overridden')\n    }\n\n    /**\n     * this ignores the sampling config and (if other conditions are met) causes capture to start\n     *\n     * It is not usual to call this directly,\n     * instead call `posthog.startSessionRecording({sampling: true})`\n     * */\n    public overrideSampling() {\n        this._instance.persistence?.register({\n            // short-circuits the `makeSamplingDecision` function in the session recording module\n            [SESSION_RECORDING_IS_SAMPLED]: this.sessionId,\n        })\n        this._tryTakeFullSnapshot()\n        this._reportStarted('sampling_overridden')\n    }\n\n    /**\n     * this ignores the URL/Event trigger config and (if other conditions are met) causes capture to start\n     *\n     * It is not usual to call this directly,\n     * instead call `posthog.startSessionRecording({trigger: 'url' | 'event'})`\n     * */\n    public overrideTrigger(triggerType: TriggerType) {\n        this._activateTrigger(triggerType)\n    }\n\n    private _clearFlushBufferTimer() {\n        if (this._flushBufferTimer) {\n            clearTimeout(this._flushBufferTimer)\n            this._flushBufferTimer = undefined\n        }\n    }\n\n    private _flushBuffer(): SnapshotBuffer {\n        this._clearFlushBufferTimer()\n\n        const isBelowMinimumDuration = this._isBelowMinimumDuration()\n\n        if (this.status === BUFFERING || this.status === PAUSED || this.status === DISABLED || isBelowMinimumDuration) {\n            this._flushBufferTimer = setTimeout(() => {\n                this._flushBuffer()\n            }, RECORDING_BUFFER_TIMEOUT)\n            return this._buffer\n        }\n\n        if (this._buffer.data.length > 0) {\n            const snapshotEvents = splitBuffer(this._buffer)\n            snapshotEvents.forEach((snapshotBuffer) => {\n                this._flushedSizeTracker?.trackSize(snapshotBuffer.size)\n                this._captureSnapshot({\n                    $snapshot_bytes: snapshotBuffer.size,\n                    $snapshot_data: snapshotBuffer.data,\n                    $session_id: snapshotBuffer.sessionId,\n                    $window_id: snapshotBuffer.windowId,\n                    $lib: 'web',\n                    $lib_version: Config.LIB_VERSION,\n                })\n            })\n        }\n\n        // buffer is empty, we clear it in case the session id has changed\n        return this._clearBuffer()\n    }\n\n    private _hasPassedMinimumDuration = (): boolean => {\n        const persistedSessionId = this._instance.persistence?.props[SESSION_RECORDING_PAST_MINIMUM_DURATION]\n        return persistedSessionId === this._sessionId\n    }\n\n    private _getBufferDuration = (): number | null => {\n        if (this._buffer.data.length === 0) {\n            return null\n        }\n\n        const firstTimestamp = this._buffer.data[0]?.timestamp\n        const lastTimestamp = this._buffer.data[this._buffer.data.length - 1]?.timestamp\n\n        if (!isNumber(firstTimestamp) || !isNumber(lastTimestamp)) {\n            return null\n        }\n\n        return lastTimestamp - firstTimestamp\n    }\n\n    private _isBelowMinimumDuration = (): boolean => {\n        const minimumDuration = this._minimumDuration\n        if (!isNumber(minimumDuration)) {\n            return false\n        }\n\n        const strictMode = this._instance.config.session_recording?.strictMinimumDuration ?? false\n\n        if (!strictMode) {\n            const sessionDuration = this._sessionDuration\n            const isPositiveSessionDuration = isNumber(sessionDuration) && sessionDuration >= 0\n            return isPositiveSessionDuration && sessionDuration < minimumDuration\n        }\n\n        if (this._hasPassedMinimumDuration()) {\n            return false\n        }\n\n        const bufferDuration = this._getBufferDuration()\n        if (isNull(bufferDuration)) {\n            return true\n        }\n\n        if (bufferDuration >= minimumDuration) {\n            this._instance.persistence?.register({\n                [SESSION_RECORDING_PAST_MINIMUM_DURATION]: this._sessionId,\n            })\n            return false\n        }\n\n        return true\n    }\n\n    private _captureSnapshotBuffered(properties: Properties) {\n        const additionalBytes = 2 + (this._buffer?.data.length || 0) // 2 bytes for the array brackets and 1 byte for each comma\n\n        // Extract target session ID from properties to ensure we flush when session changes\n        // This is critical for lifecycle events ($session_ending, $session_starting) which may\n        // have different target session IDs than this._sessionId\n        const targetSessionId = properties.$session_id as string\n\n        if (\n            !this._isIdle && // we never want to flush when idle\n            (this._buffer.size + properties.$snapshot_bytes + additionalBytes > RECORDING_MAX_EVENT_SIZE ||\n                this._buffer.sessionId !== targetSessionId)\n        ) {\n            this._buffer = this._flushBuffer()\n            // After flushing, update buffer to use the new target session/window IDs\n            this._buffer.sessionId = targetSessionId\n            this._buffer.windowId = properties.$window_id as string\n        }\n\n        this._buffer.size += properties.$snapshot_bytes\n        this._buffer.data.push(properties.$snapshot_data)\n\n        if (!this._flushBufferTimer && !this._isIdle) {\n            this._flushBufferTimer = setTimeout(() => {\n                this._flushBuffer()\n            }, RECORDING_BUFFER_TIMEOUT)\n        }\n    }\n\n    private _captureSnapshot(properties: Properties) {\n        // :TRICKY: Make sure we batch these requests, use a custom endpoint and don't truncate the strings.\n        this._instance.capture('$snapshot', properties, {\n            _url: this._instance.requestRouter.endpointFor('api', this._endpoint),\n            _noTruncate: true,\n            _batchKey: SESSION_RECORDING_BATCH_KEY,\n            skip_client_rate_limiting: true,\n        })\n    }\n\n    private get _sessionDuration(): number | null {\n        const mostRecentSnapshot = this._buffer?.data[this._buffer?.data.length - 1]\n        const { sessionStartTimestamp } = this._sessionManager.checkAndGetSessionAndWindowId(true)\n        return mostRecentSnapshot ? mostRecentSnapshot.timestamp - sessionStartTimestamp : null\n    }\n\n    private _clearBufferBeforeMostRecentMeta(): SnapshotBuffer {\n        if (!this._buffer || this._buffer.data.length === 0) {\n            return this._clearBuffer()\n        }\n\n        // Find the last meta event index by iterating backwards\n        let lastMetaIndex = -1\n        for (let i = this._buffer.data.length - 1; i >= 0; i--) {\n            if (this._buffer.data[i].type === EventType.Meta) {\n                lastMetaIndex = i\n                break\n            }\n        }\n        if (lastMetaIndex >= 0) {\n            this._buffer.data = this._buffer.data.slice(lastMetaIndex)\n            this._buffer.size = this._buffer.data.reduce((acc, curr) => acc + estimateSize(curr), 0)\n            return this._buffer\n        } else {\n            return this._clearBuffer()\n        }\n    }\n\n    private _clearBuffer(): SnapshotBuffer {\n        this._buffer = {\n            size: 0,\n            data: [],\n            sessionId: this._sessionId,\n            windowId: this._windowId,\n        }\n        return this._buffer\n    }\n\n    private _onBeforeUnload = (): void => {\n        this._flushBuffer()\n    }\n\n    private _onOffline = (): void => {\n        this._tryAddCustomEvent('browser offline', {})\n    }\n\n    private _onOnline = (): void => {\n        this._tryAddCustomEvent('browser online', {})\n    }\n\n    private _onVisibilityChange = (): void => {\n        if (document?.visibilityState) {\n            const label = 'window ' + document.visibilityState\n            this._tryAddCustomEvent(label, {})\n        }\n    }\n\n    private _reportStarted(startReason: SessionStartReason, tagPayload?: Record<string, any>) {\n        this._instance.register_for_session({\n            $session_recording_start_reason: startReason,\n        })\n        logger.info(startReason.replace('_', ' '), tagPayload)\n        if (!includes(['recording_initialized', 'session_id_changed'], startReason)) {\n            this._tryAddCustomEvent(startReason, tagPayload)\n        }\n    }\n\n    private _isInteractiveEvent(event: eventWithTime) {\n        return (\n            event.type === INCREMENTAL_SNAPSHOT_EVENT_TYPE &&\n            ACTIVE_SOURCES.indexOf(event.data?.source as IncrementalSource) !== -1\n        )\n    }\n\n    private _updateWindowAndSessionIds(event: eventWithTime) {\n        // Some recording events are triggered by non-user events (e.g. \"X minutes ago\" text updating on the screen).\n        // We don't want to extend the session or trigger a new session in these cases. These events are designated by event\n        // type -> incremental update, and source -> mutation.\n\n        const isUserInteraction = this._isInteractiveEvent(event)\n\n        if (!isUserInteraction && !this._isIdle) {\n            // We check if the lastActivityTimestamp is old enough to go idle\n            const timeSinceLastActivity = event.timestamp - this._lastActivityTimestamp\n            if (timeSinceLastActivity > this._sessionIdleThresholdMilliseconds) {\n                // we mark as idle right away,\n                // or else we get multiple idle events\n                // if there are lots of non-user activity events being emitted\n                this._isIdle = true\n\n                // don't take full snapshots while idle\n                clearInterval(this._fullSnapshotTimer)\n\n                this._tryAddCustomEvent('sessionIdle', {\n                    eventTimestamp: event.timestamp,\n                    lastActivityTimestamp: this._lastActivityTimestamp,\n                    threshold: this._sessionIdleThresholdMilliseconds,\n                    bufferLength: this._buffer.data.length,\n                    bufferSize: this._buffer.size,\n                })\n\n                // proactively flush the buffer in case the session is idle for a long time\n                this._flushBuffer()\n            }\n        }\n\n        let returningFromIdle = false\n        if (isUserInteraction) {\n            this._lastActivityTimestamp = event.timestamp\n            if (this._isIdle) {\n                const idleWasUnknown = this._isIdle === 'unknown'\n                // Remove the idle state\n                this._isIdle = false\n                // if the idle state was unknown, we don't want to add an event, since we're just in bootup\n                // whereas if it was true, we know we've been idle for a while, and we can mark ourselves as returning from idle\n                if (!idleWasUnknown) {\n                    this._tryAddCustomEvent('sessionNoLongerIdle', {\n                        reason: 'user activity',\n                        type: event.type,\n                    })\n                    returningFromIdle = true\n                }\n            }\n        }\n\n        if (this._isIdle) {\n            return\n        }\n\n        // We only want to extend the session if it is an interactive event.\n        const { windowId, sessionId } = this._sessionManager.checkAndGetSessionAndWindowId(\n            !isUserInteraction,\n            event.timestamp\n        )\n\n        const sessionIdChanged = this._sessionId !== sessionId\n        const windowIdChanged = this._windowId !== windowId\n\n        this._windowId = windowId\n        this._sessionId = sessionId\n\n        if (sessionIdChanged || windowIdChanged) {\n            this.stop()\n            this.start('session_id_changed')\n        } else if (returningFromIdle) {\n            this._scheduleFullSnapshot()\n        }\n    }\n\n    private _clearConditionalRecordingPersistence(): void {\n        this._instance?.persistence?.unregister(SESSION_RECORDING_EVENT_TRIGGER_ACTIVATED_SESSION)\n        this._instance?.persistence?.unregister(SESSION_RECORDING_URL_TRIGGER_ACTIVATED_SESSION)\n        this._instance?.persistence?.unregister(SESSION_RECORDING_IS_SAMPLED)\n        this._instance?.persistence?.unregister(SESSION_RECORDING_PAST_MINIMUM_DURATION)\n    }\n\n    private _makeSamplingDecision(sessionId: string): void {\n        const sessionIdChanged = this._sessionId !== sessionId\n\n        // capture the current sample rate\n        // because it is re-used multiple times\n        // and the bundler won't minimize any of the references\n        const currentSampleRate = this._sampleRate\n\n        if (!isNumber(currentSampleRate)) {\n            this._instance.persistence?.unregister(SESSION_RECORDING_IS_SAMPLED)\n            return\n        }\n\n        const storedIsSampled = this._isSampled\n\n        /**\n         * if we get this far, then we should make a sampling decision.\n         * When the session id changes or there is no stored sampling decision for this session id\n         * then we should make a new decision.\n         *\n         * Otherwise, we should use the stored decision.\n         */\n        const makeDecision = sessionIdChanged || !isBoolean(storedIsSampled)\n        const shouldSample = makeDecision ? sampleOnProperty(sessionId, currentSampleRate) : storedIsSampled\n\n        if (makeDecision) {\n            if (shouldSample) {\n                this._reportStarted(SAMPLED)\n            } else {\n                logger.warn(\n                    `Sample rate (${currentSampleRate}) has determined that this sessionId (${sessionId}) will not be sent to the server.`\n                )\n            }\n\n            this._tryAddCustomEvent('samplingDecisionMade', {\n                sampleRate: currentSampleRate,\n                isSampled: shouldSample,\n            })\n        }\n\n        this._instance.persistence?.register({\n            [SESSION_RECORDING_IS_SAMPLED]: shouldSample ? sessionId : false,\n        })\n    }\n\n    private _addEventTriggerListener() {\n        if (this._eventTriggerMatching._eventTriggers.length === 0 || !isNullish(this._removeEventTriggerCaptureHook)) {\n            return\n        }\n\n        this._removeEventTriggerCaptureHook = this._instance.on('eventCaptured', (event: CaptureResult) => {\n            // If anything could go wrong here, it has the potential to block the main loop,\n            // so we catch all errors.\n            try {\n                if (this._eventTriggerMatching._eventTriggers.includes(event.event)) {\n                    this._activateTrigger('event')\n                }\n            } catch (e) {\n                logger.error('Could not activate event trigger', e)\n            }\n        })\n    }\n\n    get sdkDebugProperties(): Properties {\n        const { sessionStartTimestamp } = this._sessionManager.checkAndGetSessionAndWindowId(true)\n\n        return {\n            $recording_status: this.status,\n            $sdk_debug_replay_internal_buffer_length: this._buffer.data.length,\n            $sdk_debug_replay_internal_buffer_size: this._buffer.size,\n            $sdk_debug_current_session_duration: this._sessionDuration,\n            $sdk_debug_session_start: sessionStartTimestamp,\n            $sdk_debug_replay_flushed_size: this._flushedSizeTracker?.currentTrackedSize,\n            $sdk_debug_replay_full_snapshots: this._fullSnapshotTimestamps,\n            $snapshot_max_depth_exceeded: this._maxDepthExceeded,\n        }\n    }\n\n    private _startRecorder() {\n        if (this._stopRrweb) {\n            return\n        }\n\n        // rrweb config info: https://github.com/rrweb-io/rrweb/blob/7d5d0033258d6c29599fb08412202d9a2c7b9413/src/record/index.ts#L28\n        const sessionRecordingOptions: recordOptions = {\n            // a limited set of the rrweb config options that we expose to our users.\n            // see https://github.com/rrweb-io/rrweb/blob/master/guide.md\n            blockClass: 'ph-no-capture',\n            blockSelector: undefined,\n            ignoreClass: 'ph-ignore-input',\n            maskTextClass: 'ph-mask',\n            maskTextSelector: undefined,\n            maskTextFn: undefined,\n            maskAllInputs: true,\n            maskInputOptions: { password: true },\n            maskInputFn: undefined,\n            slimDOMOptions: {},\n            collectFonts: false,\n            inlineStylesheet: true,\n            recordCrossOriginIframes: false,\n        }\n\n        // only allows user to set our allowlisted options\n        const userSessionRecordingOptions = this._instance.config.session_recording\n        for (const [key, value] of Object.entries(userSessionRecordingOptions || {})) {\n            if (key in sessionRecordingOptions) {\n                if (key === 'maskInputOptions') {\n                    // ensure password config is set if not included\n                    sessionRecordingOptions.maskInputOptions = { password: true, ...value }\n                } else {\n                    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                    // @ts-ignore\n                    sessionRecordingOptions[key] = value\n                }\n            }\n        }\n\n        if (this._canvasRecording && this._canvasRecording.enabled) {\n            sessionRecordingOptions.recordCanvas = true\n            sessionRecordingOptions.sampling = { canvas: this._canvasRecording.fps }\n            sessionRecordingOptions.dataURLOptions = { type: 'image/webp', quality: this._canvasRecording.quality }\n        }\n\n        if (this._masking) {\n            sessionRecordingOptions.maskAllInputs = this._masking.maskAllInputs ?? true\n            sessionRecordingOptions.maskTextSelector = this._masking.maskTextSelector ?? undefined\n            sessionRecordingOptions.blockSelector = this._masking.blockSelector ?? undefined\n        }\n\n        const rrwebRecord = getRRWebRecord()\n        if (!rrwebRecord) {\n            logger.error(\n                '_startRecorder was called but rrwebRecord is not available. This indicates something has gone wrong.'\n            )\n            return\n        }\n\n        this._mutationThrottler =\n            this._mutationThrottler ??\n            new MutationThrottler(rrwebRecord, {\n                refillRate: this._instance.config.session_recording.__mutationThrottlerRefillRate,\n                bucketSize: this._instance.config.session_recording.__mutationThrottlerBucketSize,\n                onBlockedNode: (id, node) => {\n                    const message = `Too many mutations on node '${id}'. Rate limiting. This could be due to SVG animations or something similar`\n                    logger.info(message, {\n                        node: node,\n                    })\n\n                    this.log(LOGGER_PREFIX + ' ' + message, 'warn')\n                },\n            })\n\n        const activePlugins = this._gatherRRWebPlugins()\n        this._stopRrweb = rrwebRecord({\n            emit: (event) => {\n                this.onRRwebEmit(event)\n            },\n            plugins: activePlugins,\n            ...sessionRecordingOptions,\n        })\n\n        // We reset the last activity timestamp, resetting the idle timer\n        this._lastActivityTimestamp = Date.now()\n        // stay unknown if we're not sure if we're idle or not\n        this._isIdle = isBoolean(this._isIdle) ? this._isIdle : 'unknown'\n\n        this.tryAddCustomEvent('$remote_config_received', this._remoteConfig)\n        this._tryAddCustomEvent('$session_options', {\n            sessionRecordingOptions,\n            activePlugins: activePlugins.map((p) => p?.name),\n        })\n\n        this._tryAddCustomEvent('$posthog_config', {\n            config: this._instance.config,\n        })\n    }\n\n    tryAddCustomEvent(tag: string, payload: any): boolean {\n        return this._tryAddCustomEvent(tag, payload)\n    }\n}\n","import { record as rrwebRecord, wasMaxDepthReached, resetMaxDepthState } from '@posthog/rrweb-record'\nimport { getRecordConsolePlugin } from '@posthog/rrweb-plugin-console-record'\nimport { assignableWindow } from '../utils/globals'\nimport { getRecordNetworkPlugin } from '../extensions/replay/external/network-plugin'\nimport { LazyLoadedSessionRecording } from '../extensions/replay/external/lazy-loaded-session-recorder'\n\nassignableWindow.__PosthogExtensions__ = assignableWindow.__PosthogExtensions__ || {}\nassignableWindow.__PosthogExtensions__.rrwebPlugins = { getRecordConsolePlugin, getRecordNetworkPlugin }\nassignableWindow.__PosthogExtensions__.rrweb = {\n    record: rrwebRecord,\n    version: 'v2',\n    wasMaxDepthReached,\n    resetMaxDepthState,\n}\nassignableWindow.__PosthogExtensions__.initSessionRecording = (ph) => new LazyLoadedSessionRecording(ph)\n\n// we used to put all of these items directly on window, and now we put it on __PosthogExtensions__\n// but that means that old clients which lazily load this extension are looking in the wrong place\n// yuck,\n// so we also put them directly on the window\n// when 1.161.1 is the oldest version seen in production we can remove this\nassignableWindow.rrweb = { record: rrwebRecord, version: 'v2' }\nassignableWindow.rrwebConsoleRecord = { getRecordConsolePlugin }\nassignableWindow.getRecordNetworkPlugin = getRecordNetworkPlugin\n\nexport default rrwebRecord\n"],"names":["_a","__defProp","Object","defineProperty","__publicField","obj","key","value","__defNormalProp","enumerable","configurable","writable","__defProp$1","__publicField$1","__defNormalProp$1","NodeType$1$1","NodeType2","testableAccessors$2","Node","ShadowRoot","Element","MutationObserver","testableMethods$2","untaintedBasePrototype$2","getUntaintedPrototype$2","candidate","_a2","_b","angularUnpatchedVersionSymbol","globalThis","Zone","__symbol__","call","angularZoneUnpatchedAlternative$2","defaultPrototype","prototype","accessorNames","isUntaintedAccessors","Boolean","every","accessor","getOwnPropertyDescriptor","get","toString","includes","methodNames","isUntaintedMethods","method","iframeEl","document","createElement","body","appendChild","win","contentWindow","untaintedObject","removeChild","_unused","untaintedAccessorCache$2","getUntaintedAccessor$2","instance","cacheKey","String","untaintedPrototype","untaintedAccessor","untaintedMethodCache$2","getUntaintedMethod$2","bind","untaintedMethod","index$2","childNodes","n2","parentNode","parentElement","textContent","contains","other","getRootNode","host","styleSheets","shadowRoot","querySelector","selectors","querySelectorAll","mutationObserver","constructor","patch","source","name","replacement","original","wrapped","defineProperties","__rrweb_original__","_unused2","isElement$1","nodeType","ELEMENT_NODE","isShadowRoot","hostEl","isNativeShadowDom","shadowRoot2","stringifyStylesheet","s2","rules2","rules","cssRules","sheetHref","href","ownerNode","baseURI","stringifiedRules","Array","from","rule2","stringifyRule","join","cssText","replace","error","isCSSImportRule","importStringified","styleSheet","split","length","statement","JSON","stringify","layerName","push","supportsText","media","mediaText","escapeImportStatement","absolutifyURLs","_unused3","regex","ruleStringified","isCSSStyleRule","selectorText","Mirror","this","Map","WeakMap","getId","id","getMeta","getNode","idNodeMap","getIds","keys","nodeMetaMap","removeNodeFromMap","delete","forEach","childNode","shadowRootEl","nodeName","contentDocument","has","hasNode","node2","add","meta","set","oldNode","reset","maskInputValue","_ref","element","maskInputOptions","tagName","type","maskInputFn","text","actualType","toLowerCase","repeat","str","ORIGINAL_ATTRIBUTE_NAME","getInputType","hasAttribute","extractFileExtension","path","baseURL","_ref2","url","URL","window","location","err","match","pathname","URL_IN_CSS_REF","URL_PROTOCOL_MATCH","URL_WWW_MATCH","DATA_URI","origin","quote1","path1","quote2","path2","path3","filePath","maybeQuote","test","indexOf","slice","stack","parts","part","pop","STRIPED_PLACEHOLDER_SVG","MAX_IMAGE_DIMENSION_FOR_RECOMPRESSION","canvasService","canvasCtx","_id","tagNameRegex","RegExp","IGNORED_NODE","genId","SRCSET_NOT_SPACES","SRCSET_COMMAS_OR_SPACES","cachedDocument","absoluteToDoc","doc","attributeValue","trim","getHref","isSVGElement","el","ownerSVGElement","customHref","a2","startsWith","setAttribute","transformAttribute","dataURLOptions","transformedValue","img","processedDataURL","quality","dataURL","complete","naturalWidth","naturalHeight","canvas","width","height","ctx","getContext","drawImage","toDataURL","recompressBase64Image","maxBase64ImageLength","maxLength","pos","collectCharacters","regEx","chars2","exec","substring","output","descriptorsStr","inParens","c2","charAt","getAbsoluteSrcsetString","ignoreAttribute","_value","classMatchesRegex","checkAncestors","eIndex","classList","className","needMaskingText","maskTextClass","maskTextSelector","closest","matches","e2","serializeNode","options","mirror","mirror2","blockClass","blockSelector","needsMask","inlineStylesheet","maskTextFn","inlineImages","recordCanvas","keepIframeSrcFn","newlyAddedElement","rootId","docId","getRootId","DOCUMENT_NODE","compatMode","Document","DOCUMENT_TYPE_NODE","DocumentType","publicId","systemId","isCustomElement","needBlock","_isBlockedElement","HTMLFormElement","processedTagName","getValidTagName$1","attributes","len","i2","attr","hrefFrom","stylesheet","findStylesheet","rel","_cssText","sheet","innerText","checked","selected","open","rr_open_mode","_unused4","ph_rr_could_not_detect_modal","__context","x","y","getImageData","originalGetImageData","Uint32Array","Math","min","data","buffer","some","pixel","is2DCanvasBlank","rr_dataURL","canvasDataURL","blankCanvas","image","imageSrc","currentSrc","getAttribute","priorCrossOrigin","crossOrigin","recordInlineImage","removeEventListener","addEventListener","console","warn","removeAttribute","mediaAttributes","rr_mediaState","paused","rr_mediaCurrentTime","currentTime","rr_mediaPlaybackRate","playbackRate","rr_mediaMuted","muted","rr_mediaLoop","loop","rr_mediaVolume","volume","scrollLeft","rr_scrollLeft","scrollTop","rr_scrollTop","left","top","getBoundingClientRect","class","rr_width","rr_height","rr_left","floor","defaultView","scrollX","rr_top","scrollY","src","rr_src","customElements","isSVG","isCustom","serializeElementNode","TEXT_NODE","parent","parentTagName","isStyle","isScript","nextSibling","previousSibling","Text","serializeTextNode","CDATA_SECTION_NODE","CDATA","COMMENT_NODE","Comment","find","lowerIfExists","maybeAttr","DEFAULT_MAX_DEPTH","_maxDepthWarned","_maxDepthReached","serializeNodeWithId","skipChild","slimDOMOptions","onSerialize","onIframeLoad","iframeLoadTimeout","onStylesheetLoad","stylesheetLoadTimeout","depth","maxDepth","preserveWhiteSpace","_serializedNode","sn","comment","script","as","headFavicon","headMetaDescKeywords","headMetaSocial","property","headMetaRobots","headMetaHttpEquiv","headMetaAuthorship","headMetaVerification","slimDOMExcluded","serializedNode","assign","recordChild","isShadowHost","headWhitespace","bypassOptions","childN","serializedChildNode","isShadow","listener","readyState","fired","blankUrl","setTimeout","timer","clearTimeout","onceIframeLoaded","iframeDoc","serializedIframeNode","link","styleSheetLoadTimeout","styleSheetLoaded","onceStylesheetLoaded","serializedLinkNode","getDefaultExportFromCjs$1","__esModule","hasOwnProperty","getAugmentedNamespace$1","f2","default","a3","Reflect","construct","arguments","apply","k","d2","hasRequiredPicocolors_browser$1","picocolors_browser$1","exports","requirePicocolors_browser$1","create","isColorSupported","bold","dim","italic","underline","inverse","hidden","strikethrough","black","red","green","yellow","blue","magenta","cyan","white","gray","bgBlack","bgRed","bgGreen","bgYellow","bgBlue","bgMagenta","bgCyan","bgWhite","blackBright","redBright","greenBright","yellowBright","blueBright","magentaBright","cyanBright","whiteBright","bgBlackBright","bgRedBright","bgGreenBright","bgYellowBright","bgBlueBright","bgMagentaBright","bgCyanBright","bgWhiteBright","createColors","cssSyntaxError$1","hasRequiredCssSyntaxError$1","stringifier$1","hasRequiredStringifier$1","stringify_1$1","hasRequiredStringify$1","require$$2$1","freeze","__proto__","Symbol","toStringTag","requireCssSyntaxError$1","pico","terminalHighlight","CssSyntaxError","Error","message","line","column","file","plugin","super","reason","endLine","endColumn","setMessage","captureStackTrace","showSourceCode","color","css","aside","mark","highlight","lines","start","max","end","maxWidth","map","index2","number","gutter","subLineStart","subLineEnd","subLine","spacing2","padding","spacing","code","requireStringifier$1","DEFAULT_RAW","after","beforeClose","beforeComment","beforeDecl","beforeOpen","beforeRule","colon","commentLeft","commentRight","emptyBody","indent","semicolon","Stringifier","builder","atrule","params","rawValue","raws","afterName","nodes","block","between","beforeAfter","detect","raw","buf","step","last","child","before","right","decl","string","prop","important","own","first","root2","root","rawCache","toUpperCase","walk","rawBeforeClose","rawBeforeComment","walkComments","rawBeforeDecl","walkDecls","rawBeforeOpen","rawBeforeRule","rawColon","rawEmptyBody","rawIndent","p2","rawSemicolon","rule","ownSemicolon","requireStringify$1","hasRequiredSymbols$1","node$1","hasRequiredNode$1","comment$1","hasRequiredComment$1","declaration$1","hasRequiredDeclaration$1","container$1","hasRequiredContainer$1","atRule$1","hasRequiredAtRule$1","document$2","hasRequiredDocument$1","nonSecure$1","hasRequiredNonSecure$1","previousMap$1","hasRequiredPreviousMap$1","input$1","hasRequiredInput$1","root$1","hasRequiredRoot$1","list_1$1","hasRequiredList$1","rule$1","hasRequiredRule$1","fromJSON_1$1","hasRequiredFromJSON$1","mapGenerator$1","hasRequiredMapGenerator$1","tokenize$1","hasRequiredTokenize$1","parser$1","hasRequiredParser$1","parse_1$1","hasRequiredParse$1","warning$1","hasRequiredWarning$1","result$1","hasRequiredResult$1","warnOnce$1","hasRequiredWarnOnce$1","lazyResult$1","hasRequiredLazyResult$1","noWorkResult$1","hasRequiredNoWorkResult$1","processor$1","hasRequiredProcessor$1","postcss_1$1","hasRequiredPostcss$1","safeParser$1$1","hasRequiredSafeParser$1","safeParse$1","hasRequiredSafeParse$1","symbols$1","requireSymbols$1","isClean","my","requireNode$1","cloneNode","cloned","isArray","j2","sourceOffset","inputCSS","position","offset","Node2","proxyOf","defaults","clone","append","addToError","postcssNode","input","insertAfter","overrides","insertBefore","cleanRaws","keepBetween","cloneAfter","cloneBefore","opts","rangeBy","getProxyProcessor","toProxy","markDirty","markClean","next","index","positionBy","positionInside","word","inputString","prev","endIndex","defaultType","remove","replaceWith","bookmark","foundSelf","_len","_key","result2","toJSON","_","inputs","fixed","emitInputs","inputsNextIndex","inputId","input2","proxyCache","Proxy","stringifier2","node","requireComment$1","requireDeclaration$1","Declaration","variable","_extends","requireContainer$1","AtRule","parse","Root","Rule","cleanSource","markTreeDirty","Container","_len2","children","_key2","normalize","each","callback","iterator","getIterator","indexes","condition","lastEach","_len3","args","_key3","cb","_len4","_key4","exist","existIndex","reverse","splice","sample","selector","processed","rebuild","prepend","_len5","_key5","unshift","removeAll","replaceValues","pattern","props","fast","walkAtRules","walkRules","registerParse","dependant","registerRule","registerAtRule","registerRoot","setPrototypeOf","requireAtRule$1","requireDocument$1","LazyResult","Processor","Document2","toResult","registerLazyResult","registerProcessor","requireNonSecure$1","nanoid","size","random","customAlphabet","alphabet","defaultSize","requirePreviousMap$1","existsSync","readFileSync","dirname","SourceMapConsumer","SourceMapGenerator","PreviousMap","loadAnnotation","inline","startWith","annotation","loadMap","mapFile","consumer","consumerCache","decodeInline","uriMatch","decodeURIComponent","substr","baseUriMatch","Buffer","atob","encoding","getAnnotationURL","sourceMapString","isMap","mappings","_mappings","sections","comments","lastIndexOf","loadFile","fromSourceMap","prevPath","withContent","sourcesContent","requireInput$1","isAbsolute","resolve","fileURLToPath","pathToFileURL","lineToIndexCache","sourceMapAvailable","pathAvailable","getLineToIndex","lineToIndex","prevIndex","l2","Input","hasBOM","mapResolve","endOffset","fromOffset","col","fromLineAndColumn","mid","sourceRoot","to","fromUrl","originalPositionFor","protocol","sourceContentFor","json","registerInput","requireRoot$1","ignore","requireList$1","list","comma","space","separators","array","current","func","inQuote","prevQuote","escape","letter","requireRule$1","values","sep","requireMapGenerator$1","relative","cssString","mapOpts","originalCSS","usesFileUrls","absolute","memoizedFileURLs","memoizedPaths","memoizedURLs","addAnnotation","content","isInline","toBase64","outputFile","eol","applyPrevMaps","previous","toUrl","applySourceMap","clearAnnotation","generate","generateMap","generateString","ignoreInvalidMapping","addMapping","generated","isSourcesContent","setSourcesContent","isAnnotation","noSource","mapping","sourcePath","charCodeAt","cached","previousMaps","already","toFileUrl","setSourceContent","btoa","unescape","encodeURIComponent","fileURL","encodeURI","requireTokenize$1","SINGLE_QUOTE","DOUBLE_QUOTE","BACKSLASH","SLASH","NEWLINE","SPACE","FEED","TAB","CR","OPEN_SQUARE","CLOSE_SQUARE","OPEN_PARENTHESES","CLOSE_PARENTHESES","OPEN_CURLY","CLOSE_CURLY","SEMICOLON","ASTERISK","COLON","AT","RE_AT_END","RE_WORD_END","RE_BAD_BRACKET","RE_HEX_ESCAPE","quote","currentToken","escaped","escapePos","valueOf","ignoreErrors","returned","unclosed","what","back","token","endOfFile","nextToken","ignoreUnclosed","controlChar","fromCharCode","lastIndex","requireParser$1","tokenizer","SAFE_COMMENT_NEIGHBOR","empty","spaces","createTokenizer","shift","unnamedAtrule","init","brackets","getPosition","spacesAndCommentsFromEnd","spacesAndCommentsFromStart","checkMissedSemicolon","tokens","founded","entries","doubleColon","customProperty","findLastWithPosition","unknownWord","firstSpaces","precheckMissedSemicolon","stringFrom","spacesFromEnd","cache","hasWord","concat","emptyRule","unexpectedClose","endFile","unclosedBlock","freeSemicolon","bracket","unclosedBracket","clean","reduce","all","lastTokenType","requireParse$1","Parser","parser2","process","env","NODE_ENV","requireWarning$1","Warning","range","opt","requireResult$1","Result","processor2","processor","messages","lastPlugin","postcssPlugin","warning2","warnings","filter","requireWarnOnce$1","printed","requireLazyResult$1","MapGenerator","warnOnce2","TYPE_TO_CLASS_NAME","PLUGIN_PROPS","AtRuleExit","CommentExit","DeclarationExit","DocumentExit","Once","OnceExit","prepare","RootExit","RuleExit","NOT_VISITORS","CHILDREN","isPromise","then","getEvents","toStack","eventIndex","events","visitorIndex","visitors","cleanMarks","postcss2","sync","result","stringified","syntax","parser","helpers","postcss","plugins","async","Promise","reject","processing","runAsync","catch","onRejected","finally","onFinally","getAsyncError","handleError","postcssVersion","pluginName","pluginVer","runtimeVer","version","b2","parseInt","prepareVisitors","listeners","event","hasListener","_this","_asyncToGenerator","promise","runOnRoot","visitTick","_loop","visitor","roots","subRoot","stringifier","walkSync","visitSync","onFulfilled","visit2","registerPostcss","requireProcessor$1","NoWorkResult","_root","_css","_opts","_processor","_map","self2","generatedCSS","generatedMap","requireNoWorkResult$1","normalized","use","requirePostcss$1","fromJSON","ownInputs","_objectWithoutPropertiesLoose","_excluded","inputHydrated","_defaults$source","_excluded2","requireFromJSON$1","_len6","_key6","initializer","warningPrinted","creator","LANG","transformer","processOpts","pluginOpts","atRule","SafeParser","nextStart","prevEnd","requireSafeParser$1","requireSafeParse$1","postcss$1","__defProp2","__publicField2","__defNormalProp2","getDefaultExportFromCjs","getAugmentedNamespace","hasRequiredPicocolors_browser","picocolors_browser","requirePicocolors_browser","cssSyntaxError","hasRequiredCssSyntaxError","hasRequiredStringifier","stringify_1","hasRequiredStringify","require$$2","requireCssSyntaxError","requireStringifier","requireStringify","hasRequiredSymbols","hasRequiredNode","hasRequiredComment","declaration","hasRequiredDeclaration","container","hasRequiredContainer","hasRequiredAtRule","document$1","hasRequiredDocument","nonSecure","hasRequiredNonSecure","previousMap","hasRequiredPreviousMap","hasRequiredInput","hasRequiredRoot","list_1","hasRequiredList","hasRequiredRule","fromJSON_1","hasRequiredFromJSON","mapGenerator","hasRequiredMapGenerator","tokenize","hasRequiredTokenize","hasRequiredParser","parse_1","hasRequiredParse","warning","hasRequiredWarning","hasRequiredResult","warnOnce","hasRequiredWarnOnce","lazyResult","hasRequiredLazyResult","noWorkResult","hasRequiredNoWorkResult","hasRequiredProcessor","postcss_1","hasRequiredPostcss","safeParser$1","hasRequiredSafeParser","safeParse","hasRequiredSafeParse","symbols","requireSymbols","requireNode","_len7","_key7","requireComment","requireDeclaration","requireContainer","_len8","_key8","_len9","_key9","_len0","_key0","_len1","_key1","requireAtRule","requireDocument","requireNonSecure","requirePreviousMap","requireInput","requireRoot","requireList","requireRule","requireMapGenerator","requireTokenize","requireParser","requireParse","requireWarning","requireResult","requireWarnOnce","requireLazyResult","_this2","_loop2","requireProcessor","requireNoWorkResult","requirePostcss","_excluded3","_defaults$source2","_excluded4","requireFromJSON","_len10","_key10","requireSafeParser","requireSafeParse","BaseRRNode","childNodes2","childIterator","firstChild","ownerDocument","_newChild","_refChild","_node","testableAccessors","testableMethods","untaintedBasePrototype","getUntaintedPrototype","angularZoneUnpatchedAlternative","_unused5","untaintedAccessorCache","getUntaintedAccessor","untaintedMethodCache","getUntaintedMethod","mutationObserverCtor","_unused6","on","fn","target","capture","passive","DEPARTED_MIRROR_ACCESS_WARNING","_mirror","throttle","wait","timeout","_len11","_key11","now","Date","leading","remaining","context","trailing","hookSetter","d","isRevoked","receiver","nowTimestamp","getWindowScroll","_c","_d","scrollingElement","pageXOffset","documentElement","pageYOffset","getWindowHeight","innerHeight","clientHeight","getWindowWidth","innerWidth","clientWidth","closestElementOfNode","isBlocked","isIgnored","headTitleMutations","isAncestorRemoved","legacy_isTouchEvent","changedTouches","isSerializedIframe","isSerializedStylesheet","hasShadowRoot","getTime","StyleSheetMirror","_this$styleIDMap$get","styleIDMap","newId","idStyleMap","getStyle","generateId","getShadowHost","shadowHost","DOCUMENT_FRAGMENT_NODE","shadowHostInDom","rootShadowHost","getRootShadowHost","inDom","EventType","EventType2","IncrementalSource","IncrementalSource2","MouseInteractions","MouseInteractions2","PointerTypes","PointerTypes2","CanvasContext","CanvasContext2","MediaInteractions","MediaInteractions2","NodeType","isNodeInLinkedList","DoubleLinkedList","head","addNode","__ln","tail","removeNode","errorHandler","moveKey","parentId","MutationBuffer","Set","mutations","processMutation","emit","frozen","locked","adds","addedIds","addList","getNextId","ns","nextId","pushAdd","currentN","iframeManager","addIframe","stylesheetManager","trackLinkElement","shadowDomManager","addShadowRoot","iframe","childSn","attachIframe","observeAttachShadow","attachLinkElement","mapRemoves","movedSet","isParentRemoved","removesSubTreeCache","addedSet","isAncestorInSet","droppedSet","tailNode","unhandledNode","payload","texts","genTextAreaValueMutation","attribute","style","diffAsStr","styleDiff","unchangedAsStr","_unchangedStyles","removes","attributeMap","movedMap","mutationCb","textarea","item","cn","m","oldValue","attributeName","unattachedDoc","implementation","createHTMLDocument","old","pname","newValue","getPropertyValue","newPriority","getPropertyPriority","addedNodes","genAdds","removedNodes","nodeId","isSerialized","deepDelete","queue","n22","processRemoves","processedNodeManager","inOtherBuffer","targetId","canvasManager","unfreeze","isFrozen","lock","unlock","destroy","addsSet","_mirror2","_isParentRemoved","_isAncestorInSet","callbackWrapper","mutationBuffers","getEventTarget","composedPath","_unused7","initMutationObserver","rootEl","mutationBuffer","observer","processMutations","observe","attributeOldValue","characterData","characterDataOldValue","childList","subtree","initMouseInteractionObserver","_ref4","mouseInteractionCb","sampling","mouseInteraction","disableMap","handlers","currentPointerType","Number","isNaN","endsWith","eventKey","eventName","handler","pointerType","thisEventKey","Mouse","Touch","Pen","MouseDown","MouseUp","Click","clientX","clientY","getHandler","PointerEvent","TouchStart","TouchEnd","h","initScrollObserver","_ref5","scrollCb","evt","scrollLeftTop","scroll","INPUT_TAGS","lastInputValueMap","getNestedCSSRulePositions","childRule","hasNestedCSSRule","parentRule","CSSGroupingRule","CSSMediaRule","CSSSupportsRule","CSSConditionRule","parentStyleSheet","recurse","getIdAndStyleId","styleMirror","styleId","initAdoptedStyleSheetObserver","_ref11","host2","hostId","patchTarget","originalPropertyDescriptor","_a3","sheets","adoptStyleSheets","initObservers","o2","hooks","currentWindow","mousemoveCb","viewportResizeCb","inputCb","mediaInteractionCb","styleSheetRuleCb","styleDeclarationCb","canvasMutationCb","fontCb","selectionCb","customElementCb","mutation","mousemove","viewportResize","mediaInteaction","styleSheetRule","styleDeclaration","canvasMutation","font","selection","customElement","mergeHooks","recordDOM","mousemoveHandler","_ref3","timeBaseline","threshold","callbackThreshold","mousemoveCallback","positions","wrappedCb","totalOffset","p","timeOffset","updatePosition","DragEvent","Drag","MouseEvent","MouseMove","TouchMove","initMoveObserver","mouseInteractionHandler","scrollHandler","viewportResizeHandler","_ref6","_ref7","lastH","lastW","initViewportResizeObserver","inputHandler","_ref8","ignoreClass","ignoreSelector","userTriggeredOnInput","eventHandler","userTriggered","isTrusted","isChecked","cbWithDedup","text2","v2","lastInputValue","propertyDescriptor","HTMLInputElement","hookProperties","HTMLSelectElement","HTMLTextAreaElement","HTMLOptionElement","initInputObserver","mediaInteractionHandler","_ref14","Play","Pause","Seeked","VolumeChange","RateChange","initMediaInteractionObserver","styleSheetObserver","adoptedStyleSheetObserver","styleDeclarationObserver","fontObserver","_ref9","_ref0","CSSStyleSheet","insertRule","thisArg","argumentsList","addRule","styleBlock","replaceSync","deleteRule","removeRule","supportedNestedCSSRuleTypes","canMonkeyPatchNestedCSSRule","unmodifiedFunctions","_ref1","typeKey","_ref10","initStyleSheetObserver","_ref12","_ref13","ignoreCSSAttributes","setProperty","CSSStyleDeclaration","priority","removeProperty","initStyleDeclarationObserver","collectFonts","_ref15","fontMap","originalFontFace","FontFace","family","descriptors","fontFace","fontSource","Uint8Array","restoreHandler","fonts","initFontObserver","selectionObserver","param","collapsed","updateSelection","getSelection","isCollapsed","ranges","count","rangeCount","getRangeAt","startContainer","startOffset","endContainer","initSelectionObserver","customElementObserver","_ref16","define","initCustomElementObserver","pluginHandlers","b","disconnect","CrossOriginIframeMirror","generateIdFn","remoteId","idToRemoteMap","remoteToIdMap","idToRemoteIdMap","getIdToRemoteIdMap","remoteIdToIdMap","getRemoteIdToIdMap","getRemoteId","getRemoteIds","ids","iframeIdToRemoteIdMap","iframeRemoteIdToIdMap","IframeManager","wrappedEmit","recordCrossOriginIframes","crossOriginIframeStyleMirror","messageHandler","handleMessage","iframes","crossOriginIframeMap","addLoadListener","loadListener","removeLoadListener","trackIframeContent","iframeId","attachedIframes","isAttachIframe","nestedIframeListeners","nestedHandler","adoptedStyleSheets","crossOriginMessageEvent","transformedEvent","transformCrossOriginEvent","isCheckout","FullSnapshot","crossOriginIframeMirror","replaceIdOnNode","crossOriginIframeRootIdMap","patchRootIdOnNode","timestamp","IncrementalSnapshot","Mutation","Meta","Load","DomContentLoaded","Plugin","Custom","replaceIds","ViewportResize","MediaInteraction","MouseInteraction","Scroll","CanvasMutation","StyleSheetRule","StyleDeclaration","replaceStyleIds","Font","Selection","AdoptedStyleSheet","styles","iframeMirror","removeIframeById","entry","reattachIframes","_ref17","clear","ShadowDomManager","WeakSet","patchAttachShadow","shadowDoms","restoreHandlers","iframeElement","manager","option","sRoot","chars","lookup","i$1","canvasVarMap","saveWebGLVar","isInstanceOfWebGLObject","ctor","contextMap","variableListFor$1","serializeArg","arg","Float32Array","Float64Array","Int32Array","Uint16Array","Int16Array","Int8Array","Uint8ClampedArray","rr_type","ArrayBuffer","base64","arraybuffer","bytes","encode","DataView","byteOffset","byteLength","HTMLImageElement","HTMLCanvasElement","ImageData","serializeArgs","supportedWebGLConstructorNames","initCanvasContextObserver","setPreserveDrawingBufferToTrue","contextType","_len13","_key13","ctxName","getNormalizedContextName","contextAttributes","preserveDrawingBuffer","_unused9","patchGLPrototype","getOwnPropertyNames","_loop4","_len14","_key14","recordArgs","_unused0","hookHandler","setter","takeFullSnapshot$1","jsContent","blob","self","Blob","WorkerWrapper","objURL","webkitURL","createObjectURL","worker","Worker","revokeObjectURL","CanvasManager","latestId","invokeId","rafStamps","pendingCanvasMutations","initCanvasMutationObserver","initCanvasFPSObserver","resetObservers","rafIdTimestamp","cancelAnimationFrame","rafIdFlush","fps","_this3","canvasContextReset","snapshotInProgressMap","onmessage","commands","rafId","timeBetweenSnapshots","lastSnapshotTime","takeCanvasSnapshots","getCanvas","matchedCanvas","searchCanvas","requestAnimationFrame","haystack","elem","_ref18","getContextAttributes","COLOR_BUFFER_BIT","bitmap","createImageBitmap","resizeWidth","resizeHeight","postMessage","_x","startRAFTimestamping","startPendingCanvasMutationFlusher","canvas2DReset","props2D","CanvasRenderingContext2D","_loop3","_len12","_key12","_unused8","initCanvas2DMutationObserver","canvasWebGL1and2Reset","WebGLRenderingContext","WebGL","WebGL2RenderingContext","WebGL2","initCanvasWebGLMutationObserver","flushPendingCanvasMutations","setLatestRAFTimestamp","_values","flushPendingCanvasMutationFor","valuesWithType","_excluded5","StylesheetManager","adoptedStyleSheetCb","linkEl","trackedLinkElements","trackStylesheetInLinkElement","_this4","adoptedStyleSheetData","styleIds","_loop5","CSSRule","r2","_linkEl","ProcessedNodeManager","thisBuffer","buffers","nodeMap","active","recording","cleanFrame","debug","n","t2","record","checkoutEveryNms","checkoutEveryNth","maskAllInputs","_maskInputOptions","_slimDOMOptions","packFn","_dataURLOptions","mousemoveWait","recordAfter","errorHandler2","inEmittingFrame","passEmitsToParent","lastFullSnapshotEvent","date","email","month","search","tel","time","week","select","password","NodeList","DOMTokenList","polyfill$1","incrementalSnapshotCount","eventProcessor","exceedCount","exceedTime","wrappedMutationEmit","_ref19","wrappedScrollEmit","wrappedCanvasMutationEmit","getMirror","nodeMirror","slimDOM","snapshot","initialOffset","CustomElement","addCustomEvent","tag","freezePage","takeFullSnapshot","NotStarted","Running","Stopped","undefined","global","File","nativeForEach","navigator","fetch","XMLHttpRequest","AbortController","userAgent","assignableWindow","nativeIsArray","ObjProto","type_utils_hasOwnProperty","type_utils_toString","isFunction","isObject","isUndefined","isString","isNull","isNullish","isNumber","isBoolean","isFormData","FormData","clampToRange","logger","fallbackValue","BucketedRateLimiter","_buckets","_onBucketRateLimited","_bucketSize","bucketSize","_logger","_refillRate","refillRate","_refillInterval","refillInterval","_applyRefill","bucket","elapsedMs","lastAccess","refillIntervals","tokensToAdd","consumeRateLimit","_this$_onBucketRateLi","keyStr","stop","isDocument","Config","LIB_VERSION","_createLogger","prefix","_temp","debugEnabled","_log","level","POSTHOG_DEBUG","consoleLog","info","critical","uninitializedWarning","methodName","createLogger","additionalPrefix","breaker","i","l","eachArray","pair","localDomains","convertToURL","formDataToQuery","formdata","arg_separator","use_val","use_key","tph_arr","val","isFile","__posthog_wrapped__","isHostOnDenyList","_options$payloadHostD","hostname","hostnameFromURL","defaultNotDenied","isHostDenied","payloadHostDenyList","deny","SESSION_RECORDING_REMOTE_CONFIG","SESSION_RECORDING_IS_SAMPLED","SESSION_RECORDING_PAST_MINIMUM_DURATION","SESSION_RECORDING_URL_TRIGGER_ACTIVATED_SESSION","SESSION_RECORDING_EVENT_TRIGGER_ACTIVATED_SESSION","SESSION_RECORDING_FIRST_FULL_SNAPSHOT_TIMESTAMP","unanchoredCCRegex","unanchoredSSNRegex","LOGGER_PREFIX","REDACTED","defaultNetworkOptions","initiatorTypes","maskRequestFn","recordHeaders","recordBody","recordInitialRequests","recordPerformance","performanceEntryTypeToObserve","payloadSizeLimitBytes","HEADER_DENY_LIST","PAYLOAD_CONTENT_DENY_LIST","POSTHOG_PATHS_TO_IGNORE","enforcePayloadSizeLimit","headers","limit","description","requestContentLength","estimateBytes","scrubPayload","label","scrubbed","anchorRegexes","shouldCaptureValue","_scrubbed","_scrubbed2","buildNetworkRequestOptions","instanceConfig","remoteNetworkOptions","_options$payloadSizeL","config","canRecordHeaders","session_recording","canRecordBody","canRecordPerformance","capture_performance","payloadLimiter","requestBody","requestHeaders","responseBody","responseHeaders","enforcedCleaningFn","ignorePostHogPaths","apiHostConfig","_convertToURL","replaceValue","header","api_host","hasDeprecatedMaskFunction","maskNetworkRequestFn","maskCapturedNetworkRequestFn","cleanedURL","_instanceConfig$sessi","cleanedRequest","capturedRequest","scrubPayloads","isNavigationTiming","entryType","isResourceTiming","initPerformanceObserver","initialPerformanceEntries","performance","getEntries","initiatorType","requests","flatMap","prepareRequest","status","networkRequest","isInitial","PerformanceObserver","performanceEntries","wrappedInitiatorFilter","entryTypes","supportedEntryTypes","shouldRecordHeaders","shouldRecordBody","matchesContentType","contentTypes","contentTypeHeader","contentType","ct","isBlobURL","Request","recordBodyType","getRequestPerformanceEntry","_x2","_x3","_x4","_x5","_x6","_getRequestPerformanceEntry","attempt","performanceEntry","predicate","findLast","getEntriesByName","startTime","_tryReadXHRBody","exposesServerTiming","responseEnd","timeOrigin","round","endTime","timing","serverTiming","duration","contentTypePrefixDenyList","_tryReadBody","r","txt","_tryReadRequestBody2","_tryReadResponseBody2","cannotReadBodyReason","_r$headers$get","contentTypeIsDenied","_checkForCannotReadResponseBody","initFetchObserver","recordRequestHeaders","recordResponseHeaders","restorePatch","originalFetch","res","req","_x7","_tryReadRequestBody","_x8","_tryReadResponseBody","_res","_x9","_x0","initialisedHandler","initNetworkObserver","networkOptions","request","maskedRequest","performanceObserver","xhrObserver","fetchObserver","originalOpen","username","xhr","originalSetRequestHeader","setRequestHeader","originalSend","send","cleanup","readyStateListener","DONE","getAllResponseHeaders","response","initXhrObserver","getRecordNetworkPlugin","DISABLED","SAMPLED","ACTIVE","BUFFERING","PAUSED","TRIGGER","TRIGGER_ACTIVATED","TRIGGER_PENDING","TRIGGER_DISABLED","sessionRecordingUrlTriggerMatches","triggers","compiledRegexCache","trigger","_compiledRegexCache$g","matching","OrTriggerMatching","_matchers","triggerStatus","sessionId","statuses","AndTriggerMatching","matcher","PendingTriggerMatching","isEagerLoadedConfig","URLTriggerMatching","_instance","_urlTriggers","_urlBlocklist","_compiledTriggerRegexes","_compiledBlocklistRegexes","_lastCheckedUrl","urlBlocked","onConfig","_config$sessionRecord","_config$sessionRecord2","sessionRecording","urlTriggers","urlBlocklist","_compileRegexCache","e","onRemoteConfig","_urlTriggerStatus","_this$_instance","get_property","urlTriggerStatus","register_for_session","$sdk_debug_replay_url_trigger_status","checkUrlTriggerConditions","onPause","onResume","onActivate","wasBlocked","isNowBlocked","isActivated","urlMatches","LinkedFlagMatching","linkedFlag","linkedFlagSeen","_flagListenerCleanup","$sdk_debug_replay_linked_flag_trigger_status","onStarted","_config$sessionRecord3","flag","linkedVariant","variant","onFeatureFlags","_flags","variants","linkedFlagMatches","variantForFlagKey","EventTriggerMatching","_eventTriggers","_config$sessionRecord4","eventTriggers","_eventTriggerStatus","_this$_instance2","eventTriggerStatus","$sdk_debug_replay_event_trigger_status","nullMatchSessionRecordingStatus","triggersStatus","isRecordingEnabled","anyMatchSessionRecordingStatus","receivedFlags","urlTriggerMatching","sampledActive","isSampled","triggerMatches","eventTriggerMatching","linkedFlagMatching","allMatchSessionRecordingStatus","currentTriggerStatus","hasTriggersConfigured","hasSamplingConfigured","estimateSize","sizeable","_JSON$stringify","ancestors","u8","u16","u32","fleb","fdeb","clim","freb","eb","j","fl","revfl","revfd","rev","hMap","cd","mb","s","co","le","rvb","sv","r_1","v","flt","fdt","flm","fdm","shft","slc","subarray","wbits","o","wbits16","hTree","t","f","sort","a","i0","i1","maxSym","tr","mbt","ln","dt","lft","cst","i2_1","i2_2","i2_3","lc","c","cl","cli","cln","cls","w","clen","cf","wfblk","out","dat","wblk","final","syms","lf","df","li","bs","bl","dlt","mlb","ddt","mdb","lclt","nlc","lcdt","ndc","lcfreq","_e","lct","mlcb","nlcc","lm","ll","dm","dl","flen","ftlen","dtlen","llm","lcts","it","clct","dst","deo","crct","crc","cr","dopt","pre","post","st","lvl","plvl","lst","msk_1","bs1_1","ceil","bs2_1","hsh","lc_1","wi","hv","imod","pimod","rem","ch_1","dif","maxn","maxd","ml","nl","mmd","md","ti","lin","din","dflt","mem","log","wbytes","gzh","filename","mtime","gzhl","MutationThrottler","_rrweb","_options","_this$_options$bucket","_this$_options$refill","_loggedTracker","_onNodeRateLimited","_this$_options$onBloc","_this$_options","_getNode","onBlockedNode","_getNodeOrRelevantParent","closestSVG","_numberOfChanges","_data$removes$length","_data$removes","_data$attributes$leng","_data$attributes","_data$texts$length","_data$texts","_data$adds$length","_data$adds","throttleMutations","initialMutationCount","_rateLimiter","mutationCount","sampleOnProperty","percent","hash","abs","simpleHash","SESSION_RECORDING_FLUSHED_SIZE","FlushedSizeTracker","posthog","persistence","_getProperty","_setProperty","set_property","trackSize","currentTrackedSize","FIVE_MINUTES","ONE_MINUTE","networkTimingFromConfig","network_timing","ACTIVE_SOURCES","newQueuedEvent","rrwebMethod","enqueuedAt","getRRWeb","_assignableWindow$__P","__PosthogExtensions__","rrweb","getRRWebRecord","_getRRWeb","gzipToString","latin1","strFromU8","gzipSync","TextEncoder","ar","ai","strToU8","isCustomEvent","isSessionIdleEvent","isSessionEndingEvent","isSessionStartingEvent","splitBuffer","sizeLimit","half","firstHalf","secondHalf","windowId","LazyLoadedSessionRecording","_sessionId","_sessionManager","sessionManager","_sessionIdleThresholdMilliseconds","session_idle_threshold_ms","_isSampled","currentValue","_sampleRate","_this$_remoteConfig","rate","_remoteConfig","sampleRate","_minimumDuration","_this$_remoteConfig2","minimumDurationMilliseconds","_endpoint","_forceAllowLocalhostNetworkCapture","_stopRrweb","_lastActivityTimestamp","_queuedRRWebEvents","_isIdle","_maxDepthExceeded","_triggerMatching","_fullSnapshotTimestamps","_removePageViewCaptureHook","_removeEventTriggerCaptureHook","_statusMatcher","_onSessionIdListener","_onSessionIdleResetForcedListener","_samplingSessionListener","_forceIdleSessionIdListener","_onSessionIdCallback","changeReason","_this$_instance$persi","_getRRWeb2","_windowId","_this$_flushedSizeTra","shouldLinkSessions","noSessionId","activityTimeout","sessionPastMaximumLength","oldSessionId","oldWindowId","_tryAddCustomEvent","currentSessionId","currentWindowId","nextSessionId","nextWindowId","lastActivityTimestamp","flushed_size","_flushedSizeTracker","unregister","resetMaxDepthState","_clearConditionalRecordingPersistence","previousSessionId","previousWindowId","_makeSamplingDecision","_hasPassedMinimumDuration","_this$_instance$persi2","_getBufferDuration","_this$_buffer$data$","_this$_buffer$data","_buffer","firstTimestamp","lastTimestamp","_isBelowMinimumDuration","_this$_instance$confi","_this$_instance$confi2","minimumDuration","strictMinimumDuration","sessionDuration","_sessionDuration","_this$_instance$persi3","bufferDuration","register","_onBeforeUnload","_flushBuffer","_onOffline","_onOnline","_onVisibilityChange","visibilityState","checkAndGetSessionAndWindowId","_linkedFlagMatching","_urlTriggerMatching","_eventTriggerMatching","_clearBuffer","sessionTimeoutMs","_masking","_this$_remoteConfig3","_this$_instance$confi3","_this$_instance$confi4","_this$_instance$confi5","_masking_client_side$","_masking_client_side$2","_masking_client_side$3","masking_server_side","masking","masking_client_side","_canvasRecording","_this$_remoteConfig4","_canvasRecording_clie","_canvasRecording_clie2","_canvasRecording_clie3","canvasRecording_client_side","captureCanvas","canvasRecording_server_side","canvasRecording","enabled","canvasFps","canvasQuality","parsed","parseFloat","_isConsoleLogCaptureEnabled","_this$_remoteConfig5","enabled_server_side","consoleLogRecordingEnabled","enabled_client_side","enable_recording_console_log","_networkPayloadCapture","_this$_remoteConfig6","_this$_instance$confi6","_this$_instance$confi7","networkPayloadCapture_server_side","networkPayloadCapture","networkPayloadCapture_client_side","headersEnabled","bodyEnabled","clientNetworkTiming","serverNetworkTiming","capturePerformance","networkTimingEnabled","_gatherRRWebPlugins","_assignableWindow$__P2","_assignableWindow$__P3","recordConsolePlugin","rrwebPlugins","getRecordConsolePlugin","networkPlugin","_maskUrl","userSessionRecordingOptions","_result$name","_tryRRWebMethod","queuedRRWebEvent","_pageViewFallBack","capture_pageview","hrefWithoutHash","currentUrl","_lastHref","_processQueuedEvents","itemsToProcess","_tryTakeFullSnapshot","_fullSnapshotIntervalMillis","_this$_instance$confi8","_this$_instance$confi9","full_snapshot_interval_millis","_scheduleFullSnapshot","_fullSnapshotTimer","clearInterval","interval","setInterval","_pauseRecording","_resumeRecording","_activateTrigger","triggerType","_reportStarted","isStarted","persistedConfig","parsedConfig","_parsedConfig$cache_t","_this$_instance$persi4","cacheTimestamp","cache_timestamp","_checkOverride","overrideFunction","_this$_instance$persi5","startReason","_this$_instance$persi6","_this$_removeEventTri","endpoint","triggerMatchType","$sdk_debug_replay_remote_trigger_matching_config","_addEventTriggerListener","overrideSampling","overrideLinkedFlag","overrideTrigger","_startRecorder","onSessionId","_this$_forceIdleSessi","properties","$current_url","_this$_removePageView","_this$_removeEventTri2","_this$_onSessionIdLis","_this$_onSessionIdleR","_this$_samplingSessio","_this$_forceIdleSessi2","_this$_mutationThrott","_this$_stopRrweb","_clearFlushBufferTimer","_mutationThrottler","onRRwebEmit","rawEvent","_sessionEndingPayload","_sessionEndingPayload2","_this$_instance$confi0","_getRRWeb3","_this$_mutationThrott2","_this$_instance$persi7","register_once","_clearBufferBeforeMostRecentMeta","throttledEvent","_event","updatedPayload","truncateLargeConsoleLogs","sessionEndingPayload","getSessionEndingPayload","sessionStartingPayload","getSessionStartingPayload","_updateWindowAndSessionIds","targetSessionId","targetWindowId","isAllowedWhenIdle","lastActivity","eventToSend","compress_events","cv","compressEvent","$snapshot_bytes","$snapshot_data","$session_id","$window_id","wasMaxDepthReached","_captureSnapshotBuffered","_this$_instance$sessi","trace","_this$_instance$persi8","_flushBufferTimer","isBelowMinimumDuration","snapshotBuffer","_this$_flushedSizeTra2","_captureSnapshot","$lib","$lib_version","_this$_buffer","additionalBytes","ONE_KB","_url","requestRouter","endpointFor","_noTruncate","_batchKey","skip_client_rate_limiting","_this$_buffer2","_this$_buffer3","mostRecentSnapshot","sessionStartTimestamp","lastMetaIndex","acc","curr","tagPayload","$session_recording_start_reason","_isInteractiveEvent","_event$data","isUserInteraction","eventTimestamp","bufferLength","bufferSize","returningFromIdle","idleWasUnknown","sessionIdChanged","windowIdChanged","_this$_instance3","_this$_instance4","_this$_instance5","_this$_instance$persi0","currentSampleRate","storedIsSampled","makeDecision","shouldSample","_this$_instance$persi9","sdkDebugProperties","_this$_flushedSizeTra3","$recording_status","$sdk_debug_replay_internal_buffer_length","$sdk_debug_replay_internal_buffer_size","$sdk_debug_current_session_duration","$sdk_debug_session_start","$sdk_debug_replay_flushed_size","$sdk_debug_replay_full_snapshots","$snapshot_max_depth_exceeded","_this$_mutationThrott3","_this$_masking$maskAl","_this$_masking$maskTe","_this$_masking$blockS","sessionRecordingOptions","rrwebRecord","__mutationThrottlerRefillRate","__mutationThrottlerBucketSize","activePlugins","tryAddCustomEvent","initSessionRecording","ph","rrwebConsoleRecord"],"mappings":"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","x_google_ignoreList":[0,1,21]}