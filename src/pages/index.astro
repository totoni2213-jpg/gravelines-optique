---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import contactData from '../data/contact.json';
import homeData from '../data/home.json';

const brands = [
  { name: 'Ray-Ban', logo: '/logos/rayban-lunettes.png' },
  { name: 'Lafont', logo: '/logos/lafont-lunettes.png' },
  { name: 'Morel', logo: '/logos/morel-lunettes.png' },
  { name: 'IKKS', logo: '/logos/ikks-lunettes.png' },
  { name: 'Blackfin', logo: '/logos/blackfin-lunettes.png' },
  { name: 'Tommy Hilfiger', logo: '/logos/tommy-hilfiger-lunettes.png' },
  { name: 'David Beckham', logo: '/logos/david-beckham-lunettes.png' },
  { name: 'Vogue', logo: '/logos/vogue-lunettes.png' },
  { name: 'Serge Blanco', logo: '/logos/serge-blanco-lunettes.png' },
  { name: 'Lancel', logo: '/logos/lancel-lunettes.png' },
  { name: 'In√®s de la Fressange', logo: '/logos/inesdelafressange-lunettes.png' },
  { name: 'Serengeti', logo: '/logos/serge-blanco-lunettes.png' },
];

const services = [
  {
    icon: 'üëÅÔ∏è',
    title: 'Examen de vue',
    desc: 'Bilan visuel complet et gratuit par nos opticiens dipl√¥m√©s. R√©sultat imm√©diat.',
    link: '/services',
  },
  {
    icon: 'üëì',
    title: '1000+ Montures',
    desc: 'Une s√©lection rigoureuse des meilleures marques, pour tous les go√ªts et tous les budgets.',
    link: '/marques',
  },
  {
    icon: 'üíä',
    title: 'Lentilles de contact',
    desc: 'Large gamme de lentilles journali√®res, mensuelles et de couleur. Adaptation incluse.',
    link: '/services',
  },
  {
    icon: 'üîß',
    title: 'SAV Express 24-48h',
    desc: 'R√©parations rapides, ajustements gratuits, garantie 2 ans sur toute la monture.',
    link: '/sav',
  },
  {
    icon: 'üí≥',
    title: 'Tiers Payant',
    desc: 'Nous acceptons toutes les mutuelles en tiers payant. Pas d\'avance de frais.',
    link: '/services',
  },
  {
    icon: 'üè†',
    title: 'Service √† domicile',
    desc: 'Vous ne pouvez pas vous d√©placer ? Nous venons chez vous sur rendez-vous.',
    link: '/services',
  },
];

const stats = homeData.stats.map(s => ({ value: s.valeur, label: s.label }));
const timeline = homeData.timeline;
const avantages = contactData.avantages;
---

<Layout
  title="Gravelines Optique ‚Äî Opticien Ind√©pendant √† Montivilliers"
  description="Gravelines Optique √† Montivilliers depuis 2008. 1000+ montures, tiers payant, parking gratuit. Examen de vue gratuit. Rendez-vous en ligne disponible."
>
  <Header />

  <!-- HERO -->
  <section class="relative min-h-screen flex items-center justify-center bg-dark overflow-hidden pt-20">
    <!-- Background Photo -->
    <div class="absolute inset-0">
      <img
        src="/images/boutique/Devanture_gravelines_optique.webp"
        alt="Gravelines Optique Montivilliers"
        class="w-full h-full object-cover opacity-30"
      />
      <div class="absolute inset-0 bg-gradient-to-b from-dark/60 via-dark/70 to-dark"></div>
    </div>

    <!-- Gold gradient top -->
    <div class="absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-transparent via-gold to-transparent"></div>

    <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20 text-center">
      <!-- Badge -->
      <div class="inline-flex items-center gap-2 bg-gold/10 border border-gold/30 rounded-full px-4 py-1.5 text-gold text-xs tracking-widest uppercase mb-8">
        <span class="w-1.5 h-1.5 rounded-full bg-gold inline-block animate-pulse"></span>
        {homeData.hero_badge}
      </div>

      <h1 class="font-serif text-5xl sm:text-6xl lg:text-7xl text-white leading-tight mb-6">
        {homeData.hero_titre.split(' ').slice(0, -3).join(' ')}
        <span class="text-gold italic"> {homeData.hero_titre.split(' ').slice(-3).join(' ')}</span>
      </h1>

      <p class="text-white/60 text-lg sm:text-xl max-w-2xl mx-auto leading-relaxed mb-10">
        {homeData.hero_sous_titre}
      </p>

      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <a
          href="/contact"
          class="inline-flex items-center gap-2 bg-gold hover:bg-gold-dark text-dark font-semibold px-8 py-4 rounded-sm transition-colors duration-200 text-sm tracking-wide"
        >
          Prendre rendez-vous
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
          </svg>
        </a>
        <a
          href="/marques"
          class="inline-flex items-center gap-2 border border-white/20 hover:border-gold text-white hover:text-gold font-medium px-8 py-4 rounded-sm transition-colors duration-200 text-sm tracking-wide"
        >
          D√©couvrir les marques
        </a>
      </div>

      <!-- Quick info badges -->
      <div class="flex flex-wrap justify-center gap-4 mt-14 text-xs text-white/50">
        {avantages.map((av: string) => (
          <span class="flex items-center gap-1.5">
            <svg class="w-3.5 h-3.5 text-gold" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>
            {av}
          </span>
        ))}
      </div>
    </div>

    <!-- Scroll indicator -->
    <div class="absolute bottom-8 left-1/2 -translate-x-1/2 text-white/30 animate-bounce">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
      </svg>
    </div>
  </section>

  <!-- STATS -->
  <section class="bg-dark border-t border-white/10">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid grid-cols-2 lg:grid-cols-4 divide-x divide-white/10">
        {stats.map((stat) => (
          <div class="py-10 px-8 text-center">
            <div class="font-serif text-4xl text-gold mb-2">{stat.value}</div>
            <div class="text-white/50 text-sm tracking-wide">{stat.label}</div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- SERVICES -->
  <section class="py-24 bg-cream">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-16 reveal">
        <div class="text-gold text-xs tracking-widest uppercase font-medium mb-3">Ce que nous faisons</div>
        <h2 class="font-serif text-4xl sm:text-5xl text-dark mb-5">Nos Services</h2>
        <p class="text-dark/60 text-lg max-w-xl mx-auto">
          Une expertise compl√®te pour prendre soin de votre vue et de votre style.
        </p>
      </div>

      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
        {services.map((service, i) => (
          <a
            href={service.link}
            class="reveal group bg-white border border-cream-dark hover:border-gold rounded-sm p-8 transition-all duration-300 hover:shadow-lg hover:-translate-y-1"
            style={`transition-delay: ${i * 80}ms`}
          >
            <div class="text-3xl mb-4">{service.icon}</div>
            <h3 class="font-serif text-xl text-dark mb-3 group-hover:text-gold-dark transition-colors">{service.title}</h3>
            <p class="text-dark/60 text-sm leading-relaxed">{service.desc}</p>
            <div class="mt-5 text-gold text-xs font-medium flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity">
              En savoir plus
              <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
              </svg>
            </div>
          </a>
        ))}
      </div>
    </div>
  </section>

  <!-- MARQUES BANNER -->
  <section class="py-20 bg-white overflow-hidden">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12 reveal">
        <div class="text-gold text-xs tracking-widest uppercase font-medium mb-3">Nos partenaires</div>
        <h2 class="font-serif text-4xl sm:text-5xl text-dark mb-5">30+ Marques</h2>
        <p class="text-dark/60 text-lg max-w-xl mx-auto">
          Une s√©lection exigeante des meilleures maisons d'optique fran√ßaises et internationales.
        </p>
      </div>

      <!-- Brands Grid Preview -->
      <div class="grid grid-cols-3 sm:grid-cols-4 lg:grid-cols-6 gap-6 items-center reveal">
        {brands.map((brand) => (
          <div class="group flex items-center justify-center p-4 border border-cream-dark hover:border-gold rounded-sm transition-all duration-200 bg-cream/50 hover:bg-cream aspect-[3/2]">
            <img
              src={brand.logo}
              alt={brand.name}
              class="max-h-10 max-w-full object-contain grayscale group-hover:grayscale-0 opacity-60 group-hover:opacity-100 transition-all duration-300"
            />
          </div>
        ))}
      </div>

      <div class="text-center mt-10 reveal">
        <a
          href="/marques"
          class="inline-flex items-center gap-2 border border-dark hover:bg-dark hover:text-white text-dark font-medium px-8 py-3 rounded-sm transition-colors duration-200 text-sm"
        >
          Voir toutes nos marques
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
          </svg>
        </a>
      </div>
    </div>
  </section>

  <!-- NOTRE HISTOIRE -->
  <section class="py-24 bg-dark text-white relative overflow-hidden">
    <div class="absolute inset-0 opacity-5">
      <div class="absolute inset-0" style="background-image: radial-gradient(circle at 2px 2px, #C9A961 1px, transparent 0); background-size: 40px 40px;"></div>
    </div>
    <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid lg:grid-cols-2 gap-16 items-center">
        <div class="reveal">
          <div class="text-gold text-xs tracking-widest uppercase font-medium mb-4">Notre histoire</div>
          <h2 class="font-serif text-4xl sm:text-5xl text-white mb-6 leading-tight" set:html={homeData.histoire_titre.replace(/(\d+ ans)/i, '<em class="text-gold">$1</em>')} />
          <p class="text-white/60 text-lg leading-relaxed mb-6">
            {homeData.histoire_texte}
          </p>
          <div class="grid grid-cols-3 gap-6 mb-8">
            {[
              { title: 'Excellence', desc: 'Conseils personnalis√©s adapt√©s √† vos besoins' },
              { title: 'Qualit√©', desc: 'S√©lection rigoureuse des meilleures marques' },
              { title: 'Proximit√©', desc: 'Un accompagnement humain et bienveillant' },
            ].map((val) => (
              <div class="border-l-2 border-gold pl-4">
                <div class="font-serif text-gold text-sm mb-1">{val.title}</div>
                <div class="text-white/50 text-xs leading-relaxed">{val.desc}</div>
              </div>
            ))}
          </div>
          <a href="/boutique" class="inline-flex items-center gap-2 text-gold hover:text-gold-light text-sm font-medium transition-colors">
            D√©couvrir la boutique
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
            </svg>
          </a>
        </div>

        <!-- Timeline -->
        <div class="reveal">
          <div class="space-y-6">
            {timeline.map((item: { annee: string; titre: string; description: string }, i: number) => (
              <div class="flex gap-6 group">
                <div class="flex flex-col items-center">
                  <div class="w-12 h-12 rounded-full bg-gold/20 border border-gold/40 flex items-center justify-center text-gold font-serif text-sm font-medium flex-shrink-0 group-hover:bg-gold group-hover:text-dark transition-colors duration-300">
                    {item.annee.slice(2)}
                  </div>
                  {i < timeline.length - 1 && <div class="w-px h-full bg-gold/20 mt-2"></div>}
                </div>
                <div class="pb-6">
                  <div class="text-gold text-xs tracking-widest uppercase mb-1">{item.annee}</div>
                  <div class="font-serif text-white text-lg mb-2">{item.titre}</div>
                  <div class="text-white/50 text-sm leading-relaxed">{item.description}</div>
                </div>
              </div>
            ))}
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA CONTACT -->
  <section class="py-20 bg-cream">
    <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 text-center reveal">
      <div class="text-gold text-xs tracking-widest uppercase font-medium mb-4">Venez nous rendre visite</div>
      <h2 class="font-serif text-4xl sm:text-5xl text-dark mb-6">
        Votre prochaine paire<br /><em>vous attend</em>
      </h2>
      <p class="text-dark/60 text-lg mb-8">
        Boutique de 100m¬≤, √©quipe de 7 experts, parking gratuit.<br />
        Ouvert du mardi au samedi √† Montivilliers.
      </p>
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <a
          href="/contact"
          class="inline-flex items-center gap-2 bg-dark hover:bg-dark/80 text-white font-semibold px-8 py-4 rounded-sm transition-colors duration-200 text-sm tracking-wide"
        >
          Voir nos horaires & acc√®s
        </a>
        <a
          href="tel:0235209978"
          class="inline-flex items-center gap-2 border border-dark/20 hover:border-dark text-dark font-medium px-8 py-4 rounded-sm transition-colors duration-200 text-sm"
        >
          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
            <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"/>
          </svg>
          02 35 20 99 78
        </a>
      </div>
    </div>
  </section>

  <Footer />
</Layout>
