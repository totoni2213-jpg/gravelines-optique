---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import savData from '../data/sav.json';

const { reparations, garanties, etapes } = savData as {
  reparations: { title: string; delai: string; prix: string }[];
  garanties: { icon: string; title: string; desc: string }[];
  etapes: { step: string; title: string; desc: string }[];
};
---

<Layout
  title="SAV & Réparation Lunettes Montivilliers | 24-48h — Gravelines Optique"
  description="Service après-vente express : réparations 24-48h, ajustements gratuits, garantie 2 ans. Réparation lunettes Montivilliers. Urgences prioritaires."
>
  <Header />

  <!-- ══ HERO ══════════════════════════════════════════════════════════════ -->
  <section class="pt-[74px] bg-dark text-white relative overflow-hidden">
    <div class="absolute inset-0 bg-dots-dark pointer-events-none"></div>
    <div class="absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-gold/50 to-transparent"></div>
    <div class="absolute -right-20 top-10 w-64 h-64 rounded-full bg-gold/[0.04] blur-3xl pointer-events-none"></div>

    <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20 sm:py-28 text-center">
      <span class="section-label mb-5 block justify-center">Service après-vente</span>
      <h1 class="font-serif text-[clamp(2.8rem,7vw,5rem)] text-white mb-6 leading-[1.05]">
        SAV & <em class="text-gold italic">Réparations</em>
      </h1>
      <p class="text-white/50 text-lg max-w-xl mx-auto mb-8 leading-relaxed">
        Réparations express en 24-48h, ajustements gratuits, garantie 2 ans.<br />
        Nous réparons toutes les marques, même achetées ailleurs.
      </p>
      <!-- Urgency badge -->
      <div class="inline-flex items-center gap-2.5 bg-gold/10 border border-gold/30 rounded-full px-5 py-2.5">
        <span class="w-2 h-2 rounded-full bg-gold animate-pulse-slow flex-shrink-0"></span>
        <span class="text-gold text-[12px] font-semibold tracking-wide">Urgences traitées en priorité le jour même</span>
      </div>
    </div>
  </section>

  <!-- ══ GARANTIES ═════════════════════════════════════════════════════════ -->
  <section class="py-16 bg-white relative">
    <div class="absolute top-0 left-0 right-0 h-px bg-cream-dark"></div>
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid grid-cols-1 sm:grid-cols-3 gap-5">
        {garanties.map((item, i) => (
          <div
            class="reveal group p-8 border border-cream-dark/80 rounded-sm bg-cream/40 hover:bg-white hover:border-gold/30 hover:shadow-card-hover transition-all duration-400 text-center"
            style={`transition-delay: ${i * 80}ms`}
          >
            <div class="text-[2.5rem] mb-5 group-hover:scale-110 transition-transform duration-300 inline-block">{item.icon}</div>
            <h3 class="font-serif text-[1.2rem] text-dark mb-3 group-hover:text-dark transition-colors">{item.title}</h3>
            <p class="text-dark/50 text-[13.5px] leading-relaxed">{item.desc}</p>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- ══ TARIFS ═════════════════════════════════════════════════════════════ -->
  <section class="py-20 bg-cream relative">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">

      <div class="text-center mb-12 reveal">
        <span class="section-label mb-4 block justify-center" style="--gold: #B8924A; color: var(--gold);">Nos tarifs</span>
        <h2 class="font-serif text-[2.2rem] sm:text-[2.8rem] text-dark mb-4">Tarifs indicatifs</h2>
        <p class="text-dark/50 text-[15px]">Devis gratuit et sans engagement avant toute intervention.</p>
      </div>

      <div class="reveal bg-white border border-cream-dark/70 rounded-sm overflow-hidden shadow-card">
        <!-- Table header -->
        <div class="grid grid-cols-3 bg-dark text-white px-6 py-4 text-[11.5px] font-semibold tracking-[0.12em] uppercase">
          <div>Type de réparation</div>
          <div class="text-center">Délai</div>
          <div class="text-right text-gold">Tarif</div>
        </div>

        <!-- Table rows -->
        {reparations.map((rep, i) => (
          <div class={`grid grid-cols-3 items-center px-6 py-4 border-b border-cream-dark/60 last:border-0 transition-colors duration-200 hover:bg-gold/[0.03] group
            ${i % 2 === 1 ? 'bg-cream/40' : 'bg-white'}`}>
            <div class="text-dark font-medium text-[14px] group-hover:text-dark transition-colors pr-4">{rep.title}</div>
            <div class="text-center">
              <span class="inline-block text-[11px] font-semibold text-gold-dark bg-gold/10 border border-gold/15 px-3 py-1 rounded-full">
                {rep.delai}
              </span>
            </div>
            <div class="text-right text-dark font-semibold text-[14px]">{rep.prix}</div>
          </div>
        ))}

        <!-- Footer note -->
        <div class="px-6 py-4 bg-cream/60 border-t border-cream-dark/60">
          <p class="text-[11.5px] text-dark/40 leading-relaxed">
            * Gratuit pour les lunettes achetées chez Gravelines Optique. Tarifs indicatifs, devis gratuit avant intervention.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- ══ PROCESS ════════════════════════════════════════════════════════════ -->
  <section class="py-20 bg-dark text-white relative overflow-hidden">
    <div class="absolute inset-0 bg-dots-dark pointer-events-none"></div>
    <div class="absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-gold/40 to-transparent"></div>

    <div class="relative max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-14 reveal">
        <span class="section-label mb-4 block justify-center">Comment ça marche</span>
        <h2 class="font-serif text-[2rem] sm:text-[2.6rem] text-white leading-tight">
          Déposez vos lunettes,<br /><em class="text-gold italic">on s'occupe du reste</em>
        </h2>
      </div>

      <div class="relative reveal">
        <!-- Connecting line (desktop) -->
        <div class="hidden sm:block absolute top-8 left-[calc(12.5%+1.25rem)] right-[calc(12.5%+1.25rem)] h-px bg-gradient-to-r from-gold/20 via-gold/40 to-gold/20"></div>

        <div class="grid sm:grid-cols-4 gap-6 sm:gap-4">
          {etapes.map((item, i) => (
            <div class="relative text-center group">
              <!-- Step circle -->
              <div class="w-16 h-16 rounded-full border-2 border-gold/30 group-hover:border-gold bg-dark flex items-center justify-center text-gold font-serif text-[1.3rem] mx-auto mb-5 transition-all duration-300 group-hover:bg-gold/10 group-hover:shadow-gold-glow relative z-10">
                {item.step}
              </div>
              <h3 class="font-serif text-white text-[1rem] mb-2 group-hover:text-gold/90 transition-colors">{item.title}</h3>
              <p class="text-white/40 text-[13px] leading-relaxed">{item.desc}</p>
            </div>
          ))}
        </div>
      </div>
    </div>
  </section>

  <!-- ══ CTA ════════════════════════════════════════════════════════════════ -->
  <section class="py-16 bg-cream relative">
    <div class="absolute top-0 left-0 right-0 h-px bg-cream-dark"></div>
    <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 text-center reveal">
      <h2 class="font-serif text-[2rem] text-dark mb-6">Lunettes cassées ? On les répare.</h2>
      <div class="flex flex-col xs:flex-row gap-4 justify-center">
        <a href="tel:0235209978" class="btn-primary" style="background: var(--dark); color: white;">
          <svg class="w-4 h-4 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
            <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"/>
          </svg>
          Appelez-nous
        </a>
        <a href="/contact" class="btn-outline-dark">
          Voir les horaires
        </a>
      </div>
    </div>
  </section>

  <Footer />
</Layout>
